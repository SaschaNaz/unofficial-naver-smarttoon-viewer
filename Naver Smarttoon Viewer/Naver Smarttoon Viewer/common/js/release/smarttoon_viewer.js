if(typeof window!="undefined"&&typeof window.nhn=="undefined"){
    window.nhn={}
}
if(typeof window!="undefined"){
    if(typeof window.jindo=="undefined"){
        window.jindo={}
    }
    
}
else{
    if(!jindo){
        jindo={}
    }
    
}
jindo.$Jindo=function(){
    var cl=arguments.callee;
    var cc=cl._cached;
    if(cc){
        return cc
    }
    if(!(this instanceof cl)){
        return new cl()
    }
    if(!cc){
        cl._cached=this
    }
    this.version="1.5.1"
};
jindo.$=function(sID){
    var ret=[],arg=arguments,nArgLeng=arg.length,lastArgument=arg[nArgLeng-1],doc=document,el=null;
    var reg=/^<([a-z]+|h[1-5])>$/i;
    var reg2=/^<([a-z]+|h[1-5])(\s+[^>]+)?>/i;
    if(nArgLeng>1&&typeof lastArgument!="string"&&lastArgument.body){
        arg=Array.prototype.slice.apply(arg,[0,nArgLeng-1]);
        doc=lastArgument
    }
    for(var i=0;
    i<nArgLeng;
    i++){
        el=arg[i];
        if(typeof el=="string"){
            el=el.replace(/^\s+|\s+$/g,"");
            if(el.indexOf("<")>-1){
                if(reg.test(el)){
                    el=doc.createElement(RegExp.$1)
                }
                else{
                    if(reg2.test(el)){
                        var p={
                            thead:"table",tbody:"table",tr:"tbody",td:"tr",dt:"dl",dd:"dl",li:"ul",legend:"fieldset",option:"select"
                        };
                        var tag=RegExp.$1.toLowerCase();
                        var ele=jindo._createEle(p[tag],el,doc);
                        for(var i=0,leng=ele.length;
                        i<leng;
                        i++){
                            ret.push(ele[i])
                        }
                        el=null
                    }
                    
                }
                
            }
            else{
                el=doc.getElementById(el)
            }
            
        }
        if(el){
            ret[ret.length]=el
        }
        
    }
    return ret.length>1?ret:(ret[0]||null)
};
jindo._createEle=function(sParentTag,sHTML,oDoc,bWantParent){
    var sId="R"+new Date().getTime()+parseInt(Math.random()*100000);
    var oDummy=oDoc.createElement("div");
    switch(sParentTag){
        case"select":case"table":case"dl":case"ul":case"fieldset":oDummy.innerHTML="<"+sParentTag+' class="'+sId+'">'+sHTML+"</"+sParentTag+">";
        break;
        case"thead":case"tbody":oDummy.innerHTML="<table><"+sParentTag+' class="'+sId+'">'+sHTML+"</"+sParentTag+"></table>";
        break;
        case"tr":oDummy.innerHTML='<table><tbody><tr class="'+sId+'">'+sHTML+"</tr></tbody></table>";
        break;
        default:oDummy.innerHTML='<div class="'+sId+'">'+sHTML+"</div>";
        break
    }
    var oFound;
    for(oFound=oDummy.firstChild;
    oFound;
    oFound=oFound.firstChild){
        if(oFound.className==sId){
            break
        }
        
    }
    return bWantParent?oFound:oFound.childNodes
};
jindo.$Class=function(oDef){
    function typeClass(){
        var t=this;
        var a=[];
        var superFunc=function(m,superClass,func){
            if(m!="constructor"&&func.toString().indexOf("$super")>-1){
                var funcArg=func.toString().replace(/function\s*\(([^\)]*)[\w\W]*/g,"$1").split(",");
                var funcStr=func.toString().replace(/function[^{]*{/,"").replace(/(\w|\.?)(this\.\$super|this)/g,function(m,m2,m3){
                    if(!m2){
                        return m3+".$super"
                    }
                    return m
                });
                funcStr=funcStr.substr(0,funcStr.length-1);
                func=superClass[m]=eval("false||function("+funcArg.join(",")+"){"+funcStr+"}")
            }
            return function(){
                var f=this.$this[m];
                var t=this.$this;
                var r=(t[m]=func).apply(t,arguments);
                t[m]=f;
                return r
            }
            
        };
        while(typeof t._$superClass!="undefined"){
            t.$super=new Object;
            t.$super.$this=this;
            for(var x in t._$superClass.prototype){
                if(t._$superClass.prototype.hasOwnProperty(x)){
                    if(typeof this[x]=="undefined"&&x!="$init"){
                        this[x]=t._$superClass.prototype[x]
                    }
                    if(x!="constructor"&&x!="_$superClass"&&typeof t._$superClass.prototype[x]=="function"){
                        t.$super[x]=superFunc(x,t._$superClass,t._$superClass.prototype[x])
                    }
                    else{
                        t.$super[x]=t._$superClass.prototype[x]
                    }
                    
                }
                
            }
            if(typeof t.$super.$init=="function"){
                a[a.length]=t
            }
            t=t.$super
        }
        for(var i=a.length-1;
        i>-1;
        i--){
            a[i].$super.$init.apply(a[i].$super,arguments)
        }
        if(typeof this.$init=="function"){
            this.$init.apply(this,arguments)
        }
        
    }
    if(typeof oDef.$static!="undefined"){
        var i=0,x;
        for(x in oDef){
            if(oDef.hasOwnProperty(x)){
                x=="$static"||i++
            }
            
        }
        for(x in oDef.$static){
            if(oDef.$static.hasOwnProperty(x)){
                typeClass[x]=oDef.$static[x]
            }
            
        }
        if(!i){
            return oDef.$static
        }
        delete oDef.$static
    }
    typeClass.prototype=oDef;
    typeClass.prototype.constructor=typeClass;
    typeClass.extend=jindo.$Class.extend;
    return typeClass
};
jindo.$Class.extend=function(superClass){
    if(typeof superClass=="undefined"||superClass===null||!superClass.extend){
        throw new Error("extend시 슈퍼 클래스는 Class여야 합니다.")
    }
    this.prototype._$superClass=superClass;
    for(var x in superClass){
        if(superClass.hasOwnProperty(x)){
            if(x=="prototype"){
                continue
            }
            this[x]=superClass[x]
        }
        
    }
    return this
};
jindo.$$=jindo.cssquery=(function(){
    var sVersion="3.0";
    var debugOption={
        repeat:1
    };
    var UID=1;
    var cost=0;
    var validUID={};
    var bSupportByClassName=document.getElementsByClassName?true:false;
    var safeHTML=false;
    var getUID4HTML=function(oEl){
        var nUID=safeHTML?(oEl._cssquery_UID&&oEl._cssquery_UID[0]):oEl._cssquery_UID;
        if(nUID&&validUID[nUID]==oEl){
            return nUID
        }
        nUID=UID++;
        oEl._cssquery_UID=safeHTML?[nUID]:nUID;
        validUID[nUID]=oEl;
        return nUID
    };
    var getUID4XML=function(oEl){
        var oAttr=oEl.getAttribute("_cssquery_UID");
        var nUID=safeHTML?(oAttr&&oAttr[0]):oAttr;
        if(!nUID){
            nUID=UID++;
            oEl.setAttribute("_cssquery_UID",safeHTML?[nUID]:nUID)
        }
        return nUID
    };
    var getUID=getUID4HTML;
    var uniqid=function(sPrefix){
        return(sPrefix||"")+new Date().getTime()+parseInt(Math.random()*100000000)
    };
    function getElementsByClass(searchClass,node,tag){
        var classElements=new Array();
        if(node==null){
            node=document
        }
        if(tag==null){
            tag="*"
        }
        var els=node.getElementsByTagName(tag);
        var elsLen=els.length;
        var pattern=new RegExp("(^|\\s)"+searchClass+"(\\s|$)");
        for(i=0,j=0;
        i<elsLen;
        i++){
            if(pattern.test(els[i].className)){
                classElements[j]=els[i];
                j++
            }
            
        }
        return classElements
    }
    var getChilds_dontShrink=function(oEl,sTagName,sClassName){
        if(bSupportByClassName&&sClassName){
            if(oEl.getElementsByClassName){
                return oEl.getElementsByClassName(sClassName)
            }
            if(oEl.querySelectorAll){
                return oEl.querySelectorAll(sClassName)
            }
            return getElementsByClass(sClassName,oEl,sTagName)
        }
        else{
            if(sTagName=="*"){
                return oEl.all||oEl.getElementsByTagName(sTagName)
            }
            
        }
        return oEl.getElementsByTagName(sTagName)
    };
    var clearKeys=function(){
        backupKeys._keys={}
    };
    var oDocument_dontShrink=document;
    var bXMLDocument=false;
    var backupKeys=function(sQuery){
        var oKeys=backupKeys._keys;
        sQuery=sQuery.replace(/'(\\'|[^'])*'/g,function(sAll){
            var uid=uniqid("QUOT");
            oKeys[uid]=sAll;
            return uid
        });
        sQuery=sQuery.replace(/"(\\"|[^"])*"/g,function(sAll){
            var uid=uniqid("QUOT");
            oKeys[uid]=sAll;
            return uid
        });
        sQuery=sQuery.replace(/\[(.*?)\]/g,function(sAll,sBody){
            if(sBody.indexOf("ATTR")==0){
                return sAll
            }
            var uid="["+uniqid("ATTR")+"]";
            oKeys[uid]=sAll;
            return uid
        });
        var bChanged;
        do{
            bChanged=false;
            sQuery=sQuery.replace(/\(((\\\)|[^)|^(])*)\)/g,function(sAll,sBody){
                if(sBody.indexOf("BRCE")==0){
                    return sAll
                }
                var uid="_"+uniqid("BRCE");
                oKeys[uid]=sAll;
                bChanged=true;
                return uid
            })
        }
        while(bChanged);
        return sQuery
    };
    var restoreKeys=function(sQuery,bOnlyAttrBrace){
        var oKeys=backupKeys._keys;
        var bChanged;
        var rRegex=bOnlyAttrBrace?/(\[ATTR[0-9]+\])/g:/(QUOT[0-9]+|\[ATTR[0-9]+\])/g;
        do{
            bChanged=false;
            sQuery=sQuery.replace(rRegex,function(sKey){
                if(oKeys[sKey]){
                    bChanged=true;
                    return oKeys[sKey]
                }
                return sKey
            })
        }
        while(bChanged);
        sQuery=sQuery.replace(/_BRCE[0-9]+/g,function(sKey){
            return oKeys[sKey]?oKeys[sKey]:sKey
        });
        return sQuery
    };
    var restoreString=function(sKey){
        var oKeys=backupKeys._keys;
        var sOrg=oKeys[sKey];
        if(!sOrg){
            return sKey
        }
        return eval(sOrg)
    };
    var wrapQuot=function(sStr){
        return'"'+sStr.replace(/"/g,'\\"')+'"'
    };
    var getStyleKey=function(sKey){
        if(/^@/.test(sKey)){
            return sKey.substr(1)
        }
        return null
    };
    var getCSS=function(oEl,sKey){
        if(oEl.currentStyle){
            if(sKey=="float"){
                sKey="styleFloat"
            }
            return oEl.currentStyle[sKey]||oEl.style[sKey]
        }
        else{
            if(window.getComputedStyle){
                return oDocument_dontShrink.defaultView.getComputedStyle(oEl,null).getPropertyValue(sKey.replace(/([A-Z])/g,"-$1").toLowerCase())||oEl.style[sKey]
            }
            
        }
        if(sKey=="float"&&/MSIE/.test(window.navigator.userAgent)){
            sKey="styleFloat"
        }
        return oEl.style[sKey]
    };
    var oCamels={
        accesskey:"accessKey",cellspacing:"cellSpacing",cellpadding:"cellPadding","class":"className",colspan:"colSpan","for":"htmlFor",maxlength:"maxLength",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",valign:"vAlign"
    };
    var getDefineCode=function(sKey){
        var sVal;
        var sStyleKey;
        if(bXMLDocument){
            sVal='oEl.getAttribute("'+sKey+'",2)'
        }
        else{
            if(sStyleKey=getStyleKey(sKey)){
                sKey="$$"+sStyleKey;
                sVal='getCSS(oEl, "'+sStyleKey+'")'
            }
            else{
                switch(sKey){
                    case"checked":sVal='oEl.checked + ""';
                    break;
                    case"disabled":sVal='oEl.disabled + ""';
                    break;
                    case"enabled":sVal='!oEl.disabled + ""';
                    break;
                    case"readonly":sVal='oEl.readOnly + ""';
                    break;
                    case"selected":sVal='oEl.selected + ""';
                    break;
                    default:if(oCamels[sKey]){
                        sVal="oEl."+oCamels[sKey]
                    }
                    else{
                        sVal='oEl.getAttribute("'+sKey+'",2)'
                    }
                    
                }
                
            }
            
        }
        return"_"+sKey+" = "+sVal
    };
    var getReturnCode=function(oExpr){
        var sStyleKey=getStyleKey(oExpr.key);
        var sVar="_"+(sStyleKey?"$$"+sStyleKey:oExpr.key);
        var sVal=oExpr.val?wrapQuot(oExpr.val):"";
        switch(oExpr.op){
            case"~=":return"("+sVar+' && (" " + '+sVar+' + " ").indexOf(" " + '+sVal+' + " ") > -1)';
            case"^=":return"("+sVar+" && "+sVar+".indexOf("+sVal+") == 0)";
            case"$=":return"("+sVar+" && "+sVar+".substr("+sVar+".length - "+oExpr.val.length+") == "+sVal+")";
            case"*=":return"("+sVar+" && "+sVar+".indexOf("+sVal+") > -1)";
            case"!=":return"("+sVar+" != "+sVal+")";
            case"=":return"("+sVar+" == "+sVal+")"
        }
        return"("+sVar+")"
    };
    var getNodeIndex=function(oEl){
        var nUID=getUID(oEl);
        var nIndex=oNodeIndexes[nUID]||0;
        if(nIndex==0){
            for(var oSib=(oEl.parentNode||oEl._IE5_parentNode).firstChild;
            oSib;
            oSib=oSib.nextSibling){
                if(oSib.nodeType!=1){
                    continue
                }
                nIndex++;
                setNodeIndex(oSib,nIndex)
            }
            nIndex=oNodeIndexes[nUID]
        }
        return nIndex
    };
    var oNodeIndexes={};
    var setNodeIndex=function(oEl,nIndex){
        var nUID=getUID(oEl);
        oNodeIndexes[nUID]=nIndex
    };
    var unsetNodeIndexes=function(){
        setTimeout(function(){
            oNodeIndexes={}
        }
        ,0)
    };
    var oPseudoes_dontShrink={
        contains:function(oEl,sOption){
            return(oEl.innerText||oEl.textContent||"").indexOf(sOption)>-1
        }
        ,"last-child":function(oEl,sOption){
            for(oEl=oEl.nextSibling;
            oEl;
            oEl=oEl.nextSibling){
                if(oEl.nodeType==1){
                    return false
                }
                
            }
            return true
        }
        ,"first-child":function(oEl,sOption){
            for(oEl=oEl.previousSibling;
            oEl;
            oEl=oEl.previousSibling){
                if(oEl.nodeType==1){
                    return false
                }
                
            }
            return true
        }
        ,"only-child":function(oEl,sOption){
            var nChild=0;
            for(var oChild=(oEl.parentNode||oEl._IE5_parentNode).firstChild;
            oChild;
            oChild=oChild.nextSibling){
                if(oChild.nodeType==1){
                    nChild++
                }
                if(nChild>1){
                    return false
                }
                
            }
            return nChild?true:false
        }
        ,empty:function(oEl,_){
            return oEl.firstChild?false:true
        }
        ,"nth-child":function(oEl,nMul,nAdd){
            var nIndex=getNodeIndex(oEl);
            return nIndex%nMul==nAdd
        }
        ,"nth-last-child":function(oEl,nMul,nAdd){
            var oLast=(oEl.parentNode||oEl._IE5_parentNode).lastChild;
            for(;
            oLast;
            oLast=oLast.previousSibling){
                if(oLast.nodeType==1){
                    break
                }
                
            }
            var nTotal=getNodeIndex(oLast);
            var nIndex=getNodeIndex(oEl);
            var nLastIndex=nTotal-nIndex+1;
            return nLastIndex%nMul==nAdd
        }
        ,checked:function(oEl){
            return !!oEl.checked
        }
        ,selected:function(oEl){
            return !!oEl.selected
        }
        ,enabled:function(oEl){
            return !oEl.disabled
        }
        ,disabled:function(oEl){
            return !!oEl.disabled
        }
        
    };
    var getExpression=function(sBody){
        var oRet={
            defines:"",returns:"true"
        };
        var sBody=restoreKeys(sBody,true);
        var aExprs=[];
        var aDefineCode=[],aReturnCode=[];
        var sId,sTagName;
        var sBody=sBody.replace(/:([\w-]+)(\(([^)]*)\))?/g,function(_1,sType,_2,sOption){
            switch(sType){
                case"not":var oInner=getExpression(sOption);
                var sFuncDefines=oInner.defines;
                var sFuncReturns=oInner.returnsID+oInner.returnsTAG+oInner.returns;
                aReturnCode.push("!(function() { "+sFuncDefines+" return "+sFuncReturns+" })()");
                break;
                case"nth-child":case"nth-last-child":sOption=restoreString(sOption);
                if(sOption=="even"){
                    sOption="2n"
                }
                else{
                    if(sOption=="odd"){
                        sOption="2n+1"
                    }
                    
                }
                var nMul,nAdd;
                var matchstr=sOption.match(/([0-9]*)n([+-][0-9]+)*/);
                if(matchstr){
                    nMul=matchstr[1]||1;
                    nAdd=matchstr[2]||0
                }
                else{
                    nMul=Infinity;
                    nAdd=parseInt(sOption)
                }
                aReturnCode.push("oPseudoes_dontShrink["+wrapQuot(sType)+"](oEl, "+nMul+", "+nAdd+")");
                break;
                case"first-of-type":case"last-of-type":sType=(sType=="first-of-type"?"nth-of-type":"nth-last-of-type");
                sOption=1;
                case"nth-of-type":case"nth-last-of-type":sOption=restoreString(sOption);
                if(sOption=="even"){
                    sOption="2n"
                }
                else{
                    if(sOption=="odd"){
                        sOption="2n+1"
                    }
                    
                }
                var nMul,nAdd;
                if(/([0-9]*)n([+-][0-9]+)*/.test(sOption)){
                    nMul=parseInt(RegExp.$1)||1;
                    nAdd=parseInt(RegExp.$2)||0
                }
                else{
                    nMul=Infinity;
                    nAdd=parseInt(sOption)
                }
                oRet.nth=[nMul,nAdd,sType];
                break;
                default:sOption=sOption?restoreString(sOption):"";
                aReturnCode.push("oPseudoes_dontShrink["+wrapQuot(sType)+"](oEl, "+wrapQuot(sOption)+")");
                break
            }
            return""
        });
        var sBody=sBody.replace(/\[(@?[\w-]+)(([!^~$*]?=)([^\]]*))?\]/g,function(_1,sKey,_2,sOp,sVal){
            sKey=restoreString(sKey);
            sVal=restoreString(sVal);
            if(sKey=="checked"||sKey=="disabled"||sKey=="enabled"||sKey=="readonly"||sKey=="selected"){
                if(!sVal){
                    sOp="=";
                    sVal="true"
                }
                
            }
            aExprs.push({
                key:sKey,op:sOp,val:sVal
            });
            return""
        });
        var sClassName=null;
        var sBody=sBody.replace(/\.([\w-]+)/g,function(_,sClass){
            aExprs.push({
                key:"class",op:"~=",val:sClass
            });
            if(!sClassName){
                sClassName=sClass
            }
            return""
        });
        var sBody=sBody.replace(/#([\w-]+)/g,function(_,sIdValue){
            if(bXMLDocument){
                aExprs.push({
                    key:"id",op:"=",val:sIdValue
                })
            }
            else{
                sId=sIdValue
            }
            return""
        });
        sTagName=sBody=="*"?"":sBody;
        var oVars={};
        for(var i=0,oExpr;
        oExpr=aExprs[i];
        i++){
            var sKey=oExpr.key;
            if(!oVars[sKey]){
                aDefineCode.push(getDefineCode(sKey))
            }
            aReturnCode.unshift(getReturnCode(oExpr));
            oVars[sKey]=true
        }
        if(aDefineCode.length){
            oRet.defines="var "+aDefineCode.join(",")+";"
        }
        if(aReturnCode.length){
            oRet.returns=aReturnCode.join("&&")
        }
        oRet.quotID=sId?wrapQuot(sId):"";
        oRet.quotTAG=sTagName?wrapQuot(bXMLDocument?sTagName:sTagName.toUpperCase()):"";
        if(bSupportByClassName){
            oRet.quotCLASS=sClassName?wrapQuot(sClassName):""
        }
        oRet.returnsID=sId?"oEl.id == "+oRet.quotID+" && ":"";
        oRet.returnsTAG=sTagName&&sTagName!="*"?"oEl.tagName == "+oRet.quotTAG+" && ":"";
        return oRet
    };
    var splitToParts=function(sQuery){
        var aParts=[];
        var sRel=" ";
        var sBody=sQuery.replace(/(.*?)\s*(!?[+>~ ]|!)\s*/g,function(_,sBody,sRelative){
            if(sBody){
                aParts.push({
                    rel:sRel,body:sBody
                })
            }
            sRel=sRelative.replace(/\s+$/g,"")||" ";
            return""
        });
        if(sBody){
            aParts.push({
                rel:sRel,body:sBody
            })
        }
        return aParts
    };
    var isNth_dontShrink=function(oEl,sTagName,nMul,nAdd,sDirection){
        var nIndex=0;
        for(var oSib=oEl;
        oSib;
        oSib=oSib[sDirection]){
            if(oSib.nodeType==1&&(!sTagName||sTagName==oSib.tagName)){
                nIndex++
            }
            
        }
        return nIndex%nMul==nAdd
    };
    var compileParts=function(aParts){
        var aPartExprs=[];
        for(var i=0,oPart;
        oPart=aParts[i];
        i++){
            aPartExprs.push(getExpression(oPart.body))
        }
        var sFunc="";
        var sPushCode="aRet.push(oEl); if (oOptions.single) { bStop = true; }";
        for(var i=aParts.length-1,oPart;
        oPart=aParts[i];
        i--){
            var oExpr=aPartExprs[i];
            var sPush=(debugOption.callback?"cost++;":"")+oExpr.defines;
            var sReturn="if (bStop) {"+(i==0?"return aRet;":"return;")+"}";
            if(oExpr.returns=="true"){
                sPush+=(sFunc?sFunc+"(oEl);":sPushCode)+sReturn
            }
            else{
                sPush+="if ("+oExpr.returns+") {"+(sFunc?sFunc+"(oEl);":sPushCode)+sReturn+"}"
            }
            var sCheckTag="oEl.nodeType != 1";
            if(oExpr.quotTAG){
                sCheckTag="oEl.tagName != "+oExpr.quotTAG
            }
            var sTmpFunc="(function(oBase"+(i==0?", oOptions) { var bStop = false; var aRet = [];":") {");
            if(oExpr.nth){
                sPush="if (isNth_dontShrink(oEl, "+(oExpr.quotTAG?oExpr.quotTAG:"false")+","+oExpr.nth[0]+","+oExpr.nth[1]+',"'+(oExpr.nth[2]=="nth-of-type"?"previousSibling":"nextSibling")+'")) {'+sPush+"}"
            }
            switch(oPart.rel){
                case" ":if(oExpr.quotID){
                    sTmpFunc+="var oEl = oDocument_dontShrink.getElementById("+oExpr.quotID+");var oCandi = oEl;for (; oCandi; oCandi = (oCandi.parentNode || oCandi._IE5_parentNode)) {if (oCandi == oBase) break;}if (!oCandi || "+sCheckTag+") return aRet;"+sPush
                }
                else{
                    sTmpFunc+="var aCandi = getChilds_dontShrink(oBase, "+(oExpr.quotTAG||'"*"')+", "+(oExpr.quotCLASS||"null")+");for (var i = 0, oEl; oEl = aCandi[i]; i++) {"+(oExpr.quotCLASS?"if ("+sCheckTag+") continue;":"")+sPush+"}"
                }
                break;
                case">":if(oExpr.quotID){
                    sTmpFunc+="var oEl = oDocument_dontShrink.getElementById("+oExpr.quotID+");if ((oEl.parentNode || oEl._IE5_parentNode) != oBase || "+sCheckTag+") return aRet;"+sPush
                }
                else{
                    sTmpFunc+="for (var oEl = oBase.firstChild; oEl; oEl = oEl.nextSibling) {if ("+sCheckTag+") { continue; }"+sPush+"}"
                }
                break;
                case"+":if(oExpr.quotID){
                    sTmpFunc+="var oEl = oDocument_dontShrink.getElementById("+oExpr.quotID+");var oPrev;for (oPrev = oEl.previousSibling; oPrev; oPrev = oPrev.previousSibling) { if (oPrev.nodeType == 1) break; }if (!oPrev || oPrev != oBase || "+sCheckTag+") return aRet;"+sPush
                }
                else{
                    sTmpFunc+="for (var oEl = oBase.nextSibling; oEl; oEl = oEl.nextSibling) { if (oEl.nodeType == 1) break; }if (!oEl || "+sCheckTag+") { return aRet; }"+sPush
                }
                break;
                case"~":if(oExpr.quotID){
                    sTmpFunc+="var oEl = oDocument_dontShrink.getElementById("+oExpr.quotID+");var oCandi = oEl;for (; oCandi; oCandi = oCandi.previousSibling) { if (oCandi == oBase) break; }if (!oCandi || "+sCheckTag+") return aRet;"+sPush
                }
                else{
                    sTmpFunc+="for (var oEl = oBase.nextSibling; oEl; oEl = oEl.nextSibling) {if ("+sCheckTag+") { continue; }if (!markElement_dontShrink(oEl, "+i+")) { break; }"+sPush+"}"
                }
                break;
                case"!":if(oExpr.quotID){
                    sTmpFunc+="var oEl = oDocument_dontShrink.getElementById("+oExpr.quotID+");for (; oBase; oBase = (oBase.parentNode || oBase._IE5_parentNode)) { if (oBase == oEl) break; }if (!oBase || "+sCheckTag+") return aRet;"+sPush
                }
                else{
                    sTmpFunc+="for (var oEl = (oBase.parentNode || oBase._IE5_parentNode); oEl; oEl = (oEl.parentNode || oEl._IE5_parentNode)) {if ("+sCheckTag+") { continue; }"+sPush+"}"
                }
                break;
                case"!>":if(oExpr.quotID){
                    sTmpFunc+="var oEl = oDocument_dontShrink.getElementById("+oExpr.quotID+");var oRel = (oBase.parentNode || oBase._IE5_parentNode);if (!oRel || oEl != oRel || ("+sCheckTag+")) return aRet;"+sPush
                }
                else{
                    sTmpFunc+="var oEl = (oBase.parentNode || oBase._IE5_parentNode);if (!oEl || "+sCheckTag+") { return aRet; }"+sPush
                }
                break;
                case"!+":if(oExpr.quotID){
                    sTmpFunc+="var oEl = oDocument_dontShrink.getElementById("+oExpr.quotID+");var oRel;for (oRel = oBase.previousSibling; oRel; oRel = oRel.previousSibling) { if (oRel.nodeType == 1) break; }if (!oRel || oEl != oRel || ("+sCheckTag+")) return aRet;"+sPush
                }
                else{
                    sTmpFunc+="for (oEl = oBase.previousSibling; oEl; oEl = oEl.previousSibling) { if (oEl.nodeType == 1) break; }if (!oEl || "+sCheckTag+") { return aRet; }"+sPush
                }
                break;
                case"!~":if(oExpr.quotID){
                    sTmpFunc+="var oEl = oDocument_dontShrink.getElementById("+oExpr.quotID+");var oRel;for (oRel = oBase.previousSibling; oRel; oRel = oRel.previousSibling) { if (oRel.nodeType != 1) { continue; }if (oRel == oEl) { break; }}if (!oRel || ("+sCheckTag+")) return aRet;"+sPush
                }
                else{
                    sTmpFunc+="for (oEl = oBase.previousSibling; oEl; oEl = oEl.previousSibling) {if ("+sCheckTag+") { continue; }if (!markElement_dontShrink(oEl, "+i+")) { break; }"+sPush+"}"
                }
                break
            }
            sTmpFunc+=(i==0?"return aRet;":"")+"})";
            sFunc=sTmpFunc
        }
        eval("var fpCompiled = "+sFunc+";");
        return fpCompiled
    };
    var parseQuery=function(sQuery){
        var sCacheKey=sQuery;
        var fpSelf=arguments.callee;
        var fpFunction=fpSelf._cache[sCacheKey];
        if(!fpFunction){
            sQuery=backupKeys(sQuery);
            var aParts=splitToParts(sQuery);
            fpFunction=fpSelf._cache[sCacheKey]=compileParts(aParts);
            fpFunction.depth=aParts.length
        }
        return fpFunction
    };
    parseQuery._cache={};
    var parseTestQuery=function(sQuery){
        var fpSelf=arguments.callee;
        var aSplitQuery=backupKeys(sQuery).split(/\s*,\s*/);
        var aResult=[];
        var nLen=aSplitQuery.length;
        var aFunc=[];
        for(var i=0;
        i<nLen;
        i++){
            aFunc.push((function(sQuery){
                var sCacheKey=sQuery;
                var fpFunction=fpSelf._cache[sCacheKey];
                if(!fpFunction){
                    sQuery=backupKeys(sQuery);
                    var oExpr=getExpression(sQuery);
                    eval("fpFunction = function(oEl) { "+oExpr.defines+"return ("+oExpr.returnsID+oExpr.returnsTAG+oExpr.returns+"); };")
                }
                return fpFunction
            })(restoreKeys(aSplitQuery[i])))
        }
        return aFunc
    };
    parseTestQuery._cache={};
    var distinct=function(aList){
        var aDistinct=[];
        var oDummy={};
        for(var i=0,oEl;
        oEl=aList[i];
        i++){
            var nUID=getUID(oEl);
            if(oDummy[nUID]){
                continue
            }
            aDistinct.push(oEl);
            oDummy[nUID]=true
        }
        return aDistinct
    };
    var markElement_dontShrink=function(oEl,nDepth){
        var nUID=getUID(oEl);
        if(cssquery._marked[nDepth][nUID]){
            return false
        }
        cssquery._marked[nDepth][nUID]=true;
        return true
    };
    var oResultCache=null;
    var bUseResultCache=false;
    var bExtremeMode=false;
    var old_cssquery=function(sQuery,oParent,oOptions){
        if(typeof sQuery=="object"){
            var oResult={};
            for(var k in sQuery){
                if(sQuery.hasOwnProperty(k)){
                    oResult[k]=arguments.callee(sQuery[k],oParent,oOptions)
                }
                
            }
            return oResult
        }
        cost=0;
        var executeTime=new Date().getTime();
        var aRet;
        for(var r=0,rp=debugOption.repeat;
        r<rp;
        r++){
            aRet=(function(sQuery,oParent,oOptions){
                if(oOptions){
                    if(!oOptions.oneTimeOffCache){
                        oOptions.oneTimeOffCache=false
                    }
                    
                }
                else{
                    oOptions={
                        oneTimeOffCache:false
                    }
                    
                }
                cssquery.safeHTML(oOptions.oneTimeOffCache);
                if(!oParent){
                    oParent=document
                }
                oDocument_dontShrink=oParent.ownerDocument||oParent.document||oParent;
                if(/\bMSIE\s([0-9]+(\.[0-9]+)*);/.test(navigator.userAgent)&&parseFloat(RegExp.$1)<6){
                    try{
                        oDocument_dontShrink.location
                    }
                    catch(e){
                        oDocument_dontShrink=document
                    }
                    oDocument_dontShrink.firstChild=oDocument_dontShrink.getElementsByTagName("html")[0];
                    oDocument_dontShrink.firstChild._IE5_parentNode=oDocument_dontShrink
                }
                bXMLDocument=(typeof XMLDocument!="undefined")?(oDocument_dontShrink.constructor===XMLDocument):(!oDocument_dontShrink.location);
                getUID=bXMLDocument?getUID4XML:getUID4HTML;
                clearKeys();
                var aSplitQuery=backupKeys(sQuery).split(/\s*,\s*/);
                var aResult=[];
                var nLen=aSplitQuery.length;
                for(var i=0;
                i<nLen;
                i++){
                    aSplitQuery[i]=restoreKeys(aSplitQuery[i])
                }
                for(var i=0;
                i<nLen;
                i++){
                    var sSingleQuery=aSplitQuery[i];
                    var aSingleQueryResult=null;
                    var sResultCacheKey=sSingleQuery+(oOptions.single?"_single":"");
                    var aCache=bUseResultCache?oResultCache[sResultCacheKey]:null;
                    if(aCache){
                        for(var j=0,oCache;
                        oCache=aCache[j];
                        j++){
                            if(oCache.parent==oParent){
                                aSingleQueryResult=oCache.result;
                                break
                            }
                            
                        }
                        
                    }
                    if(!aSingleQueryResult){
                        var fpFunction=parseQuery(sSingleQuery);
                        cssquery._marked=[];
                        for(var j=0,nDepth=fpFunction.depth;
                        j<nDepth;
                        j++){
                            cssquery._marked.push({})
                        }
                        aSingleQueryResult=distinct(fpFunction(oParent,oOptions));
                        if(bUseResultCache&&!oOptions.oneTimeOffCache){
                            if(!(oResultCache[sResultCacheKey] instanceof Array)){
                                oResultCache[sResultCacheKey]=[]
                            }
                            oResultCache[sResultCacheKey].push({
                                parent:oParent,result:aSingleQueryResult
                            })
                        }
                        
                    }
                    aResult=aResult.concat(aSingleQueryResult)
                }
                unsetNodeIndexes();
                return aResult
            })(sQuery,oParent,oOptions)
        }
        executeTime=new Date().getTime()-executeTime;
        if(debugOption.callback){
            debugOption.callback(sQuery,cost,executeTime)
        }
        return aRet
    };
    var cssquery;
    if(document.querySelectorAll){
        function _isNonStandardQueryButNotException(sQuery){
            return/\[\s*(?:checked|selected|disabled)/.test(sQuery)
        }
        function _commaRevise(sQuery,sChange){
            return sQuery.replace(/\,/gi,sChange)
        }
        var protoSlice=Array.prototype.slice;
        var _toArray=function(aArray){
            return protoSlice.apply(aArray)
        };
        try{
            protoSlice.apply(document.documentElement.childNodes)
        }
        catch(e){
            _toArray=function(aArray){
                var returnArray=[];
                var leng=aArray.length;
                for(var i=0;
                i<leng;
                i++){
                    returnArray.push(aArray[i])
                }
                return returnArray
            }
            
        }
        cssquery=function(sQuery,oParent,oOptions){
            oParent=oParent||document;
            try{
                if(_isNonStandardQueryButNotException(sQuery)){
                    throw Error("None Standard Query")
                }
                else{
                    var sReviseQuery=sQuery;
                    var oReviseParent=oParent;
                    if(oParent.nodeType!=9){
                        if(bExtremeMode){
                            if(!oParent.id){
                                oParent.id="p"+new Date().getTime()+parseInt(Math.random()*100000000)
                            }
                            
                        }
                        else{
                            throw Error("Parent Element has not ID.or It is not document.or None Extreme Mode.")
                        }
                        sReviseQuery=_commaRevise("#"+oParent.id+" "+sQuery,", #"+oParent.id);
                        oReviseParent=oParent.ownerDocument||oParent.document||document
                    }
                    if(oOptions&&oOptions.single){
                        return[oReviseParent.querySelector(sReviseQuery)]
                    }
                    else{
                        return _toArray(oReviseParent.querySelectorAll(sReviseQuery))
                    }
                    
                }
                
            }
            catch(e){
                return old_cssquery(sQuery,oParent,oOptions)
            }
            
        }
        
    }
    else{
        cssquery=old_cssquery
    }
    cssquery.test=function(oEl,sQuery){
        clearKeys();
        var aFunc=parseTestQuery(sQuery);
        for(var i=0,nLen=aFunc.length;
        i<nLen;
        i++){
            if(aFunc[i](oEl)){
                return true
            }
            
        }
        return false
    };
    cssquery.useCache=function(bFlag){
        if(typeof bFlag!="undefined"){
            bUseResultCache=bFlag;
            cssquery.clearCache()
        }
        return bUseResultCache
    };
    cssquery.clearCache=function(){
        oResultCache={}
    };
    cssquery.getSingle=function(sQuery,oParent,oOptions){
        return cssquery(sQuery,oParent,{
            single:true,oneTimeOffCache:oOptions?(!!oOptions.oneTimeOffCache):false
        })[0]||null
    };
    cssquery.xpath=function(sXPath,oParent){
        var sXPath=sXPath.replace(/\/(\w+)(\[([0-9]+)\])?/g,function(_1,sTag,_2,sTh){
            sTh=sTh||"1";
            return">"+sTag+":nth-of-type("+sTh+")"
        });
        return old_cssquery(sXPath,oParent)
    };
    cssquery.debug=function(fpCallback,nRepeat){
        debugOption.callback=fpCallback;
        debugOption.repeat=nRepeat||1
    };
    cssquery.safeHTML=function(bFlag){
        var bIE=/MSIE/.test(window.navigator.userAgent);
        if(arguments.length>0){
            safeHTML=bFlag&&bIE
        }
        return safeHTML||!bIE
    };
    cssquery.version=sVersion;
    cssquery.release=function(){
        if(/MSIE/.test(window.navigator.userAgent)){
            delete validUID;
            validUID={};
            if(bUseResultCache){
                cssquery.clearCache()
            }
            
        }
        
    };
    cssquery._getCacheInfo=function(){
        return{
            uidCache:validUID,eleCache:oResultCache
        }
        
    };
    cssquery._resetUID=function(){
        UID=0
    };
    cssquery.extreme=function(bExtreme){
        if(arguments.length==0){
            bExtreme=true
        }
        bExtremeMode=bExtreme
    };
    return cssquery
})();
jindo.$Agent=function(){
    var cl=arguments.callee;
    var cc=cl._cached;
    if(cc){
        return cc
    }
    if(!(this instanceof cl)){
        return new cl
    }
    if(!cc){
        cl._cached=this
    }
    this._navigator=navigator
};
jindo.$Agent.prototype.navigator=function(){
    var info=new Object;
    var ver=-1;
    var nativeVersion=-1;
    var u=this._navigator.userAgent;
    var v=this._navigator.vendor||"";
    function f(s,h){
        return((h||"").indexOf(s)>-1)
    }
    info.getName=function(){
        var name="";
        for(x in info){
            if(typeof info[x]=="boolean"&&info[x]&&info.hasOwnProperty(x)){
                name=x
            }
            
        }
        return name
    };
    info.webkit=f("WebKit",u);
    info.opera=(typeof window.opera!="undefined")||f("Opera",u);
    info.ie=!info.opera&&f("MSIE",u);
    info.chrome=info.webkit&&f("Chrome",u);
    info.safari=info.webkit&&!info.chrome&&f("Apple",v);
    info.firefox=f("Firefox",u);
    info.mozilla=f("Gecko",u)&&!info.safari&&!info.chrome&&!info.firefox;
    info.camino=f("Camino",v);
    info.netscape=f("Netscape",u);
    info.omniweb=f("OmniWeb",u);
    info.icab=f("iCab",v);
    info.konqueror=f("KDE",v);
    info.mobile=(f("Mobile",u)||f("Android",u)||f("Nokia",u)||f("webOS",u)||f("Opera Mini",u)||f("BlackBerry",u)||f("PPC",u)||f("Smartphone",u)||f("IEMobile",u))&&!f("iPad",u);
    info.msafari=(!f("IEMobile",u)&&f("Mobile",u))||(f("iPad",u)&&f("Safari",u));
    info.mopera=f("Opera Mini",u);
    info.mie=f("PPC",u)||f("Smartphone",u)||f("IEMobile",u);
    try{
        if(info.ie){
            ver=u.match(/(?:MSIE) ([0-9.]+)/)[1];
            if(u.match(/(?:Trident)\/([0-9.]+)/)&&u.match(/(?:Trident)\/([0-9.]+)/)[1]==4){
                nativeVersion=8
            }
            
        }
        else{
            if(info.safari||info.msafari){
                ver=parseFloat(u.match(/Safari\/([0-9.]+)/)[1]);
                if(ver==100){
                    ver=1.1
                }
                else{
                    ver=[1,1.2,-1,1.3,2,3][Math.floor(ver/100)]
                }
                
            }
            else{
                if(info.mopera){
                    ver=u.match(/(?:Opera\sMini)\/([0-9.]+)/)[1]
                }
                else{
                    if(info.firefox||info.opera||info.omniweb){
                        ver=u.match(/(?:Firefox|Opera|OmniWeb)\/([0-9.]+)/)[1]
                    }
                    else{
                        if(info.mozilla){
                            ver=u.match(/rv:([0-9.]+)/)[1]
                        }
                        else{
                            if(info.icab){
                                ver=u.match(/iCab[ \/]([0-9.]+)/)[1]
                            }
                            else{
                                if(info.chrome){
                                    ver=u.match(/Chrome[ \/]([0-9.]+)/)[1]
                                }
                                
                            }
                            
                        }
                        
                    }
                    
                }
                
            }
            
        }
        info.version=parseFloat(ver);
        info.nativeVersion=parseFloat(nativeVersion);
        if(isNaN(info.version)){
            info.version=-1
        }
        
    }
    catch(e){
        info.version=-1
    }
    this.navigator=function(){
        return info
    };
    return info
};
jindo.$Agent.prototype.os=function(){
    var info=new Object;
    var u=this._navigator.userAgent;
    var p=this._navigator.platform;
    var f=function(s,h){
        return(h.indexOf(s)>-1)
    };
    info.getName=function(){
        var name="";
        for(x in info){
            if(typeof info[x]=="boolean"&&info[x]&&info.hasOwnProperty(x)){
                name=x
            }
            
        }
        return name
    };
    info.win=f("Win",p);
    info.mac=f("Mac",p);
    info.linux=f("Linux",p);
    info.win2000=info.win&&(f("NT 5.0",u)||f("2000",u));
    info.winxp=info.win&&f("NT 5.1",u);
    info.xpsp2=info.winxp&&f("SV1",u);
    info.vista=info.win&&f("NT 6.0",u);
    info.win7=info.win&&f("NT 6.1",u);
    info.ipad=f("iPad",u);
    info.iphone=f("iPhone",u)&&!info.ipad;
    info.android=f("Android",u);
    info.nokia=f("Nokia",u);
    info.webos=f("webOS",u);
    info.blackberry=f("BlackBerry",u);
    info.mwin=f("PPC",u)||f("Smartphone",u)||f("IEMobile",u);
    this.os=function(){
        return info
    };
    return info
};
jindo.$Agent.prototype.flash=function(){
    var info=new Object;
    var p=this._navigator.plugins;
    var m=this._navigator.mimeTypes;
    var f=null;
    info.installed=false;
    info.version=-1;
    if(typeof p!="undefined"&&p.length){
        f=p["Shockwave Flash"];
        if(f){
            info.installed=true;
            if(f.description){
                info.version=parseFloat(f.description.match(/[0-9.]+/)[0])
            }
            
        }
        if(p["Shockwave Flash 2.0"]){
            info.installed=true;
            info.version=2
        }
        
    }
    else{
        if(typeof m!="undefined"&&m.length){
            f=m["application/x-shockwave-flash"];
            info.installed=(f&&f.enabledPlugin)
        }
        else{
            for(var i=10;
            i>1;
            i--){
                try{
                    f=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+i);
                    info.installed=true;
                    info.version=i;
                    break
                }
                catch(e){}
            }
            
        }
        
    }
    this.flash=function(){
        return info
    };
    this.info=this.flash;
    return info
};
jindo.$Agent.prototype.silverlight=function(){
    var info=new Object;
    var p=this._navigator.plugins;
    var s=null;
    info.installed=false;
    info.version=-1;
    if(typeof p!="undefined"&&p.length){
        s=p["Silverlight Plug-In"];
        if(s){
            info.installed=true;
            info.version=parseInt(s.description.split(".")[0]);
            if(s.description=="1.0.30226.2"){
                info.version=2
            }
            
        }
        
    }
    else{
        try{
            s=new ActiveXObject("AgControl.AgControl");
            info.installed=true;
            if(s.isVersionSupported("3.0")){
                info.version=3
            }
            else{
                if(s.isVersionSupported("2.0")){
                    info.version=2
                }
                else{
                    if(s.isVersionSupported("1.0")){
                        info.version=1
                    }
                    
                }
                
            }
            
        }
        catch(e){}
    }
    this.silverlight=function(){
        return info
    };
    return info
};
jindo.$A=function(array){
    var cl=arguments.callee;
    if(typeof array=="undefined"||array==null){
        array=[]
    }
    if(array instanceof cl){
        return array
    }
    if(!(this instanceof cl)){
        return new cl(array)
    }
    this._array=[];
    if(array.constructor!=String){
        this._array=[];
        for(var i=0;
        i<array.length;
        i++){
            this._array[this._array.length]=array[i]
        }
        
    }
    
};
jindo.$A.prototype.toString=function(){
    return this._array.toString()
};
jindo.$A.prototype.get=function(nIndex){
    return this._array[nIndex]
};
jindo.$A.prototype.length=function(nLen,oValue){
    if(typeof nLen=="number"){
        var l=this._array.length;
        this._array.length=nLen;
        if(typeof oValue!="undefined"){
            for(var i=l;
            i<nLen;
            i++){
                this._array[i]=oValue
            }
            
        }
        return this
    }
    else{
        return this._array.length
    }
    
};
jindo.$A.prototype.has=function(oValue){
    return(this.indexOf(oValue)>-1)
};
jindo.$A.prototype.indexOf=function(oValue){
    if(typeof this._array.indexOf!="undefined"){
        jindo.$A.prototype.indexOf=function(oValue){
            return this._array.indexOf(oValue)
        }
        
    }
    else{
        jindo.$A.prototype.indexOf=function(oValue){
            for(var i=0;
            i<this._array.length;
            i++){
                if(this._array[i]==oValue){
                    return i
                }
                
            }
            return -1
        }
        
    }
    return this.indexOf(oValue)
};
jindo.$A.prototype.$value=function(){
    return this._array
};
jindo.$A.prototype.push=function(oValue1){
    return this._array.push.apply(this._array,Array.prototype.slice.apply(arguments))
};
jindo.$A.prototype.pop=function(){
    return this._array.pop()
};
jindo.$A.prototype.shift=function(){
    return this._array.shift()
};
jindo.$A.prototype.unshift=function(oValue1){
    this._array.unshift.apply(this._array,Array.prototype.slice.apply(arguments));
    return this._array.length
};
jindo.$A.prototype.forEach=function(fCallback,oThis){
    if(typeof this._array.forEach=="function"){
        jindo.$A.prototype.forEach=function(fCallback,oThis){
            var arr=this._array;
            var errBreak=this.constructor.Break;
            var errContinue=this.constructor.Continue;
            function f(v,i,a){
                try{
                    fCallback.call(oThis,v,i,a)
                }
                catch(e){
                    if(!(e instanceof errContinue)){
                        throw e
                    }
                    
                }
                
            }
            try{
                this._array.forEach(f)
            }
            catch(e){
                if(!(e instanceof errBreak)){
                    throw e
                }
                
            }
            return this
        }
        
    }
    else{
        jindo.$A.prototype.forEach=function(fCallback,oThis){
            var arr=this._array;
            var errBreak=this.constructor.Break;
            var errContinue=this.constructor.Continue;
            function f(v,i,a){
                try{
                    fCallback.call(oThis,v,i,a)
                }
                catch(e){
                    if(!(e instanceof errContinue)){
                        throw e
                    }
                    
                }
                
            }
            for(var i=0;
            i<arr.length;
            i++){
                try{
                    f(arr[i],i,arr)
                }
                catch(e){
                    if(e instanceof errBreak){
                        break
                    }
                    throw e
                }
                
            }
            return this
        }
        
    }
    return this.forEach(fCallback,oThis)
};
jindo.$A.prototype.slice=function(nStart,nEnd){
    var a=this._array.slice.call(this._array,nStart,nEnd);
    return jindo.$A(a)
};
jindo.$A.prototype.splice=function(nIndex,nHowMany){
    var a=this._array.splice.apply(this._array,Array.prototype.slice.apply(arguments));
    return jindo.$A(a)
};
jindo.$A.prototype.shuffle=function(){
    this._array.sort(function(a,b){
        return Math.random()>Math.random()?1:-1
    });
    return this
};
jindo.$A.prototype.reverse=function(){
    this._array.reverse();
    return this
};
jindo.$A.prototype.empty=function(){
    return this.length(0)
};
jindo.$A.Break=function(){
    if(!(this instanceof arguments.callee)){
        throw new arguments.callee
    }
    
};
jindo.$A.Continue=function(){
    if(!(this instanceof arguments.callee)){
        throw new arguments.callee
    }
    
};
jindo.$A.prototype.map=function(fCallback,oThis){
    if(typeof this._array.map=="function"){
        jindo.$A.prototype.map=function(fCallback,oThis){
            var arr=this._array;
            var errBreak=this.constructor.Break;
            var errContinue=this.constructor.Continue;
            function f(v,i,a){
                try{
                    return fCallback.call(oThis,v,i,a)
                }
                catch(e){
                    if(e instanceof errContinue){
                        return v
                    }
                    else{
                        throw e
                    }
                    
                }
                
            }
            try{
                this._array=this._array.map(f)
            }
            catch(e){
                if(!(e instanceof errBreak)){
                    throw e
                }
                
            }
            return this
        }
        
    }
    else{
        jindo.$A.prototype.map=function(fCallback,oThis){
            var arr=this._array;
            var returnArr=[];
            var errBreak=this.constructor.Break;
            var errContinue=this.constructor.Continue;
            function f(v,i,a){
                try{
                    return fCallback.call(oThis,v,i,a)
                }
                catch(e){
                    if(e instanceof errContinue){
                        return v
                    }
                    else{
                        throw e
                    }
                    
                }
                
            }
            for(var i=0;
            i<this._array.length;
            i++){
                try{
                    returnArr[i]=f(arr[i],i,arr)
                }
                catch(e){
                    if(e instanceof errBreak){
                        return this
                    }
                    else{
                        throw e
                    }
                    
                }
                
            }
            this._array=returnArr;
            return this
        }
        
    }
    return this.map(fCallback,oThis)
};
jindo.$A.prototype.filter=function(fCallback,oThis){
    if(typeof this._array.filter!="undefined"){
        jindo.$A.prototype.filter=function(fCallback,oThis){
            return jindo.$A(this._array.filter(fCallback,oThis))
        }
        
    }
    else{
        jindo.$A.prototype.filter=function(fCallback,oThis){
            var ar=[];
            this.forEach(function(v,i,a){
                if(fCallback.call(oThis,v,i,a)===true){
                    ar[ar.length]=v
                }
                
            });
            return jindo.$A(ar)
        }
        
    }
    return this.filter(fCallback,oThis)
};
jindo.$A.prototype.every=function(fCallback,oThis){
    if(typeof this._array.every!="undefined"){
        jindo.$A.prototype.every=function(fCallback,oThis){
            return this._array.every(fCallback,oThis)
        }
        
    }
    else{
        jindo.$A.prototype.every=function(fCallback,oThis){
            var result=true;
            this.forEach(function(v,i,a){
                if(fCallback.call(oThis,v,i,a)===false){
                    result=false;
                    jindo.$A.Break()
                }
                
            });
            return result
        }
        
    }
    return this.every(fCallback,oThis)
};
jindo.$A.prototype.some=function(fCallback,oThis){
    if(typeof this._array.some!="undefined"){
        jindo.$A.prototype.some=function(fCallback,oThis){
            return this._array.some(fCallback,oThis)
        }
        
    }
    else{
        jindo.$A.prototype.some=function(fCallback,oThis){
            var result=false;
            this.forEach(function(v,i,a){
                if(fCallback.call(oThis,v,i,a)===true){
                    result=true;
                    jindo.$A.Break()
                }
                
            });
            return result
        }
        
    }
    return this.some(fCallback,oThis)
};
jindo.$A.prototype.refuse=function(oValue1){
    var a=jindo.$A(Array.prototype.slice.apply(arguments));
    return this.filter(function(v,i){
        return !a.has(v)
    })
};
jindo.$A.prototype.unique=function(){
    var a=this._array,b=[],l=a.length;
    var i,j;
    for(i=0;
    i<l;
    i++){
        for(j=0;
        j<b.length;
        j++){
            if(a[i]==b[j]){
                break
            }
            
        }
        if(j>=b.length){
            b[j]=a[i]
        }
        
    }
    this._array=b;
    return this
};
jindo.$Ajax=function(url,option){
    var cl=arguments.callee;
    if(!(this instanceof cl)){
        return new cl(url,option)
    }
    function _getXHR(){
        if(window.XMLHttpRequest){
            return new XMLHttpRequest()
        }
        else{
            if(ActiveXObject){
                try{
                    return new ActiveXObject("MSXML2.XMLHTTP")
                }
                catch(e){
                    return new ActiveXObject("Microsoft.XMLHTTP")
                }
                return null
            }
            
        }
        
    }
    var loc=location.toString();
    var domain="";
    try{
        domain=loc.match(/^https?:\/\/([a-z0-9_\-\.]+)/i)[1]
    }
    catch(e){}this._status=0;
    this._url=url;
    this._options=new Object;
    this._headers=new Object;
    this._options={
        type:"xhr",method:"post",proxy:"",timeout:0,onload:function(req){},onerror:null,ontimeout:function(req){},jsonp_charset:"utf-8",callbackid:"",callbackname:"",sendheader:true,async:true,decode:true,postBody:false
    };
    this.option(option);
    if(jindo.$Ajax.CONFIG){
        this.option(jindo.$Ajax.CONFIG)
    }
    var _opt=this._options;
    _opt.type=_opt.type.toLowerCase();
    _opt.method=_opt.method.toLowerCase();
    if(typeof window.__jindo2_callback=="undefined"){
        window.__jindo2_callback=new Array()
    }
    switch(_opt.type){
        case"put":case"delete":case"get":case"post":_opt.method=_opt.type;
        _opt.type="xhr";
        case"xhr":this._request=_getXHR();
        break;
        case"flash":if(!jindo.$Ajax.SWFRequest){
            throw Error("Require jindo.$Ajax.SWFRequest")
        }
        this._request=new jindo.$Ajax.SWFRequest(jindo.$Fn(this.option,this).bind());
        break;
        case"jsonp":if(!jindo.$Ajax.JSONPRequest){
            throw Error("Require jindo.$Ajax.JSONPRequest")
        }
        _opt.method="get";
        this._request=new jindo.$Ajax.JSONPRequest(jindo.$Fn(this.option,this).bind());
        break;
        case"iframe":if(!jindo.$Ajax.FrameRequest){
            throw Error("Require jindo.$Ajax.FrameRequest")
        }
        this._request=new jindo.$Ajax.FrameRequest(jindo.$Fn(this.option,this).bind());
        break
    }
    
};
jindo.$Ajax.prototype._onload=(function(isIE){
    if(isIE){
        return function(){
            var bSuccess=this._request.readyState==4&&this._request.status==200;
            var oResult;
            if(this._request.readyState==4){
                try{
                    if(this._request.status!=200&&typeof this._options.onerror=="function"){
                        if(!this._request.status==0){
                            this._options.onerror(jindo.$Ajax.Response(this._request))
                        }
                        
                    }
                    else{
                        oResult=this._options.onload(jindo.$Ajax.Response(this._request))
                    }
                    
                }
                finally{
                    if(typeof this._oncompleted=="function"){
                        this._oncompleted(bSuccess,oResult)
                    }
                    if(this._options.type!="jsonp"){
                        this.abort();
                        try{
                            delete this._request.onload
                        }
                        catch(e){
                            this._request.onload=undefined
                        }
                        
                    }
                    delete this._request.onreadystatechange
                }
                
            }
            
        }
        
    }
    else{
        return function(){
            var bSuccess=this._request.readyState==4&&this._request.status==200;
            var oResult;
            if(this._request.readyState==4){
                try{
                    if(this._request.status!=200&&typeof this._options.onerror=="function"){
                        this._options.onerror(jindo.$Ajax.Response(this._request))
                    }
                    else{
                        oResult=this._options.onload(jindo.$Ajax.Response(this._request))
                    }
                    
                }
                finally{
                    this._status--;
                    if(typeof this._oncompleted=="function"){
                        this._oncompleted(bSuccess,oResult)
                    }
                    
                }
                
            }
            
        }
        
    }
    
})(/MSIE/.test(window.navigator.userAgent));
jindo.$Ajax.prototype.request=function(oData){
    this._status++;
    var t=this;
    var req=this._request;
    var opt=this._options;
    var data,v,a=[],data="";
    var _timer=null;
    var url=this._url;
    this._is_abort=false;
    if(opt.postBody&&opt.type.toUpperCase()=="XHR"&&opt.method.toUpperCase()!="GET"){
        if(typeof oData=="string"){
            data=oData
        }
        else{
            data=jindo.$Json(oData).toString()
        }
        
    }
    else{
        if(typeof oData=="undefined"||!oData){
            data=null
        }
        else{
            for(var k in oData){
                if(oData.hasOwnProperty(k)){
                    v=oData[k];
                    if(typeof v=="function"){
                        v=v()
                    }
                    if(v instanceof Array||v instanceof jindo.$A){
                        jindo.$A(v).forEach(function(value,index,array){
                            a[a.length]=k+"="+encodeURIComponent(value)
                        })
                    }
                    else{
                        a[a.length]=k+"="+encodeURIComponent(v)
                    }
                    
                }
                
            }
            data=a.join("&")
        }
        
    }
    if(data&&opt.type.toUpperCase()=="XHR"&&opt.method.toUpperCase()=="GET"){
        if(url.indexOf("?")==-1){
            url+="?"
        }
        else{
            url+="&"
        }
        url+=data;
        data=null
    }
    req.open(opt.method.toUpperCase(),url,opt.async);
    if(opt.type.toUpperCase()=="XHR"&&opt.method.toUpperCase()=="GET"&&/MSIE/.test(window.navigator.userAgent)){
        req.setRequestHeader("If-Modified-Since","Thu, 1 Jan 1970 00:00:00 GMT")
    }
    if(opt.sendheader){
        req.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8");
        req.setRequestHeader("charset","utf-8");
        for(var x in this._headers){
            if(this._headers.hasOwnProperty(x)){
                if(typeof this._headers[x]=="function"){
                    continue
                }
                req.setRequestHeader(x,String(this._headers[x]))
            }
            
        }
        
    }
    var navi=navigator.userAgent;
    if(req.addEventListener&&!(navi.indexOf("Opera")>-1)&&!(navi.indexOf("MSIE")>-1)){
        if(this._loadFunc){
            req.removeEventListener("load",this._loadFunc,false)
        }
        this._loadFunc=function(rq){
            clearTimeout(_timer);
            _timer=undefined;
            t._onload(rq)
        };
        req.addEventListener("load",this._loadFunc,false)
    }
    else{
        if(typeof req.onload!="undefined"){
            req.onload=function(rq){
                if(req.readyState==4&&!t._is_abort){
                    clearTimeout(_timer);
                    _timer=undefined;
                    t._onload(rq)
                }
                
            }
            
        }
        else{
            if(window.navigator.userAgent.match(/(?:MSIE) ([0-9.]+)/)[1]==6&&opt.async){
                var onreadystatechange=function(rq){
                    if(req.readyState==4&&!t._is_abort){
                        if(_timer){
                            clearTimeout(_timer);
                            _timer=undefined
                        }
                        t._onload(rq);
                        clearInterval(t._interval);
                        t._interval=undefined
                    }
                    
                };
                this._interval=setInterval(onreadystatechange,300)
            }
            else{
                req.onreadystatechange=function(rq){
                    if(req.readyState==4){
                        clearTimeout(_timer);
                        _timer=undefined;
                        t._onload(rq)
                    }
                    
                }
                
            }
            
        }
        
    }
    if(opt.timeout>0){
        if(this._interval){
            clearInterval(this._interval)
        }
        if(this._timer){
            clearTimeout(this._timer)
        }
        _timer=setTimeout(function(){
            t._is_abort=true;
            if(t._interval){
                clearInterval(t._interval);
                t._interval=undefined
            }
            try{
                req.abort()
            }
            catch(e){}opt.ontimeout(req);
            if(typeof t._oncompleted=="function"){
                t._oncompleted(false)
            }
            
        }
        ,opt.timeout*1000);
        this._timer=_timer
    }
    this._test_url=url;
    req.send(data);
    return this
};
jindo.$Ajax.prototype.isIdle=function(){
    return this._status==0
};
jindo.$Ajax.prototype.abort=function(){
    try{
        if(this._interval){
            clearInterval(this._interval)
        }
        if(this._timer){
            clearTimeout(this._timer)
        }
        this._interval=undefined;
        this._timer=undefined;
        this._is_abort=true;
        this._request.abort()
    }
    finally{
        this._status--
    }
    return this
};
jindo.$Ajax.prototype.option=function(name,value){
    if(typeof name=="undefined"){
        return""
    }
    if(typeof name=="string"){
        if(typeof value=="undefined"){
            return this._options[name]
        }
        this._options[name]=value;
        return this
    }
    try{
        for(var x in name){
            if(name.hasOwnProperty(x)){
                this._options[x]=name[x]
            }
            
        }
        
    }
    catch(e){}return this
};
jindo.$Ajax.prototype.header=function(name,value){
    if(typeof name=="undefined"){
        return""
    }
    if(typeof name=="string"){
        if(typeof value=="undefined"){
            return this._headers[name]
        }
        this._headers[name]=value;
        return this
    }
    try{
        for(var x in name){
            if(name.hasOwnProperty(x)){
                this._headers[x]=name[x]
            }
            
        }
        
    }
    catch(e){}return this
};
jindo.$Ajax.Response=function(req){
    if(this===jindo.$Ajax){
        return new jindo.$Ajax.Response(req)
    }
    this._response=req
};
jindo.$Ajax.Response.prototype.xml=function(){
    return this._response.responseXML
};
jindo.$Ajax.Response.prototype.text=function(){
    return this._response.responseText
};
jindo.$Ajax.Response.prototype.status=function(){
    return this._response.status
};
jindo.$Ajax.Response.prototype.readyState=function(){
    return this._response.readyState
};
jindo.$Ajax.Response.prototype.json=function(){
    if(this._response.responseJSON){
        return this._response.responseJSON
    }
    else{
        if(this._response.responseText){
            try{
                return eval("("+this._response.responseText+")")
            }
            catch(e){
                return{}
            }
            
        }
        
    }
    return{}
};
jindo.$Ajax.Response.prototype.header=function(name){
    if(typeof name=="string"){
        return this._response.getResponseHeader(name)
    }
    return this._response.getAllResponseHeaders()
};
jindo.$Ajax.RequestBase=jindo.$Class({
    _respHeaderString:"",callbackid:"",callbackname:"",responseXML:null,responseJSON:null,responseText:"",status:404,readyState:0,$init:function(fpOption){},onload:function(){},abort:function(){},open:function(){},send:function(){},setRequestHeader:function(sName,sValue){
        this._headers[sName]=sValue
    }
    ,getResponseHeader:function(sName){
        return this._respHeaders[sName]||""
    }
    ,getAllResponseHeaders:function(){
        return this._respHeaderString
    }
    ,_getCallbackInfo:function(){
        var id="";
        if(this.option("callbackid")!=""){
            var idx=0;
            do{
                id="_"+this.option("callbackid")+"_"+idx;
                idx++
            }
            while(window.__jindo2_callback[id])
        }
        else{
            do{
                id="_"+Math.floor(Math.random()*10000)
            }
            while(window.__jindo2_callback[id])
        }
        if(this.option("callbackname")==""){
            this.option("callbackname","_callback")
        }
        return{
            callbackname:this.option("callbackname"),id:id,name:"window.__jindo2_callback."+id
        }
        
    }
    
});
jindo.$Ajax.JSONPRequest=jindo.$Class({
    _headers:{},_respHeaders:{},_script:null,_onerror:null,$init:function(fpOption){
        this.option=fpOption
    }
    ,_callback:function(data){
        if(this._onerror){
            clearTimeout(this._onerror);
            this._onerror=null
        }
        var self=this;
        this.responseJSON=data;
        this.onload(this);
        setTimeout(function(){
            self.abort()
        }
        ,10)
    }
    ,abort:function(){
        if(this._script){
            try{
                this._script.parentNode.removeChild(this._script)
            }
            catch(e){}
        }
        
    }
    ,open:function(method,url){
        this.responseJSON=null;
        this._url=url
    }
    ,send:function(data){
        var t=this;
        var info=this._getCallbackInfo();
        var head=document.getElementsByTagName("head")[0];
        this._script=jindo.$("<script>");
        this._script.type="text/javascript";
        this._script.charset=this.option("jsonp_charset");
        if(head){
            head.appendChild(this._script)
        }
        else{
            if(document.body){
                document.body.appendChild(this._script)
            }
            
        }
        window.__jindo2_callback[info.id]=function(data){
            try{
                t.readyState=4;
                t.status=200;
                t._callback(data)
            }
            finally{
                delete window.__jindo2_callback[info.id]
            }
            
        };
        var agent=jindo.$Agent(navigator);
        if(agent.navigator().ie||agent.navigator().opera){
            this._script.onreadystatechange=function(){
                if(this.readyState=="loaded"){
                    if(!t.responseJSON){
                        t.readyState=4;
                        t.status=500;
                        t._onerror=setTimeout(function(){
                            t._callback(null)
                        }
                        ,200)
                    }
                    this.onreadystatechange=null
                }
                
            }
            
        }
        else{
            this._script.onload=function(){
                if(!t.responseJSON){
                    t.readyState=4;
                    t.status=500;
                    t._onerror=setTimeout(function(){
                        t._callback(null)
                    }
                    ,200)
                }
                this.onload=null;
                this.onerror=null
            };
            this._script.onerror=function(){
                if(!t.responseJSON){
                    t.readyState=4;
                    t.status=404;
                    t._onerror=setTimeout(function(){
                        t._callback(null)
                    }
                    ,200)
                }
                this.onerror=null;
                this.onload=null
            }
            
        }
        var delimiter="&";
        if(this._url.indexOf("?")==-1){
            delimiter="?"
        }
        if(data){
            data="&"+data
        }
        else{
            data=""
        }
        this._test_url=this._url+delimiter+info.callbackname+"="+info.name+data;
        this._script.src=this._url+delimiter+info.callbackname+"="+info.name+data
    }
    
}).extend(jindo.$Ajax.RequestBase);
jindo.$Ajax.SWFRequest=jindo.$Class({
    $init:function(fpOption){
        this.option=fpOption
    }
    ,_headers:{},_respHeaders:{},_getFlashObj:function(){
        var navi=jindo.$Agent(window.navigator).navigator();
        var obj;
        if(navi.ie&&navi.version==9){
            obj=document.getElementById(jindo.$Ajax.SWFRequest._tmpId)
        }
        else{
            obj=window.document[jindo.$Ajax.SWFRequest._tmpId]
        }
        return(this._getFlashObj=function(){
            return obj
        })()
    }
    ,_callback:function(status,data,headers){
        this.readyState=4;
        if((typeof status).toLowerCase()=="number"){
            this.status=status
        }
        else{
            if(status==true){
                this.status=200
            }
            
        }
        if(this.status==200){
            if(typeof data=="string"){
                try{
                    this.responseText=this.option("decode")?decodeURIComponent(data):data;
                    if(!this.responseText||this.responseText==""){
                        this.responseText=data
                    }
                    
                }
                catch(e){
                    if(e.name=="URIError"){
                        this.responseText=data;
                        if(!this.responseText||this.responseText==""){
                            this.responseText=data
                        }
                        
                    }
                    
                }
                
            }
            if(typeof headers=="object"){
                this._respHeaders=headers
            }
            
        }
        this.onload(this)
    }
    ,open:function(method,url){
        var re=/https?:\/\/([a-z0-9_\-\.]+)/i;
        this._url=url;
        this._method=method
    }
    ,send:function(data){
        this.responseXML=false;
        this.responseText="";
        var t=this;
        var dat={};
        var info=this._getCallbackInfo();
        var swf=this._getFlashObj();
        function f(arg){
            switch(typeof arg){
                case"string":return'"'+arg.replace(/\"/g,'\\"')+'"';
                break;
                case"number":return arg;
                break;
                case"object":var ret="",arr=[];
                if(arg instanceof Array){
                    for(var i=0;
                    i<arg.length;
                    i++){
                        arr[i]=f(arg[i])
                    }
                    ret="["+arr.join(",")+"]"
                }
                else{
                    for(var x in arg){
                        if(arg.hasOwnProperty(x)){
                            arr[arr.length]=f(x)+":"+f(arg[x])
                        }
                        
                    }
                    ret="{"+arr.join(",")+"}"
                }
                return ret;
                default:return'""'
            }
            
        }
        data=(data||"").split("&");
        for(var i=0;
        i<data.length;
        i++){
            pos=data[i].indexOf("=");
            key=data[i].substring(0,pos);
            val=data[i].substring(pos+1);
            dat[key]=decodeURIComponent(val)
        }
        window.__jindo2_callback[info.id]=function(success,data){
            try{
                t._callback(success,data)
            }
            finally{
                delete window.__jindo2_callback[info.id]
            }
            
        };
        var oData={
            url:this._url,type:this._method,data:dat,charset:"UTF-8",callback:info.name,header_json:this._headers
        };
        swf.requestViaFlash(f(oData))
    }
    
}).extend(jindo.$Ajax.RequestBase);
jindo.$Ajax.SWFRequest.write=function(swf_path){
    if(typeof swf_path=="undefined"){
        swf_path="./ajax.swf"
    }
    jindo.$Ajax.SWFRequest._tmpId="tmpSwf"+(new Date()).getMilliseconds()+Math.floor(Math.random()*100000);
    var activeCallback="jindo.$Ajax.SWFRequest.loaded";
    jindo.$Ajax._checkFlashLoad();
    document.write('<div style="position:absolute;top:-1000px;left:-1000px"><object id="'+jindo.$Ajax.SWFRequest._tmpId+'" width="1" height="1" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0"><param name="movie" value="'+swf_path+'"><param name = "FlashVars" value = "activeCallback='+activeCallback+'" /><param name = "allowScriptAccess" value = "always" /><embed name="'+jindo.$Ajax.SWFRequest._tmpId+'" src="'+swf_path+'" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" width="1" height="1" allowScriptAccess="always" swLiveConnect="true" FlashVars="activeCallback='+activeCallback+'"></embed></object></div>')
};
jindo.$Ajax._checkFlashLoad=function(){
    jindo.$Ajax._checkFlashKey=setTimeout(function(){
        alert("Check your flash file!. Unload flash on a page.")
    }
    ,5000);
    jindo.$Ajax._checkFlashLoad=function(){}
};
jindo.$Ajax.SWFRequest.activeFlash=false;
jindo.$Ajax.SWFRequest.loaded=function(){
    clearTimeout(jindo.$Ajax._checkFlashKey);
    jindo.$Ajax.SWFRequest.activeFlash=true
};
jindo.$Ajax.FrameRequest=jindo.$Class({
    _headers:{},_respHeaders:{},_frame:null,_domain:"",$init:function(fpOption){
        this.option=fpOption
    }
    ,_callback:function(id,data,header){
        var self=this;
        this.readyState=4;
        this.status=200;
        this.responseText=data;
        this._respHeaderString=header;
        header.replace(/^([\w\-]+)\s*:\s*(.+)$/m,function($0,$1,$2){
            self._respHeaders[$1]=$2
        });
        this.onload(this);
        setTimeout(function(){
            self.abort()
        }
        ,10)
    }
    ,abort:function(){
        if(this._frame){
            try{
                this._frame.parentNode.removeChild(this._frame)
            }
            catch(e){}
        }
        
    }
    ,open:function(method,url){
        var re=/https?:\/\/([a-z0-9_\-\.]+)/i;
        var dom=document.location.toString().match(re);
        this._method=method;
        this._url=url;
        this._remote=String(url).match(/(https?:\/\/[a-z0-9_\-\.]+)(:[0-9]+)?/i)[0];
        this._frame=null;
        this._domain=(dom[1]!=document.domain)?document.domain:""
    }
    ,send:function(data){
        this.responseXML="";
        this.responseText="";
        var t=this;
        var re=/https?:\/\/([a-z0-9_\-\.]+)/i;
        var info=this._getCallbackInfo();
        var url;
        var _aStr=[];
        _aStr.push(this._remote+"/ajax_remote_callback.html?method="+this._method);
        var header=new Array;
        window.__jindo2_callback[info.id]=function(id,data,header){
            try{
                t._callback(id,data,header)
            }
            finally{
                delete window.__jindo2_callback[info.id]
            }
            
        };
        for(var x in this._headers){
            if(this._headers.hasOwnProperty(x)){
                header[header.length]="'"+x+"':'"+this._headers[x]+"'"
            }
            
        }
        header="{"+header.join(",")+"}";
        _aStr.push("&id="+info.id);
        _aStr.push("&header="+encodeURIComponent(header));
        _aStr.push("&proxy="+encodeURIComponent(this.option("proxy")));
        _aStr.push("&domain="+this._domain);
        _aStr.push("&url="+encodeURIComponent(this._url.replace(re,"")));
        _aStr.push("#"+encodeURIComponent(data));
        var fr=this._frame=jindo.$("<iframe>");
        fr.style.position="absolute";
        fr.style.visibility="hidden";
        fr.style.width="1px";
        fr.style.height="1px";
        var body=document.body||document.documentElement;
        if(body.firstChild){
            body.insertBefore(fr,body.firstChild)
        }
        else{
            body.appendChild(fr)
        }
        fr.src=_aStr.join("")
    }
    
}).extend(jindo.$Ajax.RequestBase);
jindo.$Ajax.Queue=function(option){
    var cl=arguments.callee;
    if(!(this instanceof cl)){
        return new cl(option)
    }
    this._options={
        async:false,useResultAsParam:false,stopOnFailure:false
    };
    this.option(option);
    this._queue=[]
};
jindo.$Ajax.Queue.prototype.option=function(name,value){
    if(typeof name=="undefined"){
        return""
    }
    if(typeof name=="string"){
        if(typeof value=="undefined"){
            return this._options[name]
        }
        this._options[name]=value;
        return this
    }
    try{
        for(var x in name){
            if(name.hasOwnProperty(x)){
                this._options[x]=name[x]
            }
            
        }
        
    }
    catch(e){}return this
};
jindo.$Ajax.Queue.prototype.add=function(oAjax,oParam){
    this._queue.push({
        obj:oAjax,param:oParam
    })
};
jindo.$Ajax.Queue.prototype.request=function(){
    if(this.option("async")){
        this._requestAsync()
    }
    else{
        this._requestSync(0)
    }
    
};
jindo.$Ajax.Queue.prototype._requestSync=function(nIdx,oParam){
    var t=this;
    if(this._queue.length>nIdx+1){
        this._queue[nIdx].obj._oncompleted=function(bSuccess,oResult){
            if(!t.option("stopOnFailure")||bSuccess){
                t._requestSync(nIdx+1,oResult)
            }
            
        }
        
    }
    var _oParam=this._queue[nIdx].param||{};
    if(this.option("useResultAsParam")&&oParam){
        try{
            for(var x in oParam){
                if(typeof _oParam[x]=="undefined"&&oParam.hasOwnProperty(x)){
                    _oParam[x]=oParam[x]
                }
                
            }
            
        }
        catch(e){}
    }
    this._queue[nIdx].obj.request(_oParam)
};
jindo.$Ajax.Queue.prototype._requestAsync=function(){
    for(var i=0;
    i<this._queue.length;
    i++){
        this._queue[i].obj.request(this._queue[i].param)
    }
    
};
jindo.$H=function(hashObject){
    var cl=arguments.callee;
    if(typeof hashObject=="undefined"){
        hashObject=new Object
    }
    if(hashObject instanceof cl){
        return hashObject
    }
    if(!(this instanceof cl)){
        return new cl(hashObject)
    }
    this._table={};
    for(var k in hashObject){
        if(hashObject.hasOwnProperty(k)){
            this._table[k]=hashObject[k]
        }
        
    }
    
};
jindo.$H.prototype.$value=function(){
    return this._table
};
jindo.$H.prototype.$=function(key,value){
    if(typeof value=="undefined"){
        return this._table[key]
    }
    this._table[key]=value;
    return this
};
jindo.$H.prototype.length=function(){
    var i=0;
    for(var k in this._table){
        if(this._table.hasOwnProperty(k)){
            if(typeof Object.prototype[k]!="undeifned"&&Object.prototype[k]===this._table[k]){
                continue
            }
            i++
        }
        
    }
    return i
};
jindo.$H.prototype.forEach=function(callback,thisObject){
    var t=this._table;
    var h=this.constructor;
    for(var k in t){
        if(t.hasOwnProperty(k)){
            if(!t.propertyIsEnumerable(k)){
                continue
            }
            try{
                callback.call(thisObject,t[k],k,t)
            }
            catch(e){
                if(e instanceof h.Break){
                    break
                }
                if(e instanceof h.Continue){
                    continue
                }
                throw e
            }
            
        }
        
    }
    return this
};
jindo.$H.prototype.filter=function(callback,thisObject){
    var h=jindo.$H();
    this.forEach(function(v,k,o){
        if(callback.call(thisObject,v,k,o)===true){
            h.add(k,v)
        }
        
    });
    return h
};
jindo.$H.prototype.map=function(callback,thisObject){
    var t=this._table;
    this.forEach(function(v,k,o){
        t[k]=callback.call(thisObject,v,k,o)
    });
    return this
};
jindo.$H.prototype.add=function(key,value){
    this._table[key]=value;
    return this
};
jindo.$H.prototype.remove=function(key){
    if(typeof this._table[key]=="undefined"){
        return null
    }
    var val=this._table[key];
    delete this._table[key];
    return val
};
jindo.$H.prototype.search=function(value){
    var result=false;
    this.forEach(function(v,k,o){
        if(v===value){
            result=k;
            jindo.$H.Break()
        }
        
    });
    return result
};
jindo.$H.prototype.hasKey=function(key){
    var result=false;
    return(typeof this._table[key]!="undefined")
};
jindo.$H.prototype.hasValue=function(value){
    return(this.search(value)!==false)
};
jindo.$H.prototype.sort=function(){
    var o=new Object;
    var a=this.values();
    var k=false;
    a.sort();
    for(var i=0;
    i<a.length;
    i++){
        k=this.search(a[i]);
        o[k]=a[i];
        delete this._table[k]
    }
    this._table=o;
    return this
};
jindo.$H.prototype.ksort=function(){
    var o=new Object;
    var a=this.keys();
    a.sort();
    for(var i=0;
    i<a.length;
    i++){
        o[a[i]]=this._table[a[i]]
    }
    this._table=o;
    return this
};
jindo.$H.prototype.keys=function(){
    var keys=new Array;
    for(var k in this._table){
        if(this._table.hasOwnProperty(k)){
            keys.push(k)
        }
        
    }
    return keys
};
jindo.$H.prototype.values=function(){
    var values=[];
    for(var k in this._table){
        if(this._table.hasOwnProperty(k)){
            values[values.length]=this._table[k]
        }
        
    }
    return values
};
jindo.$H.prototype.toQueryString=function(){
    var buf=[],val=null,idx=0;
    for(var k in this._table){
        if(this._table.hasOwnProperty(k)){
            if(typeof(val=this._table[k])=="object"&&val.constructor==Array){
                for(i=0;
                i<val.length;
                i++){
                    buf[buf.length]=encodeURIComponent(k)+"[]="+encodeURIComponent(val[i]+"")
                }
                
            }
            else{
                buf[buf.length]=encodeURIComponent(k)+"="+encodeURIComponent(this._table[k]+"")
            }
            
        }
        
    }
    return buf.join("&")
};
jindo.$H.prototype.empty=function(){
    var keys=this.keys();
    for(var i=0;
    i<keys.length;
    i++){
        delete this._table[keys[i]]
    }
    return this
};
jindo.$H.Break=function(){
    if(!(this instanceof arguments.callee)){
        throw new arguments.callee
    }
    
};
jindo.$H.Continue=function(){
    if(!(this instanceof arguments.callee)){
        throw new arguments.callee
    }
    
};
jindo.$Json=function(sObject){
    var cl=arguments.callee;
    if(typeof sObject=="undefined"){
        sObject={}
    }
    if(sObject instanceof cl){
        return sObject
    }
    if(!(this instanceof cl)){
        return new cl(sObject)
    }
    if(typeof sObject=="string"){
        this._object=jindo.$Json._oldMakeJSON(sObject)
    }
    else{
        this._object=sObject
    }
    
};
jindo.$Json._oldMakeJSON=function(sObject){
    try{
        if(/^(?:\s*)[\{\[]/.test(sObject)){
            sObject=eval("("+sObject+")")
        }
        else{
            sObject=sObject
        }
        
    }
    catch(e){
        sObject={}
    }
    return sObject
};
jindo.$Json.fromXML=function(sXML){
    var o={};
    var re=/\s*<(\/?[\w:\-]+)((?:\s+[\w:\-]+\s*=\s*(?:"(?:\\"|[^"])*"|'(?:\\'|[^'])*'))*)\s*((?:\/>)|(?:><\/\1>|\s*))|\s*<!\[CDATA\[([\w\W]*?)\]\]>\s*|\s*>?([^<]*)/ig;
    var re2=/^[0-9]+(?:\.[0-9]+)?$/;
    var ec={
        "&amp;":"&","&nbsp;":" ","&quot;":'"',"&lt;":"<","&gt;":">"
    };
    var fg={
        tags:["/"],stack:[o]
    };
    var es=function(s){
        if(typeof s=="undefined"){
            return""
        }
        return s.replace(/&[a-z]+;/g,function(m){
            return(typeof ec[m]=="string")?ec[m]:m
        })
    };
    var at=function(s,c){
        s.replace(/([\w\:\-]+)\s*=\s*(?:"((?:\\"|[^"])*)"|'((?:\\'|[^'])*)')/g,function($0,$1,$2,$3){
            c[$1]=es(($2?$2.replace(/\\"/g,'"'):undefined)||($3?$3.replace(/\\'/g,"'"):undefined))
        })
    };
    var em=function(o){
        for(var x in o){
            if(o.hasOwnProperty(x)){
                if(Object.prototype[x]){
                    continue
                }
                return false
            }
            
        }
        return true
    };
    var cb=function($0,$1,$2,$3,$4,$5){
        var cur,cdata="";
        var idx=fg.stack.length-1;
        if(typeof $1=="string"&&$1){
            if($1.substr(0,1)!="/"){
                var has_attr=(typeof $2=="string"&&$2);
                var closed=(typeof $3=="string"&&$3);
                var newobj=(!has_attr&&closed)?"":{};
                cur=fg.stack[idx];
                if(typeof cur[$1]=="undefined"){
                    cur[$1]=newobj;
                    cur=fg.stack[idx+1]=cur[$1]
                }
                else{
                    if(cur[$1] instanceof Array){
                        var len=cur[$1].length;
                        cur[$1][len]=newobj;
                        cur=fg.stack[idx+1]=cur[$1][len]
                    }
                    else{
                        cur[$1]=[cur[$1],newobj];
                        cur=fg.stack[idx+1]=cur[$1][1]
                    }
                    
                }
                if(has_attr){
                    at($2,cur)
                }
                fg.tags[idx+1]=$1;
                if(closed){
                    fg.tags.length--;
                    fg.stack.length--
                }
                
            }
            else{
                fg.tags.length--;
                fg.stack.length--
            }
            
        }
        else{
            if(typeof $4=="string"&&$4){
                cdata=$4
            }
            else{
                if(typeof $5=="string"&&$5){
                    cdata=es($5)
                }
                
            }
            
        }
        if(cdata.replace(/^\s+/g,"").length>0){
            var par=fg.stack[idx-1];
            var tag=fg.tags[idx];
            if(re2.test(cdata)){
                cdata=parseFloat(cdata)
            }
            else{
                if(cdata=="true"){
                    cdata=true
                }
                else{
                    if(cdata=="false"){
                        cdata=false
                    }
                    
                }
                
            }
            if(typeof par=="undefined"){
                return
            }
            if(par[tag] instanceof Array){
                var o=par[tag];
                if(typeof o[o.length-1]=="object"&&!em(o[o.length-1])){
                    o[o.length-1].$cdata=cdata;
                    o[o.length-1].toString=function(){
                        return cdata
                    }
                    
                }
                else{
                    o[o.length-1]=cdata
                }
                
            }
            else{
                if(typeof par[tag]=="object"&&!em(par[tag])){
                    par[tag].$cdata=cdata;
                    par[tag].toString=function(){
                        return cdata
                    }
                    
                }
                else{
                    par[tag]=cdata
                }
                
            }
            
        }
        
    };
    sXML=sXML.replace(/<(\?|\!-)[^>]*>/g,"");
    sXML.replace(re,cb);
    return jindo.$Json(o)
};
jindo.$Json.prototype.get=function(sPath){
    var o=this._object;
    var p=sPath.split("/");
    var re=/^([\w:\-]+)\[([0-9]+)\]$/;
    var stack=[[o]],cur=stack[0];
    var len=p.length,c_len,idx,buf,j,e;
    for(var i=0;
    i<len;
    i++){
        if(p[i]=="."||p[i]==""){
            continue
        }
        if(p[i]==".."){
            stack.length--
        }
        else{
            buf=[];
            idx=-1;
            c_len=cur.length;
            if(c_len==0){
                return[]
            }
            if(re.test(p[i])){
                idx=+RegExp.$2
            }
            for(j=0;
            j<c_len;
            j++){
                e=cur[j][p[i]];
                if(typeof e=="undefined"){
                    continue
                }
                if(e instanceof Array){
                    if(idx>-1){
                        if(idx<e.length){
                            buf[buf.length]=e[idx]
                        }
                        
                    }
                    else{
                        buf=buf.concat(e)
                    }
                    
                }
                else{
                    if(idx==-1){
                        buf[buf.length]=e
                    }
                    
                }
                
            }
            stack[stack.length]=buf
        }
        cur=stack[stack.length-1]
    }
    return cur
};
jindo.$Json.prototype.toString=function(){
    if(window.JSON&&window.JSON.stringify){
        jindo.$Json.prototype.toString=function(){
            try{
                return window.JSON.stringify(this._object)
            }
            catch(e){
                return jindo.$Json._oldToString(this._object)
            }
            
        }
        
    }
    else{
        jindo.$Json.prototype.toString=function(){
            return jindo.$Json._oldToString(this._object)
        }
        
    }
    return this.toString()
};
jindo.$Json._oldToString=function(oObj){
    var func={
        $:function($){
            if(typeof $=="object"&&$==null){
                return"null"
            }
            if(typeof $=="undefined"){
                return'""'
            }
            if(typeof $=="boolean"){
                return $?"true":"false"
            }
            if(typeof $=="string"){
                return this.s($)
            }
            if(typeof $=="number"){
                return $
            }
            if($ instanceof Array){
                return this.a($)
            }
            if($ instanceof Object){
                return this.o($)
            }
            
        }
        ,s:function(s){
            var e={
                '"':'\\"',"\\":"\\\\","\n":"\\n","\r":"\\r","\t":"\\t"
            };
            var c=function(m){
                return(typeof e[m]!="undefined")?e[m]:m
            };
            return'"'+s.replace(/[\\"'\n\r\t]/g,c)+'"'
        }
        ,a:function(a){
            var s="[",c="",n=a.length;
            for(var i=0;
            i<n;
            i++){
                if(typeof a[i]=="function"){
                    continue
                }
                s+=c+this.$(a[i]);
                if(!c){
                    c=","
                }
                
            }
            return s+"]"
        }
        ,o:function(o){
            o=jindo.$H(o).ksort().$value();
            var s="{",c="";
            for(var x in o){
                if(o.hasOwnProperty(x)){
                    if(typeof o[x]=="function"){
                        continue
                    }
                    s+=c+this.s(x)+":"+this.$(o[x]);
                    if(!c){
                        c=","
                    }
                    
                }
                
            }
            return s+"}"
        }
        
    };
    return func.$(oObj)
};
jindo.$Json.prototype.toXML=function(){
    var f=function($,tag){
        var t=function(s,at){
            return"<"+tag+(at||"")+">"+s+"</"+tag+">"
        };
        switch(typeof $){
            case"undefined":case"null":return t("");
            case"number":return t($);
            case"string":if($.indexOf("<")<0){
                return t($.replace(/&/g,"&amp;"))
            }
            else{
                return t("<![CDATA["+$+"]]>")
            }
            case"boolean":return t(String($));
            case"object":var ret="";
            if($ instanceof Array){
                var len=$.length;
                for(var i=0;
                i<len;
                i++){
                    ret+=f($[i],tag)
                }
                
            }
            else{
                var at="";
                for(var x in $){
                    if($.hasOwnProperty(x)){
                        if(x=="$cdata"||typeof $[x]=="function"){
                            continue
                        }
                        ret+=f($[x],x)
                    }
                    
                }
                if(tag){
                    ret=t(ret,at)
                }
                
            }
            return ret
        }
        
    };
    return f(this._object,"")
};
jindo.$Json.prototype.toObject=function(){
    return this._object
};
jindo.$Json.prototype.compare=function(oData){
    return jindo.$Json._oldToString(this._object).toString()==jindo.$Json._oldToString(jindo.$Json(oData).$value()).toString()
};
jindo.$Json.prototype.$value=jindo.$Json.prototype.toObject;
jindo.$Cookie=function(){
    var cl=arguments.callee;
    var cached=cl._cached;
    if(cl._cached){
        return cl._cached
    }
    if(!(this instanceof cl)){
        return new cl
    }
    if(typeof cl._cached=="undefined"){
        cl._cached=this
    }
    
};
jindo.$Cookie.prototype.keys=function(){
    var ca=document.cookie.split(";");
    var re=/^\s+|\s+$/g;
    var a=new Array;
    for(var i=0;
    i<ca.length;
    i++){
        a[a.length]=ca[i].substr(0,ca[i].indexOf("=")).replace(re,"")
    }
    return a
};
jindo.$Cookie.prototype.get=function(sName){
    var ca=document.cookie.split(/\s*;\s*/);
    var re=new RegExp("^(\\s*"+sName+"\\s*=)");
    for(var i=0;
    i<ca.length;
    i++){
        if(re.test(ca[i])){
            return unescape(ca[i].substr(RegExp.$1.length))
        }
        
    }
    return null
};
jindo.$Cookie.prototype.set=function(sName,sValue,nDays,sDomain,sPath){
    var sExpire="";
    if(typeof nDays=="number"){
        sExpire=";expires="+(new Date((new Date()).getTime()+nDays*1000*60*60*24)).toGMTString()
    }
    if(typeof sDomain=="undefined"){
        sDomain=""
    }
    if(typeof sPath=="undefined"){
        sPath="/"
    }
    document.cookie=sName+"="+escape(sValue)+sExpire+"; path="+sPath+(sDomain?"; domain="+sDomain:"");
    return this
};
jindo.$Cookie.prototype.remove=function(sName,sDomain,sPath){
    if(this.get(sName)!=null){
        this.set(sName,"",-1,sDomain,sPath)
    }
    return this
};
jindo.$Element=function(el){
    var cl=arguments.callee;
    if(el&&el instanceof cl){
        return el
    }
    if(el===null||typeof el=="undefined"){
        return null
    }
    else{
        el=jindo.$(el);
        if(el===null){
            return null
        }
        
    }
    if(!(this instanceof cl)){
        return new cl(el)
    }
    this._element=(typeof el=="string")?jindo.$(el):el;
    var tag=this._element.tagName;
    this.tag=(typeof tag!="undefined")?tag.toLowerCase():""
};
var _j_ag=navigator.userAgent;
var IS_IE=_j_ag.indexOf("MSIE")>-1;
var IS_FF=_j_ag.indexOf("Firefox")>-1;
var IS_OP=_j_ag.indexOf("Opera")>-1;
var IS_SF=_j_ag.indexOf("Apple")>-1;
var IS_CH=_j_ag.indexOf("Chrome")>-1;
jindo.$Element.prototype.$value=function(){
    return this._element
};
jindo.$Element.prototype.visible=function(bVisible,sDisplay){
    if(typeof bVisible!="undefined"){
        this[bVisible?"show":"hide"](sDisplay);
        return this
    }
    return(this.css("display")!="none")
};
jindo.$Element.prototype.show=function(sDisplay){
    var s=this._element.style;
    var b="block";
    var c={
        p:b,div:b,form:b,h1:b,h2:b,h3:b,h4:b,ol:b,ul:b,fieldset:b,td:"table-cell",th:"table-cell",li:"list-item",table:"table",thead:"table-header-group",tbody:"table-row-group",tfoot:"table-footer-group",tr:"table-row",col:"table-column",colgroup:"table-column-group",caption:"table-caption",dl:b,dt:b,dd:b
    };
    try{
        if(sDisplay){
            s.display=sDisplay
        }
        else{
            var type=c[this.tag];
            s.display=type||"inline"
        }
        
    }
    catch(e){
        s.display="block"
    }
    return this
};
jindo.$Element.prototype.hide=function(){
    this._element.style.display="none";
    return this
};
jindo.$Element.prototype.toggle=function(sDisplay){
    this[this.visible()?"hide":"show"](sDisplay);
    return this
};
jindo.$Element.prototype.opacity=function(value){
    var v,e=this._element,b=(this._getCss(e,"display")!="none");
    value=parseFloat(value);
    e.style.zoom=1;
    if(!isNaN(value)){
        value=Math.max(Math.min(value,1),0);
        if(typeof e.filters!="undefined"){
            value=Math.ceil(value*100);
            if(typeof e.filters!="unknown"&&typeof e.filters.alpha!="undefined"){
                e.filters.alpha.opacity=value
            }
            else{
                e.style.filter=(e.style.filter+" alpha(opacity="+value+")")
            }
            
        }
        else{
            e.style.opacity=value
        }
        return value
    }
    if(typeof e.filters!="undefined"){
        v=(typeof e.filters.alpha=="undefined")?(b?100:0):e.filters.alpha.opacity;
        v=v/100
    }
    else{
        v=parseFloat(e.style.opacity);
        if(isNaN(v)){
            v=b?1:0
        }
        
    }
    return v
};
jindo.$Element.prototype.css=function(sName,sValue){
    var e=this._element;
    var type_v=(typeof sValue);
    if(sName=="opacity"){
        return type_v=="undefined"?this.opacity():this.opacity(sValue)
    }
    var type_n=(typeof sName);
    if(type_n=="string"){
        var view;
        if(type_v=="string"||type_v=="number"){
            var obj={};
            obj[sName]=sValue;
            sName=obj
        }
        else{
            var _getCss=this._getCss;
            if((IS_FF||IS_OP)&&(sName=="backgroundPositionX"||sName=="backgroundPositionY")){
                var bp=_getCss(e,"backgroundPosition").split(/\s+/);
                return(sName=="backgroundPositionX")?bp[0]:bp[1]
            }
            if(IS_IE&&sName=="backgroundPosition"){
                return _getCss(e,"backgroundPositionX")+" "+_getCss(e,"backgroundPositionY")
            }
            if((IS_FF||IS_SF||IS_CH)&&(sName=="padding"||sName=="margin")){
                var top=_getCss(e,sName+"Top");
                var right=_getCss(e,sName+"Right");
                var bottom=_getCss(e,sName+"Bottom");
                var left=_getCss(e,sName+"Left");
                if((top==right)&&(bottom==left)){
                    return top
                }
                else{
                    if(top==bottom){
                        if(right==left){
                            return top+" "+right
                        }
                        else{
                            return top+" "+right+" "+bottom+" "+left
                        }
                        
                    }
                    else{
                        return top+" "+right+" "+bottom+" "+left
                    }
                    
                }
                
            }
            return _getCss(e,sName)
        }
        
    }
    var h=jindo.$H;
    if(typeof h!="undefined"&&sName instanceof h){
        sName=sName._table
    }
    if(typeof sName=="object"){
        var v,type;
        for(var k in sName){
            if(sName.hasOwnProperty(k)){
                v=sName[k];
                type=(typeof v);
                if(type!="string"&&type!="number"){
                    continue
                }
                if(k=="opacity"){
                    type=="undefined"?this.opacity():this.opacity(v);
                    continue
                }
                if(k=="cssFloat"&&IS_IE){
                    k="styleFloat"
                }
                if((IS_FF||IS_OP)&&(k=="backgroundPositionX"||k=="backgroundPositionY")){
                    var bp=this.css("backgroundPosition").split(/\s+/);
                    v=k=="backgroundPositionX"?v+" "+bp[1]:bp[0]+" "+v;
                    this._setCss(e,"backgroundPosition",v)
                }
                else{
                    this._setCss(e,k,v)
                }
                
            }
            
        }
        
    }
    return this
};
jindo.$Element.prototype._getCss=function(e,sName){
    var fpGetCss;
    if(e.currentStyle){
        fpGetCss=function(e,sName){
            try{
                if(sName=="cssFloat"){
                    sName="styleFloat"
                }
                var sStyle=e.style[sName];
                if(sStyle){
                    return sStyle
                }
                else{
                    var oCurrentStyle=e.currentStyle;
                    if(oCurrentStyle){
                        return oCurrentStyle[sName]
                    }
                    
                }
                return sStyle
            }
            catch(ex){
                throw new Error((e.tagName||"document")+"는 css를 사용 할수 없습니다.")
            }
            
        }
        
    }
    else{
        if(window.getComputedStyle){
            fpGetCss=function(e,sName){
                try{
                    if(sName=="cssFloat"){
                        sName="float"
                    }
                    var d=e.ownerDocument||e.document||document;
                    var sVal=(e.style[sName]||d.defaultView.getComputedStyle(e,null).getPropertyValue(sName.replace(/([A-Z])/g,"-$1").toLowerCase()));
                    if(sName=="textDecoration"){
                        sVal=sVal.replace(",","")
                    }
                    return sVal
                }
                catch(ex){
                    throw new Error((e.tagName||"document")+"는 css를 사용 할수 없습니다.")
                }
                
            }
            
        }
        else{
            fpGetCss=function(e,sName){
                try{
                    if(sName=="cssFloat"&&IS_IE){
                        sName="styleFloat"
                    }
                    return e.style[sName]
                }
                catch(ex){
                    throw new Error((e.tagName||"document")+"는 css를 사용 할수 없습니다.")
                }
                
            }
            
        }
        
    }
    jindo.$Element.prototype._getCss=fpGetCss;
    return fpGetCss(e,sName)
};
jindo.$Element.prototype._setCss=function(e,k,v){
    if(("#top#left#right#bottom#").indexOf(k+"#")>0&&(typeof v=="number"||(/\d$/.test(v)))){
        e.style[k]=parseInt(v)+"px"
    }
    else{
        e.style[k]=v
    }
    
};
jindo.$Element.prototype.attr=function(sName,sValue){
    var e=this._element;
    if(typeof sName=="string"){
        if(typeof sValue!="undefined"){
            var obj={};
            obj[sName]=sValue;
            sName=obj
        }
        else{
            if(sName=="class"||sName=="className"){
                return e.className
            }
            else{
                if(sName=="style"){
                    return e.style.cssText
                }
                else{
                    if(sName=="checked"||sName=="disabled"){
                        return !!e[sName]
                    }
                    else{
                        if(sName=="value"){
                            return e.value
                        }
                        
                    }
                    
                }
                
            }
            return e.getAttribute(sName)
        }
        
    }
    if(typeof jindo.$H!="undefined"&&sName instanceof jindo.$H){
        sName=sName.$value()
    }
    if(typeof sName=="object"){
        for(var k in sName){
            if(sName.hasOwnProperty(k)){
                if(typeof(sValue)!="undefined"&&sValue===null){
                    e.removeAttribute(k)
                }
                else{
                    if(k=="class"||k=="className"){
                        e.className=sName[k]
                    }
                    else{
                        if(k=="style"){
                            e.style.cssText=sName[k]
                        }
                        else{
                            if(k=="checked"||k=="disabled"){
                                e[k]=sName[k]
                            }
                            else{
                                if(k=="value"){
                                    e.value=sName[k]
                                }
                                else{
                                    e.setAttribute(k,sName[k])
                                }
                                
                            }
                            
                        }
                        
                    }
                    
                }
                
            }
            
        }
        
    }
    return this
};
jindo.$Element.prototype.width=function(width){
    if(typeof width=="number"){
        var e=this._element;
        e.style.width=width+"px";
        var off=e.offsetWidth;
        if(off!=width){
            var w=(width*2-off);
            if(w>0){
                e.style.width=w+"px"
            }
            
        }
        return this
    }
    return this._element.offsetWidth
};
jindo.$Element.prototype.height=function(height){
    if(typeof height=="number"){
        var e=this._element;
        e.style.height=height+"px";
        var off=e.offsetHeight;
        if(off!=height){
            var height=(height*2-off);
            if(height>0){
                e.style.height=height+"px"
            }
            
        }
        return this
    }
    return this._element.offsetHeight
};
jindo.$Element.prototype.className=function(sClass){
    var e=this._element;
    if(typeof sClass=="undefined"){
        return e.className
    }
    e.className=sClass;
    return this
};
jindo.$Element.prototype.hasClass=function(sClass){
    if(this._element.classList){
        jindo.$Element.prototype.hasClass=function(sClass){
            return this._element.classList.contains(sClass)
        }
        
    }
    else{
        jindo.$Element.prototype.hasClass=function(sClass){
            return(" "+this._element.className+" ").indexOf(" "+sClass+" ")>-1
        }
        
    }
    return this.hasClass(sClass)
};
jindo.$Element.prototype.addClass=function(sClass){
    if(this._element.classList){
        jindo.$Element.prototype.addClass=function(sClass){
            var aClass=sClass.split(/\s+/);
            var flistApi=this._element.classList;
            for(var i=aClass.length;
            i--;
            ){
                flistApi.add(aClass[i])
            }
            return this
        }
        
    }
    else{
        jindo.$Element.prototype.addClass=function(sClass){
            var e=this._element;
            var aClass=sClass.split(/\s+/);
            var eachClass;
            for(var i=aClass.length-1;
            i>=0;
            i--){
                eachClass=aClass[i];
                if(!this.hasClass(eachClass)){
                    e.className=(e.className+" "+eachClass).replace(/^\s+/,"")
                }
                
            }
            return this
        }
        
    }
    return this.addClass(sClass)
};
jindo.$Element.prototype.removeClass=function(sClass){
    if(this._element.classList){
        jindo.$Element.prototype.removeClass=function(sClass){
            var flistApi=this._element.classList;
            var aClass=sClass.split(" ");
            for(var i=aClass.length;
            i--;
            ){
                flistApi.remove(aClass[i])
            }
            return this
        }
        
    }
    else{
        jindo.$Element.prototype.removeClass=function(sClass){
            var e=this._element;
            var aClass=sClass.split(/\s+/);
            var eachClass;
            for(var i=aClass.length-1;
            i>=0;
            i--){
                eachClass=aClass[i];
                if(this.hasClass(eachClass)){
                    e.className=(" "+e.className.replace(/\s+$/,"").replace(/^\s+/,"")+" ").replace(" "+eachClass+" "," ").replace(/\s+$/,"").replace(/^\s+/,"")
                }
                
            }
            return this
        }
        
    }
    return this.removeClass(sClass)
};
jindo.$Element.prototype.toggleClass=function(sClass,sClass2){
    if(this._element.classList){
        jindo.$Element.prototype.toggleClass=function(sClass,sClass2){
            if(typeof sClass2=="undefined"){
                this._element.classList.toggle(sClass)
            }
            else{
                if(this.hasClass(sClass)){
                    this.removeClass(sClass);
                    this.addClass(sClass2)
                }
                else{
                    this.addClass(sClass);
                    this.removeClass(sClass2)
                }
                
            }
            return this
        }
        
    }
    else{
        jindo.$Element.prototype.toggleClass=function(sClass,sClass2){
            sClass2=sClass2||"";
            if(this.hasClass(sClass)){
                this.removeClass(sClass);
                if(sClass2){
                    this.addClass(sClass2)
                }
                
            }
            else{
                this.addClass(sClass);
                if(sClass2){
                    this.removeClass(sClass2)
                }
                
            }
            return this
        }
        
    }
    return this.toggleClass(sClass,sClass2)
};
jindo.$Element.prototype.text=function(sText){
    var ele=this._element;
    var tag=this.tag;
    var prop=(typeof ele.innerText!="undefined")?"innerText":"textContent";
    if(tag=="textarea"||tag=="input"){
        prop="value"
    }
    var type=(typeof sText);
    if(type!="undefined"&&(type=="string"||type=="number"||type=="boolean")){
        sText+="";
        try{
            if(prop!="value"){
                prop=(typeof ele.textContent!="undefined")?"textContent":"innerText"
            }
            ele[prop]=sText
        }
        catch(e){
            return this.html(sText.replace(/&/g,"&amp;").replace(/</g,"&lt;"))
        }
        return this
    }
    return ele[prop]
};
jindo.$Element.prototype.html=function(sHTML){
    var isIe=IS_IE;
    var isFF=IS_FF;
    if(isIe){
        jindo.$Element.prototype.html=function(sHTML){
            if(typeof sHTML!="undefined"&&arguments.length){
                sHTML+="";
                jindo.$$.release();
                var oEl=this._element;
                while(oEl.firstChild){
                    oEl.removeChild(oEl.firstChild)
                }
                var sId="R"+new Date().getTime()+parseInt(Math.random()*100000);
                var oDoc=oEl.ownerDocument||oEl.document||document;
                var oDummy;
                var sTag=oEl.tagName.toLowerCase();
                switch(sTag){
                    case"select":case"table":oDummy=oDoc.createElement("div");
                    oDummy.innerHTML="<"+sTag+' class="'+sId+'">'+sHTML+"</"+sTag+">";
                    break;
                    case"tr":case"thead":case"tbody":oDummy=oDoc.createElement("div");
                    oDummy.innerHTML="<table><"+sTag+' class="'+sId+'">'+sHTML+"</"+sTag+"></table>";
                    break;
                    default:oEl.innerHTML=sHTML;
                    break
                }
                if(oDummy){
                    var oFound;
                    for(oFound=oDummy.firstChild;
                    oFound;
                    oFound=oFound.firstChild){
                        if(oFound.className==sId){
                            break
                        }
                        
                    }
                    if(oFound){
                        var notYetSelected=true;
                        for(var oChild;
                        oChild=oEl.firstChild;
                        ){
                            oChild.removeNode(true)
                        }
                        for(var oChild=oFound.firstChild;
                        oChild;
                        oChild=oFound.firstChild){
                            if(sTag=="select"){
                                var cloneNode=oChild.cloneNode(true);
                                if(oChild.selected&&notYetSelected){
                                    notYetSelected=false;
                                    cloneNode.selected=true
                                }
                                oEl.appendChild(cloneNode);
                                oChild.removeNode(true)
                            }
                            else{
                                oEl.appendChild(oChild)
                            }
                            
                        }
                        oDummy.removeNode&&oDummy.removeNode(true)
                    }
                    oDummy=null
                }
                return this
            }
            return this._element.innerHTML
        }
        
    }
    else{
        if(isFF){
            jindo.$Element.prototype.html=function(sHTML){
                if(typeof sHTML!="undefined"&&arguments.length){
                    sHTML+="";
                    var oEl=this._element;
                    if(!oEl.parentNode){
                        var sId="R"+new Date().getTime()+parseInt(Math.random()*100000);
                        var oDoc=oEl.ownerDocument||oEl.document||document;
                        var oDummy;
                        var sTag=oEl.tagName.toLowerCase();
                        switch(sTag){
                            case"select":case"table":oDummy=oDoc.createElement("div");
                            oDummy.innerHTML="<"+sTag+' class="'+sId+'">'+sHTML+"</"+sTag+">";
                            break;
                            case"tr":case"thead":case"tbody":oDummy=oDoc.createElement("div");
                            oDummy.innerHTML="<table><"+sTag+' class="'+sId+'">'+sHTML+"</"+sTag+"></table>";
                            break;
                            default:oEl.innerHTML=sHTML;
                            break
                        }
                        if(oDummy){
                            var oFound;
                            for(oFound=oDummy.firstChild;
                            oFound;
                            oFound=oFound.firstChild){
                                if(oFound.className==sId){
                                    break
                                }
                                
                            }
                            if(oFound){
                                for(var oChild;
                                oChild=oEl.firstChild;
                                ){
                                    oChild.removeNode(true)
                                }
                                for(var oChild=oFound.firstChild;
                                oChild;
                                oChild=oFound.firstChild){
                                    oEl.appendChild(oChild)
                                }
                                oDummy.removeNode&&oDummy.removeNode(true)
                            }
                            oDummy=null
                        }
                        
                    }
                    else{
                        oEl.innerHTML=sHTML
                    }
                    return this
                }
                return this._element.innerHTML
            }
            
        }
        else{
            jindo.$Element.prototype.html=function(sHTML){
                if(typeof sHTML!="undefined"&&arguments.length){
                    sHTML+="";
                    var oEl=this._element;
                    oEl.innerHTML=sHTML;
                    return this
                }
                return this._element.innerHTML
            }
            
        }
        
    }
    return this.html(sHTML)
};
jindo.$Element.prototype.outerHTML=function(){
    var e=this._element;
    if(typeof e.outerHTML!="undefined"){
        return e.outerHTML
    }
    var oDoc=e.ownerDocument||e.document||document;
    var div=oDoc.createElement("div");
    var par=e.parentNode;
    if(!par){
        return e.innerHTML
    }
    par.insertBefore(div,e);
    div.style.display="none";
    div.appendChild(e);
    var s=div.innerHTML;
    par.insertBefore(e,div);
    par.removeChild(div);
    return s
};
jindo.$Element.prototype.toString=jindo.$Element.prototype.outerHTML;
jindo.$Element._getTransition=function(){
    var hasTransition=false,sTransitionName="";
    if(typeof document.body.style.trasition!="undefined"){
        hasTransition=true;
        sTransitionName="trasition"
    }
    else{
        if(typeof document.body.style.webkitTransition!=="undefined"){
            hasTransition=true;
            sTransitionName="webkitTransition"
        }
        else{
            if(typeof document.body.style.OTransition!=="undefined"){
                hasTransition=true;
                sTransitionName="OTransition"
            }
            
        }
        
    }
    return(jindo.$Element._getTransition=function(){
        return{
            hasTransition:hasTransition,name:sTransitionName
        }
        
    })()
};
jindo.$Element.prototype.appear=function(duration,callback){
    var oTransition=jindo.$Element._getTransition();
    if(oTransition.hasTransition){
        jindo.$Element.prototype.appear=function(duration,callback){
            duration=duration||0.3;
            callback=callback||function(){};
            var bindFunc=function(){
                callback();
                this.show();
                this.removeEventListener(oTransition.name+"End",arguments.callee,false)
            };
            var ele=this._element;
            var self=this;
            if(!this.visible()){
                ele.style.opacity=ele.style.opacity||0;
                self.show()
            }
            ele.addEventListener(oTransition.name+"End",bindFunc,false);
            ele.style[oTransition.name+"Property"]="opacity";
            ele.style[oTransition.name+"Duration"]=duration+"s";
            ele.style[oTransition.name+"TimingFunction"]="linear";
            setTimeout(function(){
                ele.style.opacity="1"
            }
            ,1);
            return this
        }
        
    }
    else{
        jindo.$Element.prototype.appear=function(duration,callback){
            var self=this;
            var op=this.opacity();
            if(!this.visible()){
                op=0
            }
            if(op==1){
                return this
            }
            try{
                clearTimeout(this._fade_timer)
            }
            catch(e){}callback=callback||function(){};
            var step=(1-op)/((duration||0.3)*100);
            var func=function(){
                op+=step;
                self.opacity(op);
                if(op>=1){
                    callback(self)
                }
                else{
                    self._fade_timer=setTimeout(func,10)
                }
                
            };
            this.show();
            func();
            return this
        }
        
    }
    return this.appear(duration,callback)
};
jindo.$Element.prototype.disappear=function(duration,callback){
    var oTransition=jindo.$Element._getTransition();
    if(oTransition.hasTransition){
        jindo.$Element.prototype.disappear=function(duration,callback){
            duration=duration||0.3;
            var self=this;
            callback=callback||function(){};
            var bindFunc=function(){
                callback();
                this.removeEventListener(oTransition.name+"End",arguments.callee,false);
                self.hide()
            };
            var ele=this._element;
            ele.addEventListener(oTransition.name+"End",bindFunc,false);
            ele.style[oTransition.name+"Property"]="opacity";
            ele.style[oTransition.name+"Duration"]=duration+"s";
            ele.style[oTransition.name+"TimingFunction"]="linear";
            setTimeout(function(){
                ele.style.opacity="0"
            }
            ,1);
            return this
        }
        
    }
    else{
        jindo.$Element.prototype.disappear=function(duration,callback){
            var self=this;
            var op=this.opacity();
            if(op==0){
                return this
            }
            try{
                clearTimeout(this._fade_timer)
            }
            catch(e){}callback=callback||function(){};
            var step=op/((duration||0.3)*100);
            var func=function(){
                op-=step;
                self.opacity(op);
                if(op<=0){
                    self.hide();
                    self.opacity(1);
                    callback(self)
                }
                else{
                    self._fade_timer=setTimeout(func,10)
                }
                
            };
            func();
            return this
        }
        
    }
    return this.disappear(duration,callback)
};
jindo.$Element.prototype.offset=function(nTop,nLeft){
    var oEl=this._element;
    var oPhantom=null;
    if(typeof nTop=="number"&&typeof nLeft=="number"){
        if(isNaN(parseInt())){
            this.css("top",0)
        }
        if(isNaN(parseInt(this.css("left")))){
            this.css("left",0)
        }
        var oPos=this.offset();
        var oGap={
            top:nTop-oPos.top,left:nLeft-oPos.left
        };
        oEl.style.top=parseInt(this.css("top"))+oGap.top+"px";
        oEl.style.left=parseInt(this.css("left"))+oGap.left+"px";
        return this
    }
    var bSafari=/Safari/.test(navigator.userAgent);
    var bIE=/MSIE/.test(navigator.userAgent);
    var nVer=bIE?navigator.userAgent.match(/(?:MSIE) ([0-9.]+)/)[1]:0;
    var fpSafari=function(oEl){
        var oPos={
            left:0,top:0
        };
        for(var oParent=oEl,oOffsetParent=oParent.offsetParent;
        oParent=oParent.parentNode;
        ){
            if(oParent.offsetParent){
                oPos.left-=oParent.scrollLeft;
                oPos.top-=oParent.scrollTop
            }
            if(oParent==oOffsetParent){
                oPos.left+=oEl.offsetLeft+oParent.clientLeft;
                oPos.top+=oEl.offsetTop+oParent.clientTop;
                if(!oParent.offsetParent){
                    oPos.left+=oParent.offsetLeft;
                    oPos.top+=oParent.offsetTop
                }
                oOffsetParent=oParent.offsetParent;
                oEl=oParent
            }
            
        }
        return oPos
    };
    var fpOthers=function(oEl){
        var oPos={
            left:0,top:0
        };
        var oDoc=oEl.ownerDocument||oEl.document||document;
        var oHtml=oDoc.documentElement;
        var oBody=oDoc.body;
        if(oEl.getBoundingClientRect){
            if(!oPhantom){
                var bHasFrameBorder=(window==top);
                if(!bHasFrameBorder){
                    try{
                        bHasFrameBorder=(window.frameElement&&window.frameElement.frameBorder==1)
                    }
                    catch(e){}
                }
                if((bIE&&nVer<8&&window.external)&&bHasFrameBorder){
                    oPhantom={
                        left:2,top:2
                    };
                    oBase=null
                }
                else{
                    oPhantom={
                        left:0,top:0
                    }
                    
                }
                
            }
            var box=oEl.getBoundingClientRect();
            if(oEl!==oHtml&&oEl!==oBody){
                oPos.left=box.left-oPhantom.left;
                oPos.top=box.top-oPhantom.top;
                oPos.left+=oHtml.scrollLeft||oBody.scrollLeft;
                oPos.top+=oHtml.scrollTop||oBody.scrollTop
            }
            
        }
        else{
            if(oDoc.getBoxObjectFor){
                var box=oDoc.getBoxObjectFor(oEl);
                var vpBox=oDoc.getBoxObjectFor(oHtml||oBody);
                oPos.left=box.screenX-vpBox.screenX;
                oPos.top=box.screenY-vpBox.screenY
            }
            else{
                for(var o=oEl;
                o;
                o=o.offsetParent){
                    oPos.left+=o.offsetLeft;
                    oPos.top+=o.offsetTop
                }
                for(var o=oEl.parentNode;
                o;
                o=o.parentNode){
                    if(o.tagName=="BODY"){
                        break
                    }
                    if(o.tagName=="TR"){
                        oPos.top+=2
                    }
                    oPos.left-=o.scrollLeft;
                    oPos.top-=o.scrollTop
                }
                
            }
            
        }
        return oPos
    };
    return(bSafari?fpSafari:fpOthers)(oEl)
};
jindo.$Element.prototype.evalScripts=function(sHTML){
    var aJS=[];
    sHTML=sHTML.replace(new RegExp("<script(\\s[^>]+)*>(.*?)<\/script>","gi"),function(_1,_2,sPart){
        aJS.push(sPart);
        return""
    });
    eval(aJS.join("\n"));
    return this
};
jindo.$Element._append=function(oParent,oChild){
    if(typeof oChild=="string"){
        oChild=jindo.$(oChild)
    }
    else{
        if(oChild instanceof jindo.$Element){
            oChild=oChild.$value()
        }
        
    }
    oParent._element.appendChild(oChild);
    return oParent
};
jindo.$Element._prepend=function(oParent,oChild){
    if(typeof oParent=="string"){
        oParent=jindo.$(oParent)
    }
    else{
        if(oParent instanceof jindo.$Element){
            oParent=oParent.$value()
        }
        
    }
    var nodes=oParent.childNodes;
    if(nodes.length>0){
        oParent.insertBefore(oChild._element,nodes[0])
    }
    else{
        oParent.appendChild(oChild._element)
    }
    return oChild
};
jindo.$Element.prototype.append=function(oElement){
    return jindo.$Element._append(this,oElement)
};
jindo.$Element.prototype.prepend=function(oElement){
    return jindo.$Element._prepend(this._element,jindo.$Element(oElement))
};
jindo.$Element.prototype.replace=function(oElement){
    jindo.$$.release();
    var e=this._element;
    var oParentNode=e.parentNode;
    var o=jindo.$Element(oElement);
    if(oParentNode&&oParentNode.replaceChild){
        oParentNode.replaceChild(o.$value(),e);
        return o
    }
    var o=o.$value();
    oParentNode.insertBefore(o,e);
    oParentNode.removeChild(e);
    return o
};
jindo.$Element.prototype.appendTo=function(oElement){
    var ele=jindo.$Element(oElement);
    jindo.$Element._append(ele,this._element);
    return ele
};
jindo.$Element.prototype.prependTo=function(oElement){
    jindo.$Element._prepend(oElement,this);
    return jindo.$Element(oElement)
};
jindo.$Element.prototype.before=function(oElement){
    var oRich=jindo.$Element(oElement);
    var o=oRich.$value();
    this._element.parentNode.insertBefore(o,this._element);
    return oRich
};
jindo.$Element.prototype.after=function(oElement){
    var o=this.before(oElement);
    o.before(this);
    return o
};
jindo.$Element.prototype.parent=function(pFunc,limit){
    var e=this._element;
    var a=[],p=null;
    if(typeof pFunc=="undefined"){
        return jindo.$Element(e.parentNode)
    }
    if(typeof limit=="undefined"||limit==0){
        limit=-1
    }
    while(e.parentNode&&limit--!=0){
        p=jindo.$Element(e.parentNode);
        if(e.parentNode==document.documentElement){
            break
        }
        if(!pFunc||(pFunc&&pFunc(p))){
            a[a.length]=p
        }
        e=e.parentNode
    }
    return a
};
jindo.$Element.prototype.child=function(pFunc,limit){
    var e=this._element;
    var a=[],c=null,f=null;
    if(typeof pFunc=="undefined"){
        return jindo.$A(e.childNodes).filter(function(v){
            return v.nodeType==1
        }).map(function(v){
            return jindo.$Element(v)
        }).$value()
    }
    if(typeof limit=="undefined"||limit==0){
        limit=-1
    }
    (f=function(el,lim){
        var ch=null,o=null;
        for(var i=0;
        i<el.childNodes.length;
        i++){
            ch=el.childNodes[i];
            if(ch.nodeType!=1){
                continue
            }
            o=jindo.$Element(el.childNodes[i]);
            if(!pFunc||(pFunc&&pFunc(o))){
                a[a.length]=o
            }
            if(lim!=0){
                f(el.childNodes[i],lim-1)
            }
            
        }
        
    })(e,limit-1);
    return a
};
jindo.$Element.prototype.prev=function(pFunc){
    var e=this._element;
    var a=[];
    var b=(typeof pFunc=="undefined");
    if(!e){
        return b?jindo.$Element(null):a
    }
    do{
        e=e.previousSibling;
        if(!e||e.nodeType!=1){
            continue
        }
        if(b){
            return jindo.$Element(e)
        }
        if(!pFunc||pFunc(e)){
            a[a.length]=jindo.$Element(e)
        }
        
    }
    while(e);
    return b?jindo.$Element(e):a
};
jindo.$Element.prototype.next=function(pFunc){
    var e=this._element;
    var a=[];
    var b=(typeof pFunc=="undefined");
    if(!e){
        return b?jindo.$Element(null):a
    }
    do{
        e=e.nextSibling;
        if(!e||e.nodeType!=1){
            continue
        }
        if(b){
            return jindo.$Element(e)
        }
        if(!pFunc||pFunc(e)){
            a[a.length]=jindo.$Element(e)
        }
        
    }
    while(e);
    return b?jindo.$Element(e):a
};
jindo.$Element.prototype.first=function(){
    var el=this._element.firstElementChild||this._element.firstChild;
    if(!el){
        return null
    }
    while(el&&el.nodeType!=1){
        el=el.nextSibling
    }
    return el?jindo.$Element(el):null
};
jindo.$Element.prototype.last=function(){
    var el=this._element.lastElementChild||this._element.lastChild;
    if(!el){
        return null
    }
    while(el&&el.nodeType!=1){
        el=el.previousSibling
    }
    return el?jindo.$Element(el):null
};
jindo.$Element.prototype.isChildOf=function(element){
    return jindo.$Element._contain(jindo.$Element(element).$value(),this._element)
};
jindo.$Element.prototype.isParentOf=function(element){
    return jindo.$Element._contain(this._element,jindo.$Element(element).$value())
};
jindo.$Element._contain=function(eParent,eChild){
    if(document.compareDocumentPosition){
        jindo.$Element._contain=function(eParent,eChild){
            return !!(eParent.compareDocumentPosition(eChild)&16)
        }
        
    }
    else{
        if(document.body.contains){
            jindo.$Element._contain=function(eParent,eChild){
                return(eParent!==eChild)&&(eParent.contains?eParent.contains(eChild):true)
            }
            
        }
        else{
            jindo.$Element._contain=function(eParent,eChild){
                var e=eParent;
                var el=eChild;
                while(e&&e.parentNode){
                    e=e.parentNode;
                    if(e==el){
                        return true
                    }
                    
                }
                return false
            }
            
        }
        
    }
    return jindo.$Element._contain(eParent,eChild)
};
jindo.$Element.prototype.isEqual=function(element){
    try{
        return(this._element===jindo.$Element(element).$value())
    }
    catch(e){
        return false
    }
    
};
jindo.$Element.prototype.fireEvent=function(sEvent,oProps){
    function IE(sEvent,oProps){
        sEvent=(sEvent+"").toLowerCase();
        var oEvent=document.createEventObject();
        if(oProps){
            for(k in oProps){
                if(oProps.hasOwnProperty(k)){
                    oEvent[k]=oProps[k]
                }
                
            }
            oEvent.button=(oProps.left?1:0)+(oProps.middle?4:0)+(oProps.right?2:0);
            oEvent.relatedTarget=oProps.relatedElement||null
        }
        this._element.fireEvent("on"+sEvent,oEvent);
        return this
    }
    function DOM2(sEvent,oProps){
        var sType="HTMLEvents";
        sEvent=(sEvent+"").toLowerCase();
        if(sEvent=="click"||sEvent.indexOf("mouse")==0){
            sType="MouseEvent";
            if(sEvent=="mousewheel"){
                sEvent="dommousescroll"
            }
            
        }
        else{
            if(sEvent.indexOf("key")==0){
                sType="KeyboardEvent"
            }
            
        }
        var evt;
        if(oProps){
            oProps.button=0+(oProps.middle?1:0)+(oProps.right?2:0);
            oProps.ctrl=oProps.ctrl||false;
            oProps.alt=oProps.alt||false;
            oProps.shift=oProps.shift||false;
            oProps.meta=oProps.meta||false;
            switch(sType){
                case"MouseEvent":evt=document.createEvent(sType);
                evt.initMouseEvent(sEvent,true,true,null,oProps.detail||0,oProps.screenX||0,oProps.screenY||0,oProps.clientX||0,oProps.clientY||0,oProps.ctrl,oProps.alt,oProps.shift,oProps.meta,oProps.button,oProps.relatedElement||null);
                break;
                case"KeyboardEvent":if(window.KeyEvent){
                    evt=document.createEvent("KeyEvents");
                    evt.initKeyEvent(sEvent,true,true,window,oProps.ctrl,oProps.alt,oProps.shift,oProps.meta,oProps.keyCode,oProps.keyCode)
                }
                else{
                    try{
                        evt=document.createEvent("Events")
                    }
                    catch(e){
                        evt=document.createEvent("UIEvents")
                    }
                    finally{
                        evt.initEvent(sEvent,true,true);
                        evt.ctrlKey=oProps.ctrl;
                        evt.altKey=oProps.alt;
                        evt.shiftKey=oProps.shift;
                        evt.metaKey=oProps.meta;
                        evt.keyCode=oProps.keyCode;
                        evt.which=oProps.keyCode
                    }
                    
                }
                break;
                default:evt=document.createEvent(sType);
                evt.initEvent(sEvent,true,true)
            }
            
        }
        else{
            evt=document.createEvent(sType);
            evt.initEvent(sEvent,true,true)
        }
        this._element.dispatchEvent(evt);
        return this
    }
    jindo.$Element.prototype.fireEvent=(typeof this._element.dispatchEvent!="undefined")?DOM2:IE;
    return this.fireEvent(sEvent,oProps)
};
jindo.$Element.prototype.empty=function(){
    jindo.$$.release();
    this.html("");
    return this
};
jindo.$Element.prototype.remove=function(oChild){
    jindo.$$.release();
    jindo.$Element(oChild).leave();
    return this
};
jindo.$Element.prototype.leave=function(){
    var e=this._element;
    if(e.parentNode){
        jindo.$$.release();
        e.parentNode.removeChild(e)
    }
    jindo.$Fn.freeElement(this._element);
    return this
};
jindo.$Element.prototype.wrap=function(wrapper){
    var e=this._element;
    wrapper=jindo.$Element(wrapper).$value();
    if(e.parentNode){
        e.parentNode.insertBefore(wrapper,e)
    }
    wrapper.appendChild(e);
    return this
};
jindo.$Element.prototype.ellipsis=function(stringTail){
    stringTail=stringTail||"...";
    var txt=this.text();
    var len=txt.length;
    var padding=parseInt(this.css("paddingTop"))+parseInt(this.css("paddingBottom"));
    var cur_h=this.height()-padding;
    var i=0;
    var h=this.text("A").height()-padding;
    if(cur_h<h*1.5){
        return this.text(txt)
    }
    cur_h=h;
    while(cur_h<h*1.5){
        i+=Math.max(Math.ceil((len-i)/2),1);
        cur_h=this.text(txt.substring(0,i)+stringTail).height()-padding
    }
    while(cur_h>h*1.5){
        i--;
        cur_h=this.text(txt.substring(0,i)+stringTail).height()-padding
    }
    
};
jindo.$Element.prototype.indexOf=function(element){
    try{
        var e=jindo.$Element(element).$value();
        var n=this._element.childNodes;
        var c=0;
        var l=n.length;
        for(var i=0;
        i<l;
        i++){
            if(n[i].nodeType!=1){
                continue
            }
            if(n[i]===e){
                return c
            }
            c++
        }
        
    }
    catch(e){}return -1
};
jindo.$Element.prototype.queryAll=function(sSelector){
    return jindo.$$(sSelector,this._element)
};
jindo.$Element.prototype.query=function(sSelector){
    return jindo.$$.getSingle(sSelector,this._element)
};
jindo.$Element.prototype.test=function(sSelector){
    return jindo.$$.test(this._element,sSelector)
};
jindo.$Element.prototype.xpathAll=function(sXPath){
    return jindo.$$.xpath(sXPath,this._element)
};
jindo.$Element.insertAdjacentHTML=function(ins,html,insertType,type,fn){
    var _ele=ins._element;
    if(_ele.insertAdjacentHTML&&!(/^<(option|tr|td|th)>/.test(html.replace(/^(\s|　)+|(\s|　)+$/g,"").toLowerCase()))){
        _ele.insertAdjacentHTML(insertType,html)
    }
    else{
        var oDoc=_ele.ownerDocument||_ele.document||document;
        var fragment=oDoc.createDocumentFragment();
        var defaultElement;
        var sTag=html.replace(/^(\s|　)+|(\s|　)+$/g,"");
        var oParentTag={
            option:"select",tr:"tbody",thead:"table",tbody:"table",td:"tr",th:"tr",div:"div"
        };
        var aMatch=/^\<(option|tr|thead|tbody|td|th)\>/i.exec(sTag);
        var sChild=aMatch===null?"div":aMatch[1].toLowerCase();
        var sParent=oParentTag[sChild];
        defaultElement=jindo._createEle(sParent,sTag,oDoc,true);
        var scripts=defaultElement.getElementsByTagName("script");
        for(var i=0,l=scripts.length;
        i<l;
        i++){
            scripts[i].parentNode.removeChild(scripts[i])
        }
        while(defaultElement[type]){
            fragment.appendChild(defaultElement[type])
        }
        fn(fragment.cloneNode(true))
    }
    return ins
};
jindo.$Element.prototype.appendHTML=function(sHTML){
    return jindo.$Element.insertAdjacentHTML(this,sHTML,"beforeEnd","firstChild",jindo.$Fn(function(oEle){
        this.append(oEle)
    }
    ,this).bind())
};
jindo.$Element.prototype.prependHTML=function(sHTML){
    return jindo.$Element.insertAdjacentHTML(this,sHTML,"afterBegin","lastChild",jindo.$Fn(function(oEle){
        this.prepend(oEle)
    }
    ,this).bind())
};
jindo.$Element.prototype.beforeHTML=function(sHTML){
    return jindo.$Element.insertAdjacentHTML(this,sHTML,"beforeBegin","firstChild",jindo.$Fn(function(oEle){
        this.before(oEle)
    }
    ,this).bind())
};
jindo.$Element.prototype.afterHTML=function(sHTML){
    return jindo.$Element.insertAdjacentHTML(this,sHTML,"afterEnd","lastChild",jindo.$Fn(function(oEle){
        this._element.parentNode.insertBefore(oEle,this._element.nextSibling)
    }
    ,this).bind())
};
jindo.$Element.prototype.delegate=function(sEvent,vFilter,fpCallback){
    if(!this._element["_delegate_"+sEvent]){
        this._element["_delegate_"+sEvent]={};
        var fAroundFunc=jindo.$Fn(function(sEvent,wEvent){
            wEvent=wEvent||window.event;
            if(typeof wEvent.currentTarget=="undefined"){
                wEvent.currentTarget=this._element
            }
            var oEle=wEvent.target||wEvent.srcElement;
            var aData=this._element["_delegate_"+sEvent];
            var data,func,event,resultFilter;
            for(var i in aData){
                data=aData[i];
                resultFilter=data.checker(oEle);
                if(resultFilter[0]){
                    func=data.func;
                    event=jindo.$Event(wEvent);
                    event.element=resultFilter[1];
                    for(var j=0,l=func.length;
                    j<l;
                    j++){
                        func[j](event)
                    }
                    
                }
                
            }
            
        }
        ,this).bind(sEvent);
        jindo.$Element._eventBind(this._element,sEvent,fAroundFunc);
        var oEle=this._element;
        oEle["_delegate_"+sEvent+"_func"]=fAroundFunc;
        if(this._element._delegate_events){
            this._element._delegate_events.push(sEvent)
        }
        else{
            this._element._delegate_events=[sEvent]
        }
        oEle=null
    }
    this._bind(sEvent,vFilter,fpCallback);
    return this
};
jindo.$Element._eventBind=function(oEle,sEvent,fAroundFunc){
    if(oEle.addEventListener){
        jindo.$Element._eventBind=function(oEle,sEvent,fAroundFunc){
            oEle.addEventListener(sEvent,fAroundFunc,false)
        }
        
    }
    else{
        jindo.$Element._eventBind=function(oEle,sEvent,fAroundFunc){
            oEle.attachEvent("on"+sEvent,fAroundFunc)
        }
        
    }
    jindo.$Element._eventBind(oEle,sEvent,fAroundFunc)
};
jindo.$Element.prototype.undelegate=function(sEvent,vFilter,fpCallback){
    this._unbind(sEvent,vFilter,fpCallback);
    return this
};
jindo.$Element.prototype._bind=function(sEvent,vFilter,fpCallback){
    var _aDataOfEvent=this._element["_delegate_"+sEvent];
    if(_aDataOfEvent){
        var fpCheck;
        if(typeof vFilter=="string"){
            fpCheck=jindo.$Fn(function(sCssquery,oEle){
                var eIncludeEle=oEle;
                var isIncludeEle=jindo.$$.test(oEle,sCssquery);
                if(!isIncludeEle){
                    var aPropagationElements=this._getParent(oEle);
                    for(var i=0,leng=aPropagationElements.length;
                    i<leng;
                    i++){
                        eIncludeEle=aPropagationElements[i];
                        if(jindo.$$.test(eIncludeEle,sCssquery)){
                            isIncludeEle=true;
                            break
                        }
                        
                    }
                    
                }
                return[isIncludeEle,eIncludeEle]
            }
            ,this).bind(vFilter)
        }
        else{
            if(typeof vFilter=="function"){
                fpCheck=jindo.$Fn(function(fpFilter,oEle){
                    var eIncludeEle=oEle;
                    var isIncludeEle=fpFilter(this._element,oEle);
                    if(!isIncludeEle){
                        var aPropagationElements=this._getParent(oEle);
                        for(var i=0,leng=aPropagationElements.length;
                        i<leng;
                        i++){
                            eIncludeEle=aPropagationElements[i];
                            if(fpFilter(this._element,eIncludeEle)){
                                isIncludeEle=true;
                                break
                            }
                            
                        }
                        
                    }
                    return[isIncludeEle,eIncludeEle]
                }
                ,this).bind(vFilter)
            }
            
        }
        this._element["_delegate_"+sEvent]=jindo.$Element._addBind(_aDataOfEvent,vFilter,fpCallback,fpCheck)
    }
    else{
        alert("check your delegate event.")
    }
    
};
jindo.$Element.prototype._getParent=function(oEle){
    var e=this._element;
    var a=[],p=null;
    while(oEle.parentNode&&p!=e){
        p=oEle.parentNode;
        if(p==document.documentElement){
            break
        }
        a[a.length]=p;
        oEle=p
    }
    return a
};
jindo.$Element._addBind=function(aDataOfEvent,vFilter,fpCallback,fpCheck){
    var aEvent=aDataOfEvent[vFilter];
    if(aEvent){
        var fpFuncs=aEvent.func;
        fpFuncs.push(fpCallback);
        aEvent.func=fpFuncs
    }
    else{
        aEvent={
            checker:fpCheck,func:[fpCallback]
        }
        
    }
    aDataOfEvent[vFilter]=aEvent;
    return aDataOfEvent
};
jindo.$Element.prototype._unbind=function(sEvent,vFilter,fpCallback){
    var oEle=this._element;
    if(sEvent&&vFilter&&fpCallback){
        var oEventInfo=oEle["_delegate_"+sEvent];
        if(oEventInfo&&oEventInfo[vFilter]){
            var fpFuncs=oEventInfo[vFilter].func;
            fpFuncs=oEventInfo[vFilter].func=jindo.$A(fpFuncs).refuse(fpCallback).$value();
            if(!fpFuncs.length){
                jindo.$Element._deleteFilter(oEle,sEvent,vFilter)
            }
            
        }
        
    }
    else{
        if(sEvent&&vFilter){
            jindo.$Element._deleteFilter(oEle,sEvent,vFilter)
        }
        else{
            if(sEvent){
                jindo.$Element._deleteEvent(oEle,sEvent,vFilter)
            }
            else{
                var aEvents=oEle._delegate_events;
                var sEachEvent;
                for(var i=0,l=aEvents.length;
                i<l;
                i++){
                    sEachEvent=aEvents[i];
                    jindo.$Element._unEventBind(oEle,sEachEvent,oEle["_delegate_"+sEachEvent+"_func"]);
                    jindo.$Element._delDelegateInfo(oEle,"_delegate_"+sEachEvent);
                    jindo.$Element._delDelegateInfo(oEle,"_delegate_"+sEachEvent+"_func")
                }
                jindo.$Element._delDelegateInfo(oEle,"_delegate_events")
            }
            
        }
        
    }
    return this
};
jindo.$Element._delDelegateInfo=function(oObj,sType){
    try{
        oObj[sType]=null;
        delete oObj[sType]
    }
    catch(e){}return oObj
};
jindo.$Element._deleteFilter=function(oEle,sEvent,vFilter){
    var oEventInfo=oEle["_delegate_"+sEvent];
    if(oEventInfo&&oEventInfo[vFilter]){
        if(jindo.$H(oEventInfo).keys().length==1){
            jindo.$Element._deleteEvent(oEle,sEvent,vFilter)
        }
        else{
            jindo.$Element._delDelegateInfo(oEventInfo,vFilter)
        }
        
    }
    
};
jindo.$Element._deleteEvent=function(oEle,sEvent,vFilter){
    var aEvents=oEle._delegate_events;
    jindo.$Element._unEventBind(oEle,sEvent,oEle["_delegate_"+sEvent+"_func"]);
    jindo.$Element._delDelegateInfo(oEle,"_delegate_"+sEvent);
    jindo.$Element._delDelegateInfo(oEle,"_delegate_"+sEvent+"_func");
    aEvents=jindo.$A(aEvents).refuse(sEvent).$value();
    if(!aEvents.length){
        jindo.$Element._delDelegateInfo(oEle,"_delegate_events")
    }
    else{
        oEle._delegate_events=jindo.$A(aEvents).refuse(sEvent).$value()
    }
    
};
jindo.$Element._unEventBind=function(oEle,sType,fAroundFunc){
    if(oEle.removeEventListener){
        jindo.$Element._unEventBind=function(oEle,sType,fAroundFunc){
            oEle.removeEventListener(sType,fAroundFunc,false)
        }
        
    }
    else{
        jindo.$Element._unEventBind=function(oEle,sType,fAroundFunc){
            oEle.detachEvent("on"+sType,fAroundFunc)
        }
        
    }
    jindo.$Element._unEventBind(oEle,sType,fAroundFunc)
};
jindo.$Fn=function(func,thisObject){
    var cl=arguments.callee;
    if(func instanceof cl){
        return func
    }
    if(!(this instanceof cl)){
        return new cl(func,thisObject)
    }
    this._events=[];
    this._tmpElm=null;
    this._key=null;
    if(typeof func=="function"){
        this._func=func;
        this._this=thisObject
    }
    else{
        if(typeof func=="string"&&typeof thisObject=="string"){
            this._func=eval("false||function("+func+"){"+thisObject+"}")
        }
        
    }
    
};
var _ua=navigator.userAgent;
jindo.$Fn.prototype.$value=function(){
    return this._func
};
jindo.$Fn.prototype.bind=function(){
    var a=jindo.$A(arguments).$value();
    var f=this._func;
    var t=this._this;
    var b=function(){
        var args=jindo.$A(arguments).$value();
        if(a.length){
            args=a.concat(args)
        }
        return f.apply(t,args)
    };
    return b
};
jindo.$Fn.prototype.bindForEvent=function(){
    var a=arguments;
    var f=this._func;
    var t=this._this;
    var m=this._tmpElm||null;
    var b=function(e){
        var args=Array.prototype.slice.apply(a);
        if(typeof e=="undefined"){
            e=window.event
        }
        if(typeof e.currentTarget=="undefined"){
            e.currentTarget=m
        }
        var oEvent=jindo.$Event(e);
        args.unshift(oEvent);
        var returnValue=f.apply(t,args);
        if(typeof returnValue!="undefined"&&oEvent.type=="beforeunload"){
            e.returnValue=returnValue
        }
        return returnValue
    };
    return b
};
jindo.$Fn.prototype.attach=function(oElement,sEvent,bUseCapture){
    var fn=null,l,ev=sEvent,el=oElement,ua=_ua;
    if(typeof bUseCapture=="undefined"){
        bUseCapture=false
    }
    this._bUseCapture=bUseCapture;
    if((el instanceof Array)||(jindo.$A&&(el instanceof jindo.$A)&&(el=el.$value()))){
        for(var i=0;
        i<el.length;
        i++){
            this.attach(el[i],ev,bUseCapture)
        }
        return this
    }
    if(!el||!ev){
        return this
    }
    if(typeof el.$value=="function"){
        el=el.$value()
    }
    el=jindo.$(el);
    ev=ev.toLowerCase();
    this._tmpElm=el;
    fn=this.bindForEvent();
    this._tmpElm=null;
    var bIsIE=ua.indexOf("MSIE")>-1;
    if(typeof el.addEventListener!="undefined"){
        if(ev=="domready"){
            ev="DOMContentLoaded"
        }
        else{
            if(ev=="mousewheel"&&ua.indexOf("WebKit")<0&&!/Opera/.test(ua)&&!bIsIE){
                ev="DOMMouseScroll"
            }
            else{
                if(ev=="mouseenter"&&!bIsIE){
                    ev="mouseover";
                    fn=jindo.$Fn._fireWhenElementBoundary(el,fn)
                }
                else{
                    if(ev=="mouseleave"&&!bIsIE){
                        ev="mouseout";
                        fn=jindo.$Fn._fireWhenElementBoundary(el,fn)
                    }
                    else{
                        if(ev=="transitionend"||ev=="transitionstart"){
                            var sPrefix,sPostfix=ev.replace("transition","");
                            sPostfix=sPostfix.substr(0,1).toUpperCase()+sPostfix.substr(1);
                            if(typeof document.body.style.WebkitTransition!=="undefined"){
                                sPrefix="webkit"
                            }
                            else{
                                if(typeof document.body.style.OTransition!=="undefined"){
                                    sPrefix="o"
                                }
                                else{
                                    if(typeof document.body.style.MsTransition!=="undefined"){
                                        sPrefix="ms"
                                    }
                                    
                                }
                                
                            }
                            ev=(sPrefix?sPrefix+"Transition":"transition")+sPostfix;
                            this._for_test_attach=ev;
                            this._for_test_detach=""
                        }
                        else{
                            if(ev=="animationstart"||ev=="animationend"||ev=="animationiteration"){
                                var sPrefix,sPostfix=ev.replace("animation","");
                                sPostfix=sPostfix.substr(0,1).toUpperCase()+sPostfix.substr(1);
                                if(typeof document.body.style.WebkitAnimationName!=="undefined"){
                                    sPrefix="webkit"
                                }
                                else{
                                    if(typeof document.body.style.OAnimationName!=="undefined"){
                                        sPrefix="o"
                                    }
                                    else{
                                        if(typeof document.body.style.MsTransitionName!=="undefined"){
                                            sPrefix="ms"
                                        }
                                        
                                    }
                                    
                                }
                                ev=(sPrefix?sPrefix+"Animation":"animation")+sPostfix;
                                this._for_test_attach=ev;
                                this._for_test_detach=""
                            }
                            
                        }
                        
                    }
                    
                }
                
            }
            
        }
        el.addEventListener(ev,fn,bUseCapture)
    }
    else{
        if(typeof el.attachEvent!="undefined"){
            if(ev=="domready"){
                if(window.top!=window){
                    throw new Error("Domready Event doesn't work in the iframe.")
                }
                jindo.$Fn._domready(el,fn);
                return this
            }
            else{
                el.attachEvent("on"+ev,fn)
            }
            
        }
        
    }
    if(!this._key){
        this._key="$"+jindo.$Fn.gc.count++;
        jindo.$Fn.gc.pool[this._key]=this
    }
    this._events[this._events.length]={
        element:el,event:sEvent.toLowerCase(),func:fn
    };
    return this
};
jindo.$Fn.prototype.detach=function(oElement,sEvent){
    var fn=null,l,el=oElement,ev=sEvent,ua=_ua;
    if((el instanceof Array)||(jindo.$A&&(el instanceof jindo.$A)&&(el=el.$value()))){
        for(var i=0;
        i<el.length;
        i++){
            this.detach(el[i],ev)
        }
        return this
    }
    if(!el||!ev){
        return this
    }
    if(jindo.$Element&&el instanceof jindo.$Element){
        el=el.$value()
    }
    el=jindo.$(el);
    ev=ev.toLowerCase();
    var e=this._events;
    for(var i=0;
    i<e.length;
    i++){
        if(e[i].element!==el||e[i].event!==ev){
            continue
        }
        fn=e[i].func;
        this._events=jindo.$A(this._events).refuse(e[i]).$value();
        break
    }
    if(typeof el.removeEventListener!="undefined"){
        if(ev=="domready"){
            ev="DOMContentLoaded"
        }
        else{
            if(ev=="mousewheel"&&ua.indexOf("WebKit")<0){
                ev="DOMMouseScroll"
            }
            else{
                if(ev=="mouseenter"){
                    ev="mouseover"
                }
                else{
                    if(ev=="mouseleave"){
                        ev="mouseout"
                    }
                    else{
                        if(ev=="transitionend"||ev=="transitionstart"){
                            var sPrefix,sPostfix=ev.replace("transition","");
                            sPostfix=sPostfix.substr(0,1).toUpperCase()+sPostfix.substr(1);
                            if(typeof document.body.style.WebkitTransition!=="undefined"){
                                sPrefix="webkit"
                            }
                            else{
                                if(typeof document.body.style.OTransition!=="undefined"){
                                    sPrefix="o"
                                }
                                else{
                                    if(typeof document.body.style.MsTransition!=="undefined"){
                                        sPrefix="ms"
                                    }
                                    
                                }
                                
                            }
                            ev=(sPrefix?sPrefix+"Transition":"transition")+sPostfix;
                            this._for_test_detach=ev;
                            this._for_test_attach=""
                        }
                        else{
                            if(ev=="animationstart"||ev=="animationend"||ev=="animationiteration"){
                                var sPrefix,sPostfix=ev.replace("animation","");
                                sPostfix=sPostfix.substr(0,1).toUpperCase()+sPostfix.substr(1);
                                if(typeof document.body.style.WebkitAnimationName!=="undefined"){
                                    sPrefix="webkit"
                                }
                                else{
                                    if(typeof document.body.style.OAnimationName!=="undefined"){
                                        sPrefix="o"
                                    }
                                    else{
                                        if(typeof document.body.style.MsTransitionName!=="undefined"){
                                            sPrefix="ms"
                                        }
                                        
                                    }
                                    
                                }
                                ev=(sPrefix?sPrefix+"Animation":"animation")+sPostfix;
                                this._for_test_detach=ev;
                                this._for_test_attach=""
                            }
                            
                        }
                        
                    }
                    
                }
                
            }
            
        }
        if(fn){
            el.removeEventListener(ev,fn,false)
        }
        
    }
    else{
        if(typeof el.detachEvent!="undefined"){
            if(ev=="domready"){
                jindo.$Fn._domready.list=jindo.$Fn._domready.list.refuse(fn);
                return this
            }
            else{
                el.detachEvent("on"+ev,fn)
            }
            
        }
        
    }
    return this
};
jindo.$Fn.prototype.delay=function(nSec,args){
    if(typeof args=="undefined"){
        args=[]
    }
    this._delayKey=setTimeout(this.bind.apply(this,args),nSec*1000);
    return this
};
jindo.$Fn.prototype.setInterval=function(nSec,args){
    if(typeof args=="undefined"){
        args=[]
    }
    this._repeatKey=setInterval(this.bind.apply(this,args),nSec*1000);
    return this._repeatKey
};
jindo.$Fn.prototype.repeat=jindo.$Fn.prototype.setInterval;
jindo.$Fn.prototype.stopDelay=function(){
    if(typeof this._delayKey!="undefined"){
        window.clearTimeout(this._delayKey);
        delete this._delayKey
    }
    return this
};
jindo.$Fn.prototype.stopRepeat=function(){
    if(typeof this._repeatKey!="undefined"){
        window.clearInterval(this._repeatKey);
        delete this._repeatKey
    }
    return this
};
jindo.$Fn.prototype.free=function(oElement){
    var len=this._events.length;
    while(len>0){
        var el=this._events[--len].element;
        var sEvent=this._events[len].event;
        if(oElement&&el!==oElement){
            continue
        }
        this.detach(el,sEvent);
        var isGCCall=!oElement;
        if(isGCCall&&window===el&&sEvent=="unload"){
            this.$value()()
        }
        delete this._events[len]
    }
    if(this._events.length==0){
        try{
            delete jindo.$Fn.gc.pool[this._key]
        }
        catch(e){}
    }
    
};
jindo.$Fn._domready=function(doc,func){
    if(typeof jindo.$Fn._domready.list=="undefined"){
        var f=null,l=jindo.$Fn._domready.list=jindo.$A([func]);
        var done=false,execFuncs=function(){
            if(!done){
                done=true;
                var evt={
                    type:"domready",target:doc,currentTarget:doc
                };
                while(f=l.shift()){
                    f(evt)
                }
                
            }
            
        };
        (function(){
            try{
                doc.documentElement.doScroll("left")
            }
            catch(e){
                setTimeout(arguments.callee,50);
                return
            }
            execFuncs()
        })();
        doc.onreadystatechange=function(){
            if(doc.readyState=="complete"){
                doc.onreadystatechange=null;
                execFuncs()
            }
            
        }
        
    }
    else{
        jindo.$Fn._domready.list.push(func)
    }
    
};
jindo.$Fn._fireWhenElementBoundary=function(doc,func){
    return function(evt){
        var oEvent=jindo.$Event(evt);
        var relatedElement=jindo.$Element(oEvent.relatedElement);
        if(relatedElement&&(relatedElement.isEqual(this)||relatedElement.isChildOf(this))){
            return
        }
        func.call(this,evt)
    }
    
};
jindo.$Fn.gc=function(){
    var p=jindo.$Fn.gc.pool;
    for(var key in p){
        if(p.hasOwnProperty(key)){
            try{
                p[key].free()
            }
            catch(e){}
        }
        
    }
    jindo.$Fn.gc.pool=p={}
};
jindo.$Fn.freeElement=function(oElement){
    var p=jindo.$Fn.gc.pool;
    for(var key in p){
        if(p.hasOwnProperty(key)){
            try{
                p[key].free(oElement)
            }
            catch(e){}
        }
        
    }
    
};
jindo.$Fn.gc.count=0;
jindo.$Fn.gc.pool={};
function isUnCacheAgent(){
    var isIPad=(_ua.indexOf("iPad")>-1);
    var isAndroid=(_ua.indexOf("Android")>-1);
    var isMSafari=(!(_ua.indexOf("IEMobile")>-1)&&(_ua.indexOf("Mobile")>-1))||(isIPad&&(_ua.indexOf("Safari")>-1));
    return isMSafari&&!isIPad&&!isAndroid
}
if(typeof window!="undefined"&&!isUnCacheAgent()){
    jindo.$Fn(jindo.$Fn.gc).attach(window,"unload")
}
jindo.$Event=function(e){
    var cl=arguments.callee;
    if(e instanceof cl){
        return e
    }
    if(!(this instanceof cl)){
        return new cl(e)
    }
    if(typeof e=="undefined"){
        e=window.event
    }
    if(e===window.event&&document.createEventObject){
        e=document.createEventObject(e)
    }
    this._event=e;
    this._globalEvent=window.event;
    this.type=e.type.toLowerCase();
    if(this.type=="dommousescroll"){
        this.type="mousewheel"
    }
    else{
        if(this.type=="domcontentloaded"){
            this.type="domready"
        }
        
    }
    this.canceled=false;
    this.element=e.target||e.srcElement;
    this.currentElement=e.currentTarget;
    this.relatedElement=null;
    if(typeof e.relatedTarget!="undefined"){
        this.relatedElement=e.relatedTarget
    }
    else{
        if(e.fromElement&&e.toElement){
            this.relatedElement=e[(this.type=="mouseout")?"toElement":"fromElement"]
        }
        
    }
    
};
jindo.$Event.prototype.mouse=function(){
    var e=this._event;
    var delta=0;
    var left=false,mid=false,right=false;
    var left=e.which?e.button==0:!!(e.button&1);
    var mid=e.which?e.button==1:!!(e.button&4);
    var right=e.which?e.button==2:!!(e.button&2);
    var ret={};
    if(e.wheelDelta){
        delta=e.wheelDelta/120
    }
    else{
        if(e.detail){
            delta=-e.detail/3
        }
        
    }
    ret={
        delta:delta,left:left,middle:mid,right:right
    };
    this.mouse=function(){
        return ret
    };
    return ret
};
jindo.$Event.prototype.key=function(){
    var e=this._event;
    var k=e.keyCode||e.charCode;
    var ret={
        keyCode:k,alt:e.altKey,ctrl:e.ctrlKey,meta:e.metaKey,shift:e.shiftKey,up:(k==38),down:(k==40),left:(k==37),right:(k==39),enter:(k==13),esc:(k==27)
    };
    this.key=function(){
        return ret
    };
    return ret
};
jindo.$Event.prototype.pos=function(bGetOffset){
    var e=this._event;
    var b=(this.element.ownerDocument||document).body;
    var de=(this.element.ownerDocument||document).documentElement;
    var pos=[b.scrollLeft||de.scrollLeft,b.scrollTop||de.scrollTop];
    var ret={
        clientX:e.clientX,clientY:e.clientY,pageX:"pageX" in e?e.pageX:e.clientX+pos[0]-b.clientLeft,pageY:"pageY" in e?e.pageY:e.clientY+pos[1]-b.clientTop,layerX:"offsetX" in e?e.offsetX:e.layerX-1,layerY:"offsetY" in e?e.offsetY:e.layerY-1
    };
    if(bGetOffset&&jindo.$Element){
        var offset=jindo.$Element(this.element).offset();
        ret.offsetX=ret.pageX-offset.left;
        ret.offsetY=ret.pageY-offset.top
    }
    return ret
};
jindo.$Event.prototype.stop=function(nCancel){
    nCancel=nCancel||jindo.$Event.CANCEL_ALL;
    var e=(window.event&&window.event==this._globalEvent)?this._globalEvent:this._event;
    var b=!!(nCancel&jindo.$Event.CANCEL_BUBBLE);
    var d=!!(nCancel&jindo.$Event.CANCEL_DEFAULT);
    this.canceled=true;
    if(typeof e.preventDefault!="undefined"&&d){
        e.preventDefault()
    }
    if(typeof e.stopPropagation!="undefined"&&b){
        e.stopPropagation()
    }
    if(d){
        e.returnValue=false
    }
    if(b){
        e.cancelBubble=true
    }
    return this
};
jindo.$Event.prototype.stopDefault=function(){
    return this.stop(jindo.$Event.CANCEL_DEFAULT)
};
jindo.$Event.prototype.stopBubble=function(){
    return this.stop(jindo.$Event.CANCEL_BUBBLE)
};
jindo.$Event.prototype.$value=function(){
    return this._event
};
jindo.$Event.CANCEL_BUBBLE=1;
jindo.$Event.CANCEL_DEFAULT=2;
jindo.$Event.CANCEL_ALL=3;
jindo.$ElementList=function(els){
    var cl=arguments.callee;
    if(els instanceof cl){
        return els
    }
    if(!(this instanceof cl)){
        return new cl(els)
    }
    if(els instanceof Array){
        els=jindo.$A(els)
    }
    else{
        if(jindo.$A&&els instanceof jindo.$A){
            els=jindo.$A(els.$value())
        }
        else{
            if(typeof els=="string"&&jindo.cssquery){
                els=jindo.$A(jindo.cssquery(els))
            }
            else{
                els=jindo.$A()
            }
            
        }
        
    }
    this._elements=els.map(function(v,i,a){
        return jindo.$Element(v)
    })
};
jindo.$ElementList.prototype.get=function(idx){
    return this._elements.$value()[idx]
};
jindo.$ElementList.prototype.getFirst=function(){
    return this.get(0)
};
jindo.$ElementList.prototype.length=function(nLen,oValue){
    return this._elements.length(nLen,oValue)
};
jindo.$ElementList.prototype.getLast=function(){
    return this.get(Math.max(this._elements.length()-1,0))
};
jindo.$ElementList.prototype.$value=function(){
    return this._elements.$value()
};
(function(proto){
    var setters=["show","hide","toggle","addClass","removeClass","toggleClass","fireEvent","leave","empty","appear","disappear","className","width","height","text","html","css","attr"];
    jindo.$A(setters).forEach(function(name){
        proto[name]=function(){
            var args=jindo.$A(arguments).$value();
            this._elements.forEach(function(el){
                el[name].apply(el,args)
            });
            return this
        }
        
    });
    jindo.$A(["appear","disappear"]).forEach(function(name){
        proto[name]=function(duration,callback){
            var len=this._elements.length;
            var self=this;
            this._elements.forEach(function(el,idx){
                if(idx==len-1){
                    el[name](duration,function(){
                        callback(self)
                    })
                }
                else{
                    el[name](duration)
                }
                
            });
            return this
        }
        
    })
})(jindo.$ElementList.prototype);
jindo.$S=function(str){
    var cl=arguments.callee;
    if(typeof str=="undefined"){
        str=""
    }
    if(str instanceof cl){
        return str
    }
    if(!(this instanceof cl)){
        return new cl(str)
    }
    this._str=str+""
};
jindo.$S.prototype.$value=function(){
    return this._str
};
jindo.$S.prototype.toString=jindo.$S.prototype.$value;
jindo.$S.prototype.trim=function(){
    if("".trim){
        jindo.$S.prototype.trim=function(){
            return jindo.$S(this._str.trim())
        }
        
    }
    else{
        jindo.$S.prototype.trim=function(){
            return jindo.$S(this._str.replace(/^(\s|　)+/g,"").replace(/(\s|　)+$/g,""))
        }
        
    }
    return jindo.$S(this.trim())
};
jindo.$S.prototype.escapeHTML=function(){
    var entities={
        '"':"quot","&":"amp","<":"lt",">":"gt","'":"#39"
    };
    var s=this._str.replace(/[<>&"']/g,function(m0){
        return entities[m0]?"&"+entities[m0]+";":m0
    });
    return jindo.$S(s)
};
jindo.$S.prototype.stripTags=function(){
    return jindo.$S(this._str.replace(/<\/?(?:h[1-5]|[a-z]+(?:\:[a-z]+)?)[^>]*>/ig,""))
};
jindo.$S.prototype.times=function(nTimes){
    var buf=[];
    for(var i=0;
    i<nTimes;
    i++){
        buf[buf.length]=this._str
    }
    return jindo.$S(buf.join(""))
};
jindo.$S.prototype.unescapeHTML=function(){
    var entities={
        quot:'"',amp:"&",lt:"<",gt:">","#39":"'"
    };
    var s=this._str.replace(/&([a-z]+|#[0-9]+);/g,function(m0,m1){
        return entities[m1]?entities[m1]:m0
    });
    return jindo.$S(s)
};
jindo.$S.prototype.escape=function(){
    var s=this._str.replace(/([\u0080-\uFFFF]+)|[\n\r\t"'\\]/g,function(m0,m1,_){
        if(m1){
            return escape(m1).replace(/%/g,"\\")
        }
        return(_={
            "\n":"\\n","\r":"\\r","\t":"\\t"
        })[m0]?_[m0]:"\\"+m0
    });
    return jindo.$S(s)
};
jindo.$S.prototype.bytes=function(vConfig){
    var code=0,bytes=0,i=0,len=this._str.length;
    var charset=((document.charset||document.characterSet||document.defaultCharset)+"");
    var cut,nBytes;
    if(typeof vConfig=="undefined"){
        cut=false
    }
    else{
        if(vConfig.constructor==Number){
            cut=true;
            nBytes=vConfig
        }
        else{
            if(vConfig.constructor==Object){
                charset=vConfig.charset||charset;
                nBytes=vConfig.size||false;
                cut=!!nBytes
            }
            else{
                cut=false
            }
            
        }
        
    }
    if(charset.toLowerCase()=="utf-8"){
        for(i=0;
        i<len;
        i++){
            code=this._str.charCodeAt(i);
            if(code<128){
                bytes+=1
            }
            else{
                if(code<2048){
                    bytes+=2
                }
                else{
                    if(code<65536){
                        bytes+=3
                    }
                    else{
                        bytes+=4
                    }
                    
                }
                
            }
            if(cut&&bytes>nBytes){
                this._str=this._str.substr(0,i);
                break
            }
            
        }
        
    }
    else{
        for(i=0;
        i<len;
        i++){
            bytes+=(this._str.charCodeAt(i)>128)?2:1;
            if(cut&&bytes>nBytes){
                this._str=this._str.substr(0,i);
                break
            }
            
        }
        
    }
    return cut?this:bytes
};
jindo.$S.prototype.parseString=function(){
    var str=this._str.split(/&/g),pos,key,val,buf={},isescape=false;
    for(var i=0;
    i<str.length;
    i++){
        key=str[i].substring(0,pos=str[i].indexOf("=")),isescape=false;
        try{
            val=decodeURIComponent(str[i].substring(pos+1))
        }
        catch(e){
            isescape=true;
            val=decodeURIComponent(unescape(str[i].substring(pos+1)))
        }
        if(key.substr(key.length-2,2)=="[]"){
            key=key.substring(0,key.length-2);
            if(typeof buf[key]=="undefined"){
                buf[key]=[]
            }
            buf[key][buf[key].length]=isescape?escape(val):val
        }
        else{
            buf[key]=isescape?escape(val):val
        }
        
    }
    return buf
};
jindo.$S.prototype.escapeRegex=function(){
    var s=this._str;
    var r=/([\?\.\*\+\-\/\(\)\{\}\[\]\:\!\^\$\\\|])/g;
    return jindo.$S(s.replace(r,"\\$1"))
};
jindo.$S.prototype.format=function(){
    var args=arguments;
    var idx=0;
    var s=this._str.replace(/%([ 0])?(-)?([1-9][0-9]*)?([bcdsoxX])/g,function(m0,m1,m2,m3,m4){
        var a=args[idx++];
        var ret="",pad="";
        m3=m3?+m3:0;
        if(m4=="s"){
            ret=a+""
        }
        else{
            if(" bcdoxX".indexOf(m4)>0){
                if(typeof a!="number"){
                    return""
                }
                ret=(m4=="c")?String.fromCharCode(a):a.toString(({
                    b:2,d:10,o:8,x:16,X:16
                })[m4]);
                if(" X".indexOf(m4)>0){
                    ret=ret.toUpperCase()
                }
                
            }
            
        }
        if(ret.length<m3){
            pad=jindo.$S(m1||" ").times(m3-ret.length).toString()
        }
        (m2=="-")?(ret+=pad):(ret=pad+ret);
        return ret
    });
    return jindo.$S(s)
};
jindo.$Document=function(el){
    var cl=arguments.callee;
    if(el instanceof cl){
        return el
    }
    if(!(this instanceof cl)){
        return new cl(el)
    }
    this._doc=el||document;
    this._docKey=this.renderingMode()=="Standards"?"documentElement":"body"
};
jindo.$Document.prototype.$value=function(){
    return this._doc
};
jindo.$Document.prototype.scrollSize=function(){
    var isWebkit=navigator.userAgent.indexOf("WebKit")>-1;
    var oDoc=this._doc[isWebkit?"body":this._docKey];
    return{
        width:Math.max(oDoc.scrollWidth,oDoc.clientWidth),height:Math.max(oDoc.scrollHeight,oDoc.clientHeight)
    }
    
};
jindo.$Document.prototype.scrollPosition=function(){
    var isWebkit=navigator.userAgent.indexOf("WebKit")>-1;
    var oDoc=this._doc[isWebkit?"body":this._docKey];
    return{
        left:oDoc.scrollLeft||window.pageXOffset||window.scrollX||0,top:oDoc.scrollTop||window.pageYOffset||window.scrollY||0
    }
    
};
jindo.$Document.prototype.clientSize=function(){
    var agent=navigator.userAgent;
    var oDoc=this._doc[this._docKey];
    var isSafari=agent.indexOf("WebKit")>-1&&agent.indexOf("Chrome")==-1;
    return(isSafari)?{
        width:window.innerWidth,height:window.innerHeight
    }
    :{
        width:oDoc.clientWidth,height:oDoc.clientHeight
    }
    
};
jindo.$Document.prototype.renderingMode=function(){
    var agent=navigator.userAgent;
    var isIe=(typeof window.opera=="undefined"&&agent.indexOf("MSIE")>-1);
    var isSafari=(agent.indexOf("WebKit")>-1&&agent.indexOf("Chrome")<0&&navigator.vendor.indexOf("Apple")>-1);
    var sRet;
    if("compatMode" in this._doc){
        sRet=this._doc.compatMode=="CSS1Compat"?"Standards":(isIe?"Quirks":"Almost")
    }
    else{
        sRet=isSafari?"Standards":"Quirks"
    }
    return sRet
};
jindo.$Document.prototype.queryAll=function(sSelector){
    return jindo.$$(sSelector,this._doc)
};
jindo.$Document.prototype.query=function(sSelector){
    return jindo.$$.getSingle(sSelector,this._doc)
};
jindo.$Document.prototype.xpathAll=function(sXPath){
    return jindo.$$.xpath(sXPath,this._doc)
};
jindo.$Form=function(el){
    var cl=arguments.callee;
    if(el instanceof cl){
        return el
    }
    if(!(this instanceof cl)){
        return new cl(el)
    }
    el=jindo.$(el);
    if(!el.tagName||el.tagName.toUpperCase()!="FORM"){
        throw new Error("The element should be a FORM element")
    }
    this._form=el
};
jindo.$Form.prototype.$value=function(){
    return this._form
};
jindo.$Form.prototype.serialize=function(){
    var self=this;
    var oRet={};
    var nLen=arguments.length;
    var fpInsert=function(sKey){
        var sVal=self.value(sKey);
        if(typeof sVal!="undefined"){
            oRet[sKey]=sVal
        }
        
    };
    if(nLen==0){
        jindo.$A(this.element()).forEach(function(o){
            if(o.name){
                fpInsert(o.name)
            }
            
        })
    }
    else{
        for(var i=0;
        i<nLen;
        i++){
            fpInsert(arguments[i])
        }
        
    }
    return jindo.$H(oRet).toQueryString()
};
jindo.$Form.prototype.element=function(sKey){
    if(arguments.length>0){
        return this._form[sKey]
    }
    return this._form.elements
};
jindo.$Form.prototype.enable=function(){
    var sKey=arguments[0];
    if(typeof sKey=="object"){
        var self=this;
        jindo.$H(sKey).forEach(function(bFlag,sKey){
            self.enable(sKey,bFlag)
        });
        return this
    }
    var aEls=this.element(sKey);
    if(!aEls){
        return this
    }
    aEls=aEls.nodeType==1?[aEls]:aEls;
    if(arguments.length<2){
        var bEnabled=true;
        jindo.$A(aEls).forEach(function(o){
            if(o.disabled){
                bEnabled=false;
                jindo.$A.Break()
            }
            
        });
        return bEnabled
    }
    else{
        var sFlag=arguments[1];
        jindo.$A(aEls).forEach(function(o){
            o.disabled=!sFlag
        });
        return this
    }
    
};
jindo.$Form.prototype.value=function(sKey){
    if(typeof sKey=="object"){
        var self=this;
        jindo.$H(sKey).forEach(function(bFlag,sKey){
            self.value(sKey,bFlag)
        });
        return this
    }
    var aEls=this.element(sKey);
    if(!aEls){
        throw new Error("엘리먼트는 존재하지 않습니다.")
    }
    aEls=aEls.nodeType==1?[aEls]:aEls;
    if(arguments.length>1){
        var sVal=arguments[1];
        jindo.$A(aEls).forEach(function(o){
            switch(o.type){
                case"radio":o.checked=(o.value==sVal);
                break;
                case"checkbox":if(sVal.constructor==Array){
                    o.checked=jindo.$A(sVal).has(o.value)
                }
                else{
                    o.checked=(o.value==sVal)
                }
                break;
                case"select-one":var nIndex=-1;
                for(var i=0,len=o.options.length;
                i<len;
                i++){
                    if(o.options[i].value==sVal){
                        nIndex=i
                    }
                    
                }
                o.selectedIndex=nIndex;
                break;
                case"select-multiple":var nIndex=-1;
                if(sVal.constructor==Array){
                    var waVal=jindo.$A(sVal);
                    for(var i=0,len=o.options.length;
                    i<len;
                    i++){
                        o.options[i].selected=waVal.has(o.options[i].value)
                    }
                    
                }
                else{
                    for(var i=0,len=o.options.length;
                    i<len;
                    i++){
                        if(o.options[i].value==sVal){
                            nIndex=i
                        }
                        
                    }
                    o.selectedIndex=nIndex
                }
                break;
                default:o.value=sVal;
                break
            }
            
        });
        return this
    }
    var aRet=[];
    jindo.$A(aEls).forEach(function(o){
        switch(o.type){
            case"radio":case"checkbox":if(o.checked){
                aRet.push(o.value)
            }
            break;
            case"select-one":if(o.selectedIndex!=-1){
                aRet.push(o.options[o.selectedIndex].value)
            }
            break;
            case"select-multiple":if(o.selectedIndex!=-1){
                for(var i=0,len=o.options.length;
                i<len;
                i++){
                    if(o.options[i].selected){
                        aRet.push(o.options[i].value)
                    }
                    
                }
                
            }
            break;
            default:aRet.push(o.value);
            break
        }
        
    });
    return aRet.length>1?aRet:aRet[0]
};
jindo.$Form.prototype.submit=function(sTargetName,fValidation){
    var sOrgTarget=null;
    if(typeof sTargetName=="string"){
        sOrgTarget=this._form.target;
        this._form.target=sTargetName
    }
    if(typeof sTargetName=="function"){
        fValidation=sTargetName
    }
    if(typeof fValidation!="undefined"){
        if(!fValidation(this._form)){
            return this
        }
        
    }
    this._form.submit();
    if(sOrgTarget!==null){
        this._form.target=sOrgTarget
    }
    return this
};
jindo.$Form.prototype.reset=function(fValidation){
    if(typeof fValidation!="undefined"){
        if(!fValidation(this._form)){
            return this
        }
        
    }
    this._form.reset();
    return this
};
jindo.$Template=function(str){
    var obj=null,tag="";
    var cl=arguments.callee;
    if(str instanceof cl){
        return str
    }
    if(!(this instanceof cl)){
        return new cl(str)
    }
    if(typeof str=="undefined"){
        str=""
    }
    else{
        if((obj=document.getElementById(str)||str)&&obj.tagName&&(tag=obj.tagName.toUpperCase())&&(tag=="TEXTAREA"||(tag=="SCRIPT"&&obj.getAttribute("type")=="text/template"))){
            str=(obj.value||obj.innerHTML).replace(/^\s+|\s+$/g,"")
        }
        
    }
    this._str=str+""
};
jindo.$Template.splitter=/(?!\\)[\{\}]/g;
jindo.$Template.pattern=/^(?:if (.+)|elseif (.+)|for (?:(.+)\:)?(.+) in (.+)|(else)|\/(if|for)|=(.+)|js (.+)|set (.+))$/;
jindo.$Template.prototype.process=function(data){
    var key="\x01";
    var leftBrace="\x02";
    var rightBrace="\x03";
    var tpl=(" "+this._str+" ").replace(/\\{/g,leftBrace).replace(/\\}/g,rightBrace).replace(/(?!\\)\}\{/g,"}"+key+"{").split(jindo.$Template.splitter),i=tpl.length;
    var map={
        '"':'\\"',"\\":"\\\\","\n":"\\n","\r":"\\r","\t":"\\t","\f":"\\f"
    };
    var reg=[/(["'](?:(?:\\.)+|[^\\["']+)*["']|[a-zA-Z_][\w\.]*)/g,/[\n\r\t\f"\\]/g,/^\s+/,/\s+$/,/#/g];
    var cb=[function(m){
        return(m.substring(0,1)=='"'||m.substring(0,1)=="'"||m=="null")?m:"d."+m
    }
    ,function(m){
        return map[m]||m
    }
    ,"",""];
    var stm=[];
    var lev=0;
    tpl[0]=tpl[0].substr(1);
    tpl[i-1]=tpl[i-1].substr(0,tpl[i-1].length-1);
    if(i<2){
        return tpl[0]
    }
    tpl=jindo.$A(tpl).reverse().$value();
    var delete_info;
    while(i--){
        if(i%2){
            tpl[i]=tpl[i].replace(jindo.$Template.pattern,function(){
                var m=arguments;
                if(m[10]){
                    return m[10].replace(/(\w+)(?:\s*)=(?:\s*)(?:([a-zA-Z0-9_]+)|(.+))$/g,function(){
                        var mm=arguments;
                        var str="d."+mm[1]+"=";
                        if(mm[2]){
                            str+="d."+mm[2]
                        }
                        else{
                            str+=mm[3].replace(/(=(?:[a-zA-Z_][\w\.]*)+)/g,function(m){
                                return(m.substring(0,1)=="=")?"d."+m.replace("=",""):m
                            })
                        }
                        return str
                    })+";"
                }
                if(m[9]){
                    return"s[i++]="+m[9].replace(/(=(?:[a-zA-Z_][\w\.]*)+)/g,function(m){
                        return(m.substring(0,1)=="=")?"d."+m.replace("=",""):m
                    })+";"
                }
                if(m[8]){
                    return"s[i++]= d."+m[8]+";"
                }
                if(m[1]){
                    return"if("+m[1].replace(reg[0],cb[0]).replace(/d\.(typeof) /,"$1 ").replace(/ d\.(instanceof) d\./," $1 ")+"){"
                }
                if(m[2]){
                    return"}else if("+m[2].replace(reg[0],cb[0]).replace(/d\.(typeof) /,"$1 ").replace(/ d\.(instanceof) d\./," $1 ")+"){"
                }
                if(m[5]){
                    delete_info=m[4];
                    var _aStr=[];
                    _aStr.push("var t#=d."+m[5]+"||{},p#=isArray(t#),i#=0;");
                    _aStr.push("for(var x# in t#){");
                    _aStr.push("if(!t#.hasOwnProperty(x#)){continue;}");
                    _aStr.push(" if( (p# && isNaN(i#=parseInt(x#))) || (!p# && !t#.propertyIsEnumerable(x#)) ) continue;");
                    _aStr.push(" d."+m[4]+"=t#[x#];");
                    _aStr.push(m[3]?"d."+m[3]+"=p#?i#:x#;":"");
                    return _aStr.join("").replace(reg[4],lev++)
                }
                if(m[6]){
                    return"}else{"
                }
                if(m[7]){
                    if(m[7]=="for"){
                        return"delete d."+delete_info+"; };"
                    }
                    else{
                        return"};"
                    }
                    
                }
                return m[0]
            })
        }
        else{
            if(tpl[i]==key){
                tpl[i]=""
            }
            else{
                if(tpl[i]){
                    tpl[i]='s[i++]="'+tpl[i].replace(reg[1],cb[1])+'";'
                }
                
            }
            
        }
        
    }
    tpl=jindo.$A(tpl).reverse().$value().join("").replace(new RegExp(leftBrace,"g"),"{").replace(new RegExp(rightBrace,"g"),"}");
    var _aStr=[];
    _aStr.push("var s=[],i=0;");
    _aStr.push('function isArray(o){ return Object.prototype.toString.call(o) == "[object Array]" };');
    _aStr.push(tpl);
    _aStr.push('return s.join("");');
    tpl=eval("false||function(d){"+_aStr.join("")+"}");
    tpl=tpl(data);
    return tpl
};
jindo.$Date=function(src){
    var a=arguments,t="";
    var cl=arguments.callee;
    if(src&&src instanceof cl){
        return src
    }
    if(!(this instanceof cl)){
        return new cl(a[0],a[1],a[2],a[3],a[4],a[5],a[6])
    }
    if((t=typeof src)=="string"){
        if(/(\d\d\d\d)(?:-?(\d\d)(?:-?(\d\d)))/.test(src)){
            try{
                this._date=new Date(src);
                if(!this._date.toISOString){
                    this._date=jindo.$Date.makeISO(src)
                }
                else{
                    if(this._date.toISOString()=="Invalid Date"){
                        this._date=jindo.$Date.makeISO(src)
                    }
                    
                }
                
            }
            catch(e){
                this._date=jindo.$Date.makeISO(src)
            }
            
        }
        else{
            this._date=cl.parse(src)
        }
        
    }
    else{
        if(t=="number"){
            if(typeof a[1]=="undefined"){
                this._date=new Date(src)
            }
            else{
                for(var i=0;
                i<7;
                i++){
                    if(typeof a[i]!="number"){
                        a[i]=1
                    }
                    
                }
                this._date=new Date(a[0],a[1],a[2],a[3],a[4],a[5],a[6])
            }
            
        }
        else{
            if(t=="object"&&src.constructor==Date){
                (this._date=new Date).setTime(src.getTime());
                this._date.setMilliseconds(src.getMilliseconds())
            }
            else{
                this._date=new Date
            }
            
        }
        
    }
    this._names={};
    for(var i in jindo.$Date.names){
        if(jindo.$Date.names.hasOwnProperty(i)){
            this._names[i]=jindo.$Date.names[i]
        }
        
    }
    
};
jindo.$Date.makeISO=function(src){
    var match=src.match(/(\d\d\d\d)(?:-?(\d\d)(?:-?(\d\d)(?:[T ](\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|(?:([-+])(\d\d)(?::?(\d\d))?)?)?)?)?)?/);
    var hour=parseInt(match[4]||0);
    var min=parseInt(match[5]||0);
    if(match[8]=="Z"){
        hour+=jindo.$Date.utc
    }
    else{
        if(match[9]=="+"||match[9]=="-"){
            hour+=(jindo.$Date.utc-parseInt(match[9]+match[10]));
            min+=parseInt(match[9]+match[11])
        }
        
    }
    return new Date(match[1]||0,parseInt(match[2]||0)-1,match[3]||0,hour,min,match[6]||0,match[7]||0)
};
jindo.$Date.names={
    month:["January","Febrary","March","April","May","June","July","August","September","October","Novermber","December"],s_month:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],day:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s_day:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ampm:["AM","PM"]
};
jindo.$Date.utc=9;
jindo.$Date.now=function(){
    return Date.now()
};
jindo.$Date.prototype.name=function(oNames){
    if(arguments.length){
        for(var i in oNames){
            if(oNames.hasOwnProperty(i)){
                this._names[i]=oNames[i]
            }
            
        }
        
    }
    else{
        return this._names
    }
    
};
jindo.$Date.parse=function(strDate){
    return new Date(Date.parse(strDate))
};
jindo.$Date.prototype.$value=function(){
    return this._date
};
jindo.$Date.prototype.format=function(strFormat){
    var o={};
    var d=this._date;
    var name=this.name();
    var self=this;
    return(strFormat||"").replace(/[a-z]/ig,function callback(m){
        if(typeof o[m]!="undefined"){
            return o[m]
        }
        switch(m){
            case"d":case"j":o.j=d.getDate();
            o.d=(o.j>9?"":"0")+o.j;
            return o[m];
            case"l":case"D":case"w":case"N":o.w=d.getDay();
            o.N=o.w?o.w:7;
            o.D=name.s_day[o.w];
            o.l=name.day[o.w];
            return o[m];
            case"S":return(!!(o.S=["st","nd","rd"][d.getDate()]))?o.S:(o.S="th");
            case"z":o.z=Math.floor((d.getTime()-(new Date(d.getFullYear(),0,1)).getTime())/(3600*24*1000));
            return o.z;
            case"m":case"n":o.n=d.getMonth()+1;
            o.m=(o.n>9?"":"0")+o.n;
            return o[m];
            case"L":o.L=self.isLeapYear();
            return o.L;
            case"o":case"Y":case"y":o.o=o.Y=d.getFullYear();
            o.y=(o.o+"").substr(2);
            return o[m];
            case"a":case"A":case"g":case"G":case"h":case"H":o.G=d.getHours();
            o.g=(o.g=o.G%12)?o.g:12;
            o.A=o.G<12?name.ampm[0]:name.ampm[1];
            o.a=o.A.toLowerCase();
            o.H=(o.G>9?"":"0")+o.G;
            o.h=(o.g>9?"":"0")+o.g;
            return o[m];
            case"i":o.i=(((o.i=d.getMinutes())>9)?"":"0")+o.i;
            return o.i;
            case"s":o.s=(((o.s=d.getSeconds())>9)?"":"0")+o.s;
            return o.s;
            case"u":o.u=d.getMilliseconds();
            return o.u;
            case"U":o.U=self.time();
            return o.U;
            default:return m
        }
        
    })
};
jindo.$Date.prototype.time=function(nTime){
    if(typeof nTime=="number"){
        this._date.setTime(nTime);
        return this
    }
    return this._date.getTime()
};
jindo.$Date.prototype.year=function(nYear){
    if(typeof nYear=="number"){
        this._date.setFullYear(nYear);
        return this
    }
    return this._date.getFullYear()
};
jindo.$Date.prototype.month=function(nMon){
    if(typeof nMon=="number"){
        this._date.setMonth(nMon);
        return this
    }
    return this._date.getMonth()
};
jindo.$Date.prototype.date=function(nDate){
    if(typeof nDate=="number"){
        this._date.setDate(nDate);
        return this
    }
    return this._date.getDate()
};
jindo.$Date.prototype.day=function(){
    return this._date.getDay()
};
jindo.$Date.prototype.hours=function(nHour){
    if(typeof nHour=="number"){
        this._date.setHours(nHour);
        return this
    }
    return this._date.getHours()
};
jindo.$Date.prototype.minutes=function(nMin){
    if(typeof nMin=="number"){
        this._date.setMinutes(nMin);
        return this
    }
    return this._date.getMinutes()
};
jindo.$Date.prototype.seconds=function(nSec){
    if(typeof nSec=="number"){
        this._date.setSeconds(nSec);
        return this
    }
    return this._date.getSeconds()
};
jindo.$Date.prototype.isLeapYear=function(){
    var y=this._date.getFullYear();
    return !(y%4)&&!!(y%100)||!(y%400)
};
jindo.$Window=function(el){
    var cl=arguments.callee;
    if(el instanceof cl){
        return el
    }
    if(!(this instanceof cl)){
        return new cl(el)
    }
    this._win=el||window
};
jindo.$Window.prototype.$value=function(){
    return this._win
};
jindo.$Window.prototype.resizeTo=function(nWidth,nHeight){
    this._win.resizeTo(nWidth,nHeight);
    return this
};
jindo.$Window.prototype.resizeBy=function(nWidth,nHeight){
    this._win.resizeBy(nWidth,nHeight);
    return this
};
jindo.$Window.prototype.moveTo=function(nLeft,nTop){
    this._win.moveTo(nLeft,nTop);
    return this
};
jindo.$Window.prototype.moveBy=function(nLeft,nTop){
    this._win.moveBy(nLeft,nTop);
    return this
};
jindo.$Window.prototype.sizeToContent=function(nWidth,nHeight){
    if(typeof this._win.sizeToContent=="function"){
        this._win.sizeToContent()
    }
    else{
        if(arguments.length!=2){
            var innerX,innerY;
            var self=this._win;
            var doc=this._win.document;
            if(self.innerHeight){
                innerX=self.innerWidth;
                innerY=self.innerHeight
            }
            else{
                if(doc.documentElement&&doc.documentElement.clientHeight){
                    innerX=doc.documentElement.clientWidth;
                    innerY=doc.documentElement.clientHeight
                }
                else{
                    if(doc.body){
                        innerX=doc.body.clientWidth;
                        innerY=doc.body.clientHeight
                    }
                    
                }
                
            }
            var pageX,pageY;
            var test1=doc.body.scrollHeight;
            var test2=doc.body.offsetHeight;
            if(test1>test2){
                pageX=doc.body.scrollWidth;
                pageY=doc.body.scrollHeight
            }
            else{
                pageX=doc.body.offsetWidth;
                pageY=doc.body.offsetHeight
            }
            nWidth=pageX-innerX;
            nHeight=pageY-innerY
        }
        this.resizeBy(nWidth,nHeight)
    }
    return this
};
if(typeof window!="undefined"){
    for(prop in jindo){
        if(jindo.hasOwnProperty(prop)){
            window[prop]=jindo[prop]
        }
        
    }
    
};
jindo.Component=jindo.$Class({
    _htEventHandler:null,_htOption:null,$init:function(){
        var aInstance=this.constructor.getInstance();
        aInstance.push(this);
        this._htEventHandler={};
        this._htOption={};
        this._htOption._htSetter={}
    }
    ,option:function(sName,vValue){
        switch(typeof sName){
            case"undefined":return this._htOption;
            case"string":if(typeof vValue!="undefined"){
                if(sName=="htCustomEventHandler"){
                    if(typeof this._htOption[sName]=="undefined"){
                        this.attach(vValue)
                    }
                    else{
                        return this
                    }
                    
                }
                this._htOption[sName]=vValue;
                if(typeof this._htOption._htSetter[sName]=="function"){
                    this._htOption._htSetter[sName](vValue)
                }
                
            }
            else{
                return this._htOption[sName]
            }
            break;
            case"object":for(var sKey in sName){
                if(sKey=="htCustomEventHandler"){
                    if(typeof this._htOption[sKey]=="undefined"){
                        this.attach(sName[sKey])
                    }
                    else{
                        continue
                    }
                    
                }
                this._htOption[sKey]=sName[sKey];
                if(typeof this._htOption._htSetter[sKey]=="function"){
                    this._htOption._htSetter[sKey](sName[sKey])
                }
                
            }
            break
        }
        return this
    }
    ,optionSetter:function(sName,fSetter){
        switch(typeof sName){
            case"undefined":return this._htOption._htSetter;
            case"string":if(typeof fSetter!="undefined"){
                this._htOption._htSetter[sName]=jindo.$Fn(fSetter,this).bind()
            }
            else{
                return this._htOption._htSetter[sName]
            }
            break;
            case"object":for(var sKey in sName){
                this._htOption._htSetter[sKey]=jindo.$Fn(sName[sKey],this).bind()
            }
            break
        }
        return this
    }
    ,fireEvent:function(sEvent,oEvent){
        oEvent=oEvent||{};
        var fInlineHandler=this["on"+sEvent],aHandlerList=this._htEventHandler[sEvent]||[],bHasInlineHandler=typeof fInlineHandler=="function",bHasHandlerList=aHandlerList.length>0;
        if(!bHasInlineHandler&&!bHasHandlerList){
            return true
        }
        aHandlerList=aHandlerList.concat();
        oEvent.sType=sEvent;
        if(typeof oEvent._aExtend=="undefined"){
            oEvent._aExtend=[];
            oEvent.stop=function(){
                if(oEvent._aExtend.length>0){
                    oEvent._aExtend[oEvent._aExtend.length-1].bCanceled=true
                }
                
            }
            
        }
        oEvent._aExtend.push({
            sType:sEvent,bCanceled:false
        });
        var aArg=[oEvent],i,nLen;
        for(i=2,nLen=arguments.length;
        i<nLen;
        i++){
            aArg.push(arguments[i])
        }
        if(bHasInlineHandler){
            fInlineHandler.apply(this,aArg)
        }
        if(bHasHandlerList){
            var fHandler;
            for(i=0,fHandler;
            (fHandler=aHandlerList[i]);
            i++){
                fHandler.apply(this,aArg)
            }
            
        }
        return !oEvent._aExtend.pop().bCanceled
    }
    ,attach:function(sEvent,fHandlerToAttach){
        if(arguments.length==1){
            jindo.$H(arguments[0]).forEach(jindo.$Fn(function(fHandler,sEvent){
                this.attach(sEvent,fHandler)
            }
            ,this).bind());
            return this
        }
        var aHandler=this._htEventHandler[sEvent];
        if(typeof aHandler=="undefined"){
            aHandler=this._htEventHandler[sEvent]=[]
        }
        aHandler.push(fHandlerToAttach);
        return this
    }
    ,detach:function(sEvent,fHandlerToDetach){
        if(arguments.length==1){
            jindo.$H(arguments[0]).forEach(jindo.$Fn(function(fHandler,sEvent){
                this.detach(sEvent,fHandler)
            }
            ,this).bind());
            return this
        }
        var aHandler=this._htEventHandler[sEvent];
        if(aHandler){
            for(var i=0,fHandler;
            (fHandler=aHandler[i]);
            i++){
                if(fHandler===fHandlerToDetach){
                    aHandler=aHandler.splice(i,1);
                    break
                }
                
            }
            
        }
        return this
    }
    ,detachAll:function(sEvent){
        var aHandler=this._htEventHandler;
        if(arguments.length){
            if(typeof aHandler[sEvent]=="undefined"){
                return this
            }
            delete aHandler[sEvent];
            return this
        }
        for(var o in aHandler){
            delete aHandler[o]
        }
        return this
    }
    
});
jindo.Component.factory=function(aObject,htOption){
    var aReturn=[],oInstance;
    if(typeof htOption=="undefined"){
        htOption={}
    }
    for(var i=0,el;
    (el=aObject[i]);
    i++){
        oInstance=new this(el,htOption);
        aReturn[aReturn.length]=oInstance
    }
    return aReturn
};
jindo.Component.getInstance=function(){
    if(typeof this._aInstance=="undefined"){
        this._aInstance=[]
    }
    return this._aInstance
};
jindo.UIComponent=jindo.$Class({
    $init:function(){
        this._bIsActivating=false
    }
    ,isActivating:function(){
        return this._bIsActivating
    }
    ,activate:function(){
        if(this.isActivating()){
            return this
        }
        this._bIsActivating=true;
        if(arguments.length>0){
            this._onActivate.apply(this,arguments)
        }
        else{
            this._onActivate()
        }
        return this
    }
    ,deactivate:function(){
        if(!this.isActivating()){
            return this
        }
        this._bIsActivating=false;
        if(arguments.length>0){
            this._onDeactivate.apply(this,arguments)
        }
        else{
            this._onDeactivate()
        }
        return this
    }
    
}).extend(jindo.Component);
if(typeof jindo.m=="undefined"&&typeof Node!="undefined"){
    var ___Old__addEventListener___=Node.prototype.addEventListener;
    Node.prototype.addEventListener=function(type,listener,useCapture){
        var callee=arguments.callee;
        if(callee&&type==="click"&&this.tagName==="A"){
            (this.___listeners___||(this.___listeners___=[])).push({
                listener:listener,useCapture:useCapture
            })
        }
        return ___Old__addEventListener___.apply(this,arguments)
    };
    var ___Old__removeEventListener___=Node.prototype.removeEventListener;
    Node.prototype.removeEventListener=function(type,listener,useCapture){
        var callee=arguments.callee;
        if(callee&&type==="click"&&this.tagName==="A"){
            if(this.___listeners___){
                this.___listeners___.pop()
            }
            
        }
        return ___Old__removeEventListener___.apply(this,arguments)
    }
    
}
jindo.m=(function(){
    var __M__=jindo.$Class({
        $init:function(){
            this._initVar();
            this._initDeviceInfo();
            this._attachEvent()
        }
        ,_initVar:function(){
            this.MOVETYPE={
                0:"hScroll",1:"vScroll",2:"dScroll",3:"tap",4:"longTap",5:"doubleTap",6:"pinch",7:"rotate",8:"pinch-rotate"
            };
            this.sVersion="1.3.1";
            this._isVertical=null;
            this._nPreWidth=-1;
            this._nRotateTimer=null;
            this._htHandler={};
            this._htDeviceInfo={}
        }
        ,_getOrientationChangeEvt:function(){
            var bEvtName="onorientationchange" in window?"orientationchange":"resize";
            var htInfo=this.getDeviceInfo();
            if((htInfo.android&&htInfo.version==="2.1")){
                bEvtName="resize"
            }
            return bEvtName
        }
        ,_getVertical:function(){
            var bVertical=null,sEventType=this._getOrientationChangeEvt();
            if(sEventType==="resize"){
                var screenWidth=document.documentElement.clientWidth;
                if(screenWidth<this._nPreWidth){
                    bVertical=true
                }
                else{
                    if(screenWidth==this._nPreWidth){
                        bVertical=this._isVertical
                    }
                    else{
                        bVertical=false
                    }
                    
                }
                this._nPreWidth=screenWidth
            }
            else{
                var windowOrientation=window.orientation;
                if(windowOrientation===0||windowOrientation==180){
                    bVertical=true
                }
                else{
                    if(windowOrientation==90||windowOrientation==-90){
                        bVertical=false
                    }
                    
                }
                
            }
            return bVertical
        }
        ,_attachEvent:function(){
            this._rotateEvent=jindo.$Fn(this._onOrientationChange,this).attach(window,this._getOrientationChangeEvt()).attach(window,"load");
            this._pageShowEvent=jindo.$Fn(this._onPageshow,this).attach(window,"pageshow")
        }
        ,_initDeviceInfo:function(){
            var sName=navigator.userAgent;
            var ar=null;
            function f(s,h){
                return((h||"").indexOf(s)>-1)
            }
            this._htDeviceInfo.iphone=f("iPhone",sName);
            this._htDeviceInfo.ipad=f("iPad",sName);
            this._htDeviceInfo.android=f("Android",sName);
            this._htDeviceInfo.galaxyTab=f("SHW-M180",sName);
            this._htDeviceInfo.galaxyTab2=f("SHW-M380",sName);
            this._htDeviceInfo.galaxyK=f("SHW-M130K",sName);
            this._htDeviceInfo.galaxyU=f("SHW-M130L",sName);
            this._htDeviceInfo.galaxyS=f("SHW-M110",sName);
            this._htDeviceInfo.galaxyS2=f("SHW-M250",sName);
            this._htDeviceInfo.galaxyS2LTE=f("SHV-E110",sName);
            this._htDeviceInfo.galaxyS3=f("SHV-E210",sName)||f("SHW-M440",sName);
            this._htDeviceInfo.galaxyNote=f("SHV-E160",sName);
            this._htDeviceInfo.galaxyNexus=f("Galaxy Nexus",sName);
            this._htDeviceInfo.optimusLte2=f("LG-F160",sName);
            this._htDeviceInfo.optimusVu=f("LG-F100",sName);
            this._htDeviceInfo.optimusLte=f("LG-LU6200",sName)||f("LG-SU640",sName)||f("LG-F120K",sName);
            this._htDeviceInfo.version="";
            this._htDeviceInfo.bChrome=this._htDeviceInfo.android&&(f("CrMo",sName)||f("Chrome",sName));
            this._htDeviceInfo.bInapp=false;
            if(this._htDeviceInfo.iphone||this._htDeviceInfo.ipad){
                ar=sName.match(/OS\s([\d|\_]+\s)/i);
                if(ar!==null&&ar.length>1){
                    this._htDeviceInfo.version=ar[1]
                }
                
            }
            else{
                if(this._htDeviceInfo.android){
                    ar=sName.match(/Android\s([^\;]*)/i);
                    if(ar!==null&&ar.length>1){
                        this._htDeviceInfo.version=ar[1]
                    }
                    
                }
                
            }
            this._htDeviceInfo.version=this._htDeviceInfo.version.replace(/\_/g,".");
            for(var x in this._htDeviceInfo){
                if(typeof this._htDeviceInfo[x]=="boolean"&&this._htDeviceInfo[x]&&this._htDeviceInfo.hasOwnProperty(x)){
                    this._htDeviceInfo.name=x
                }
                
            }
            this._htDeviceInfo.samsung=f("GT-",sName)||f("SCH-",sName)||f("SHV-",sName)||f("SHW-",sName)||f("SPH",sName)||f("SWT-",sName)||f("SGH-",sName);
            this._htDeviceInfo.lg=f("LG-",sName);
            this._htDeviceInfo.pantech=f("IM-",sName);
            if(this._htDeviceInfo.iphone||this._htDeviceInfo.ipad){
                if(!f("Safari",sName)){
                    this._htDeviceInfo.bInapp=true
                }
                
            }
            else{
                if(this._htDeviceInfo.android){
                    sName=sName.toLowerCase();
                    if(f("inapp",sName)||f("app",sName.replace("applewebkit",""))){
                        this._htDeviceInfo.bInapp=true
                    }
                    
                }
                
            }
            
        }
        ,_onOrientationChange:function(we){
            var self=this;
            if(we.type==="load"){
                this._nPreWidth=document.documentElement.clientWidth;
                if(!this._htDeviceInfo.bInapp&&(this._htDeviceInfo.iphone||this._htDeviceInfo.ipad||this._getOrientationChangeEvt()!=="resize")){
                    this._isVertical=this._getVertical()
                }
                else{
                    if(this._nPreWidth>document.documentElement.clientHeight){
                        this._isVertical=false
                    }
                    else{
                        this._isVertical=true
                    }
                    
                }
                return
            }
            if(this._getOrientationChangeEvt()==="resize"){
                setTimeout(function(){
                    self._orientationChange(we)
                }
                ,0)
            }
            else{
                var nTime=200;
                if(this.getDeviceInfo().android){
                    nTime=500
                }
                clearTimeout(this._nRotateTimer);
                this._nRotateTimer=setTimeout(function(){
                    self._orientationChange(we)
                }
                ,nTime)
            }
            
        }
        ,_orientationChange:function(we){
            var nPreVertical=this._isVertical;
            this._isVertical=this._getVertical();
            if(jindo.$Agent().navigator().mobile||jindo.$Agent().os().ipad){
                if(nPreVertical!==this._isVertical){
                    this.fireEvent("mobilerotate",{
                        isVertical:this._isVertical
                    })
                }
                
            }
            else{
                this.fireEvent("mobilerotate",{
                    isVertical:this._isVertical
                })
            }
            
        }
        ,bindRotate:function(fHandlerToBind){
            var aHandler=this._htHandler.mobilerotate;
            if(typeof aHandler=="undefined"){
                aHandler=this._htHandler.mobilerotate=[]
            }
            aHandler.push(fHandlerToBind);
            this.attach("mobilerotate",fHandlerToBind)
        }
        ,unbindRotate:function(fHandlerToUnbind){
            var aHandler=this._htHandler.mobilerotate;
            if(aHandler){
                for(var i=0,fHandler;
                (fHandler=aHandler[i]);
                i++){
                    if(fHandler===fHandlerToUnbind){
                        aHandler.splice(i,1);
                        this.detach("mobilerotate",fHandlerToUnbind);
                        break
                    }
                    
                }
                
            }
            
        }
        ,_onPageshow:function(we){
            this._isVertical=this._getVertical();
            var self=this;
            setTimeout(function(){
                self.fireEvent("mobilePageshow",{})
            }
            ,300)
        }
        ,bindPageshow:function(fHandlerToBind){
            var aHandler=this._htHandler.mobilePageshow;
            if(typeof aHandler=="undefined"){
                aHandler=this._htHandler.mobilePageshow=[]
            }
            aHandler.push(fHandlerToBind);
            this.attach("mobilePageshow",fHandlerToBind)
        }
        ,unbindPageshow:function(fHandlerToUnbind){
            var aHandler=this._htHandler.mobilePageshow;
            if(aHandler){
                for(var i=0,fHandler;
                (fHandler=aHandler[i]);
                i++){
                    if(fHandler===fHandlerToUnbind){
                        aHandler.splice(i,1);
                        this.detach("mobilePageshow",fHandlerToUnbind);
                        break
                    }
                    
                }
                
            }
            
        }
        ,getDeviceInfo:function(){
            return this._htDeviceInfo
        }
        ,isVertical:function(){
            if(this._isVertical===null){
                return this._getVertical()
            }
            else{
                return this._isVertical
            }
            
        }
        ,getNodeElement:function(el){
            while(el.nodeType!=1){
                el=el.parentNode
            }
            return el
        }
        ,getCssOffset:function(element){
            var htOffset;
            if(jindo.m.getDeviceInfo().android&&parseInt(jindo.m.getDeviceInfo().version,10)===3){
                htOffset=jindo.m._getCssOffsetFromStyle(element)
            }
            else{
                if("WebKitCSSMatrix" in window&&"m11" in new WebKitCSSMatrix()){
                    htOffset=jindo.m._getCssOffsetFromCSSMatrix(element)
                }
                else{
                    htOffset=jindo.m._getCssOffsetFromStyle(element)
                }
                
            }
            return htOffset
        }
        ,_getCssOffsetFromStyle:function(element){
            var nTop=nLeft=0,s=element.style[jindo.m.getCssPrefix()+"Transform"];
            if(!!s&&s.length>0){
                aTemp=s.match(/translate.{0,2}\((.*)\)/);
                if(!!aTemp&&aTemp.length>1){
                    var a=aTemp[1].split(",");
                    if(!!a&&a.length>1){
                        nTop=parseInt(a[1],10);
                        nLeft=parseInt(a[0],10)
                    }
                    
                }
                
            }
            return{
                top:nTop,left:nLeft
            }
            
        }
        ,_getCssOffsetFromCSSMatrix:function(element){
            var curTransform=new WebKitCSSMatrix(window.getComputedStyle(element).webkitTransform);
            return{
                top:curTransform.m42,left:curTransform.m41
            }
            
        }
        ,attachTransitionEnd:function(element,fHandlerToBind){
            var nVersion=+jindo.$Jindo().version.replace(/[a-z.]/gi,"");
            if(nVersion>=151){
                element._jindo_fn_=jindo.$Fn(fHandlerToBind,this).attach(element,"transitionend")
            }
            else{
                element.addEventListener("webkitTransitionEnd",fHandlerToBind,false)
            }
            
        }
        ,detachTransitionEnd:function(element,fHandlerToUnbind){
            var nVersion=+jindo.$Jindo().version.replace(/[a-z.]/gi,"");
            if(nVersion>=151){
                if(element._jindo_fn_){
                    element._jindo_fn_.detach(element,"transitionend");
                    delete element._jindo_fn_
                }
                
            }
            else{
                element.removeEventListener("webkitTransitionEnd",fHandlerToUnbind,false)
            }
            
        }
        ,getCssPrefix:function(){
            var sCssPrefix="";
            if(typeof document.body.style.MozTransition!=="undefined"){
                sCssPrefix="Moz"
            }
            else{
                if(typeof document.body.style.webkitTransition!=="undefined"){
                    sCssPrefix="webkit"
                }
                else{
                    if(typeof document.body.style.OTransition!=="undefined"){
                        sCssPrefix="O"
                    }
                    
                }
                
            }
            return sCssPrefix
        }
        ,getClosest:function(sSelector,elBaseElement){
            var elClosest;
            var welBaseElement=jindo.$Element(elBaseElement);
            var reg=/<\/?(?:h[1-5]|[a-z]+(?:\:[a-z]+)?)[^>]*>/ig;
            if(reg.test(sSelector)){
                if("<"+elBaseElement.tagName.toUpperCase()+">"==sSelector.toUpperCase()){
                    elClosest=elBaseElement
                }
                else{
                    elClosest=welBaseElement.parent(function(v){
                        if("<"+v.$value().tagName.toUpperCase()+">"==sSelector.toUpperCase()){
                            return v
                        }
                        
                    });
                    elClosest=elClosest.length?elClosest[0].$value():false
                }
                
            }
            else{
                if(sSelector.indexOf(".")==0){
                    sSelector=sSelector.substring(1,sSelector.length)
                }
                if(welBaseElement.hasClass(sSelector)){
                    elClosest=elBaseElement
                }
                else{
                    elClosest=welBaseElement.parent(function(v){
                        if(v.hasClass(sSelector)){
                            return v
                        }
                        
                    });
                    elClosest=elClosest.length?elClosest[0].$value():false
                }
                
            }
            return elClosest
        }
        ,_isUseCss3d:function(isFlicking){
            if(typeof isFlicking==="undefined"){
                isFlicking=false
            }
            var bRet=false;
            if(this._htDeviceInfo.iphone||this._htDeviceInfo.ipad){
                bRet=true
            }
            else{
                if(this._htDeviceInfo.android){
                    var s=navigator.userAgent.match(/\(.*\)/)[0];
                    function f(s,h){
                        return((h||"").indexOf(s)>-1)
                    }
                    var isUseCss3d=f("SHW-",s)||f("SHV-",s)||f("GT-",s)||f("SCH-",s)||f("SGH-",s)||f("SPH-",s)||f("LG-F160",s)||f("LG-F100",s);
                    var isEtc=(f("SHW-M250",s)&&(this._htDeviceInfo.version<="4.0.3"))||f("SHW-M420",s)||f("SHW-M200",s)||f("GT-S7562",s);
                    if(!isFlicking){
                        isEtc=isEtc||f("SHV-E110",s)
                    }
                    if(this._htDeviceInfo.version>="4.0.3"&&isUseCss3d&&!isEtc){
                        bRet=true
                    }
                    
                }
                
            }
            return bRet
        }
        ,_isUseFixed:function(){
            var isFixed=false;
            if(this._htDeviceInfo.bChrome||(this._htDeviceInfo.android&&parseInt(this._htDeviceInfo.version,10)>=3)||((this._htDeviceInfo.iphone||this._htDeviceInfo.ipad)&&(parseInt(this._htDeviceInfo.version,10)>=5))){
                isFixed=true
            }
            return isFixed
        }
        ,_isUseTimingFunction:function(){
            var bUse=this._isUseCss3d();
            if(this._htDeviceInfo.android){
                bUse=false
            }
            return bUse
        }
        ,_clientSize:function(isMinSize){
            if(typeof isMinSize==="undefined"){
                isMinSize=false
            }
            var oSize={};
            var oRet=jindo.$Document().clientSize();
            var nVersion=parseInt(this._htDeviceInfo.version,10);
            if((this._htDeviceInfo.ipad||this._htDeviceInfo.iphone)||this._htDeviceInfo.bChrome){
                if(isMinSize&&this._htDeviceInfo.iphone){
                    oRet.height=this.isVertical()?356:268
                }
                return oRet
            }
            switch(this._htDeviceInfo.name){
                case"galaxyTab":oSize={
                    portrait:400,landscape:683
                };
                oSize.landscape-=92;
                oSize.portrait-=66;
                break;
                case"galaxyTab2":oSize={
                    portrait:1280,landscape:800
                };
                oSize.landscape-=152;
                oSize.portrait-=152;
                break;
                case"galaxyS":oSize={
                    portrait:320,landscape:533
                };
                oSize.landscape-=81;
                oSize.portrait-=81;
                break;
                case"galaxyS2LTE":case"galaxyS2":oSize={
                    portrait:320,landscape:533
                };
                if(nVersion==4){
                    oSize.landscape-=77;
                    oSize.portrait-=77
                }
                else{
                    oSize.landscape-=83;
                    oSize.portrait-=83
                }
                break;
                case"galaxyS3":oSize={
                    portrait:360,landscape:640
                };
                oSize.landscape-=73;
                oSize.portrait-=73;
                break;
                case"galaxyNote":oSize={
                    portrait:400,landscape:640
                };
                if(nVersion==4){
                    oSize.landscape-=77;
                    oSize.portrait-=77
                }
                else{
                    oSize.landscape-=103;
                    oSize.portrait-=103
                }
                break;
                case"galaxyNexus":oSize={
                    portrait:360,landscape:598
                };
                oSize.landscape-=83;
                oSize.portrait-=83;
                break;
                case"optimusLte":oSize={
                    portrait:360,landscape:640
                };
                oSize.landscape-=73;
                oSize.portrait-=73;
                break;
                case"optimusLte2":oSize={
                    portrait:360,landscape:640
                };
                oSize.landscape-=73;
                oSize.portrait-=73;
                break;
                case"optimusVu":oSize={
                    portrait:439,landscape:585
                };
                oSize.landscape-=73;
                oSize.portrait-=73;
                break
            }
            if(this.isVertical()){
                if(isMinSize||(oSize.landscape&&oSize.landscape>oRet.height)){
                    oRet.height=oSize.landscape
                }
                
            }
            else{
                if(isMinSize||(oSize.portrait&&oSize.portrait>oRet.height)){
                    oRet.height=oSize.portrait
                }
                
            }
            return oRet
        }
        ,_getAdressSize:function(){
            var nSize=0;
            if(this._htDeviceInfo.bInapp){
                return nSize
            }
            var nVersion=parseInt(this._htDeviceInfo.version,10);
            if(this._htDeviceInfo.iphone){
                nSize=60
            }
            else{
                if(this._htDeviceInfo.android){
                    switch(this._htDeviceInfo.name){
                        case"galaxyTab":nSize=66;
                        break;
                        case"galaxyTab2":nSize=48;
                        break;
                        case"galaxyS":nSize=56;
                        break;
                        case"galaxyS2LTE":case"galaxyS2":if(nVersion==4){
                            nSize=52
                        }
                        else{
                            nSize=58
                        }
                        break;
                        case"galaxyS3":nSize=48;
                        break;
                        case"galaxyNote":if(nVersion==4){
                            nSize=52
                        }
                        else{
                            nSize=78
                        }
                        break;
                        case"galaxyNexus":nSize=52;
                        break;
                        case"optimusVu":case"optimusLte":case"optimusLte2":nSize=48;
                        break
                    }
                    
                }
                
            }
            return nSize
        }
        
    }).extend(jindo.Component);
    return new __M__()
})();
jindo.m.Touch=jindo.$Class({
    $init:function(sId,htUserOption){
        this._el=jindo.$(sId);
        var htDefaultOption={
            nMomentumDuration:350,nMoveThreshold:7,nSlopeThreshold:25,nLongTapDuration:1000,nDoubleTapDuration:400,nTapThreshold:6,nPinchThreshold:0.1,nRotateThreshold:5,bActivateOnload:true
        };
        this.option(htDefaultOption);
        this.option(htUserOption||{});
        this._initVariable();
        this._setSlope();
        if(this.option("bActivateOnload")){
            this.activate()
        }
        
    }
    ,_initVariable:function(){
        this._hasTouchEvent="ontouchstart" in window;
        this._radianToDegree=180/Math.PI;
        this._htMoveInfo={
            nStartX:0,nStartY:0,nBeforeX:0,nBeforeY:0,nStartTime:0,nBeforeTime:0,nStartDistance:0,nBeforeDistance:0,nStartAngle:0,nLastAngle:0
        };
        this.bStart=false;
        this.bMove=false;
        this.nMoveType=-1;
        this.htEndInfo={};
        this._nVSlope=0;
        this._nHSlope=0;
        this.bSetSlope=false
    }
    ,_attachEvents:function(){
        this._htEvent={};
        var bTouch=this._hasTouchEvent;
        this._htEvent[bTouch?"touchstart":"mousedown"]={
            ref:jindo.$Fn(this._onStart,this).attach(this._el,(bTouch?"touchstart":"mousedown")),el:this._el
        };
        this._htEvent[bTouch?"touchmove":"mousemove"]={
            ref:jindo.$Fn(this._onMove,this).attach(this._el,(bTouch?"touchmove":"mousemove")),el:this._el
        };
        this._htEvent[bTouch?"touchend":"mouseup"]={
            ref:jindo.$Fn(this._onEnd,this).attach(this._el,(bTouch?"touchend":"mouseup")),el:this._el
        };
        this._htEvent.rotate=jindo.$Fn(this._onResize,this).bind();
        jindo.m.bindRotate(this._htEvent.rotate);
        if(bTouch){
            this._htEvent.touchcancel={
                ref:jindo.$Fn(this._onCancel,this).attach(this._el,"touchcancel"),el:this._el
            }
            
        }
        
    }
    ,_detachEvents:function(){
        for(var p in this._htEvent){
            var htTargetEvent=this._htEvent[p];
            if(htTargetEvent.ref){
                htTargetEvent.ref.detach(htTargetEvent.el,p)
            }
            
        }
        jindo.m.unbindRotate(this._htEvent.rotate);
        this._htEvent=null
    }
    ,_onCancel:function(oEvent){
        this._onEnd(oEvent)
    }
    ,_onStart:function(oEvent){
        this._resetTouchInfo();
        var htInfo=this._getTouchInfo(oEvent);
        var htParam={
            element:htInfo[0].el,nX:htInfo[0].nX,nY:htInfo[0].nY,oEvent:oEvent
        };
        if(!this._fireCustomEvent("touchStart",htParam)){
            return
        }
        this.bStart=true;
        this._htMoveInfo.nStartX=htInfo[0].nX;
        this._htMoveInfo.nBeforeX=htInfo[0].nX;
        this._htMoveInfo.nStartY=htInfo[0].nY;
        this._htMoveInfo.nBeforeY=htInfo[0].nY;
        this._htMoveInfo.nStartTime=htInfo[0].nTime;
        this._htMoveInfo.aStartInfo=htInfo;
        this._startLongTapTimer(htInfo,oEvent)
    }
    ,_onMove:function(oEvent){
        if(!this.bStart){
            return
        }
        this.bMove=true;
        var htInfo=this._getTouchInfo(oEvent);
        var htParam=this._getCustomEventParam(htInfo,false);
        if(htInfo.length===1){
            if(this.nMoveType<0||this.nMoveType==3||this.nMoveType==4){
                this.nMoveType=this._getMoveType(htInfo)
            }
            
        }
        else{
            if(this.nMoveType!==8){
                this.nMoveType=this._getMoveType(htInfo)
            }
            
        }
        htParam=this._getCustomEventParam(htInfo,false);
        if((typeof this._nLongTapTimer!="undefined")&&this.nMoveType!=3){
            this._deleteLongTapTimer()
        }
        htParam.oEvent=oEvent;
        var nDis=0;
        if(this.nMoveType==0){
            nDis=Math.abs(htParam.nVectorX)
        }
        else{
            if(this.nMoveType==1){
                nDis=Math.abs(htParam.nVectorY)
            }
            else{
                nDis=Math.abs(htParam.nVectorX)+Math.abs(htParam.nVectorY)
            }
            
        }
        if(nDis<this.option("nMoveThreshold")){
            return
        }
        if(!this.fireEvent("touchMove",htParam)){
            this.bStart=false;
            return
        }
        this._htMoveInfo.nBeforeX=htInfo[0].nX;
        this._htMoveInfo.nBeforeY=htInfo[0].nY;
        this._htMoveInfo.nBeforeTime=htInfo[0].nTime
    }
    ,_onEnd:function(oEvent){
        if(!this.bStart){
            return
        }
        var self=this;
        this._deleteLongTapTimer();
        if(!this.bMove&&(this.nMoveType!=4)){
            this.nMoveType=3
        }
        if(this.nMoveType<0){
            return
        }
        var htInfo=this._getTouchInfo(oEvent);
        if(this._isDblTap(htInfo[0].nX,htInfo[0].nY,htInfo[0].nTime)){
            clearTimeout(this._nTapTimer);
            delete this._nTapTimer;
            this.nMoveType=5
        }
        var htParam=this._getCustomEventParam(htInfo,true);
        htParam.oEvent=oEvent;
        var sMoveType=htParam.sMoveType;
        if((typeof this._htEventHandler[jindo.m.MOVETYPE[5]]!="undefined"&&(this._htEventHandler[jindo.m.MOVETYPE[5]].length>0))&&(this.nMoveType==3)){
            this._nTapTimer=setTimeout(function(){
                self.fireEvent("touchEnd",htParam);
                self._fireCustomEvent(sMoveType,htParam);
                delete self._nTapTimer
            }
            ,this.option("nDoubleTapDuration"))
        }
        else{
            this.fireEvent("touchEnd",htParam);
            if(this.nMoveType!=4){
                if(this.nMoveType===8){
                    htParam.sMoveType=jindo.m.MOVETYPE[6];
                    this._fireCustomEvent(jindo.m.MOVETYPE[6],htParam);
                    htParam.sMoveType=jindo.m.MOVETYPE[7];
                    this._fireCustomEvent(jindo.m.MOVETYPE[7],htParam)
                }
                else{
                    setTimeout(function(){
                        self._fireCustomEvent(sMoveType,htParam)
                    }
                    ,0)
                }
                
            }
            
        }
        this._updateTouchEndInfo(htInfo);
        this._resetTouchInfo()
    }
    ,_fireCustomEvent:function(sEvent,htOption){
        return this.fireEvent(sEvent,htOption)
    }
    ,_getCustomEventParam:function(htTouchInfo,bTouchEnd){
        var sMoveType=jindo.m.MOVETYPE[this.nMoveType];
        var nDuration=htTouchInfo[0].nTime-this._htMoveInfo.nStartTime;
        var nVectorX=nVectorY=nMomentumX=nMomentumY=nSpeedX=nSpeedY=nDisX=nDisY=0;
        nDisX=(this.nMoveType===1)?0:htTouchInfo[0].nX-this._htMoveInfo.nStartX;
        nDisY=(this.nMoveType===0)?0:htTouchInfo[0].nY-this._htMoveInfo.nStartY;
        nVectorX=htTouchInfo[0].nX-this._htMoveInfo.nBeforeX;
        nVectorY=htTouchInfo[0].nY-this._htMoveInfo.nBeforeY;
        if(bTouchEnd&&(this.nMoveType==0||this.nMoveType==1||this.nMoveType==2)){
            if(nDuration<=this.option("nMomentumDuration")){
                nSpeedX=Math.abs(nDisX)/nDuration;
                nMomentumX=(nSpeedX*nSpeedX)/2;
                nSpeedY=Math.abs(nDisY)/nDuration;
                nMomentumY=(nSpeedY*nSpeedY)/2
            }
            
        }
        var htParam={
            element:htTouchInfo[0].el,nX:htTouchInfo[0].nX,nY:htTouchInfo[0].nY,nVectorX:nVectorX,nVectorY:nVectorY,nDistanceX:nDisX,nDistanceY:nDisY,sMoveType:sMoveType,nStartX:this._htMoveInfo.nStartX,nStartY:this._htMoveInfo.nStartY,nStartTimeStamp:this._htMoveInfo.nStartTime
        };
        if((htTouchInfo.length)>1||(this.nMoveType>=6)){
            htParam.nScale=this._getScale(htTouchInfo);
            htParam.nRotation=this._getRotation(htTouchInfo);
            if(htParam.nScale===null){
                htParam.nScale=this._htMoveInfo.nBeforeScale
            }
            if(htParam.nRotation===null){
                htParam.nRotation=this._htMoveInfo.nBeforeRotation
            }
            
        }
        if(htTouchInfo.length>=1){
            var aX=[];
            var aY=[];
            var aElement=[];
            for(var i=0,nLen=htTouchInfo.length;
            i<nLen;
            i++){
                aX.push(htTouchInfo[i].nX);
                aY.push(htTouchInfo[i].nY);
                aElement.push(htTouchInfo[i].el)
            }
            htParam.aX=aX;
            htParam.aY=aY;
            htParam.aElement=aElement
        }
        if(bTouchEnd){
            htParam.nMomentumX=nMomentumX;
            htParam.nMomentumY=nMomentumY;
            htParam.nSpeedX=nSpeedX;
            htParam.nSpeedY=nSpeedY;
            htParam.nDuration=nDuration
        }
        return htParam
    }
    ,_updateTouchEndInfo:function(htInfo){
        this.htEndInfo={
            element:htInfo[0].el,time:htInfo[0].nTime,movetype:this.nMoveType,nX:htInfo[0].nX,nY:htInfo[0].nY
        }
        
    }
    ,_deleteLongTapTimer:function(){
        if(typeof this._nLongTapTimer!="undefined"){
            clearTimeout(this._nLongTapTimer);
            delete this._nLongTapTimer
        }
        
    }
    ,_startLongTapTimer:function(htInfo,oEvent){
        var self=this;
        if((typeof this._htEventHandler[jindo.m.MOVETYPE[4]]!="undefined")&&(this._htEventHandler[jindo.m.MOVETYPE[4]].length>0)){
            self._nLongTapTimer=setTimeout(function(){
                self.fireEvent("longTap",{
                    element:htInfo[0].el,oEvent:oEvent,nX:htInfo[0].nX,nY:htInfo[0].nY
                });
                delete self._nLongTapTimer;
                self.nMoveType=4
            }
            ,self.option("nLongTapDuration"))
        }
        
    }
    ,_onResize:function(){
        this._setSlope()
    }
    ,_isDblTap:function(nX,nY,nTime){
        if((typeof this._nTapTimer!="undefined")&&this.nMoveType==3){
            var nGap=this.option("nTapThreshold");
            if((Math.abs(this.htEndInfo.nX-nX)<=nGap)&&(Math.abs(this.htEndInfo.nY-nY)<=nGap)){
                return true
            }
            
        }
        return false
    }
    ,_setSlope:function(){
        if(!this.bSetSlope){
            this._nHSlope=((window.innerHeight/2)/window.innerWidth).toFixed(2)*1;
            this._nVSlope=(window.innerHeight/(window.innerWidth/2)).toFixed(2)*1
        }
        
    }
    ,setSlope:function(nVSlope,nHSlope){
        this._nHSlope=nHSlope;
        this._nVSlope=nVSlope;
        this.bSetSlope=true
    }
    ,getSlope:function(){
        return{
            nVSlope:this._nVSlope,nHSlope:this._nHSlope
        }
        
    }
    ,_resetTouchInfo:function(){
        for(var x in this._htMoveInfo){
            this._htMoveInfo[x]=0
        }
        this._deleteLongTapTimer();
        this.bStart=false;
        this.bMove=false;
        this.nMoveType=-1
    }
    ,_getMoveTypeBySingle:function(x,y){
        var nType=this.nMoveType;
        var nX=Math.abs(this._htMoveInfo.nStartX-x);
        var nY=Math.abs(this._htMoveInfo.nStartY-y);
        var nDis=nX+nY;
        var nGap=this.option("nTapThreshold");
        if((nX<=nGap)&&(nY<=nGap)){
            nType=3
        }
        else{
            nType=-1
        }
        if(this.option("nSlopeThreshold")<=nDis){
            var nSlope=parseFloat((nY/nX).toFixed(2),10);
            if((this._nHSlope===-1)&&(this._nVSlope===-1)){
                nType=2
            }
            else{
                if(nSlope<=this._nHSlope){
                    nType=0
                }
                else{
                    if(nSlope>=this._nVSlope){
                        nType=1
                    }
                    else{
                        nType=2
                    }
                    
                }
                
            }
            
        }
        return nType
    }
    ,_getMoveTypeByMulti:function(aPos){
        var nType=-1;
        if((this.nMoveType===6)||Math.abs(1-this._htMoveInfo.nBeforeScale)>=this.option("nPinchThreshold")){
            nType=6
        }
        if((this.nMoveType===7)||Math.abs(0-this._htMoveInfo.nBeforeRotation)>=this.option("nRotateThreshold")){
            if(nType===6){
                nType=8
            }
            else{
                nType=7
            }
            
        }
        if(nType===-1){
            return this.nMoveType
        }
        return nType
    }
    ,_getScale:function(aPos){
        var nScale=-1;
        var nDistance=this._getDistance(aPos);
        if(nDistance<=0){
            return null
        }
        if(this._htMoveInfo.nStartDistance===0){
            nScale=1;
            this._htMoveInfo.nStartDistance=nDistance
        }
        else{
            nScale=nDistance/this._htMoveInfo.nStartDistance
        }
        this._htMoveInfo.nBeforeScale=nScale;
        return nScale
    }
    ,_getRotation:function(aPos){
        var nRotation=-1;
        var nAngle=this._getAngle(aPos);
        if(nAngle===null){
            return null
        }
        if(this._htMoveInfo.nStartAngle===0){
            this._htMoveInfo.nStartAngle=nAngle;
            nRotation=0
        }
        else{
            nRotation=nAngle-this._htMoveInfo.nStartAngle
        }
        this._htMoveInfo.nLastAngle=nAngle;
        this._htMoveInfo.nBeforeRotation=nRotation;
        return nRotation
    }
    ,_getMoveType:function(aPos){
        var nType=this.nMoveType;
        if(aPos.length===1){
            nType=this._getMoveTypeBySingle(aPos[0].nX,aPos[0].nY)
        }
        else{
            if(aPos.length===2){
                nType=this._getMoveTypeByMulti(aPos)
            }
            
        }
        return nType
    }
    ,_getDistance:function(aPos){
        if(aPos.length===1){
            return -1
        }
        return Math.sqrt(Math.pow(Math.abs(aPos[0].nX-aPos[1].nX),2)+Math.pow(Math.abs(aPos[0].nY-aPos[1].nY),2))
    }
    ,_getAngle:function(aPos){
        if(aPos.length===1){
            return null
        }
        var deltaX=aPos[0].nX-aPos[1].nX,deltaY=aPos[0].nY-aPos[1].nY;
        var nAngle=Math.atan2(deltaY,deltaX)*this._radianToDegree;
        if(this._htMoveInfo.nLastAngle!==null){
            var nDiff=Math.abs(this._htMoveInfo.nLastAngle-nAngle);
            var nNext=nAngle+360;
            var nPrev=nAngle-360;
            if(Math.abs(nNext-this._htMoveInfo.nLastAngle)<nDiff){
                nAngle=nNext
            }
            else{
                if(Math.abs(nPrev-this._htMoveInfo.nLastAngle)<nDiff){
                    nAngle=nPrev
                }
                
            }
            
        }
        return nAngle
    }
    ,_getTouchInfo:function(oEvent){
        var aReturn=[];
        var nTime=oEvent.$value().timeStamp;
        if(this._hasTouchEvent){
            var oTouch=oEvent.$value().changedTouches;
            for(var i=0,nLen=oTouch.length;
            i<nLen;
            i++){
                aReturn.push({
                    el:jindo.m.getNodeElement(oTouch[i].target),nX:oTouch[i].pageX,nY:oTouch[i].pageY,nTime:nTime
                })
            }
            
        }
        else{
            aReturn.push({
                el:oEvent.element,nX:oEvent.pos().pageX,nY:oEvent.pos().pageY,nTime:nTime
            })
        }
        return aReturn
    }
    ,getBaseElement:function(el){
        return this._el
    }
    ,_onDeactivate:function(){
        this._detachEvents()
    }
    ,_onActivate:function(){
        this._attachEvents()
    }
    ,destroy:function(){
        this.deactivate();
        this._el=null;
        for(var p in this._htMoveInfo){
            this._htMoveInfo[p]=null
        }
        this._htMoveInfo=null;
        for(var p in this.htEndInfo){
            this.htEndInfo[p]=null
        }
        this.htEndInfo=null;
        this.bStart=null;
        this.bMove=null;
        this.nMoveType=null;
        this._nVSlope=null;
        this._nHSlope=null;
        this.bSetSlope=null
    }
    
}).extend(jindo.UIComponent);
jindo.m.Slider=jindo.$Class({
    $init:function(sId,htUserOption){
        this.option({
            sClassPrefix:"slider-",bVertical:false,nMinValue:0,nMaxValue:100,nDefaultValue:0,bActivateOnload:true
        });
        this.option(htUserOption||{});
        this._setWrapperElement(sId);
        this._initVar();
        if(this.option("bActivateOnload")){
            this.activate();
            this.setValue(this.option("nDefaultValue"))
        }
        
    }
    ,_initVar:function(){
        var nMove=this.option("bVertical")?0:6;
        this._oTouch=new jindo.m.Touch(this._htWElement.track.$value(),{
            nMoveGap:nMove,bActivateOnload:false
        });
        this._oTouch.attach({
            touchMove:jindo.$Fn(this._onMove,this).bind(),touchEnd:jindo.$Fn(this._onMove,this).bind(),touchStart:jindo.$Fn(this._onStart,this).bind()
        });
        this._htSwap={
            left:this.option("bVertical")?"top":"left",width:this.option("bVertical")?"height":"width",nX:this.option("bVertical")?"nY":"nX"
        };
        var nSize=this._htWElement.thumb[this._htSwap.width]()/2;
        this._htWElement.thumb.css("margin-"+this._htSwap.left,nSize*-1)
    }
    ,_setWrapperElement:function(el){
        this._htWElement={};
        el=jindo.$(el);
        var sClass="."+this.option("sClassPrefix");
        this._htWElement.track=jindo.$Element(el);
        var elThumb=jindo.$$.getSingle(sClass+"thumb",el);
        this._htWElement.thumb=elThumb?jindo.$Element(elThumb):null;
        var elRang=jindo.$$.getSingle(sClass+"range",el);
        this._htWElement.range=elRang?jindo.$Element(elRang):null
    }
    ,_onStart:function(oCustomEvt){
        var htParam={
            nValue:this.getValue(),nPosition:this.getPosition()
        };
        if(!this.fireEvent("touchStart",htParam)){
            return
        }
        oCustomEvt.oEvent.stop(jindo.$Event.CANCEL_DEFAULT)
    }
    ,_onMove:function(oCustomEvt){
        if(oCustomEvt.sType=="touchMove"){
            oCustomEvt.oEvent.stop(jindo.$Event.CANCEL_DEFAULT)
        }
        var nCurrent=oCustomEvt[this._htSwap.nX]-this._htWElement.track.offset()[this._htSwap.left]-(this._htWElement.thumb[this._htSwap.width]()/2);
        var nPos=this._getAdjustedPos(nCurrent);
        this._move(nPos);
        this.fireEvent(oCustomEvt.sType,{
            nValue:this.getValue(),nPosition:this.getPosition()
        })
    }
    ,_move:function(nPos,bFireEvent){
        if(typeof bFireEvent=="undefined"){
            bFireEvent=true
        }
        var nValue=this.getValue(nPos);
        var nAdjustPos=Math.round(nPos);
        var nAdjustValue=this.getValue(nAdjustPos);
        var htOption={
            nValue:nValue,nPosition:nPos,nAdjustValue:nAdjustValue,nAdjustPosition:nAdjustPos
        };
        if(bFireEvent&&!this._fireBeforeEvent(htOption)){
            return
        }
        if(htOption.nAdjustValue!=nAdjustValue){
            htOption.nAdjustPosition=this._getPositionFromValue(htOption.nAdjustValue)
        }
        this._moveThumb(htOption.nAdjustPosition);
        if(bFireEvent){
            this._fireChangeEvent(htOption)
        }
        if(this._htWElement.range){
            this._htWElement.range.css(this._htSwap.width,htOption.nAdjustPosition+"%")
        }
        
    }
    ,_fireBeforeEvent:function(htOption){
        return this.fireEvent("beforeChange",htOption)
    }
    ,_fireChangeEvent:function(htOption){
        this.fireEvent("change",htOption)
    }
    ,_moveThumb:function(n){
        if(n>100||n<0){
            return
        }
        this._htWElement.thumb.css("webkitTransitionDuration","0ms");
        this._htWElement.thumb.css("webkitTransitionProperty",this._htSwap.left);
        this._htWElement.thumb.css(this._htSwap.left,n+"%")
    }
    ,_getTrackInfo:function(){
        var nTrackSize=this.option("bVertical")?this._htWElement.track.height():this._htWElement.track.width();
        var nThumbSize=this.option("bVertical")?this._htWElement.thumb.height():this._htWElement.thumb.width();
        var nMaxPos=nTrackSize-(nThumbSize/2);
        return{
            maxPos:nMaxPos,max:this.option("nMaxValue")*1,min:this.option("nMinValue")*1
        }
        
    }
    ,getValue:function(nPos){
        if(typeof nPos=="undefined"){
            nPos=this.getPosition()
        }
        var oInfo=this._getTrackInfo();
        var nValue=oInfo.min+((oInfo.max-oInfo.min)*(nPos/100));
        return nValue
    }
    ,setValue:function(nValue,bFireEvent){
        nValue=nValue*1;
        var nPos=this._getPositionFromValue(nValue);
        if(typeof bFireEvent=="undefined"){
            bFireEvent=true
        }
        this._move(nPos,bFireEvent)
    }
    ,_getAdjustedPos:function(nDistance){
        var htInfo=this._getTrackInfo();
        var nPecent=(nDistance*100)/htInfo.maxPos;
        nPecent=Math.max(0,nPecent);
        nPecent=Math.min(nPecent,100);
        return nPecent
    }
    ,getPosition:function(){
        var sPos=this._htWElement.thumb.css(this._htSwap.left);
        return(sPos=="auto")?0:parseFloat(sPos,10)
    }
    ,setPosition:function(nPos,bFireEvent){
        if(typeof bFireEvent=="undefined"){
            bFireEvent=true
        }
        this._move(nPos,bFireEvent)
    }
    ,_getPositionFromValue:function(nValue){
        var htInfo=this._getTrackInfo();
        var nPecent=((nValue-htInfo.min)*100)/(htInfo.max-htInfo.min);
        nPecent=isNaN(nPecent)?100:nPecent;
        nPecent=Math.max(0,nPecent);
        nPecent=Math.min(100,nPecent);
        return nPecent
    }
    ,_onClick:function(evt){
        evt.stop()
    }
    ,_attachEvent:function(){
        this._htEvent={}
    }
    ,_detachEvent:function(sEventKey){
        if(sEventKey){
            var htTargetEvent=this._htEvent[sEventKey];
            htTargetEvent.ref.detach(htTargetEvent.el,sEventKey)
        }
        
    }
    ,_onActivate:function(){
        this._attachEvent();
        this._oTouch.activate()
    }
    ,_onDeactivate:function(){
        this._detachEvent();
        this._oTouch.deactivate()
    }
    ,destroy:function(){
        this.deactivate();
        for(var p in this._htWElement){
            this._htWElement[p]=null
        }
        this._htWElement=null;
        for(p in this._htSwap){
            this._htSwap[p]=null
        }
        this._htSwap=null;
        this._oTouch.detachAll()
    }
    
}).extend(jindo.UIComponent);
jindo.m.Loading=jindo.$Class({
    $init:function(el,htUserOption){
        this.option({
            bActivateOnload:true,nWidth:31,nHeight:31,sDefaultForeground:"black",sDefaultBackground:"transparent",sLoadingText:"로딩중입니다",bUseFoggy:el?false:true,sFoggyColor:"gray",nFoggyOpacity:0.3
        });
        this.option(htUserOption||{});
        this._setWrapperElement(el);
        if(this.option("bActivateOnload")){
            this.activate()
        }
        
    }
    ,$static:{
        DELAY:["0","-.9167s","-.833s","-.75s","-.667s","-.5833s","-.5s","-.41667s","-.333s","-.25s","-.1667s","-.0833s"],ANIMATION_STYLE:"_loading_animation_sytle_",CONTAINER_CLASS:"_loading_container_class_"
    }
    ,_setWrapperElement:function(el){
        this._htWElement={};
        this._htWElement.base=jindo.$Element(jindo.$(el)?jindo.$(el):document.body);
        this._createLoading()
    }
    ,_createLoading:function(){
        this._createLoadingStyle();
        this._htWElement.container=jindo.$Element("<div style='zIndex: 1000'>").addClass(jindo.m.Loading.CONTAINER_CLASS);
        if(this.option("bUseFoggy")){
            this._createFoggy().appendTo(this._htWElement.container)
        }
        this._createLoadingElement();
        this._htWElement.loadingbox=jindo.$Element("<div>").css({
            zIndex:1000,position:"absolute"
        }).append(this._htWElement.loading);
        if(this.option("sLoadingText")){
            this._createLoadingText().appendTo(this._htWElement.loadingbox)
        }
        this._htWElement.loadingbox.appendTo(this._htWElement.container)
    }
    ,_createFoggy:function(){
        return this._htWElement.foggy=jindo.$Element("<div>").css({
            position:"absolute",padding:"0px",margin:"0px",border:"0px",backgroundColor:this.option("sFoggyColor"),opacity:this.option("nFoggyOpacity"),width:"100%",height:"100%",left:"0px",top:"0px",zIndex:1000
        })
    }
    ,_setPosition:function(){
        var nWidth=this._htWElement.loadingbox.width(),nHeight=this._htWElement.loadingbox.height(),htScrollPosition;
        if(this._isBody()){
            htScrollPosition=jindo.$Document().scrollPosition();
            this._htWElement.container.css({
                left:htScrollPosition.left+"px",top:htScrollPosition.top+"px"
            });
            this._htWElement.container.css({
                width:window.innerWidth+"px",height:window.innerHeight+"px"
            })
        }
        else{
            if(this._htWElement.container.width()<nWidth){
                this._htWElement.container.width(nWidth)
            }
            if(this._htWElement.container.height()<nHeight){
                this._htWElement.container.height(nHeight)
            }
            
        }
        this._htWElement.loadingbox.css({
            top:"50%",left:"50%","margin-left":-parseInt(nWidth/2,10)+"px","margin-top":-parseInt(nHeight/2,10)+"px"
        })
    }
    ,_isBody:function(){
        return this._htWElement.base.isEqual(document.body)
    }
    ,show:function(){
        if(this.fireEvent("beforeShow")){
            var aSpan=this._htWElement.loading.queryAll("span"),sCssPrefix=jindo.m.getCssPrefix();
            for(var i=0;
            i<aSpan.length;
            i++){
                jindo.$Element(aSpan[i]).css(sCssPrefix+"Animation","loadingfade 1s linear "+jindo.m.Loading.DELAY[i]+" infinite")
            }
            this._attachEvent();
            this._htWElement.container.show();
            this._setPosition();
            this.fireEvent("show")
        }
        
    }
    ,hide:function(){
        if(this.fireEvent("beforeHide")){
            var aSpan=this._htWElement.loading.queryAll("span"),sCssPrefix=jindo.m.getCssPrefix();
            for(var i=0;
            i<aSpan.length;
            i++){
                jindo.$Element(aSpan[i]).css(sCssPrefix+"Animation","")
            }
            this._detachEvent();
            this._htWElement.container.hide();
            this.fireEvent("hide")
        }
        
    }
    ,_onPrevent:function(we){
        console.log(we.type);
        we.stop(jindo.$Event.CANCEL_ALL);
        return false
    }
    ,_onRotate:function(we){
        if(this._htWElement.container.visible()){
            if(jindo.m.getDeviceInfo().andorid){
                this._setPosition()
            }
            else{
                this._htWElement.container.hide();
                var self=this;
                setTimeout(function(){
                    self._htWElement.container.show();
                    self._setPosition()
                }
                ,0)
            }
            
        }
        
    }
    ,_attachEvent:function(){
        this._htEvent.rotate=jindo.$Fn(this._onRotate,this).bind();
        this._htEvent.prevent=jindo.$Fn(this._onPrevent,this).attach(this._htWElement.container,"touchstart").attach(this._htWElement.container,"touchmove");
        jindo.m.bindRotate(this._htEvent.rotate)
    }
    ,_detachEvent:function(){
        if(this._htEvent.prevent){
            this._htEvent.prevent.detach(this._htWElement.container,"touchmove").detach(this._htWElement.container,"touchstart")
        }
        jindo.m.unbindRotate(this._htEvent.rotate)
    }
    ,_createLoadingStyle:function(){
        if(!jindo.$(jindo.m.Loading.ANIMATION_STYLE)){
            var elStyle=jindo.$("<style id='"+jindo.m.Loading.ANIMATION_STYLE+"' type='text/css'></style>");
            document.getElementsByTagName("head")[0].appendChild(elStyle);
            elStyle.sheet.insertRule("@keyframes loadingfade{from{opacity:1}to{opacity:0}}",0)
        }
        
    }
    ,_createLoadingElement:function(){
        var sCssPrefix=jindo.m.getCssPrefix(),aHtml=[];
        for(var i=0;
        i<12;
        i++){
            aHtml.push("<span style='display:block;position:absolute;top:40%;left:48%;width:11%;height:24%;border-radius:6px;background:");
            aHtml.push(this.option("sDefaultForeground"));
            aHtml.push("; opacity:0; -");
            aHtml.push(sCssPrefix);
            aHtml.push("-transform:rotate(");
            aHtml.push(i*30);
            aHtml.push("deg) translate(0,-140%);'></span>")
        }
        this._htWElement.loading=jindo.$Element("<div>").css({
            position:"relative",margin:"0 auto"
        }).html(aHtml.join(""))
    }
    ,refresh:function(){
        this._htWElement.loading.css({
            width:this.option("nWidth")+"px",height:this.option("nHeight")+"px",background:this.option("sDefaultBackground")
        });
        if(this._htWElement.text){
            this._htWElement.text.html(this.option("sLoadingText"))
        }
        
    }
    ,_createLoadingText:function(){
        return this._htWElement.text=jindo.$Element("<div>").css({
            margin:"2px 0 0 0",bottom:0,width:"100%","text-align":"center"
        })
    }
    ,_onActivate:function(){
        this._htEvent={};
        this._htWElement.container.appendTo(this._htWElement.base);
        if(this._isBody()){
            this._htWElement.container.css({
                position:"absolute",top:0,left:0,width:"100%",height:"100%"
            }).hide()
        }
        else{
            this._htWElement.container.css({
                position:"relative"
            }).hide()
        }
        this.refresh()
    }
    ,_onDeactivate:function(){
        this._detachEvent();
        this._htWElement.container.leave()
    }
    ,destroy:function(){
        this.deactivate();
        for(var p in this._htWElement){
            this._htWElement[p]=null
        }
        this._htWElement=null
    }
    
}).extend(jindo.UIComponent);
if(typeof jindo.m.TimingFunction==="undefined"){
    jindo.m.TimingFunction={}
}
jindo.m.TimingFunction._cubicBezier=function(x1,y1,x2,y2){
    return function(t){
        var cx=3*x1,bx=3*(x2-x1)-cx,ax=1-cx-bx,cy=3*y1,by=3*(y2-y1)-cy,ay=1-cy-by;
        function sampleCurveX(t){
            return((ax*t+bx)*t+cx)*t
        }
        function sampleCurveY(t){
            return((ay*t+by)*t+cy)*t
        }
        function sampleCurveDerivativeX(t){
            return(3*ax*t+2*bx)*t+cx
        }
        function solveCurveX(x,epsilon){
            var t0,t1,t2,x2,d2,i;
            for(t2=x,i=0;
            i<8;
            i++){
                x2=sampleCurveX(t2)-x;
                if(Math.abs(x2)<epsilon){
                    return t2
                }
                d2=sampleCurveDerivativeX(t2);
                if(Math.abs(d2)<0.000001){
                    break
                }
                t2=t2-x2/d2
            }
            t0=0;
            t1=1;
            t2=x;
            if(t2<t0){
                return t0
            }
            if(t2>t1){
                return t1
            }
            while(t0<t1){
                x2=sampleCurveX(t2);
                if(Math.abs(x2-x)<epsilon){
                    return t2
                }
                if(x>x2){
                    t0=t2
                }
                else{
                    t1=t2
                }
                t2=(t1-t0)*0.5+t0
            }
            return t2
        }
        return sampleCurveY(solveCurveX(t,1/200))
    }
    
};
jindo.m.TimingFunction.linear=jindo.m.TimingFunction._cubicBezier(0,0,1,1);
jindo.m.TimingFunction.ease_out=jindo.m.TimingFunction._cubicBezier(0,0,0.58,1);
jindo.m.TimingFunction.ease_in=jindo.m.TimingFunction._cubicBezier(0.42,0,1,1);
jindo.m.TimingFunction.ease_in_out=jindo.m.TimingFunction._cubicBezier(0.42,0,0.58,1);
jindo.m.TimingFunction.ease_out_in=jindo.m.TimingFunction._cubicBezier(0,0.42,1,0.58);
jindo.m.TimingFunction.cubicBezier=function(x1,y1,x2,y2){
    return jindo.m.TimingFunction._cubicBezier(x1,y1,x2,y2)
};
jindo.m.Transition=jindo.$Class({
    _aTaskQueue:null,$init:function(htUserOption){
        this.option({
            sTransitionTimingFunction:"ease-in-out",bUseTimingFunction:jindo.m._isUseTimingFunction()
        });
        this.option(htUserOption||{});
        this._initVar();
        this._attachEvent()
    }
    ,_initVar:function(){
        this._aTaskQueue=[];
        this._bIsPlaying=false;
        this._sCssPrefix=jindo.m.getCssPrefix();
        this._aBeforeStatus=[];
        if(this._sCssPrefix.length>0){
            this._sCssPrefix="-"+this._sCssPrefix.toLowerCase()+"-"
        }
        this._bNoUseCss3d=!this.option("bUseTimingFunction");
        this._nTimerAnimate=null;
        this._htCurrentTask=null
    }
    ,start:function(){
        if((!this.isPlaying())&&this.isExistTask()){
            this._prepareTask()
        }
        
    }
    ,isPlaying:function(){
        return this._bIsPlaying
    }
    ,isExistTask:function(){
        if(!this._aTaskQueue){
            return false
        }
        var nLen=this._aTaskQueue.length;
        bValue=(nLen>0)?true:false;
        return bValue
    }
    ,queue:function(elTarget,nDuration,aCommand){
        var htTask={
            sType:"style",sTaskName:"",elTarget:elTarget,nDuration:nDuration
        };
        htTask.htDefault={};
        htTask.htStyle=aCommand.htStyle||{};
        htTask.htTransform=aCommand.htTransform||{};
        htTask.sTaskName=aCommand.sTaskName||null;
        htTask.fCallback=aCommand.fCallback;
        htTask.htDefault["transition-timing-function"]=(typeof htTask.htTransform["transition-timing-function"]==="undefined")?this._getDefaultTransition().sTransitionTimingFunction:htTask.htTransform["transition-timing-function"];
        htTask.htDefault["transition-property"]=(typeof htTask.htTransform["transition-property"]==="undefined")?"all":htTask.htTransform["transition-property"];
        htTask.htDefault["transition-duration"]=nDuration+"ms";
        this._pushTask(htTask);
        return this
    }
    ,stop:function(bAfter){
        if(!this.isPlaying()){
            return
        }
        if(typeof bAfter==="undefined"){
            bAfter=true
        }
        if(!this._fireCustomEvent("stop",{
            element:this._htCurrentTask.elTarget,sTaskName:this._htCurrentTask.sTaskName,nDuration:this._htCurrentTask.nDuration
        })){
            return
        }
        this._stopTransition(bAfter)
    }
    ,clear:function(bStopAfter){
        this.stop(bStopAfter);
        this._aTaskQueue=[]
    }
    ,_resume:function(){
        if(this._htCurrentTask){
            this._doTask()
        }
        
    }
    ,_stopTransition:function(bAfter){
        this._detachTransitionEnd();
        this._elCurrent.style[this._sCssPrefix+"transition-property"]="none";
        this._initTransition();
        if(!bAfter){
            var nIndex=this._getBeforeStatusElement(this._elCurrent);
            if(nIndex>-1){
                jindo.$Element(this._elCurrent).attr("style",this._aBeforeStatus[nIndex].style)
            }
            
        }
        this._htCurrentTask=null;
        this._bIsPlaying=false
    }
    ,_prepareTask:function(){
        var htTask=this._popTask();
        if(htTask===null||!htTask){
            this._bIsPlaying=false;
            return
        }
        this._htCurrentTask=htTask;
        this._resume()
    }
    ,_pushTask:function(htTask){
        this._aTaskQueue.push(htTask)
    }
    ,_popTask:function(){
        if(!this.isExistTask()){
            return null
        }
        var htTask=this._aTaskQueue.shift();
        if(htTask){
            return htTask
        }
        else{
            return null
        }
        
    }
    ,_doTask:function(){
        if(this._htCurrentTask){
            this._bIsPlaying=true;
            if(!this._fireCustomEvent("start",{
                element:this._htCurrentTask.elTarget,sTaskName:this._htCurrentTask.sTaskName,nDuration:this._htCurrentTask.nDuration
            })){
                return
            }
            var el=this._htCurrentTask.elTarget;
            var wel=jindo.$Element(el);
            this._elCurrent=el;
            this._setBeforeStatus(wel);
            var nDuration=this._htCurrentTask.nDuration;
            var bAttachEvt=this._bAttachTransitionEvt();
            if(bAttachEvt){
                this._attachTransitionEnd(el)
            }
            this._setDefaultTransition(wel,bAttachEvt);
            var bDiff=false;
            bDiff=this._setTransform(wel);
            bDiff=this._setStyle(wel,this._htCurrentTask.htStyle)||bDiff;
            if(nDuration===0){
                this._onTransitionEnd()
            }
            else{
                if(!bDiff){
                    var self=this;
                    setTimeout(function(){
                        self._onTransitionEnd()
                    }
                    ,nDuration)
                }
                
            }
            
        }
        
    }
    ,_setDefaultTransition:function(wel,bAttachEvt){
        for(var p in this._htCurrentTask.htDefault){
            var sValue=this._htCurrentTask.htDefault[p];
            if(!(p.indexOf("duration")>-1&&!bAttachEvt)){
                wel.$value().style[this._sCssPrefix+p]=sValue
            }
            
        }
        
    }
    ,_setStyle:function(wel,htOption){
        var bDiff=false;
        for(var p in htOption){
            var sCurrent=wel.css(p);
            if(sCurrent!=htOption[p]){
                bDiff=true
            }
            wel.css(p,htOption[p])
        }
        return bDiff
    }
    ,_setStyleForAndroid:function(){},_setTransform:function(wel){
        var bDiff=false;
        if(this._bNoUseCss3d){
            bDiff=this._setTransformForAnrdoid(wel)
        }
        else{
            bDiff=this._setTransformForIos(wel)
        }
        return bDiff
    }
    ,_setTransformForIos:function(wel){
        var bDiff=false;
        for(var p in this._htCurrentTask.htTransform){
            var sValue=this._htCurrentTask.htTransform[p];
            wel.$value().style[this._sCssPrefix+p]=sValue;
            bDiff=true
        }
        return bDiff
    }
    ,_setTransformForAnrdoid:function(wel){
        var bDiff=false;
        var el=wel.$value();
        for(var p in this._htCurrentTask.htTransform){
            var sValue=this._htCurrentTask.htTransform[p];
            if(sValue.indexOf("translate")>-1){
                var nDuration=this._htCurrentTask.nDuration;
                var reg=new RegExp(/(translate.*)\((.*)\)/);
                var aMatch=sValue.match(reg);
                var sPreValue=aMatch[1];
                var aTemp=aMatch[2].replace(/px/g,"").split(",");
                var sTransfrom="transform";
                var htBeforeOffset=jindo.m.getCssOffset(el);
                var startTime=(new Date()).getTime();
                var self=this;
                (function translate(){
                    var now=(new Date()).getTime();
                    if(now>=(startTime+nDuration)){
                        clearTimeout(self._nTimerAnimate);
                        el.style[self._sCssPrefix+sTransfrom]=sValue;
                        self._onTransitionEnd();
                        return
                    }
                    var nGap=(now-startTime);
                    var nX=((sPreValue.indexOf("X")>-1)||(aTemp.length>1))?aTemp[0]:null;
                    var nY=null;
                    if(sPreValue.indexOf("Y")>-1){
                        nY=aTemp[0]
                    }
                    else{
                        if(aTemp.length>1){
                            nY=aTemp[1]
                        }
                        
                    }
                    var nZ=null;
                    if(sPreValue.indexOf("Z")>-1){
                        nZ=aTemp[0]
                    }
                    else{
                        if(aTemp.length>2){
                            nZ=aTemp[2]
                        }
                        
                    }
                    var aText=[];
                    var sX=(nX!==null)?self._getcubicBeziserPosition(htBeforeOffset.left,nX,nDuration,nGap)+"px":null;
                    var sY=(nY!==null)?self._getcubicBeziserPosition(htBeforeOffset.top,nY,nDuration,nGap)+"px":null;
                    var sZ=(nZ!==null)?nZ+"px":null;
                    if(sX!==null){
                        aText.push(sX)
                    }
                    if(sY!==null){
                        aText.push(sY)
                    }
                    if(sZ!==null){
                        aText.push(sZ)
                    }
                    el.style[self._sCssPrefix+sTransfrom]=sPreValue+"("+aText.join(",")+")";
                    self._nTimerAnimate=setTimeout(translate,1)
                })()
            }
            else{
                wel.$value().style[this._sCssPrefix+p]=sValue
            }
            bDiff=true
        }
        return bDiff
    }
    ,_bAttachTransitionEvt:function(){
        var bValue=true;
        if(this._htCurrentTask.nDuration===0){
            bValue=false
        }
        else{
            if(this._bNoUseCss3d){
                for(var p in this._htCurrentTask.htTransform){
                    var sValue=this._htCurrentTask.htTransform[p];
                    if(sValue.indexOf("translate")>-1){
                        bValue=false
                    }
                    
                }
                
            }
            
        }
        return bValue
    }
    ,_setBeforeStatus:function(wel){
        var nIndex=this._getBeforeStatusElement(wel.$value());
        if(nIndex>-1){
            this._aBeforeStatus[nIndex].style=wel.attr("style")
        }
        else{
            this._aBeforeStatus.push({
                el:wel.$value(),style:wel.attr("style")
            })
        }
        
    }
    ,_getBeforeStatusElement:function(el){
        var nIndex=-1;
        for(var i=0,nLen=this._aBeforeStatus.length;
        i<nLen;
        i++){
            if(this._aBeforeStatus[i].el===el){
                nIndex=i;
                break
            }
            
        }
        return nIndex
    }
    ,_getDefaultTransition:function(){
        return{
            sTransitionTimingFunction:this.option("sTransitionTimingFunction"),TransitionProperty:"all"
        }
        
    }
    ,_fireCustomEvent:function(sName,htParam){
        return this.fireEvent(sName,htParam)
    }
    ,_onTransitionEnd:function(){
        this._detachTransitionEnd();
        this._initTransition();
        var self=this;
        if(this._htCurrentTask){
            var sCallbackType=typeof this._htCurrentTask.fCallback;
            if(sCallbackType=="function"){
                if(this._bNoUseCss3d){
                    setTimeout(function(){
                        self._htCurrentTask.fCallback()
                    }
                    ,5)
                }
                else{
                    self._htCurrentTask.fCallback()
                }
                
            }
            else{
                if(sCallbackType=="object"){
                    var wel=jindo.$Element(this._htCurrentTask.elTarget),p;
                    for(p in this._htCurrentTask.fCallback.htTransform){
                        var sValue=this._htCurrentTask.fCallback.htTransform[p];
                        if(p=="transform"){
                            var sPrefix=this._sCssPrefix+p;
                            var sText=wel.$value().style[sPrefix];
                            if(sText.length>0){
                                sValue=sValue
                            }
                            
                        }
                        wel.$value().style[this._sCssPrefix+p]=sValue
                    }
                    for(p in this._htCurrentTask.fCallback.htStyle){
                        wel.css(p,this._htCurrentTask.fCallback.htStyle[p])
                    }
                    
                }
                
            }
            
        }
        if(this._htCurrentTask){
            this._fireCustomEvent("end",{
                element:this._htCurrentTask.elTarget,sTaskName:this._htCurrentTask.sTaskName,nDuration:this._htCurrentTask.nDuration
            })
        }
        setTimeout(function(){
            self._prepareTask()
        }
        ,10)
    }
    ,_initTransition:function(el){
        if(typeof el==="undefined"){
            el=this._elCurrent
        }
        el.style[this._sCssPrefix+"transition-duration"]=null;
        el.style[this._sCssPrefix+"transition-timing-function"]=null;
        el.style[this._sCssPrefix+"perspective"]=null;
        el.style[this._sCssPrefix+"transform-style"]=null;
        el.style[this._sCssPrefix+"transition-property"]=null
    }
    ,_getcubicBeziserPosition:function(nStart,nEnd,nDuration,nCurrentTime){
        nStart=nStart*1;
        nEnd=nEnd*1;
        var sFunction=this.option("sTransitionTimingFunction").replace(/-/g,"_");
        var f=jindo.m.TimingFunction[sFunction];
        var t=nCurrentTime/nDuration;
        t=(t>1)?1:t;
        var nCurrent=f(t);
        var nValue=nStart+((nEnd-nStart)*nCurrent.toFixed(2));
        return nValue
    }
    ,_attachTransitionEnd:function(el){
        this._elTransition=el;
        jindo.m.attachTransitionEnd(this._elTransition,this._htEvent.transitionEnd)
    }
    ,_detachTransitionEnd:function(){
        if(this._elTransition){
            jindo.m.detachTransitionEnd(this._elTransition,this._htEvent.transitionEnd);
            this._elTransition=null
        }
        
    }
    ,_attachEvent:function(){
        this._htEvent={};
        this._htEvent.transitionEnd=jindo.$Fn(this._onTransitionEnd,this).bind()
    }
    ,_detachEvent:function(){
        this._detachTransitionEnd();
        this._htEvent=null
    }
    ,destroy:function(){
        this._detachEvent();
        for(var p in this._htWElement){
            this._htWElement[p]=null
        }
        this._htWElement=null;
        this._aTaskQueue=null;
        this._bIsPlaying=null;
        this._sCssPrefix=null;
        this._aBeforeStatus=null;
        this._bNoUseCss3d=null;
        this._nTimerAnimate=null;
        this._htCurrentTask=null
    }
    
}).extend(jindo.Component);
jindo.m.LayerPosition=jindo.$Class({
    $init:function(el,htUserOption){
        this.option({
            bActivateOnload:true,bAutoReposition:true,sPosition:"center",nLeftMargin:0,nRightMargin:0,nTopMargin:0,nBottomMargin:0,bUseFixed:true
        });
        this.option(htUserOption||{});
        this._initVar();
        this._setWrapperElement(el);
        if(this.option("bActivateOnload")){
            this.activate()
        }
        
    }
    ,isUseFixed:function(){
        return this._bUseFixedProperty
    }
    ,_onActivate:function(){
        this._isVertical=jindo.m.isVertical();
        if(this.option("bAutoReposition")){
            this._attachEvent()
        }
        this.setPosition()
    }
    ,_onDeactivate:function(){
        if(this.option("bAutoReposition")){
            this._detachEvent()
        }
        
    }
    ,_initVar:function(){
        var nLeft=this.option("nLeftMargin"),nTop=this.option("nTopMargin");
        this._htMargin={
            nLeft:nLeft,nRight:this.option("nRightMargin"),nTop:nTop,nBottom:this.option("nBottomMargin")
        };
        this._sPosition=this.option("sPosition");
        this._htOldPosition={
            nTop:null,nLeft:null,nBottom:null
        };
        this._htPosition={
            nTop:null,nLeft:null,nBottom:null
        };
        this._bUseFixedProperty=this.option("bAutoReposition")&&(this.option("bUseFixed")&&jindo.m._isUseFixed());
        this._isVertical=null;
        this._hasOrientationChange=jindo.m.getDeviceInfo().ipad||jindo.m.getDeviceInfo().iphone||jindo.m.getDeviceInfo().bChrome;
        this._nPreWidth=-1
    }
    ,getPosition:function(){
        return this._sPosition
    }
    ,getMargin:function(){
        return this._htMargin
    }
    ,getLayer:function(){
        return this._htWElement.element.$value()
    }
    ,getCurrentPosition:function(){
        return this._htPosition
    }
    ,_setWrapperElement:function(el){
        this._htWElement={};
        this.setLayer(el)
    }
    ,setLayer:function(el){
        this._htWElement.element=jindo.$Element(el);
        if(this._bUseFixedProperty){
            this._htWElement.element.css("position","fixed")
        }
        else{
            this._htWElement.element.css("position","absolute")
        }
        if(!this._htWElement.element.parent().isEqual(document.body)){
            this._htWElement.element.appendTo(document.body)
        }
        return this
    }
    ,top:function(htMargin){
        this.setPosition("top",htMargin)
    }
    ,bottom:function(htMargin){
        this.setPosition("bottom",htMargin)
    }
    ,center:function(htMargin){
        this.setPosition("center",htMargin)
    }
    ,all:function(htMargin){
        this.setPosition("all",htMargin)
    }
    ,_fixedLayerSize:function(nWidth,nHeight){
        var nLeft=parseInt(this._htMargin.nLeft,10),nTop=parseInt(this._htMargin.nTop,10),htPadding={
            "padding-top":parseInt(this._htWElement.element.css("padding-top"),10),"padding-bottom":parseInt(this._htWElement.element.css("padding-bottom"),10),"padding-left":parseInt(this._htWElement.element.css("padding-left"),10),"padding-right":parseInt(this._htWElement.element.css("padding-right"),10)
        }
        ,htBorder={
            "border-top-width":parseInt(this._htWElement.element.css("border-top-width"),10),"border-bottom-width":parseInt(this._htWElement.element.css("border-bottom-width"),10),"border-left-width":parseInt(this._htWElement.element.css("border-left-width"),10),"border-right-width":parseInt(this._htWElement.element.css("border-right-width"),10)
        };
        nWidth-=htPadding["padding-left"]+htPadding["padding-right"]+htBorder["border-left-width"]+htBorder["border-right-width"]+nLeft+parseInt(this._htMargin.nRight,10);
        nHeight-=htPadding["padding-top"]+htPadding["padding-bottom"]+htBorder["border-top-width"]+htBorder["border-bottom-width"]+nTop+parseInt(this._htMargin.nBottom,10);
        this._htWElement.element.css({
            width:nWidth+"px",height:nHeight+"px"
        });
        return{
            nTop:nTop,nLeft:nLeft
        }
        
    }
    ,_getPosition:function(){
        var nLayerWidth=this._htWElement.element.width(),nLayerHeight=this._htWElement.element.height(),htElementPosition={},oClientSize=jindo.$Document().clientSize(),nWidth=oClientSize.width,nHeight=oClientSize.height;
        nLayerWidth+=parseInt(this._htWElement.element.css("marginLeft"),10)+parseInt(this._htWElement.element.css("marginRight"),10)||0;
        nLayerHeight+=parseInt(this._htWElement.element.css("marginTop"),10)+parseInt(this._htWElement.element.css("marginBottom"),10)||0;
        if(this._sPosition==="all"){
            htElementPosition=this._fixedLayerSize(nWidth,nHeight)
        }
        else{
            htElementPosition.nLeft=parseInt((nWidth-nLayerWidth)/2,10)+parseInt(this._htMargin.nLeft,10);
            switch(this._sPosition){
                case"top":htElementPosition.nTop=parseInt(this._htMargin.nTop,10);
                break;
                case"center":htElementPosition.nTop=parseInt((nHeight-nLayerHeight)/2,10)+parseInt(this._htMargin.nTop,10);
                break;
                case"bottom":if(this._bUseFixedProperty){
                    htElementPosition.nBottom=parseInt(this._htMargin.nBottom,10)
                }
                else{
                    htElementPosition.nTop=parseInt(nHeight-nLayerHeight,10)-parseInt(this._htMargin.nBottom,10)
                }
                break
            }
            if(!this._bUseFixedProperty){
                htElementPosition=this._adjustScrollPosition(htElementPosition)
            }
            
        }
        return htElementPosition
    }
    ,_adjustScrollPosition:function(htPosition){
        var htScrollPosition=jindo.$Document().scrollPosition();
        htPosition.nTop+=htScrollPosition.top;
        htPosition.nLeft+=htScrollPosition.left;
        return htPosition
    }
    ,setPosition:function(sPosition,htMargin){
        if(!this.isActivating()){
            return
        }
        this._htMargin=htMargin||this._htMargin;
        this._sPosition=sPosition||this._sPosition;
        if(this._fireEvent("beforePosition")){
            var bVisible=this._htWElement.element.visible();
            if(!bVisible){
                this._htWElement.element.css({
                    left:"-9999px"
                }).show()
            }
            this._htOldPosition=this._htPosition;
            this._htPosition=this._getPosition();
            if(!bVisible){
                this._htWElement.element.hide()
            }
            if(!bVisible||this._htOldPosition.nLeft!==this._htPosition.nLeft||this._htOldPosition.nTop!==this._htPosition.nTop||this._htOldPosition.nBottom!==this._htPosition.nBottom){
                if(typeof this._htPosition.nTop==="undefined"){
                    this._htWElement.element.$value().style.top=null
                }
                else{
                    if(typeof this._htPosition.nBottom==="undefined"){
                        this._htWElement.element.$value().style.bottom=null
                    }
                    
                }
                this._htWElement.element.css({
                    left:this._htPosition.nLeft+"px",top:this._htPosition.nTop+"px",bottom:this._htPosition.nBottom+"px"
                })
            }
            this._fireEvent("position")
        }
        
    }
    ,_attachEvent:function(){
        this._htEvent={};
        this._htEvent.actionEvent=jindo.$Fn(this._onEvent,this);
        this._htEvent.pageShow=jindo.$Fn(this._onPageShow,this).bind();
        if(this._bUseFixedProperty){
            this._htEvent.actionEvent.attach(window,"resize")
        }
        else{
            this._htEvent.actionEvent.attach(window,"scroll").attach(window,"resize")
        }
        jindo.m.bindPageshow(this._htEvent.pageShow);
        if(this._hasOrientationChange){
            this._htEvent.rotate=jindo.$Fn(this._onOrientationChange,this).attach(window,"orientationchange")
        }
        
    }
    ,_detachEvent:function(){
        this._htEvent.actionEvent.detach(window,"scroll").detach(window,"resize");
        jindo.m.unbindPageshow(this._htEvent.pageShow);
        if(this._hasOrientationChange){
            this._htEvent.rotate.detach(window,"orientationchange")
        }
        this._htEvent=null
    }
    ,_onEvent:function(we){
        if(jindo.m._isUseFixed()&&jindo.m.getDeviceInfo().android){
            this._htWElement.element.css("left",this._htWElement.element.css("left"))
        }
        if(this._htWElement.element.visible()){
            this.setPosition()
        }
        
    }
    ,_onOrientationChange:function(){
        if(this._htWElement.element.visible()){
            var self=this;
            if(window.innerWidth<this._htWElement.element.width()){
                this._nPreWidth=this._htWElement.element.width();
                this._htWElement.element.width(window.innerWidth)
            }
            else{
                if(this._nPreWidth!==-1){
                    this._htWElement.element.width(this._nPreWidth)
                }
                
            }
            this._htWElement.element.hide();
            this.setPosition();
            if(jindo.m.getDeviceInfo().android&&!jindo.m.getDeviceInfo().bChrome){
                this._htWElement.element.show()
            }
            else{
                setTimeout(function(){
                    self._htWElement.element.show()
                }
                ,10)
            }
            
        }
        
    }
    ,_onPageShow:function(){
        if(this.isActivating()){
            this.deactivate();
            this.activate()
        }
        
    }
    ,_fireEvent:function(sType){
        return this.fireEvent(sType,{
            elLayer:this.getLayer(),htMargin:this.getMargin(),htPosition:this.getCurrentPosition()
        })
    }
    ,destroy:function(){
        this.deactivate();
        for(var p in this._htWElement){
            this._htWElement[p]=null
        }
        delete this._htWElement;
        delete this._htMargin;
        delete this._sPosition;
        delete this._htPosition;
        delete this._htOldPosition;
        delete this._bUseFixedProperty
    }
    
}).extend(jindo.UIComponent);
jindo.m.ScrollEnd=jindo.$Class({
    $init:function(el,htUserOption){
        this._initVar();
        this._setWrapperElement(el);
        this._attachEvent()
    }
    ,_initVar:function(){
        if(jindo.m.getDeviceInfo().android){
            if(parseInt(jindo.m.getDeviceInfo().version,10)>=3){
                this._nType=2;
                this._nScrollTimer=-1
            }
            else{
                this._nType=1
            }
            
        }
        else{
            this._nType=0
        }
        this._isTouched=false;
        this._isMoved=false;
        this._nObserver=null;
        this._nScrollEndTimer=null;
        this._nPreLeft=null;
        this._nPreTop=null
    }
    ,_setWrapperElement:function(el){
        this._htElement={};
        this._htElement.body=document.body
    }
    ,_attachEvent:function(){
        this._htEvent={};
        this._htEvent.event_scroll={
            ref:jindo.$Fn(this._onScroll,this).attach(window,"scroll"),el:window
        };
        if(this._nType==1){
            this._htEvent.event_touchstart={
                ref:jindo.$Fn(this._onStartForAndroid,this).attach(this._htElement.body,"touchstart"),el:this._htElement.body
            };
            this._htEvent.event_touchmove={
                ref:jindo.$Fn(this._onMoveForAndroid,this).attach(this._htElement.body,"touchmove"),el:this._htElement.body
            };
            this._htEvent.event_touchend={
                ref:jindo.$Fn(this._onEndForAndroid,this).attach(this._htElement.body,"touchend"),el:this._htElement.body
            }
            
        }
        
    }
    ,_detachEvent:function(){
        for(var p in this._htEvent){
            var ht=this._htEvent[p];
            ht.ref.detach(ht.el,p.substring(p.lastIndexOf("_")))
        }
        
    }
    ,_startObserver:function(){
        var self=this;
        this._stopObserver();
        this._nObserver=setInterval(function(){
            self._observe()
        }
        ,100)
    }
    ,_observe:function(){
        if(this._isTouched||(this._nPreTop!==window.pageYOffset||this._nPreLeft!==window.pageXOffset)){
            this._nPreTop=window.pageYOffset;
            this._nPreLeft=window.pageXOffset
        }
        else{
            this._stopObserver();
            this._fireEventScrollEnd()
        }
        
    }
    ,_stopObserver:function(){
        clearInterval(this._nObserver);
        this._nObserver=null
    }
    ,_onScroll:function(we){
        switch(this._nType){
            case 0:this._fireEventScrollEnd();
            break;
            case 1:this._startObserver();
            break;
            case 2:var self=this;
            clearTimeout(this._nScrollTimer);
            this._nScrollTimer=setTimeout(function(){
                self._fireEventScrollEnd()
            }
            ,350);
            break
        }
        
    }
    ,_onStartForAndroid:function(we){
        this._isTouched=true;
        this._isMoved=false;
        this._nPreTop=null;
        this._nPreLeft=null
    }
    ,_onMoveForAndroid:function(we){
        this._isMoved=true
    }
    ,_onEndForAndroid:function(we){
        this._isTouched=false;
        if(this._isMoved){
            this._startObserver()
        }
        
    }
    ,_fireEventScrollEnd:function(){
        this.fireEvent("scrollEnd",{
            nTop:window.pageYOffset,nLeft:window.pageXOffset
        })
    }
    ,_fireEventScrollEndForAndroid:function(){
        var self=this;
        clearTimeout(this._nScrollEndTimer);
        this._nScrollEndTimer=setTimeout(function(){
            self._fireEventScrollEnd()
        }
        ,500)
    }
    ,destroy:function(){
        this._detachEvent();
        this._nType=-1;
        this._isTouched=null;
        this._isMoved=null;
        this._nObserver=null;
        this._nPreLeft=null;
        this._nPreTop=null
    }
    
}).extend(jindo.Component);
var SmarttoonCutEffect=jindo.$Class({
    $init:function(htOption){
        var htInfo=jindo.m.getDeviceInfo();
        this.option({
            sTransitionTimingFunction:"ease-in-out",bUseTimingFunction:true,bUseCss3d:jindo.m._isUseCss3d()||(htInfo.galaxyS2&&(htInfo.version>="4.0.3"))
        });
        this.option(htOption||{});
        this._bPlaying=false;
        this._initTransition()
    }
    ,_initTransition:function(){
        this._htTransition={};
        this._htTransition.previous=new jindo.m.Transition({
            sTransitionTimingFunction:this.option("sTransitionTimingFunction"),bUseTimingFunction:this.option("bUseTimingFunction")
        });
        this._htTransition.current=new jindo.m.Transition({
            sTransitionTimingFunction:this.option("sTransitionTimingFunction"),bUseTimingFunction:this.option("bUseTimingFunction")
        })
    }
    ,isPlaying:function(){
        return this._htTransition.previous.isPlaying()&&this._htTransition.current.isPlaying()
    }
    ,stop:function(){
        this._htTransition.previous.clear(true);
        this._htTransition.current.clear(true)
    }
    ,doEffect:function(elPrevious,elCurrent,sEffectType,nDuration){
        if(this.isPlaying()){
            return
        }
        switch(sEffectType){
            case"FADE_IN":this._fadeIn(elPrevious,elCurrent,nDuration);
            break;
            case"ZOOM_IN":this._zoomIn(elPrevious,elCurrent,nDuration);
            break;
            case"ZOOM_OUT":this._zoomOut(elPrevious,elCurrent,nDuration);
            break;
            case"SLIDE_UP":this._slideUp(elPrevious,elCurrent,nDuration);
            break;
            case"SLIDE_DOWN":this._slideDown(elPrevious,elCurrent,nDuration);
            break;
            case"SLIDE_LEFT":this._slideLeft(elPrevious,elCurrent,nDuration);
            break;
            case"SLIDE_RIGHT":this._slideRight(elPrevious,elCurrent,nDuration);
            break;
            case"COVER_UP":this._coverUp(elPrevious,elCurrent,nDuration);
            break;
            case"COVER_DOWN":this._coverDown(elPrevious,elCurrent,nDuration);
            break;
            case"COVER_LEFT":this._coverLeft(elPrevious,elCurrent,nDuration);
            break;
            case"COVER_RIGHT":this._coverRight(elPrevious,elCurrent,nDuration);
            break
        }
        this._htTransition.previous.start();
        this._htTransition.current.start()
    }
    ,_fadeIn:function(elPrevious,elCurrent,nDuration){
        this._htTransition.current.queue(elCurrent,0,{
            htStyle:{
                opacity:0.1
            }
            
        });
        this._htTransition.current.queue(elCurrent,nDuration,{
            htStyle:{
                opacity:1
            }
            
        })
    }
    ,_zoomIn:function(elPrevious,elCurrent,nDuration){
        this._htTransition.current.queue(elCurrent,0,{
            htStyle:{
                opacity:0.1
            }
            ,htTransform:{
                transform:"scale(0)","transform-origin":"50% 50%"
            }
            
        });
        this._htTransition.current.queue(elCurrent,nDuration,{
            htStyle:{
                opacity:1
            }
            ,htTransform:{
                transform:"scale(1)","transform-origin":"50% 50%"
            }
            
        })
    }
    ,_zoomOut:function(elPrevious,elCurrent,nDuration){
        this._htTransition.current.queue(elCurrent,0,{
            htStyle:{
                opacity:0.1
            }
            ,htTransform:{
                transform:"scale(2)","transform-origin":"50% 50%"
            }
            
        });
        this._htTransition.current.queue(elCurrent,nDuration,{
            htStyle:{
                opacity:1
            }
            ,htTransform:{
                transform:"scale(1)","transform-origin":"50% 50%"
            }
            
        })
    }
    ,_slideUp:function(elPrevious,elCurrent,nDuration){
        if(elPrevious!=null){
            this._htTransition.previous.queue(elPrevious,0,{
                htTransform:{
                    transform:this._getTransitionCssString(0,0)
                }
                
            });
            this._htTransition.previous.queue(elPrevious,nDuration,{
                htTransform:{
                    transform:this._getTransitionCssString(0,(window.innerHeight*-1))
                }
                
            })
        }
        this._htTransition.current.queue(elCurrent,0,{
            htTransform:{
                transform:this._getTransitionCssString(0,window.innerHeight)
            }
            
        });
        this._htTransition.current.queue(elCurrent,nDuration,{
            htTransform:{
                transform:this._getTransitionCssString(0,0)
            }
            
        })
    }
    ,_slideDown:function(elPrevious,elCurrent,nDuration){
        if(elPrevious!=null){
            this._htTransition.previous.queue(elPrevious,0,{
                htTransform:{
                    transform:this._getTransitionCssString(0,0)
                }
                
            });
            this._htTransition.previous.queue(elPrevious,nDuration,{
                htTransform:{
                    transform:this._getTransitionCssString(0,window.innerHeight)
                }
                
            })
        }
        this._htTransition.current.queue(elCurrent,0,{
            htTransform:{
                transform:this._getTransitionCssString(0,(window.innerHeight*-1))
            }
            
        });
        this._htTransition.current.queue(elCurrent,nDuration,{
            htTransform:{
                transform:this._getTransitionCssString(0,0)
            }
            
        })
    }
    ,_slideLeft:function(elPrevious,elCurrent,nDuration){
        if(elPrevious!=null){
            this._htTransition.previous.queue(elPrevious,0,{
                htTransform:{
                    transform:this._getTransitionCssString(0,0)
                }
                
            });
            this._htTransition.previous.queue(elPrevious,nDuration,{
                htTransform:{
                    transform:this._getTransitionCssString((window.innerWidth*-1),0)
                }
                
            })
        }
        this._htTransition.current.queue(elCurrent,0,{
            htTransform:{
                transform:this._getTransitionCssString(window.innerWidth,0)
            }
            
        });
        this._htTransition.current.queue(elCurrent,nDuration,{
            htTransform:{
                transform:this._getTransitionCssString(0,0)
            }
            
        })
    }
    ,_slideRight:function(elPrevious,elCurrent,nDuration){
        if(elPrevious!=null){
            this._htTransition.previous.queue(elPrevious,0,{
                htTransform:{
                    transform:this._getTransitionCssString(0,0)
                }
                
            });
            this._htTransition.previous.queue(elPrevious,nDuration,{
                htTransform:{
                    transform:this._getTransitionCssString(window.innerWidth,0)
                }
                
            })
        }
        this._htTransition.current.queue(elCurrent,0,{
            htTransform:{
                transform:this._getTransitionCssString((window.innerWidth*-1),0)
            }
            
        });
        this._htTransition.current.queue(elCurrent,nDuration,{
            htTransform:{
                transform:this._getTransitionCssString(0,0)
            }
            
        })
    }
    ,_coverUp:function(elPrevious,elCurrent,nDuration){
        this._htTransition.current.queue(elCurrent,0,{
            htTransform:{
                transform:this._getTransitionCssString(0,window.innerHeight)
            }
            
        });
        this._htTransition.current.queue(elCurrent,nDuration,{
            htTransform:{
                transform:this._getTransitionCssString(0,0)
            }
            
        })
    }
    ,_coverDown:function(elPrevious,elCurrent,nDuration){
        this._htTransition.current.queue(elCurrent,0,{
            htTransform:{
                transform:this._getTransitionCssString(0,(window.innerHeight*-1))
            }
            
        });
        this._htTransition.current.queue(elCurrent,nDuration,{
            htTransform:{
                transform:this._getTransitionCssString(0,0)
            }
            
        })
    }
    ,_coverLeft:function(elPrevious,elCurrent,nDuration){
        this._htTransition.current.queue(elCurrent,0,{
            htTransform:{
                transform:this._getTransitionCssString(window.innerWidth,0)
            }
            
        });
        this._htTransition.current.queue(elCurrent,nDuration,{
            htTransform:{
                transform:this._getTransitionCssString(0,0)
            }
            
        })
    }
    ,_coverRight:function(elPrevious,elCurrent,nDuration){
        this._htTransition.current.queue(elCurrent,0,{
            htTransform:{
                transform:this._getTransitionCssString((window.innerWidth*-1),0)
            }
            
        });
        this._htTransition.current.queue(elCurrent,nDuration,{
            htTransform:{
                transform:this._getTransitionCssString(0,0)
            }
            
        })
    }
    ,_getTransitionCssString:function(nX,nY){
        var sPrefix="translate(";
        var sSurfix=")";
        if(this.option("bUseCss3d")){
            sPrefix="translate3d(";
            sSurfix=", 0px)"
        }
        return sPrefix+nX+"px,"+nY+"px"+sSurfix
    }
    
}).extend(jindo.Component);
var SmarttoonPreloader=jindo.$Class({
    $init:function(aCutData,htOption){
        this._waCutData=jindo.$A(aCutData);
        this.option(htOption||{
            nBufferSize:2
        });
        this._nIndex=0
    }
    ,moveTo:function(nPosition){
        if(nPosition<1){
            nPosition=1
        }
        else{
            if(nPosition>this._waCutData.length()){
                nPosition=this._waCutData.length()
            }
            
        }
        try{
            this._nIndex=nPosition-1;
            return this._waCutData.get(this._nIndex)
        }
        finally{
            this._preload()
        }
        
    }
    ,getCurrent:function(){
        try{
            return this._waCutData.get(this._nIndex)
        }
        finally{
            this._preload()
        }
        
    }
    ,getTotalCount:function(){
        return this._waCutData.length()
    }
    ,getPosition:function(){
        try{
            return this._nIndex+1
        }
        finally{
            this._preload()
        }
        
    }
    ,isPreviousAvailable:function(){
        return this._nIndex!=0
    }
    ,isNextAvailable:function(){
        return this._nIndex<this._waCutData.length()-1
    }
    ,_preload:function(){
        this.fireEvent("beforePreload");
        var nPreloadStartIndex=this._nIndex-this.option("nBufferSize")<0?0:this._nIndex-this.option("nBufferSize");
        var nPreloadEndIndex=this._nIndex+this.option("nBufferSize");
        var nLoadedResourceCount=0;
        var waPreloadCandidate=this._waCutData.slice(nPreloadStartIndex,nPreloadEndIndex+1);
        var wfnLoadComplete=jindo.$Fn(function(e){
            nLoadedResourceCount++;
            wfnLoadComplete.detach(e.currentElement,"load").detach(e.currentElement,"error").detach(e.currentElement,"abort");
            if(waPreloadCandidate.length()>0&&nLoadedResourceCount==waPreloadCandidate.length()){
                this.fireEvent("afterPreload",{
                    nLoadedResourceCount:nLoadedResourceCount
                });
                nLoadedResourceCount=0
            }
            
        }
        ,this);
        waPreloadCandidate.forEach(function(v,i,a){
            if(v!=null&&v.sImageUrl!=null&&v.sImageUrl!=undefined){
                var oImage=new Image();
                wfnLoadComplete.attach(oImage,"load").attach(oImage,"error").attach(oImage,"abort");
                oImage.src=v.sImageUrl
            }
            
        }
        ,this)
    }
    
}).extend(jindo.Component);
var SmarttoonViewer=jindo.$Class({
    $init:function(el,aCutData,htOption){
        this._aCutData=aCutData;
        this.option({
            sClassPrefix:"smt-",bActivateOnload:true,bPlayEffect:true,nLoadingTimeout:20,bBookmark:false
        });
        this.option(htOption||{});
        this._setWrapperElement(el);
        this._initVars();
        if(this.option("bActivateOnload")){
            this.activate()
        }
        
    }
    ,_setWrapperElement:function(el){
        this._htWElement={};
        el=jindo.$(el);
        var sClass="."+this.option("sClassPrefix");
        this._htWElement.base=jindo.$Element(el);
        this._htWElement.slider=jindo.$Element(jindo.$$.getSingle(sClass+"slider",el));
        this._htWElement.layerCut=jindo.$Element(jindo.$$.getSingle(sClass+"cut",el));
        this._htWElement.layerToolbarHeader=jindo.$Element(jindo.$$.getSingle(sClass+"toolbar-header",el));
        this._htWElement.layerToolbarFooter=jindo.$Element(jindo.$$.getSingle(sClass+"toolbar-footer",el));
        this._htWElement.txtCurrentCutPosition=jindo.$Element(jindo.$$.getSingle(sClass+"current-cut-position",el));
        this._htWElement.txtTotalCutCount=jindo.$Element(jindo.$$.getSingle(sClass+"total-cut-count",el));
        this._htWElement.btnPrevCut=jindo.$Element(jindo.$$.getSingle(sClass+"btn-prev-cut",el));
        this._htWElement.btnNextCut=jindo.$Element(jindo.$$.getSingle(sClass+"btn-next-cut",el));
        this._htWElement.btnToggleToolbar=jindo.$Element(jindo.$$.getSingle(sClass+"btn-toggle-toolbar",el));
        this._htWElement.btnThumbnailView=jindo.$Element(jindo.$$.getSingle(sClass+"btn-thumbnail-view",el));
        this._htWElement.btnBookmark=jindo.$Element(jindo.$$.getSingle(sClass+"btn-bookmark",el));
        this._htWElement.btnToggleEffect=jindo.$Element(jindo.$$.getSingle(sClass+"btn-toggle-effect",el));
        this._htWElement.btnFastPrevCut=jindo.$Element(jindo.$$.getSingle(sClass+"btn-fast-prev-cut",el))
    }
    ,_initVars:function(){
        this._bToolbarExposed=false;
        this._oCookie=new jindo.$Cookie();
        this._oPreloader=new SmarttoonPreloader(this._aCutData);
        this._oCutEffect=new SmarttoonCutEffect();
        this._oLoading=new jindo.m.Loading(null,{
            nHeight:50,nWidth:50,sLoadingText:null
        });
        this._oTouch=new jindo.m.Touch(this._htWElement.layerCut.$value(),{
            nMoveThreshold:0,bActivateOnload:false
        });
        this._oSlider=new jindo.m.Slider(this._htWElement.slider.$value(),{
            sClassPrefix:this.option("sClassPrefix")+"slider-",bVertical:false,nMinValue:1,nMaxValue:this._oPreloader.getTotalCount(),nDefaultValue:1,bActivateOnload:false
        });
        this._htWElement.txtCurrentCutPosition.text(this._oPreloader.getPosition());
        this._htWElement.txtTotalCutCount.text(this._oPreloader.getTotalCount())
    }
    ,_attachEvent:function(){
        this._htEvent={};
        this._htEvent.click_btnFastPrevCut={
            el:this._htWElement.btnFastPrevCut,fEvent:jindo.$Fn(this._onPrevCutButtonClicked,this).attach(this._htWElement.btnFastPrevCut,"click")
        };
        this._htEvent.click_btnPrevCut={
            el:this._htWElement.btnPrevCut,fEvent:jindo.$Fn(this._onPrevCutButtonClicked,this).attach(this._htWElement.btnPrevCut,"click")
        };
        this._htEvent.click_btnNextCut={
            el:this._htWElement.btnNextCut,fEvent:jindo.$Fn(this._onNextCutButtonClicked,this).attach(this._htWElement.btnNextCut,"click")
        };
        this._htEvent.click_btnToggleToolbar={
            el:this._htWElement.btnToggleToolbar,fEvent:jindo.$Fn(this._onToolbarToggleButtonClicked,this).attach(this._htWElement.btnToggleToolbar,"click")
        };
        this._htEvent.click_btnThumbnailView={
            el:this._htWElement.btnThumbnailView,fEvent:jindo.$Fn(this._onThumbnailViewButtonClicked,this).attach(this._htWElement.btnThumbnailView,"click")
        };
        this._htEvent.click_btnBookmark={
            el:this._htWElement.btnBookmark,fEvent:jindo.$Fn(this._onBookmarkButtonClicked,this).attach(this._htWElement.btnBookmark,"click")
        };
        this._htEvent.click_btnToggleEffect={
            el:this._htWElement.btnToggleEffect,fEvent:jindo.$Fn(this._onEffectToggleButtonClicked,this).attach(this._htWElement.btnToggleEffect,"click")
        };
        this._oTouch.attach("tap",jindo.$Fn(this._onScreenTap,this).bind());
        this._oTouch.attach("vScroll",jindo.$Fn(this._onScreenVScroll,this).bind());
        this._oTouch.attach("dScroll",jindo.$Fn(this._onScreenVScroll,this).bind());
        this._oTouch.attach("touchStart",function(e){
            e.oEvent.stop(jindo.$Event.CANCEL_DEFAULT)
        });
        this._oTouch.attach("touchMove",function(e){
            e.oEvent.stop(jindo.$Event.CANCEL_DEFAULT)
        });
        this._oSlider.attach("change",jindo.$Fn(this._onSliderChange,this).bind());
        this._oSlider.attach("touchEnd",jindo.$Fn(this._onSliderTouchEnd,this).bind())
    }
    ,_detachEvent:function(){
        for(var sEventName in this._htEvent){
            var htEvent=this._htEvent[sEventName];
            htEvent.fEvent.detach(htEvent.el,/([^\s_]*)/.exec(sEventName)[1])
        }
        this._oTouch.detachAll();
        this._oSlider.detachAll()
    }
    ,_onActivate:function(){
        this._attachEvent();
        if(this.option("bBookmark")){
            this._htWElement.btnBookmark.addClass("selected")
        }
        else{
            this._htWElement.btnBookmark.removeClass("selected")
        }
        if(this._oCookie.get("smarttoon_bPlayEffect")=="false"){
            this.option("bPlayEffect",false)
        }
        else{
            if(this._oCookie.get("smarttoon_bPlayEffect")=="true"){
                this.option("bPlayEffect",true)
            }
            
        }
        if(this.option("bPlayEffect")==true){
            this._htWElement.btnToggleEffect.addClass("selected")
        }
        else{
            this._htWElement.btnToggleEffect.removeClass("selected")
        }
        this._oLoading.activate();
        this._oTouch.activate();
        this._oSlider.activate();
        this._oSlider.setValue(this._oPreloader.getPosition())
    }
    ,_onDeactivate:function(){
        this._detachEvent();
        this._oLoading.deactivate();
        this._oTouch.deactivate();
        this._oSlider.deactivate()
    }
    ,_onScreenTap:function(e){
        if(this._bToolbarExposed){
            this.hideToolbar();
            return false
        }
        this._moveNextCut();
        nclk({},"img.next","","")
    }
    ,_onScreenVScroll:function(e){
        if(Math.abs(e.nDistanceY)>90!=0&&this._bToolbarExposed){
            this.hideToolbar();
            nclk({},"img.flickclose","","")
        }
        else{
            this.showToolbar();
            nclk({},"img.flickopen","","")
        }
        
    }
    ,_onSliderChange:function(e){
        var nAdjustValue=e.nValue.toFixed();
        this._htWElement.txtCurrentCutPosition.text(nAdjustValue)
    }
    ,_onSliderTouchEnd:function(e){
        var nAdjustValue=e.nValue.toFixed();
        this._move(nAdjustValue,false);
        nclk({},"bto.slide","","")
    }
    ,_onPrevCutButtonClicked:function(e){
        e.stopDefault();
        this._movePreviousCut();
        nclk({},"bto.prev","","")
    }
    ,_onNextCutButtonClicked:function(e){
        e.stopDefault();
        this._moveNextCut();
        nclk({},"bto.next","","")
    }
    ,_onToolbarToggleButtonClicked:function(e){
        e.stopDefault();
        if(this._bToolbarExposed){
            this.hideToolbar();
            nclk({},"bto.toolclose","","")
        }
        else{
            this.showToolbar();
            nclk({},"img.toolopen","","")
        }
        
    }
    ,_onThumbnailViewButtonClicked:function(e){
        e.stopDefault();
        this.fireEvent("thumbnailViewClicked",{
            nPosition:this._oPreloader.getPosition()
        });
        nclk({},"bto.all","","")
    }
    ,_onBookmarkButtonClicked:function(e){
        e.stopDefault();
        this.fireEvent("bookmarkButtonClicked");
        nclk({},"bto.bookmark","","")
    }
    ,_onEffectToggleButtonClicked:function(e){
        e.stopDefault();
        if(this.option("bPlayEffect")){
            this.option("bPlayEffect",false);
            jindo.$Element(e.currentElement).removeClass("selected");
            this._oCookie.set("smarttoon_bPlayEffect","false",365);
            alert("장면전환 애니메이션 효과가 해제되었습니다.");
            nclk({},"bto.pageoff","","")
        }
        else{
            this.option("bPlayEffect",true);
            jindo.$Element(e.currentElement).addClass("selected");
            this._oCookie.set("smarttoon_bPlayEffect","true",365);
            alert("장면전환 애니메이션 효과가 설정되었습니다.");
            nclk({},"bto.pageon","","")
        }
        
    }
    ,_showCut:function(bPlayEffect){
        var elImage=jindo.$("<IMG>");
        jindo.$Element(elImage).css({
            position:"absolute",border:"0px"
        });
        var wfnTimeout=jindo.$Fn(function(){
            if(typeof(window.stop)=="function"){
                window.stop()
            }
            this._oLoading.hide();
            this.fireEvent("loadingError")
        }
        ,this).delay(this.option("nLoadingTimeout"));
        var wfnLoadComplete=jindo.$Fn(function(e){
            wfnTimeout.stopDelay();
            wfnLoadComplete.detach(e.currentElement,"load");
            var htCurrentCutData=this._oPreloader.getCurrent();
            var elResizedImage=this._resizeImage(e.element);
            if(this._htWElement.layerCut.queryAll("IMG").length>=2){
                this._htWElement.layerCut.remove(this._htWElement.layerCut.first())
            }
            this._htWElement.layerCut.css({
                "background-color":htCurrentCutData.sBackgroundColor
            });
            var elPrevImage=this._htWElement.layerCut.query("IMG");
            this._htWElement.layerCut.append(elResizedImage);
            if(bPlayEffect){
                this._oCutEffect.doEffect(elPrevImage,elResizedImage,htCurrentCutData.sEffectType,htCurrentCutData.nDuration)
            }
            this._oLoading.hide()
        }
        ,this).attach(elImage,"load");
        var wfnError=jindo.$Fn(function(e){
            wfnError.detach(e.currentElement,"error")
        }
        ,this).attach(elImage,"error");
        elImage.src=this._oPreloader.getCurrent().sImageUrl;
        if(elImage.complete==false){
            this._oLoading.show()
        }
        
    }
    ,_resizeImage:function(elImage){
        var nScreenWidth=parseInt(/([\d]*)px/.exec(this._htWElement.layerCut.css("width"))[1],10);
        var nScreenHeight=parseInt(/([\d]*)px/.exec(this._htWElement.layerCut.css("height"))[1],10);
        var nImageWidth=elImage.width;
        var nImageHeight=elImage.height;
        var nScreenRatio=nScreenHeight/nScreenWidth;
        var nImageRatio=nImageHeight/nImageWidth;
        if(nScreenRatio<nImageRatio){
            nImageWidth=Math.floor((nImageWidth*(nScreenHeight/nImageHeight)));
            nImageHeight=nScreenHeight
        }
        else{
            nImageHeight=Math.floor((nImageHeight*(nScreenWidth/nImageWidth)));
            nImageWidth=nScreenWidth
        }
        var nLeftMargin=Math.floor((nScreenWidth-nImageWidth)/2);
        var nTopMargin=Math.floor((nScreenHeight-nImageHeight)/2);
        var welImage=jindo.$Element(elImage);
        welImage.attr({
            width:nImageWidth,height:nImageHeight
        });
        welImage.css({
            left:nLeftMargin+"px",top:nTopMargin+"px"
        });
        return elImage
    }
    ,_move:function(nPosition,bPlayEffect){
        this.fireEvent("beforeChangeCut",{
            nPosition:this._oPreloader.getPosition(),nTotalCount:this._oPreloader.getTotalCount()
        });
        this._oPreloader.moveTo(nPosition);
        this._oSlider.setValue(this._oPreloader.getPosition());
        this._showCut(bPlayEffect);
        this.handleFastPrevCutButton();
        this.fireEvent("afterChangeCut",{
            nPosition:this._oPreloader.getPosition(),nTotalCount:this._oPreloader.getTotalCount()
        })
    }
    ,_movePreviousCut:function(){
        if(this._oCutEffect.isPlaying()){
            this._oCutEffect.stop()
        }
        if(this._oPreloader.isPreviousAvailable()==false){
            this.fireEvent("blockMovePreviousCut");
            return false
        }
        this._move(this._oPreloader.getPosition()-1,this.option("bPlayEffect"))
    }
    ,_moveNextCut:function(){
        if(this._oCutEffect.isPlaying()){
            this._oCutEffect.stop()
        }
        if(this._oPreloader.isNextAvailable()==false){
            this.fireEvent("blockMoveNextCut");
            return false
        }
        this._move(this._oPreloader.getPosition()+1,this.option("bPlayEffect"))
    }
    ,_createTransition:function(){
        var oTransition=new jindo.m.Transition({
            sTransitionTimingFunction:"ease-out",bUseTimingFunction:true
        });
        return oTransition
    }
    ,highlightBookmarkButton:function(){
        this._htWElement.btnBookmark.addClass("selected")
    }
    ,showToolbar:function(){
        this._bToolbarExposed=true;
        this.handleFastPrevCutButton();
        var htTransition={};
        htTransition.header=this._createTransition();
        htTransition.header.queue(this._htWElement.layerToolbarHeader.$value(),150,{
            htStyle:{
                top:"0px"
            }
            
        });
        htTransition.footer=this._createTransition();
        htTransition.footer.queue(this._htWElement.layerToolbarFooter.$value(),150,{
            htStyle:{
                bottom:"0px"
            }
            ,fCallback:jindo.$Fn(function(){
                this._htWElement.btnToggleToolbar.addClass("up")
            }
            ,this).bind()
        });
        for(var sTransitionName in htTransition){
            htTransition[sTransitionName].start();
            htTransition[sTransitionName]=null
        }
        htTransition=null
    }
    ,hideToolbar:function(){
        this._bToolbarExposed=false;
        this.handleFastPrevCutButton();
        var htTransition={};
        htTransition.header=this._createTransition();
        htTransition.header.queue(this._htWElement.layerToolbarHeader.$value(),150,{
            htStyle:{
                top:"-"+(this._htWElement.layerToolbarHeader.height()+10)+"px"
            }
            
        });
        htTransition.footer=this._createTransition();
        htTransition.footer.queue(this._htWElement.layerToolbarFooter.$value(),150,{
            htStyle:{
                bottom:"-"+(this._htWElement.layerToolbarFooter.height()+10)+"px"
            }
            ,fCallback:jindo.$Fn(function(){
                this._htWElement.btnToggleToolbar.removeClass("up")
            }
            ,this).bind()
        });
        for(var sTransitionName in htTransition){
            htTransition[sTransitionName].start();
            htTransition[sTransitionName]=null
        }
        htTransition=null
    }
    ,redraw:function(){
        jindo.$A(this._htWElement.layerCut.queryAll("IMG")).forEach(function(v,i,a){
            this._resizeImage(v)
        }
        ,this)
    }
    ,setSize:function(nWidth,nHeight){
        this._htWElement.base.width(nWidth).height(nHeight+2);
        this._htWElement.layerCut.width(nWidth).height(nHeight+2);
        this.redraw()
    }
    ,show:function(nPosition){
        this._move(nPosition||1,this.option("bPlayEffect"))
    }
    ,handleFastPrevCutButton:function(){
        if(this._bToolbarExposed==false&&this._oPreloader.getPosition()>1){
            this._htWElement.btnFastPrevCut.show()
        }
        else{
            this._htWElement.btnFastPrevCut.hide()
        }
        
    }
    
}).extend(jindo.UIComponent);
var DialogHandler=new jindo.$Class({
    $init:function(el,oAdpost){
        this._setWrapperElement(el);
        this._attachEvent();
        this._oCookie=new jindo.$Cookie();
        this._oAdpost=oAdpost
    }
    ,_setWrapperElement:function(el){
        this._htWElement={};
        el=jindo.$(el);
        this._htWElement.base=jindo.$Element(el);
        this._htWElement.dlgLastpageDialog=jindo.$Element(jindo.$$.getSingle("._dlg_lastpage",el));
        this._htWElement.dlgLoadingErrorDialog=jindo.$Element(jindo.$$.getSingle("._dlg_loading_error",el));
        this._htWElement.dlgPopupDialog=jindo.$Element(jindo.$$.getSingle("._dlg_popup",el));
        this._htWElement.btnLastpageDialogClose=jindo.$Element(jindo.$$.getSingle("._dlg_lastpage .btn_close",el));
        this._htWElement.btnPopupDialogClose=jindo.$Element(jindo.$$.getSingle("._dlg_popup .btn_close",el));
        this._htWElement.lyrDim=jindo.$Element(jindo.$$.getSingle(".dimmed",el));
        this._htWElement.lyrPopupBackground=jindo.$Element(jindo.$$.getSingle(".popup_bg",el))
    }
    ,_attachEvent:function(){
        jindo.$Fn(this._onLastpageDialogCloseButtonClicked,this).attach(this._htWElement.btnLastpageDialogClose.$value(),"click");
        jindo.$Fn(this._onPopupDialogCloseButtonClicked,this).attach(this._htWElement.btnPopupDialogClose.$value(),"click")
    }
    ,_onLastpageDialogCloseButtonClicked:function(e){
        e.stopDefault();
        this._htWElement.lyrDim.hide();
        this._htWElement.dlgLastpageDialog.hide();
        nclk({},"lpa.close","","")
    }
    ,_onPopupDialogCloseButtonClicked:function(e){
        e.stopDefault();
        this._oCookie.set("smarttoon_sClosePopup","close",365);
        this._htWElement.lyrPopupBackground.hide();
        this._htWElement.dlgPopupDialog.hide()
    }
    ,showLastpageDialog:function(){
        this._htWElement.lyrDim.show();
        this._htWElement.dlgLastpageDialog.show();
        if(!!this._oAdpost){
            this._oAdpost.callAdpost();
            this._oAdpost=null
        }
        
    }
    ,showLoadingErrorDialog:function(){
        this._htWElement.lyrDim.show();
        this._htWElement.dlgLoadingErrorDialog.show()
    }
    ,showPopupDialog:function(){
        if(this._oCookie.get("smarttoon_sClosePopup")!="close"){
            this._htWElement.lyrPopupBackground.show();
            this._htWElement.dlgPopupDialog.show()
        }
        
    }
    
});
var RecentReadHandler=jindo.$Class({
    $init:function(nSize){
        this._nSize=nSize;
        this._oCookie=new jindo.$Cookie();
        this._aRecentReadInfo=new jindo.$A();
        this._parseCookie();
        this._clean()
    }
    ,_parseCookie:function(){
        var sRecentReadInfo=this._oCookie.get("smarttoon_sRecentReadInfo");
        if(sRecentReadInfo!=null){
            jindo.$A(sRecentReadInfo.split(",")).forEach(function(v,i,a){
                var htArticleInfo=this._parseToken(v);
                if(htArticleInfo!=null){
                    this._aRecentReadInfo.push(htArticleInfo.nTitleId+"|"+htArticleInfo.nNo+"|"+htArticleInfo.nPosition)
                }
                
            }
            ,this)
        }
        
    }
    ,_parseToken:function(sToken){
        var aToken=/([\d]*)\|([\d]*)\|([\d]*)/.exec(sToken);
        if(aToken!=null&&aToken.length==4){
            return{
                nTitleId:aToken[1],nNo:aToken[2],nPosition:aToken[3]
            }
            
        }
        return null
    }
    ,_toString:function(){
        var sRecentReadInfo="";
        this._aRecentReadInfo.forEach(function(v,i,o){
            sRecentReadInfo+=v+(i<this._aRecentReadInfo.length()-1?",":"")
        }
        ,this);
        return sRecentReadInfo
    }
    ,_removeTitle:function(nTitleId){
        this._aRecentReadInfo=this._aRecentReadInfo.filter(function(v,i,a){
            return this._parseToken(v).nTitleId!=nTitleId
        }
        ,this)
    }
    ,_clean:function(){
        this._aRecentReadInfo.unique();
        this._aRecentReadInfo.length(this._nSize);
        this._oCookie.set("smarttoon_sRecentReadInfo",this._toString(),1)
    }
    ,getRecentPosition:function(nTitleId,nNo){
        var nPosition=-1;
        this._aRecentReadInfo.forEach(function(v,i,o){
            var htArticleInfo=this._parseToken(v);
            if(htArticleInfo.nTitleId==nTitleId&&htArticleInfo.nNo==nNo){
                nPosition=htArticleInfo.nPosition;
                jindo.$A.Break()
            }
            
        }
        ,this);
        return nPosition
    }
    ,setRecentPosition:function(nTitleId,nNo,nPosition){
        this._removeTitle(nTitleId);
        this._aRecentReadInfo.unshift(nTitleId+"|"+nNo+"|"+nPosition);
        this._aRecentReadInfo.length(this._nSize);
        this._oCookie.set("smarttoon_sRecentReadInfo",this._toString(),1)
    }
    
});
if(typeof window!="undefined"&&window.nhn===undefined){
    window.nhn={}
}
if(window.nhn.comment===undefined){
    window.nhn.comment={}
}
if(window.nhn.comment.mobile===undefined){
    window.nhn.comment.mobile={}
}
if(window.nhn.comment.mobile.jindo===undefined){
    window.nhn.comment.mobile.jindo={}
}
var MobileCommentJindo=window.nhn.comment.mobile.jindo;
var _j_ag=navigator.userAgent;
var _JINDO_IS_IE=_j_ag.indexOf("MSIE")>-1;
var _JINDO_IS_FF=_j_ag.indexOf("Firefox")>-1;
var _JINDO_IS_OP=_j_ag.indexOf("Opera")>-1;
var _JINDO_IS_SP=_j_ag.indexOf("Safari")>-1;
var _JINDO_IS_SF=_j_ag.indexOf("Apple")>-1;
var _JINDO_IS_CH=_j_ag.indexOf("Chrome")>-1;
var _JINDO_IS_WK=_j_ag.indexOf("WebKit")>-1;
var _JINDO_IS_MO=/(iPad|Mobile|Android|Nokia|webOS|BlackBerry|Opera Mini)/.test(_j_ag);
MobileCommentJindo.$Jindo=function(){
    var cl=arguments.callee;
    var cc=cl._cached;
    if(cc){
        return cc
    }
    if(!(this instanceof cl)){
        return new cl()
    }
    if(!cc){
        cl._cached=this
    }
    this.version="2.0.1"
};
MobileCommentJindo.$Jindo.compatible=function(){
    return false
};
var _objToString=Object.prototype.toString;
var _slice=Array.prototype.slice;
MobileCommentJindo.$Error=function(sMessage,sMethod){
    this.message="\tmethod : "+sMethod+"\n\tmessage : "+sMessage;
    this.type="Jindo Custom Error";
    this.toString=function(){
        return this.message+"\n\t"+this.type
    }
    
};
MobileCommentJindo.$Except={
    CANNOT_USE_OPTION:"해당 옵션은 사용할 수 없습니다.",PARSE_ERROR:"파싱중 에러가 발생했습니다.",NOT_FOUND_ARGUMENT:"파라메터가 없습니다.",NOT_STANDARD_QUERY:"css셀렉터가 정상적이지 않습니다.",INVALID_DATE:"날짜 포멧이 아닙니다.",REQUIRE_AJAX:"가 없습니다.",NOT_FOUND_ELEMENT:"엘리먼트가 없습니다.",HAS_FUNCTION_FOR_GROUP:"그룹으로 지우지 않는 경우 detach할 함수가 있어야 합니다.",NONE_ELEMENT:"에 해당하는 엘리먼트가 없습니다.",NOT_SUPPORT_SELECTOR:"는 지원하지 않는 selector입니다.",NOT_SUPPORT_METHOD:"desktop에서 지원하지 않는 메서드 입니다.",JSON_MUST_HAVE_ARRAY_HASH:"get메서드는 json타입이 hash나 array타입만 가능합니다.",MUST_APPEND_DOM:"document에 붙지 않은 엘리먼트를 기준 엘리먼트로 사용할 수 없습니다.",NOT_USE_CSS:"는 css를 사용 할수 없습니다.",NOT_WORK_DOMREADY:"domready이벤트는 iframe안에서 사용할 수 없습니다."
};
function _toArray(aArray){
    return _slice.apply(aArray)
}
try{
    _slice.apply(document.documentElement.childNodes)
}
catch(e){
    _toArray=function(aArray){
        var returnArray=[];
        var leng=aArray.length;
        for(var i=0;
        i<leng;
        i++){
            returnArray.push(aArray[i])
        }
        return returnArray
    }
    
}
MobileCommentJindo.$Jindo.isNumeric=function(nNum){
    return !isNaN(parseFloat(nNum))&&!MobileCommentJindo.$Jindo.isArray(nNum)&&isFinite(nNum)
};
(function(){
    var oType={
        Element:1,Document:9
    };
    for(var i in oType){
        MobileCommentJindo.$Jindo["is"+i]=(function(sType,nNodeNumber){
            return function(oObj){
                if(new RegExp(sType).test(_objToString.call(oObj))){
                    return true
                }
                else{
                    if(_objToString.call(oObj)=="[object Object]"&&oObj!==null&&oObj!==undefined&&oObj.nodeType==nNodeNumber){
                        return true
                    }
                    
                }
                return false
            }
            
        })(i,oType[i])
    }
    var _$type=["Function","Array","String","Boolean","Date","RegExp"];
    for(var i=0,l=_$type.length;
    i<l;
    i++){
        MobileCommentJindo.$Jindo["is"+_$type[i]]=(function(type){
            return function(oObj){
                return _objToString.call(oObj)=="[object "+type+"]"
            }
            
        })(_$type[i])
    }
    
})();
MobileCommentJindo.$Jindo.isNode=function(eEle){
    try{
        return !!(eEle&&eEle.nodeType)
    }
    catch(e){
        return false
    }
    
};
MobileCommentJindo.$Jindo.isHash=function(oObj){
    return _objToString.call(oObj)=="[object Object]"&&oObj!==null&&oObj!==undefined&&!!!oObj.nodeType&&!MobileCommentJindo.$Jindo.isWindow(oObj)
};
MobileCommentJindo.$Jindo.isNull=function(oObj){
    return oObj===null
};
MobileCommentJindo.$Jindo.isUndefined=function(oObj){
    return oObj===undefined
};
MobileCommentJindo.$Jindo.isWindow=function(oObj){
    return oObj==window||oObj==window.top
};
MobileCommentJindo.$Jindo.Break=function(){
    if(!(this instanceof arguments.callee)){
        throw new arguments.callee
    }
    
};
MobileCommentJindo.$Jindo.Continue=function(){
    if(!(this instanceof arguments.callee)){
        throw new arguments.callee
    }
    
};
MobileCommentJindo.$Jindo._F=function(sKeyType){
    return sKeyType
};
MobileCommentJindo.$Jindo._warn=function(nCurrentLength,nMaxLength,sMessage){
    if(nCurrentLength>nMaxLength){
        window.console&&((console.warn&&console.warn("추가적인 파라메터가 있습니다. : "+sMessage),true)||(console.log&&console.log("추가적인 파라메터가 있습니다. : "+sMessage),true))
    }
    
};
MobileCommentJindo.$Jindo.checkVarType=function(aArgs,oRules,sFuncName){
    var sFuncName=sFuncName||aArgs.callee.name||"anonymous";
    var $Jindo=MobileCommentJindo.$Jindo;
    var bCompat=$Jindo.compatible();
    var fpChecker=aArgs.callee["_checkVarType_"+bCompat];
    if(fpChecker){
        return fpChecker(aArgs,oRules,sFuncName)
    }
    var aPrependCode=[];
    aPrependCode.push("var nArgsLen = aArgs.length;");
    aPrependCode.push("var $Jindo = MobileCommentJindo.$Jindo;");
    if(bCompat){
        aPrependCode.push("var nMatchScore;");
        aPrependCode.push("var nMaxMatchScore = -1;");
        aPrependCode.push("var oFinalRet = null;")
    }
    var aBodyCode=[];
    var nMaxRuleLen=0;
    for(var sType in oRules){
        if(oRules.hasOwnProperty(sType)){
            nMaxRuleLen=Math.max(oRules[sType].length,nMaxRuleLen)
        }
        
    }
    for(var sType in oRules){
        if(oRules.hasOwnProperty(sType)){
            var aRule=oRules[sType];
            var nRuleLen=aRule.length;
            var aBodyPrependCode=[];
            var aBodyIfCode=[];
            var aBodyThenCode=[];
            if(!bCompat){
                if(nRuleLen<nMaxRuleLen){
                    aBodyIfCode.push("nArgsLen === "+nRuleLen)
                }
                else{
                    aBodyIfCode.push("nArgsLen >= "+nRuleLen)
                }
                
            }
            aBodyThenCode.push("var oRet = new MobileCommentJindo.$Jindo._varTypeRetObj();");
            var nTypeCount=nRuleLen;
            for(var i=0;
            i<nRuleLen;
            ++i){
                /^([^:]+):([^\+]*)(\+?)$/.test(aRule[i]);
                var sVarName=RegExp.$1;
                var sVarType=RegExp.$2;
                var bAutoCast=RegExp.$3?true:false;
                if(sVarType==="Variant"){
                    if(bCompat){
                        aBodyIfCode.push(i+" in aArgs")
                    }
                    aBodyThenCode.push('oRet["'+sVarName+'"] = aArgs['+i+"];");
                    nTypeCount--
                }
                else{
                    if(MobileCommentJindo.$Jindo._varTypeList[sVarType]){
                        var vVar="tmp"+sVarType+"_"+i;
                        aBodyPrependCode.push("var "+vVar+" = MobileCommentJindo.$Jindo._varTypeList."+sVarType+"(aArgs["+i+"], "+bAutoCast+");");
                        aBodyIfCode.push(vVar+" !== MobileCommentJindo.$Jindo.VARTYPE_NOT_MATCHED");
                        aBodyThenCode.push('oRet["'+sVarName+'"] = '+vVar+";")
                    }
                    else{
                        if(/^\$/.test(sVarType)&&MobileCommentJindo[sVarType]){
                            var sOR="";
                            var sNativeVarType;
                            if(bAutoCast){
                                sNativeVarType=({
                                    $Fn:"Function",$S:"String",$A:"Array",$H:"Hash",$ElementList:"Array"
                                })[sVarType]||sVarType.replace(/^\$/,"");
                                if($Jindo["is"+sNativeVarType]){
                                    sOR=" || MobileCommentJindo.$Jindo.is"+sNativeVarType+"(vNativeArg_"+i+")"
                                }
                                
                            }
                            aBodyIfCode.push("(aArgs["+i+"] instanceof MobileCommentJindo."+sVarType+sOR+")");
                            aBodyThenCode.push('oRet["'+sVarName+'"] = MobileCommentJindo.'+sVarType+"(aArgs["+i+"]);")
                        }
                        else{
                            if($Jindo["is"+sVarType]){
                                var sOR="";
                                var sWrapedVarType;
                                if(bAutoCast){
                                    sWrapedVarType=({
                                        Function:"$Fn",String:"$S",Array:"$A",Hash:"$H"
                                    })[sVarType]||"$"+sVarType;
                                    if(MobileCommentJindo[sWrapedVarType]){
                                        sOR=" || aArgs["+i+"] instanceof MobileCommentJindo."+sWrapedVarType
                                    }
                                    
                                }
                                aBodyIfCode.push("(MobileCommentJindo.$Jindo.is"+sVarType+"(aArgs["+i+"])"+sOR+")");
                                aBodyThenCode.push('oRet["'+sVarName+'"] = vNativeArg_'+i+";")
                            }
                            else{
                                throw new Error("VarType("+sVarType+") Not Found")
                            }
                            
                        }
                        
                    }
                    
                }
                
            }
            aBodyThenCode.push('oRet.__type = "'+sType+'";');
            if(bCompat){
                aBodyThenCode.push("nMatchScore = "+(nRuleLen*1000+nTypeCount*10)+" + (nArgsLen === "+nRuleLen+" ? 1 : 0);");
                aBodyThenCode.push("if (nMatchScore > nMaxMatchScore) {");
                aBodyThenCode.push("	nMaxMatchScore = nMatchScore;");
                aBodyThenCode.push("	oFinalRet = oRet;");
                aBodyThenCode.push("}")
            }
            else{
                aBodyThenCode.push("return oRet;")
            }
            aBodyCode.push(aBodyPrependCode.join("\n"));
            if(aBodyIfCode.length){
                aBodyCode.push("if ("+aBodyIfCode.join(" && ")+") {")
            }
            aBodyCode.push(aBodyThenCode.join("\n"));
            if(aBodyIfCode.length){
                aBodyCode.push("}")
            }
            
        }
        
    }
    aPrependCode.push("	MobileCommentJindo.$Jindo._warn(nArgsLen,"+nMaxRuleLen+',"'+sFuncName+'");');
    for(var i=0;
    i<nMaxRuleLen;
    ++i){
        var sArg="aArgs["+i+"]";
        aPrependCode.push(["var vNativeArg_",i," = ",sArg," && ",sArg,".$value ? ",sArg,".$value() : ",sArg+";"].join(""))
    }
    if(!bCompat){
        aBodyCode.push("MobileCommentJindo.$Jindo.checkVarType._throwException(aArgs, oRules, sFuncName);")
    }
    aBodyCode.push("return oFinalRet;");
    aArgs.callee["_checkVarType_"+bCompat]=fpChecker=new Function("aArgs,oRules,sFuncName",aPrependCode.join("\n")+aBodyCode.join("\n"));
    return fpChecker(aArgs,oRules,sFuncName)
};
MobileCommentJindo.$Jindo._varTypeRetObj=function(){};
MobileCommentJindo.$Jindo._varTypeRetObj.prototype.toString=function(){
    return this.__type
};
MobileCommentJindo.$Jindo.checkVarType._throwException=function(aArgs,oRules,sFuncName){
    var fpGetType=function(vArg){
        for(var sKey in MobileCommentJindo){
            if(MobileCommentJindo.hasOwnProperty(sKey)){
                var oConstructor=MobileCommentJindo[sKey];
                if(typeof oConstructor!=="function"){
                    continue
                }
                if(vArg instanceof oConstructor){
                    return sKey
                }
                
            }
            
        }
        var $Jindo=MobileCommentJindo.$Jindo;
        for(var sKey in MobileCommentJindo.$Jindo){
            if(MobileCommentJindo.$Jindo.hasOwnProperty(sKey)){
                if(!/^is(.+)$/.test(sKey)){
                    continue
                }
                var sType=RegExp.$1;
                var fpMethod=MobileCommentJindo.$Jindo[sKey];
                if(fpMethod(vArg)){
                    return sType
                }
                
            }
            
        }
        return"Unknown"
    };
    var fpErrorMessage=function(sUsed,aSuggs,sURL){
        var aMsg=["잘못된 파라미터입니다.",""];
        if(sUsed){
            aMsg.push("호출한 형태 :");
            aMsg.push("\t"+sUsed);
            aMsg.push("")
        }
        if(aSuggs.length){
            aMsg.push("사용 가능한 형태 :");
            for(var i=0,nLen=aSuggs.length;
            i<nLen;
            i++){
                aMsg.push("\t"+aSuggs[i])
            }
            aMsg.push("")
        }
        if(sURL){
            aMsg.push("매뉴얼 페이지 :");
            aMsg.push("\t"+sURL);
            aMsg.push("")
        }
        aMsg.unshift();
        return aMsg.join("\n")
    };
    var aArgName=[];
    for(var i=0,ic=aArgs.length;
    i<ic;
    ++i){
        try{
            aArgName.push(fpGetType(aArgs[i]))
        }
        catch(e){
            aArgName.push("Unknown")
        }
        
    }
    var sUsed=sFuncName+"("+aArgName.join(", ")+")";
    var aSuggs=[];
    for(var sKey in oRules){
        if(oRules.hasOwnProperty(sKey)){
            var aRule=oRules[sKey];
            aSuggs.push(""+sFuncName+"("+aRule.join(", ").replace(/(^|,\s)[^:]+:/g,"$1")+")")
        }
        
    }
    var sURL;
    if(/(\$\w+)(#\w+)?/.test(sFuncName)){
        sURL="http://jindo.dev.naver.com/docs/jindo/2.0.1/@type@/@lang@/symbols/"+encodeURIComponent(RegExp.$1)+".html"+RegExp.$2
    }
    throw new TypeError(fpErrorMessage(sUsed,aSuggs,sURL))
};
MobileCommentJindo.$Jindo.varType=function(){
    var oArgs=this.checkVarType(arguments,{
        s4str:["sTypeName:String+","fpFunc:Function+"],s4obj:["oTypeLists:Hash+"],g:["sTypeName:String+"]
    });
    var sDenyTypeListComma=MobileCommentJindo.$Jindo._denyTypeListComma;
    switch(oArgs+""){
        case"s4str":var sTypeNameComma=","+oArgs.sTypeName.replace(/\+$/,"")+",";
        if(sDenyTypeListComma.indexOf(sTypeNameComma)>-1){
            throw new Error("Not allowed Variable Type")
        }
        this._varTypeList[oArgs.sTypeName]=oArgs.fpFunc;
        return this;
        case"s4obj":var oTypeLists=oArgs.oTypeLists;
        for(var sTypeName in oTypeLists){
            if(oTypeLists.hasOwnProperty(sTypeName)){
                fpFunc=oTypeLists[sTypeName];
                arguments.callee.call(this,sTypeName,fpFunc)
            }
            
        }
        return this;
        case"g":return this._varTypeList[oArgs.sTypeName]
    }
    
};
MobileCommentJindo.$Jindo.VARTYPE_NOT_MATCHED={};
(function(){
    var oVarTypeList=MobileCommentJindo.$Jindo._varTypeList={};
    var ___jindo=MobileCommentJindo.$Jindo;
    var ___notMatched=___jindo.VARTYPE_NOT_MATCHED;
    oVarTypeList.Numeric=function(v){
        if(___jindo.isNumeric(v)){
            return v*1
        }
        return ___notMatched
    };
    oVarTypeList.Hash=function(val,bAutoCast){
        if(bAutoCast&&MobileCommentJindo.$H&&val instanceof MobileCommentJindo.$H){
            return val.$value()
        }
        else{
            if(___jindo.isHash(val)){
                return val
            }
            
        }
        return ___notMatched
    };
    oVarTypeList["$Class"]=function(val,bAutoCast){
        if((!___jindo.isFunction(val))||!val.extend){
            return ___notMatched
        }
        return val
    };
    var aDenyTypeList=[];
    for(var sTypeName in ___jindo){
        if(___jindo.hasOwnProperty(sTypeName)){
            if(/^is(.+)$/.test(sTypeName)){
                aDenyTypeList.push(RegExp.$1)
            }
            
        }
        
    }
    ___jindo._denyTypeListComma=aDenyTypeList.join(",");
    ___jindo.varType("ArrayStyle",function(val,bAutoCast){
        if(!val){
            return ___notMatched
        }
        if(/(Arguments|NodeList|HTMLCollection|global|Window)/.test(_objToString.call(val))||/Object/.test(_objToString.call(val))&&___jindo.isNumeric(val.length)){
            return _toArray(val)
        }
        return ___notMatched
    });
    ___jindo.varType("Form",function(val,bAutoCast){
        if(!val){
            return ___notMatched
        }
        if(bAutoCast&&val.$value){
            val=val.$value()
        }
        if(val.tagName&&val.tagName.toUpperCase()=="FORM"){
            return val
        }
        return ___notMatched
    })
})();
MobileCommentJindo.$=function(sID){
    if(!arguments.length){
        throw new MobileCommentJindo.$Error(MobileCommentJindo.$Except.NOT_FOUND_ARGUMENT,"$")
    }
    var ret=[],arg=arguments,nArgLeng=arg.length,lastArgument=arg[nArgLeng-1],doc=document,el=null;
    var reg=/^<([a-z]+|h[1-5])>$/i;
    var reg2=/^<([a-z]+|h[1-5])(\s+[^>]+)?>/i;
    if(nArgLeng>1&&typeof lastArgument!="string"&&lastArgument.body){
        arg=Array.prototype.slice.apply(arg,[0,nArgLeng-1]);
        doc=lastArgument
    }
    for(var i=0;
    i<nArgLeng;
    i++){
        el=arg[i]&&arg[i].$value?arg[i].$value():arg[i];
        if(MobileCommentJindo.$Jindo.isString(el)||MobileCommentJindo.$Jindo.isNumeric(el)){
            el+="";
            el=el.replace(/^\s+|\s+$/g,"");
            if(el.indexOf("<")>-1){
                if(reg.test(el)){
                    el=doc.createElement(RegExp.$1)
                }
                else{
                    if(reg2.test(el)){
                        var p={
                            thead:"table",tbody:"table",tr:"tbody",td:"tr",dt:"dl",dd:"dl",li:"ul",legend:"fieldset",option:"select"
                        };
                        var tag=RegExp.$1.toLowerCase();
                        var ele=MobileCommentJindo._createEle(p[tag],el,doc);
                        for(var i=0,leng=ele.length;
                        i<leng;
                        i++){
                            ret.push(ele[i])
                        }
                        el=null
                    }
                    
                }
                
            }
            else{
                el=doc.getElementById(el)
            }
            
        }
        if(el&&el.nodeType){
            ret[ret.length]=el
        }
        
    }
    return ret.length>1?ret:(ret[0]||null)
};
MobileCommentJindo._createEle=function(sParentTag,sHTML,oDoc,bWantParent){
    var sId="R"+new Date().getTime()+parseInt(Math.random()*100000,10);
    var oDummy=oDoc.createElement("div");
    switch(sParentTag){
        case"select":case"table":case"dl":case"ul":case"fieldset":oDummy.innerHTML="<"+sParentTag+' class="'+sId+'">'+sHTML+"</"+sParentTag+">";
        break;
        case"thead":case"tbody":case"col":oDummy.innerHTML="<table><"+sParentTag+' class="'+sId+'">'+sHTML+"</"+sParentTag+"></table>";
        break;
        case"tr":oDummy.innerHTML='<table><tbody><tr class="'+sId+'">'+sHTML+"</tr></tbody></table>";
        break;
        default:oDummy.innerHTML='<div class="'+sId+'">'+sHTML+"</div>"
    }
    var oFound;
    for(oFound=oDummy.firstChild;
    oFound;
    oFound=oFound.firstChild){
        if(oFound.className==sId){
            break
        }
        
    }
    return bWantParent?oFound:oFound.childNodes
};
MobileCommentJindo.$Class=function(oDef){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4obj":["oDef:Hash+"]
    }
    ,"$Class");
    function typeClass(){
        var t=this;
        var a=[];
        var superFunc=function(m,superClass,func){
            if(m!="constructor"&&func.toString().indexOf("$super")>-1){
                var funcArg=func.toString().replace(/function\s*\(([^\)]*)[\w\W]*/g,"$1").split(",");
                var funcStr=func.toString().replace(/function[^{]*{/,"").replace(/(\w|\.?)(this\.\$super|this)/g,function(m,m2,m3){
                    if(!m2){
                        return m3+".$super"
                    }
                    return m
                });
                funcStr=funcStr.substr(0,funcStr.length-1);
                func=superClass[m]=eval("false||function("+funcArg.join(",")+"){"+funcStr+"}")
            }
            return function(){
                var f=this.$this[m];
                var t=this.$this;
                var r=(t[m]=func).apply(t,arguments);
                t[m]=f;
                return r
            }
            
        };
        while(t._$superClass!==undefined){
            t.$super=new Object;
            t.$super.$this=this;
            for(var x in t._$superClass.prototype){
                if(t._$superClass.prototype.hasOwnProperty(x)){
                    if(this[x]===undefined&&x!="$init"){
                        this[x]=t._$superClass.prototype[x]
                    }
                    if(x!="constructor"&&x!="_$superClass"&&typeof t._$superClass.prototype[x]=="function"){
                        t.$super[x]=superFunc(x,t._$superClass,t._$superClass.prototype[x])
                    }
                    else{
                        t.$super[x]=t._$superClass.prototype[x]
                    }
                    
                }
                
            }
            if(typeof t.$super.$init=="function"){
                a[a.length]=t
            }
            t=t.$super
        }
        for(var i=a.length-1;
        i>-1;
        i--){
            a[i].$super.$init.apply(a[i].$super,arguments)
        }
        if(typeof this.$init=="function"){
            this.$init.apply(this,arguments)
        }
        
    }
    if(oDef.$static!==undefined){
        var i=0,x;
        for(x in oDef){
            if(oDef.hasOwnProperty(x)){
                x=="$static"||i++
            }
            
        }
        for(x in oDef.$static){
            if(oDef.$static.hasOwnProperty(x)){
                typeClass[x]=oDef.$static[x]
            }
            
        }
        if(!i){
            return oDef.$static
        }
        delete oDef.$static
    }
    typeClass.prototype=oDef;
    typeClass.prototype.constructor=typeClass;
    typeClass.prototype.kindOf=function(oClass){
        return _kindOf(this.constructor.prototype,oClass.prototype)
    };
    typeClass.extend=MobileCommentJindo.$Class.extend;
    return typeClass
};
function _kindOf(oThis,oClass){
    if(oThis!=oClass){
        if(oThis._$superClass){
            return _kindOf(oThis._$superClass.prototype,oClass)
        }
        else{
            return false
        }
        
    }
    else{
        return true
    }
    
}
MobileCommentJindo.$Class.extend=function(superClass){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4obj":["oDef:$Class"]
    }
    ,"<static> $Class#extend");
    this.prototype._$superClass=superClass;
    for(var x in superClass){
        if(superClass.hasOwnProperty(x)){
            if(x=="prototype"){
                continue
            }
            this[x]=superClass[x]
        }
        
    }
    return this
};
MobileCommentJindo.$$=MobileCommentJindo.cssquery=(function(){
    var sVersion="3.0";
    var debugOption={
        repeat:1
    };
    var UID=1;
    var cost=0;
    var validUID={};
    var bSupportByClassName=document.getElementsByClassName?true:false;
    var safeHTML=false;
    var getUID4HTML=function(oEl){
        var nUID=safeHTML?(oEl._cssquery_UID&&oEl._cssquery_UID[0]):oEl._cssquery_UID;
        if(nUID&&validUID[nUID]==oEl){
            return nUID
        }
        nUID=UID++;
        oEl._cssquery_UID=safeHTML?[nUID]:nUID;
        validUID[nUID]=oEl;
        return nUID
    };
    function GEBID(oBase,sId,oDoc){
        if(oBase.nodeType===9||oBase.parentNode&&oBase.parentNode.tagName){
            return oDoc.getElementById(sId)
        }
        else{
            var aEle=oBase.getElementsByTagName("*");
            for(var i=0,l=aEle.length;
            i<l;
            i++){
                if(aEle[i].id===sId){
                    return aEle[i]
                }
                
            }
            
        }
        
    }
    var getUID4XML=function(oEl){
        var oAttr=oEl.getAttribute("_cssquery_UID");
        var nUID=safeHTML?(oAttr&&oAttr[0]):oAttr;
        if(!nUID){
            nUID=UID++;
            oEl.setAttribute("_cssquery_UID",safeHTML?[nUID]:nUID)
        }
        return nUID
    };
    var getUID=getUID4HTML;
    var uniqid=function(sPrefix){
        return(sPrefix||"")+new Date().getTime()+parseInt(Math.random()*100000000,10)
    };
    function getElementsByClass(searchClass,node,tag){
        var classElements=new Array();
        if(node==null){
            node=document
        }
        if(tag==null){
            tag="*"
        }
        var els=node.getElementsByTagName(tag);
        var elsLen=els.length;
        var pattern=new RegExp("(^|\\s)"+searchClass+"(\\s|$)");
        for(i=0,j=0;
        i<elsLen;
        i++){
            if(pattern.test(els[i].className)){
                classElements[j]=els[i];
                j++
            }
            
        }
        return classElements
    }
    var getChilds_dontShrink=function(oEl,sTagName,sClassName){
        if(bSupportByClassName&&sClassName){
            if(oEl.getElementsByClassName){
                return oEl.getElementsByClassName(sClassName)
            }
            if(oEl.querySelectorAll){
                return oEl.querySelectorAll(sClassName)
            }
            return getElementsByClass(sClassName,oEl,sTagName)
        }
        else{
            if(sTagName=="*"){
                return oEl.all||oEl.getElementsByTagName(sTagName)
            }
            
        }
        return oEl.getElementsByTagName(sTagName)
    };
    var clearKeys=function(){
        backupKeys._keys={}
    };
    var oDocument_dontShrink=document;
    var bXMLDocument=false;
    var backupKeys=function(sQuery){
        var oKeys=backupKeys._keys;
        sQuery=sQuery.replace(/'(\\'|[^'])*'/g,function(sAll){
            var uid=uniqid("QUOT");
            oKeys[uid]=sAll;
            return uid
        });
        sQuery=sQuery.replace(/"(\\"|[^"])*"/g,function(sAll){
            var uid=uniqid("QUOT");
            oKeys[uid]=sAll;
            return uid
        });
        sQuery=sQuery.replace(/\[(.*?)\]/g,function(sAll,sBody){
            if(sBody.indexOf("ATTR")==0){
                return sAll
            }
            var uid="["+uniqid("ATTR")+"]";
            oKeys[uid]=sAll;
            return uid
        });
        var bChanged;
        do{
            bChanged=false;
            sQuery=sQuery.replace(/\(((\\\)|[^)|^(])*)\)/g,function(sAll,sBody){
                if(sBody.indexOf("BRCE")==0){
                    return sAll
                }
                var uid="_"+uniqid("BRCE");
                oKeys[uid]=sAll;
                bChanged=true;
                return uid
            })
        }
        while(bChanged);
        return sQuery
    };
    var restoreKeys=function(sQuery,bOnlyAttrBrace){
        var oKeys=backupKeys._keys;
        var bChanged;
        var rRegex=bOnlyAttrBrace?/(\[ATTR[0-9]+\])/g:/(QUOT[0-9]+|\[ATTR[0-9]+\])/g;
        do{
            bChanged=false;
            sQuery=sQuery.replace(rRegex,function(sKey){
                if(oKeys[sKey]){
                    bChanged=true;
                    return oKeys[sKey]
                }
                return sKey
            })
        }
        while(bChanged);
        sQuery=sQuery.replace(/_BRCE[0-9]+/g,function(sKey){
            return oKeys[sKey]?oKeys[sKey]:sKey
        });
        return sQuery
    };
    var restoreString=function(sKey){
        var oKeys=backupKeys._keys;
        var sOrg=oKeys[sKey];
        if(!sOrg){
            return sKey
        }
        return eval(sOrg)
    };
    var wrapQuot=function(sStr){
        return'"'+sStr.replace(/"/g,'\\"')+'"'
    };
    var getStyleKey=function(sKey){
        if(/^@/.test(sKey)){
            return sKey.substr(1)
        }
        return null
    };
    var getCSS=function(oEl,sKey){
        if(oEl.currentStyle){
            if(sKey=="float"){
                sKey="styleFloat"
            }
            return oEl.currentStyle[sKey]||oEl.style[sKey]
        }
        else{
            if(window.getComputedStyle){
                return oDocument_dontShrink.defaultView.getComputedStyle(oEl,null).getPropertyValue(sKey.replace(/([A-Z])/g,"-$1").toLowerCase())||oEl.style[sKey]
            }
            
        }
        if(sKey=="float"&&_JINDO_IS_IE){
            sKey="styleFloat"
        }
        return oEl.style[sKey]
    };
    var oCamels={
        accesskey:"accessKey",cellspacing:"cellSpacing",cellpadding:"cellPadding","class":"className",colspan:"colSpan","for":"htmlFor",maxlength:"maxLength",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",valign:"vAlign"
    };
    var getDefineCode=function(sKey){
        var sVal;
        var sStyleKey;
        if(bXMLDocument){
            sVal='oEl.getAttribute("'+sKey+'",2)'
        }
        else{
            if(sStyleKey=getStyleKey(sKey)){
                sKey="$$"+sStyleKey;
                sVal='getCSS(oEl, "'+sStyleKey+'")'
            }
            else{
                switch(sKey){
                    case"checked":sVal='oEl.checked + ""';
                    break;
                    case"disabled":sVal='oEl.disabled + ""';
                    break;
                    case"enabled":sVal='!oEl.disabled + ""';
                    break;
                    case"readonly":sVal='oEl.readOnly + ""';
                    break;
                    case"selected":sVal='oEl.selected + ""';
                    break;
                    default:if(oCamels[sKey]){
                        sVal="oEl."+oCamels[sKey]
                    }
                    else{
                        sVal='oEl.getAttribute("'+sKey+'",2)'
                    }
                    
                }
                
            }
            
        }
        return"_"+sKey.replace(/\-/g,"_")+" = "+sVal
    };
    var getReturnCode=function(oExpr){
        var sStyleKey=getStyleKey(oExpr.key);
        var sVar="_"+(sStyleKey?"$$"+sStyleKey:oExpr.key);
        sVar=sVar.replace(/\-/g,"_");
        var sVal=oExpr.val?wrapQuot(oExpr.val):"";
        switch(oExpr.op){
            case"~=":return"("+sVar+' && (" " + '+sVar+' + " ").indexOf(" " + '+sVal+' + " ") > -1)';
            case"^=":return"("+sVar+" && "+sVar+".indexOf("+sVal+") == 0)";
            case"$=":return"("+sVar+" && "+sVar+".substr("+sVar+".length - "+oExpr.val.length+") == "+sVal+")";
            case"*=":return"("+sVar+" && "+sVar+".indexOf("+sVal+") > -1)";
            case"!=":return"("+sVar+" != "+sVal+")";
            case"=":return"("+sVar+" == "+sVal+")"
        }
        return"("+sVar+")"
    };
    var getNodeIndex=function(oEl){
        var nUID=getUID(oEl);
        var nIndex=oNodeIndexes[nUID]||0;
        if(nIndex==0){
            for(var oSib=(oEl.parentNode||oEl._IE5_parentNode).firstChild;
            oSib;
            oSib=oSib.nextSibling){
                if(oSib.nodeType!=1){
                    continue
                }
                nIndex++;
                setNodeIndex(oSib,nIndex)
            }
            nIndex=oNodeIndexes[nUID]
        }
        return nIndex
    };
    var oNodeIndexes={};
    var setNodeIndex=function(oEl,nIndex){
        var nUID=getUID(oEl);
        oNodeIndexes[nUID]=nIndex
    };
    var unsetNodeIndexes=function(){
        setTimeout(function(){
            oNodeIndexes={}
        }
        ,0)
    };
    var oPseudoes_dontShrink={
        contains:function(oEl,sOption){
            return(oEl.innerText||oEl.textContent||"").indexOf(sOption)>-1
        }
        ,"last-child":function(oEl,sOption){
            for(oEl=oEl.nextSibling;
            oEl;
            oEl=oEl.nextSibling){
                if(oEl.nodeType==1){
                    return false
                }
                
            }
            return true
        }
        ,"first-child":function(oEl,sOption){
            for(oEl=oEl.previousSibling;
            oEl;
            oEl=oEl.previousSibling){
                if(oEl.nodeType==1){
                    return false
                }
                
            }
            return true
        }
        ,"only-child":function(oEl,sOption){
            var nChild=0;
            for(var oChild=(oEl.parentNode||oEl._IE5_parentNode).firstChild;
            oChild;
            oChild=oChild.nextSibling){
                if(oChild.nodeType==1){
                    nChild++
                }
                if(nChild>1){
                    return false
                }
                
            }
            return nChild?true:false
        }
        ,empty:function(oEl,_){
            return oEl.firstChild?false:true
        }
        ,"nth-child":function(oEl,nMul,nAdd){
            var nIndex=getNodeIndex(oEl);
            return nIndex%nMul==nAdd
        }
        ,"nth-last-child":function(oEl,nMul,nAdd){
            var oLast=(oEl.parentNode||oEl._IE5_parentNode).lastChild;
            for(;
            oLast;
            oLast=oLast.previousSibling){
                if(oLast.nodeType==1){
                    break
                }
                
            }
            var nTotal=getNodeIndex(oLast);
            var nIndex=getNodeIndex(oEl);
            var nLastIndex=nTotal-nIndex+1;
            return nLastIndex%nMul==nAdd
        }
        ,checked:function(oEl){
            return !!oEl.checked
        }
        ,selected:function(oEl){
            return !!oEl.selected
        }
        ,enabled:function(oEl){
            return !oEl.disabled
        }
        ,disabled:function(oEl){
            return !!oEl.disabled
        }
        
    };
    var getExpression=function(sBody){
        var oRet={
            defines:"",returns:"true"
        };
        var sBody=restoreKeys(sBody,true);
        var aExprs=[];
        var aDefineCode=[],aReturnCode=[];
        var sId,sTagName;
        var sBody=sBody.replace(/:([\w-]+)(\(([^)]*)\))?/g,function(_1,sType,_2,sOption){
            switch(sType){
                case"not":var oInner=getExpression(sOption);
                var sFuncDefines=oInner.defines;
                var sFuncReturns=oInner.returnsID+oInner.returnsTAG+oInner.returns;
                aReturnCode.push("!(function() { "+sFuncDefines+" return "+sFuncReturns+" })()");
                break;
                case"nth-child":case"nth-last-child":sOption=restoreString(sOption);
                if(sOption=="even"){
                    sOption="2n"
                }
                else{
                    if(sOption=="odd"){
                        sOption="2n+1"
                    }
                    
                }
                var nMul,nAdd;
                var matchstr=sOption.match(/([0-9]*)n([+-][0-9]+)*/);
                if(matchstr){
                    nMul=matchstr[1]||1;
                    nAdd=matchstr[2]||0
                }
                else{
                    nMul=Infinity;
                    nAdd=parseInt(sOption,10)
                }
                aReturnCode.push("oPseudoes_dontShrink["+wrapQuot(sType)+"](oEl, "+nMul+", "+nAdd+")");
                break;
                case"first-of-type":case"last-of-type":sType=(sType=="first-of-type"?"nth-of-type":"nth-last-of-type");
                sOption=1;
                case"nth-of-type":case"nth-last-of-type":sOption=restoreString(sOption);
                if(sOption=="even"){
                    sOption="2n"
                }
                else{
                    if(sOption=="odd"){
                        sOption="2n+1"
                    }
                    
                }
                var nMul,nAdd;
                if(/([0-9]*)n([+-][0-9]+)*/.test(sOption)){
                    nMul=parseInt(RegExp.$1,10)||1;
                    nAdd=parseInt(RegExp.$2,20)||0
                }
                else{
                    nMul=Infinity;
                    nAdd=parseInt(sOption,10)
                }
                oRet.nth=[nMul,nAdd,sType];
                break;
                default:sOption=sOption?restoreString(sOption):"";
                aReturnCode.push("oPseudoes_dontShrink["+wrapQuot(sType)+"](oEl, "+wrapQuot(sOption)+")")
            }
            return""
        });
        var sBody=sBody.replace(/\[(@?[\w-]+)(([!^~$*]?=)([^\]]*))?\]/g,function(_1,sKey,_2,sOp,sVal){
            sKey=restoreString(sKey);
            sVal=restoreString(sVal);
            if(sKey=="checked"||sKey=="disabled"||sKey=="enabled"||sKey=="readonly"||sKey=="selected"){
                if(!sVal){
                    sOp="=";
                    sVal="true"
                }
                
            }
            aExprs.push({
                key:sKey,op:sOp,val:sVal
            });
            return""
        });
        var sClassName=null;
        var sBody=sBody.replace(/\.([\w-]+)/g,function(_,sClass){
            aExprs.push({
                key:"class",op:"~=",val:sClass
            });
            if(!sClassName){
                sClassName=sClass
            }
            return""
        });
        var sBody=sBody.replace(/#([\w-]+)/g,function(_,sIdValue){
            if(bXMLDocument){
                aExprs.push({
                    key:"id",op:"=",val:sIdValue
                })
            }
            else{
                sId=sIdValue
            }
            return""
        });
        sTagName=sBody=="*"?"":sBody;
        var oVars={};
        for(var i=0,oExpr;
        oExpr=aExprs[i];
        i++){
            var sKey=oExpr.key;
            if(!oVars[sKey]){
                aDefineCode.push(getDefineCode(sKey))
            }
            aReturnCode.unshift(getReturnCode(oExpr));
            oVars[sKey]=true
        }
        if(aDefineCode.length){
            oRet.defines="var "+aDefineCode.join(",")+";"
        }
        if(aReturnCode.length){
            oRet.returns=aReturnCode.join("&&")
        }
        oRet.quotID=sId?wrapQuot(sId):"";
        oRet.quotTAG=sTagName?wrapQuot(bXMLDocument?sTagName:sTagName.toUpperCase()):"";
        if(bSupportByClassName){
            oRet.quotCLASS=sClassName?wrapQuot(sClassName):""
        }
        oRet.returnsID=sId?"oEl.id == "+oRet.quotID+" && ":"";
        oRet.returnsTAG=sTagName&&sTagName!="*"?"oEl.tagName == "+oRet.quotTAG+" && ":"";
        return oRet
    };
    var splitToParts=function(sQuery){
        var aParts=[];
        var sRel=" ";
        var sBody=sQuery.replace(/(.*?)\s*(!?[+>~ ]|!)\s*/g,function(_,sBody,sRelative){
            if(sBody){
                aParts.push({
                    rel:sRel,body:sBody
                })
            }
            sRel=sRelative.replace(/\s+$/g,"")||" ";
            return""
        });
        if(sBody){
            aParts.push({
                rel:sRel,body:sBody
            })
        }
        return aParts
    };
    var isNth_dontShrink=function(oEl,sTagName,nMul,nAdd,sDirection){
        var nIndex=0;
        for(var oSib=oEl;
        oSib;
        oSib=oSib[sDirection]){
            if(oSib.nodeType==1&&(!sTagName||sTagName==oSib.tagName)){
                nIndex++
            }
            
        }
        return nIndex%nMul==nAdd
    };
    var compileParts=function(aParts){
        var aPartExprs=[];
        for(var i=0,oPart;
        oPart=aParts[i];
        i++){
            aPartExprs.push(getExpression(oPart.body))
        }
        var sFunc="";
        var sPushCode="aRet.push(oEl); if (oOptions.single) { bStop = true; }";
        for(var i=aParts.length-1,oPart;
        oPart=aParts[i];
        i--){
            var oExpr=aPartExprs[i];
            var sPush=(debugOption.callback?"cost++;":"")+oExpr.defines;
            var sReturn="if (bStop) {"+(i==0?"return aRet;":"return;")+"}";
            if(oExpr.returns=="true"){
                sPush+=(sFunc?sFunc+"(oEl);":sPushCode)+sReturn
            }
            else{
                sPush+="if ("+oExpr.returns+") {"+(sFunc?sFunc+"(oEl);":sPushCode)+sReturn+"}"
            }
            var sCheckTag="oEl.nodeType != 1";
            if(oExpr.quotTAG){
                sCheckTag="oEl.tagName != "+oExpr.quotTAG
            }
            var sTmpFunc="(function(oBase"+(i==0?", oOptions) { var bStop = false; var aRet = [];":") {");
            if(oExpr.nth){
                sPush="if (isNth_dontShrink(oEl, "+(oExpr.quotTAG?oExpr.quotTAG:"false")+","+oExpr.nth[0]+","+oExpr.nth[1]+',"'+(oExpr.nth[2]=="nth-of-type"?"previousSibling":"nextSibling")+'")) {'+sPush+"}"
            }
            switch(oPart.rel){
                case" ":if(oExpr.quotID){
                    sTmpFunc+="var oEl = GEBID(oBase,"+oExpr.quotID+",oDocument_dontShrink);var oCandi = oEl;for (; oCandi; oCandi = (oCandi.parentNode || oCandi._IE5_parentNode)) {if (oCandi == oBase) break;}if (!oCandi || "+sCheckTag+") return aRet;"+sPush
                }
                else{
                    sTmpFunc+="var aCandi = getChilds_dontShrink(oBase, "+(oExpr.quotTAG||'"*"')+", "+(oExpr.quotCLASS||"null")+");for (var i = 0, oEl; oEl = aCandi[i]; i++) {"+(oExpr.quotCLASS?"if ("+sCheckTag+") continue;":"")+sPush+"}"
                }
                break;
                case">":if(oExpr.quotID){
                    sTmpFunc+="var oEl = GEBID(oBase,"+oExpr.quotID+",oDocument_dontShrink);if ((oEl.parentNode || oEl._IE5_parentNode) != oBase || "+sCheckTag+") return aRet;"+sPush
                }
                else{
                    sTmpFunc+="for (var oEl = oBase.firstChild; oEl; oEl = oEl.nextSibling) {if ("+sCheckTag+") { continue; }"+sPush+"}"
                }
                break;
                case"+":if(oExpr.quotID){
                    sTmpFunc+="var oEl = GEBID(oBase,"+oExpr.quotID+",oDocument_dontShrink);var oPrev;for (oPrev = oEl.previousSibling; oPrev; oPrev = oPrev.previousSibling) { if (oPrev.nodeType == 1) break; }if (!oPrev || oPrev != oBase || "+sCheckTag+") return aRet;"+sPush
                }
                else{
                    sTmpFunc+="for (var oEl = oBase.nextSibling; oEl; oEl = oEl.nextSibling) { if (oEl.nodeType == 1) break; }if (!oEl || "+sCheckTag+") { return aRet; }"+sPush
                }
                break;
                case"~":if(oExpr.quotID){
                    sTmpFunc+="var oEl = GEBID(oBase,"+oExpr.quotID+",oDocument_dontShrink);var oCandi = oEl;for (; oCandi; oCandi = oCandi.previousSibling) { if (oCandi == oBase) break; }if (!oCandi || "+sCheckTag+") return aRet;"+sPush
                }
                else{
                    sTmpFunc+="for (var oEl = oBase.nextSibling; oEl; oEl = oEl.nextSibling) {if ("+sCheckTag+") { continue; }if (!markElement_dontShrink(oEl, "+i+")) { break; }"+sPush+"}"
                }
                break;
                case"!":if(oExpr.quotID){
                    sTmpFunc+="var oEl = GEBID(oBase,"+oExpr.quotID+",oDocument_dontShrink);for (; oBase; oBase = (oBase.parentNode || oBase._IE5_parentNode)) { if (oBase == oEl) break; }if (!oBase || "+sCheckTag+") return aRet;"+sPush
                }
                else{
                    sTmpFunc+="for (var oEl = (oBase.parentNode || oBase._IE5_parentNode); oEl; oEl = (oEl.parentNode || oEl._IE5_parentNode)) {if ("+sCheckTag+") { continue; }"+sPush+"}"
                }
                break;
                case"!>":if(oExpr.quotID){
                    sTmpFunc+="var oEl = GEBID(oBase,"+oExpr.quotID+",oDocument_dontShrink);var oRel = (oBase.parentNode || oBase._IE5_parentNode);if (!oRel || oEl != oRel || ("+sCheckTag+")) return aRet;"+sPush
                }
                else{
                    sTmpFunc+="var oEl = (oBase.parentNode || oBase._IE5_parentNode);if (!oEl || "+sCheckTag+") { return aRet; }"+sPush
                }
                break;
                case"!+":if(oExpr.quotID){
                    sTmpFunc+="var oEl = GEBID(oBase,"+oExpr.quotID+",oDocument_dontShrink);var oRel;for (oRel = oBase.previousSibling; oRel; oRel = oRel.previousSibling) { if (oRel.nodeType == 1) break; }if (!oRel || oEl != oRel || ("+sCheckTag+")) return aRet;"+sPush
                }
                else{
                    sTmpFunc+="for (oEl = oBase.previousSibling; oEl; oEl = oEl.previousSibling) { if (oEl.nodeType == 1) break; }if (!oEl || "+sCheckTag+") { return aRet; }"+sPush
                }
                break;
                case"!~":if(oExpr.quotID){
                    sTmpFunc+="var oEl = GEBID(oBase,"+oExpr.quotID+",oDocument_dontShrink);var oRel;for (oRel = oBase.previousSibling; oRel; oRel = oRel.previousSibling) { if (oRel.nodeType != 1) { continue; }if (oRel == oEl) { break; }}if (!oRel || ("+sCheckTag+")) return aRet;"+sPush
                }
                else{
                    sTmpFunc+="for (oEl = oBase.previousSibling; oEl; oEl = oEl.previousSibling) {if ("+sCheckTag+") { continue; }if (!markElement_dontShrink(oEl, "+i+")) { break; }"+sPush+"}"
                }
                
            }
            sTmpFunc+=(i==0?"return aRet;":"")+"})";
            sFunc=sTmpFunc
        }
        eval("var fpCompiled = "+sFunc+";");
        return fpCompiled
    };
    var parseQuery=function(sQuery){
        var sCacheKey=sQuery;
        var fpSelf=arguments.callee;
        var fpFunction=fpSelf._cache[sCacheKey];
        if(!fpFunction){
            sQuery=backupKeys(sQuery);
            var aParts=splitToParts(sQuery);
            fpFunction=fpSelf._cache[sCacheKey]=compileParts(aParts);
            fpFunction.depth=aParts.length
        }
        return fpFunction
    };
    parseQuery._cache={};
    var parseTestQuery=function(sQuery){
        var fpSelf=arguments.callee;
        var aSplitQuery=backupKeys(sQuery).split(/\s*,\s*/);
        var aResult=[];
        var nLen=aSplitQuery.length;
        var aFunc=[];
        for(var i=0;
        i<nLen;
        i++){
            aFunc.push((function(sQuery){
                var sCacheKey=sQuery;
                var fpFunction=fpSelf._cache[sCacheKey];
                if(!fpFunction){
                    sQuery=backupKeys(sQuery);
                    var oExpr=getExpression(sQuery);
                    eval("fpFunction = function(oEl) { "+oExpr.defines+"return ("+oExpr.returnsID+oExpr.returnsTAG+oExpr.returns+"); };")
                }
                return fpFunction
            })(restoreKeys(aSplitQuery[i])))
        }
        return aFunc
    };
    parseTestQuery._cache={};
    var distinct=function(aList){
        var aDistinct=[];
        var oDummy={};
        for(var i=0,oEl;
        oEl=aList[i];
        i++){
            var nUID=getUID(oEl);
            if(oDummy[nUID]){
                continue
            }
            aDistinct.push(oEl);
            oDummy[nUID]=true
        }
        return aDistinct
    };
    var markElement_dontShrink=function(oEl,nDepth){
        var nUID=getUID(oEl);
        if(cssquery._marked[nDepth][nUID]){
            return false
        }
        cssquery._marked[nDepth][nUID]=true;
        return true
    };
    var oResultCache=null;
    var bUseResultCache=false;
    var bExtremeMode=false;
    var old_cssquery=function(sQuery,oParent,oOptions){
        var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
            "4str":["sQuery:String+"],"4var":["sQuery:String+","oParent:Variant"],"4var2":["sQuery:String+","oParent:Variant","oOptions:Variant"]
        }
        ,"cssquery");
        oParent=oParent&&oParent.$value?oParent.$value():oParent;
        oOptions=oOptions&&oOptions.$value?oOptions.$value():oOptions;
        if(MobileCommentJindo.$Jindo.isString(oParent)){
            try{
                oParent=document.getElementById(oParent)
            }
            catch(e){
                oParent=document
            }
            
        }
        if(!oParent){
            oParent=document
        }
        oParent=oParent||oParent.ownerDocument||oParent.document;
        if(typeof sQuery=="object"){
            var oResult={};
            for(var k in sQuery){
                if(sQuery.hasOwnProperty(k)){
                    oResult[k]=arguments.callee(sQuery[k],oParent,oOptions)
                }
                
            }
            return oResult
        }
        cost=0;
        var executeTime=new Date().getTime();
        var aRet;
        for(var r=0,rp=debugOption.repeat;
        r<rp;
        r++){
            aRet=(function(sQuery,oParent,oOptions){
                if(oOptions){
                    if(!oOptions.oneTimeOffCache){
                        oOptions.oneTimeOffCache=false
                    }
                    
                }
                else{
                    oOptions={
                        oneTimeOffCache:false
                    }
                    
                }
                cssquery.safeHTML(oOptions.oneTimeOffCache);
                if(!oParent){
                    oParent=document
                }
                oDocument_dontShrink=oParent.ownerDocument||oParent.document||oParent;
                if(/\bMSIE\s([0-9]+(\.[0-9]+)*);/.test(_j_ag)&&parseFloat(RegExp.$1,10)<6){
                    try{
                        oDocument_dontShrink.location
                    }
                    catch(e){
                        oDocument_dontShrink=document
                    }
                    oDocument_dontShrink.firstChild=oDocument_dontShrink.getElementsByTagName("html")[0];
                    oDocument_dontShrink.firstChild._IE5_parentNode=oDocument_dontShrink
                }
                bXMLDocument=(typeof XMLDocument!=="undefined")?(oDocument_dontShrink.constructor===XMLDocument):(!oDocument_dontShrink.location);
                getUID=bXMLDocument?getUID4XML:getUID4HTML;
                clearKeys();
                var aSplitQuery=backupKeys(sQuery).split(/\s*,\s*/);
                var aResult=[];
                var nLen=aSplitQuery.length;
                for(var i=0;
                i<nLen;
                i++){
                    aSplitQuery[i]=restoreKeys(aSplitQuery[i])
                }
                for(var i=0;
                i<nLen;
                i++){
                    var sSingleQuery=aSplitQuery[i];
                    var aSingleQueryResult=null;
                    var sResultCacheKey=sSingleQuery+(oOptions.single?"_single":"");
                    var aCache=bUseResultCache?oResultCache[sResultCacheKey]:null;
                    if(aCache){
                        for(var j=0,oCache;
                        oCache=aCache[j];
                        j++){
                            if(oCache.parent==oParent){
                                aSingleQueryResult=oCache.result;
                                break
                            }
                            
                        }
                        
                    }
                    if(!aSingleQueryResult){
                        var fpFunction=parseQuery(sSingleQuery);
                        cssquery._marked=[];
                        for(var j=0,nDepth=fpFunction.depth;
                        j<nDepth;
                        j++){
                            cssquery._marked.push({})
                        }
                        aSingleQueryResult=distinct(fpFunction(oParent,oOptions));
                        if(bUseResultCache&&!oOptions.oneTimeOffCache){
                            if(!(oResultCache[sResultCacheKey] instanceof Array)){
                                oResultCache[sResultCacheKey]=[]
                            }
                            oResultCache[sResultCacheKey].push({
                                parent:oParent,result:aSingleQueryResult
                            })
                        }
                        
                    }
                    aResult=aResult.concat(aSingleQueryResult)
                }
                unsetNodeIndexes();
                return aResult
            })(sQuery,oParent,oOptions)
        }
        executeTime=new Date().getTime()-executeTime;
        if(debugOption.callback){
            debugOption.callback(sQuery,cost,executeTime)
        }
        return aRet
    };
    var cssquery;
    if(document.querySelectorAll){
        function _isNonStandardQueryButNotException(sQuery){
            return/\[\s*(?:checked|selected|disabled)/.test(sQuery)
        }
        function _commaRevise(sQuery,sChange){
            return sQuery.replace(/\,/gi,sChange)
        }
        function _startCombinator(sQuery){
            return/^[~>+]/.test(sQuery)
        }
        var _div=document.createElement("div");
        cssquery=function(sQuery,oParent,oOptions){
            var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
                "4str":["sQuery:String+"],"4var":["sQuery:String+","oParent:Variant"],"4var2":["sQuery:String+","oParent:Variant","oOptions:Variant"]
            }
            ,"cssquery");
            oParent=oParent&&oParent.$value?oParent.$value():oParent;
            oOptions=oOptions&&oOptions.$value?oOptions.$value():oOptions;
            if(MobileCommentJindo.$Jindo.isString(oParent)){
                oParent=document.getElementById(oParent)
            }
            var sTempId,aRet;
            if(!oParent){
                oParent=document
            }
            oParent=oParent||oParent.ownerDocument||oParent.document;
            var nNodeType=oParent.nodeType;
            var oldID,oOldParent,id,_clone;
            try{
                if(_isNonStandardQueryButNotException(sQuery)){
                    return old_cssquery(sQuery,oParent,oOptions)
                }
                if(nNodeType!==9){
                    if(nNodeType===11){
                        oParent=oParent.cloneNode(true);
                        _clone=_div.cloneNode(true);
                        _clone.appendChild(oParent);
                        oParent=_clone;
                        _clone=null
                    }
                    if(oParent.id){
                        oldID=oParent.id
                    }
                    oParent.setAttribute("id",("C"+new Date().getTime()+Math.floor(Math.random()*1000000)));
                    if(oParent.tagName.toUpperCase()==="BODY"||MobileCommentJindo.$Element._contain((oParent.ownerDocument||oParent.document).body,oParent)){
                        id=oParent.id;
                        var _parent=oParent.parentNode;
                        oOldParent=oParent;
                        oParent=_parent
                    }
                    else{
                        _clone=_div.cloneNode(true);
                        id=oParent.id;
                        oOldParent=oParent;
                        _clone.appendChild(oOldParent);
                        oParent=_clone
                    }
                    sQuery=_commaRevise("#"+id+" "+sQuery,", #"+id)
                }
                else{
                    if(_startCombinator(sQuery)){
                        return[]
                    }
                    
                }
                if(oOptions&&oOptions.single){
                    aRet=[oParent.querySelector(sQuery)]
                }
                else{
                    aRet=_toArray(oParent.querySelectorAll(sQuery))
                }
                
            }
            catch(e){
                aRet=old_cssquery(sQuery,oParent,oOptions)
            }
            if(oOldParent){
                if(oldID){
                    oOldParent.id=oldID
                }
                else{
                    oOldParent.removeAttribute("id")
                }
                _clone=null
            }
            return aRet
        }
        
    }
    else{
        cssquery=old_cssquery
    }
    cssquery.test=function(oEl,sQuery){
        clearKeys();
        try{
            var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
                "4ele":["oEl:Element+","sQuery:String+"],"4doc":["oEl:Document+","sQuery:String+"]
            }
            ,"<static> cssquery#test");
            eEl=oArgs.oEl;
            sQuery=oArgs.sQuery
        }
        catch(e){
            return false
        }
        var aFunc=parseTestQuery(sQuery);
        for(var i=0,nLen=aFunc.length;
        i<nLen;
        i++){
            if(aFunc[i](oEl)){
                return true
            }
            
        }
        return false
    };
    cssquery.useCache=function(bFlag){
        if(bFlag!==undefined){
            bUseResultCache=bFlag;
            cssquery.clearCache()
        }
        return bUseResultCache
    };
    cssquery.clearCache=function(){
        oResultCache={}
    };
    cssquery.getSingle=function(sQuery,oParent,oOptions){
        oOptions=oOptions&&oOptions.$value?oOptions.$value():oOptions;
        return cssquery(sQuery,oParent,{
            single:true,oneTimeOffCache:oOptions?(!!oOptions.oneTimeOffCache):false
        })[0]||null
    };
    cssquery.xpath=function(sXPath,oParent){
        sXPath=sXPath&&sXPath.$value?sXPath.$value():sXPath;
        sXPath=sXPath.replace(/\/(\w+)(\[([0-9]+)\])?/g,function(_1,sTag,_2,sTh){
            sTh=sTh||"1";
            return">"+sTag+":nth-of-type("+sTh+")"
        });
        return old_cssquery(sXPath,oParent)
    };
    cssquery.debug=function(fpCallback,nRepeat){
        var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
            "4fun":["fpCallback:Function+"],"4fun2":["fpCallback:Function+","nRepeat:Numeric"]
        }
        ,"<static> cssquery#debug");
        debugOption.callback=oArgs.fpCallback;
        debugOption.repeat=oArgs.nRepeat||1
    };
    cssquery.safeHTML=function(bFlag){
        if(arguments.length>0){
            safeHTML=bFlag&&_JINDO_IS_IE
        }
        return safeHTML||!_JINDO_IS_IE
    };
    cssquery.version=sVersion;
    cssquery.release=function(){
        if(_JINDO_IS_IE){
            delete validUID;
            validUID={};
            if(bUseResultCache){
                cssquery.clearCache()
            }
            
        }
        
    };
    cssquery._getCacheInfo=function(){
        return{
            uidCache:validUID,eleCache:oResultCache
        }
        
    };
    cssquery._resetUID=function(){
        UID=0
    };
    cssquery.extreme=function(bExtreme){
        if(arguments.length==0){
            bExtreme=true
        }
        bExtremeMode=bExtreme
    };
    return cssquery
})();
MobileCommentJindo.$Agent=function(){
    var cl=arguments.callee;
    var cc=cl._cached;
    if(cc){
        return cc
    }
    if(!(this instanceof cl)){
        return new cl
    }
    if(!cc){
        cl._cached=this
    }
    this._navigator=navigator;
    this._dm=document.documentMode
};
MobileCommentJindo.$Agent.prototype.navigator=function(){
    var info={};
    var ver=-1;
    var nativeVersion=-1;
    var u=this._navigator.userAgent;
    var v=this._navigator.vendor||"";
    var dm=this._dm;
    function f(s,h){
        return((h||"").indexOf(s)>-1)
    }
    info.getName=function(){
        var name="";
        for(x in info){
            if(typeof info[x]=="boolean"&&info[x]&&info.hasOwnProperty(x)){
                name=x
            }
            
        }
        return name
    };
    info.webkit=f("WebKit",u);
    info.opera=(window.opera!==undefined)||f("Opera",u);
    info.ie=!info.opera&&f("MSIE",u);
    info.chrome=info.webkit&&f("Chrome",u);
    info.safari=info.webkit&&!info.chrome&&f("Apple",v);
    info.firefox=f("Firefox",u);
    info.mozilla=f("Gecko",u)&&!info.safari&&!info.chrome&&!info.firefox;
    info.camino=f("Camino",v);
    info.netscape=f("Netscape",u);
    info.omniweb=f("OmniWeb",u);
    info.icab=f("iCab",v);
    info.konqueror=f("KDE",v);
    info.mobile=(f("Mobile",u)||f("Android",u)||f("Nokia",u)||f("webOS",u)||f("Opera Mini",u)||f("BlackBerry",u)||(f("Windows",u)&&f("PPC",u))||f("Smartphone",u)||f("IEMobile",u))&&!f("iPad",u);
    info.msafari=(!f("IEMobile",u)&&f("Mobile",u))||(f("iPad",u)&&f("Safari",u));
    info.mopera=f("Opera Mini",u);
    info.mie=f("PPC",u)||f("Smartphone",u)||f("IEMobile",u);
    try{
        if(info.ie){
            if(dm>0){
                ver=dm;
                if(u.match(/(?:Trident)\/([0-9.]+)/)){
                    var nTridentNum=parseInt(RegExp.$1,10);
                    if(nTridentNum>3){
                        nativeVersion=nTridentNum+4
                    }
                    
                }
                else{
                    nativeVersion=ver
                }
                
            }
            else{
                nativeVersion=ver=u.match(/(?:MSIE) ([0-9.]+)/)[1]
            }
            
        }
        else{
            if(info.safari||info.msafari){
                ver=parseFloat(u.match(/Safari\/([0-9.]+)/)[1],10);
                if(ver==100){
                    ver=1.1
                }
                else{
                    if(u.match(/Version\/([0-9.]+)/)){
                        ver=RegExp.$1
                    }
                    else{
                        ver=[1,1.2,-1,1.3,2,3][Math.floor(ver/100)]
                    }
                    
                }
                
            }
            else{
                if(info.mopera){
                    ver=u.match(/(?:Opera\sMini)\/([0-9.]+)/)[1]
                }
                else{
                    if(info.firefox||info.opera||info.omniweb){
                        ver=u.match(/(?:Firefox|Opera|OmniWeb)\/([0-9.]+)/)[1]
                    }
                    else{
                        if(info.mozilla){
                            ver=u.match(/rv:([0-9.]+)/)[1]
                        }
                        else{
                            if(info.icab){
                                ver=u.match(/iCab[ \/]([0-9.]+)/)[1]
                            }
                            else{
                                if(info.chrome){
                                    ver=u.match(/Chrome[ \/]([0-9.]+)/)[1]
                                }
                                
                            }
                            
                        }
                        
                    }
                    
                }
                
            }
            
        }
        info.version=parseFloat(ver,10);
        info.nativeVersion=parseFloat(nativeVersion,10);
        if(isNaN(info.version)){
            info.version=-1
        }
        
    }
    catch(e){
        info.version=-1
    }
    this.navigator=function(){
        return info
    };
    return info
};
MobileCommentJindo.$Agent.prototype.os=function(){
    var info={};
    var u=this._navigator.userAgent;
    var p=this._navigator.platform;
    var f=function(s,h){
        return(h.indexOf(s)>-1)
    };
    info.getName=function(){
        var name="";
        for(x in info){
            if(info[x]===true&&info.hasOwnProperty(x)){
                name=x
            }
            
        }
        return name
    };
    info.win=f("Win",p);
    info.mac=f("Mac",p);
    info.linux=f("Linux",p);
    info.win2000=info.win&&(f("NT 5.0",u)||f("2000",u));
    info.winxp=info.win&&f("NT 5.1",u);
    info.xpsp2=info.winxp&&f("SV1",u);
    info.vista=info.win&&f("NT 6.0",u);
    info.win7=info.win&&f("NT 6.1",u);
    info.ipad=f("iPad",u);
    info.iphone=f("iPhone",u)&&!info.ipad;
    info.android=f("Android",u);
    info.nokia=f("Nokia",u);
    info.webos=f("webOS",u);
    info.blackberry=f("BlackBerry",u);
    info.mwin=f("PPC",u)||f("Smartphone",u)||f("IEMobile",u);
    this.os=function(){
        return info
    };
    return info
};
MobileCommentJindo.$Agent.prototype.flash=function(){
    var info={};
    var p=this._navigator.plugins;
    var m=this._navigator.mimeTypes;
    var f=null;
    info.installed=false;
    info.version=-1;
    if(!MobileCommentJindo.$Jindo.isUndefined(p)&&p.length){
        f=p["Shockwave Flash"];
        if(f){
            info.installed=true;
            if(f.description){
                info.version=parseFloat(f.description.match(/[0-9.]+/)[0],10)
            }
            
        }
        if(p["Shockwave Flash 2.0"]){
            info.installed=true;
            info.version=2
        }
        
    }
    else{
        if(!MobileCommentJindo.$Jindo.isUndefined(m)&&m.length){
            f=m["application/x-shockwave-flash"];
            info.installed=(f&&f.enabledPlugin)
        }
        else{
            for(var i=10;
            i>1;
            i--){
                try{
                    f=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+i);
                    info.installed=true;
                    info.version=i;
                    break
                }
                catch(e){}
            }
            
        }
        
    }
    this.flash=function(){
        return info
    };
    this.info=this.flash;
    return info
};
MobileCommentJindo.$Agent.prototype.silverlight=function(){
    var info=new Object;
    var p=this._navigator.plugins;
    var s=null;
    info.installed=false;
    info.version=-1;
    if(!MobileCommentJindo.$Jindo.isUndefined(p)&&p.length){
        s=p["Silverlight Plug-In"];
        if(s){
            info.installed=true;
            info.version=parseInt(s.description.split(".")[0],10);
            if(s.description=="1.0.30226.2"){
                info.version=2
            }
            
        }
        
    }
    else{
        try{
            s=new ActiveXObject("AgControl.AgControl");
            info.installed=true;
            if(s.isVersionSupported("3.0")){
                info.version=3
            }
            else{
                if(s.isVersionSupported("2.0")){
                    info.version=2
                }
                else{
                    if(s.isVersionSupported("1.0")){
                        info.version=1
                    }
                    
                }
                
            }
            
        }
        catch(e){}
    }
    this.silverlight=function(){
        return info
    };
    return info
};
MobileCommentJindo.$A=function(array){
    var cl=arguments.callee;
    if(array instanceof cl){
        return array
    }
    if(!(this instanceof cl)){
        try{
            MobileCommentJindo.$Jindo._warn(arguments.length,1,"$A");
            return new cl(array)
        }
        catch(e){
            if(e instanceof TypeError){
                return null
            }
            throw e
        }
        
    }
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4voi":[],"4arr":["aPram:Array+"],"4nul":["oNull:Null"],"4und":["oUndefined:Undefined"],arrt:["aPram:ArrayStyle"]
    }
    ,"$A");
    if(oArgs==null){
        array=[]
    }
    switch(oArgs+""){
        case"arrt":case"4arr":array=oArgs.aPram;
        break;
        case"4nul":case"4und":case"4voi":array=[]
    }
    this._array=[];
    for(var i=0;
    i<array.length;
    i++){
        this._array[this._array.length]=array[i]
    }
    
};
MobileCommentJindo.$A.checkVarTypeObj={
    "4fun":["fCallback:Function+"],"4thi":["fCallback:Function+","oThis:Variant"]
};
MobileCommentJindo.$A.prototype.toString=function(){
    return this._array.toString()
};
MobileCommentJindo.$A.prototype.get=function(nIndex){
    MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4num":["nIndex:Numeric"]
    }
    ,"$A#get");
    return this._array[nIndex]
};
MobileCommentJindo.$A.prototype.set=function(nIndex,vValue){
    MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4num":["nIndex:Numeric","vValue:Variant"]
    }
    ,"$A#set");
    this._array[nIndex]=vValue;
    return this
};
MobileCommentJindo.$A.prototype.length=function(nLen,oValue){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4num":[MobileCommentJindo.$Jindo._F("nLen:Numeric")],sv:["nLen:Numeric","vValue:Variant"],"4voi":[]
    }
    ,"$A#length");
    switch(oArgs+""){
        case"4num":this._array.length=oArgs.nLen;
        return this;
        case"sv":var l=this._array.length;
        this._array.length=oArgs.nLen;
        for(var i=l;
        i<nLen;
        i++){
            this._array[i]=oArgs.vValue
        }
        return this;
        case"4voi":return this._array.length
    }
    
};
MobileCommentJindo.$A.prototype.has=function(oValue){
    return(this.indexOf(oValue)>-1)
};
MobileCommentJindo.$A.prototype.indexOf=function(oValue){
    if(this._array.indexOf){
        MobileCommentJindo.$A.prototype.indexOf=function(oValue){
            return this._array.indexOf(oValue)
        }
        
    }
    else{
        MobileCommentJindo.$A.prototype.indexOf=function(oValue){
            for(var i=0;
            i<this._array.length;
            i++){
                if(this._array[i]==oValue){
                    return i
                }
                
            }
            return -1
        }
        
    }
    return this.indexOf(oValue)
};
MobileCommentJindo.$A.prototype.$value=function(){
    return this._array
};
MobileCommentJindo.$A.prototype.push=function(oValue1){
    return this._array.push.apply(this._array,_toArray(arguments))
};
MobileCommentJindo.$A.prototype.pop=function(){
    return this._array.pop()
};
MobileCommentJindo.$A.prototype.shift=function(){
    return this._array.shift()
};
MobileCommentJindo.$A.prototype.unshift=function(oValue1){
    this._array.unshift.apply(this._array,_toArray(arguments));
    return this._array.length
};
MobileCommentJindo.$A.prototype.forEach=function(fCallback,oThis){
    function forEachBody(fpEach){
        return function(fCallback,oThis){
            var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,MobileCommentJindo.$A.checkVarTypeObj,"$A#forEach");
            var that=this;
            function f(v,i,a){
                try{
                    fCallback.apply(oThis,_slice.call(arguments))
                }
                catch(e){
                    if(!(e instanceof that.constructor.Continue)){
                        throw e
                    }
                    
                }
                
            }
            fpEach(this,f);
            return this
        }
        
    }
    if(this._array.forEach){
        MobileCommentJindo.$A.prototype.forEach=forEachBody(function(scope,fp){
            try{
                scope._array.forEach(fp)
            }
            catch(e){
                if(!(e instanceof scope.constructor.Break)){
                    throw e
                }
                
            }
            
        })
    }
    else{
        MobileCommentJindo.$A.prototype.forEach=forEachBody(function(scope,fp){
            var arr=scope._array;
            for(var i=0,l=arr.length;
            i<l;
            i++){
                try{
                    fp(arr[i],i,arr)
                }
                catch(e){
                    if(e instanceof scope.constructor.Break){
                        break
                    }
                    throw e
                }
                
            }
            
        })
    }
    return this.forEach.apply(this,_slice.call(arguments))
};
MobileCommentJindo.$A.prototype.slice=function(nStart,nEnd){
    var a=this._array.slice.call(this._array,nStart,nEnd);
    return MobileCommentJindo.$A(a)
};
MobileCommentJindo.$A.prototype.splice=function(nIndex,nHowMany){
    var a=this._array.splice.apply(this._array,_toArray(arguments));
    return MobileCommentJindo.$A(a)
};
MobileCommentJindo.$A.prototype.shuffle=function(){
    this._array.sort(function(a,b){
        return Math.random()>Math.random()?1:-1
    });
    return this
};
MobileCommentJindo.$A.prototype.reverse=function(){
    this._array.reverse();
    return this
};
MobileCommentJindo.$A.prototype.empty=function(){
    this._array.length=0;
    return this
};
MobileCommentJindo.$A.Break=MobileCommentJindo.$Jindo.Break;
MobileCommentJindo.$A.Continue=MobileCommentJindo.$Jindo.Continue;
MobileCommentJindo.$A.prototype.map=function(fCallback,oThis){
    function mapBody(fpEach){
        return function(fCallback,oThis){
            var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,MobileCommentJindo.$A.checkVarTypeObj,"$A#map");
            if(oArgs==null){
                return this
            }
            var returnArr=[];
            var that=this;
            function f(v,i,a){
                try{
                    returnArr.push(fCallback.apply(oThis,_toArray(arguments)))
                }
                catch(e){
                    if(e instanceof that.constructor.Continue){
                        returnArr.push(v)
                    }
                    else{
                        throw e
                    }
                    
                }
                
            }
            fpEach(this,f);
            return MobileCommentJindo.$A(returnArr)
        }
        
    }
    if(this._array.map){
        MobileCommentJindo.$A.prototype.map=mapBody(function(scope,fp){
            scope.forEach(fp)
        })
    }
    else{
        MobileCommentJindo.$A.prototype.map=mapBody(function(scope,fp){
            var arr=scope._array;
            for(var i=0,l=scope._array.length;
            i<l;
            i++){
                try{
                    fp(arr[i],i,arr)
                }
                catch(e){
                    if(e instanceof scope.constructor.Break){
                        break
                    }
                    else{
                        throw e
                    }
                    
                }
                
            }
            
        })
    }
    return this.map.apply(this,_toArray(arguments))
};
MobileCommentJindo.$A.prototype.filter=function(fCallback,oThis){
    function filterBody(fpEach){
        return function(fCallback,oThis){
            var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,MobileCommentJindo.$A.checkVarTypeObj,"$A#filter");
            if(oArgs==null){
                return this
            }
            var returnArr=[];
            var that=this;
            function f(v,i,a){
                try{
                    if(fCallback.apply(oThis,_toArray(arguments))){
                        returnArr.push(v)
                    }
                    
                }
                catch(e){
                    if(!(e instanceof that.constructor.Continue)){
                        throw e
                    }
                    
                }
                
            }
            fpEach(this,f);
            return MobileCommentJindo.$A(returnArr)
        }
        
    }
    if(this._array.filter){
        MobileCommentJindo.$A.prototype.filter=filterBody(function(scope,fp){
            try{
                scope.forEach(fp)
            }
            catch(e){
                if(!(e instanceof scope.constructor.Break)){
                    throw e
                }
                
            }
            
        })
    }
    else{
        MobileCommentJindo.$A.prototype.filter=filterBody(function(scope,fp){
            var arr=scope._array;
            for(var i=0,l=scope._array.length;
            i<l;
            i++){
                try{
                    fp(arr[i],i,arr)
                }
                catch(e){
                    if(e instanceof scope.constructor.Break){
                        break
                    }
                    else{
                        throw e
                    }
                    
                }
                
            }
            
        })
    }
    return this.filter.apply(this,_toArray(arguments))
};
MobileCommentJindo.$A.prototype.every=function(fCallback,oThis){
    var ___checkVarType=MobileCommentJindo.$Jindo.checkVarType;
    var ___checkObj=MobileCommentJindo.$A.checkVarTypeObj;
    if(this._array.every){
        MobileCommentJindo.$A.prototype.every=function(fCallback,oThis){
            ___checkVarType(arguments,___checkObj,"$A#every");
            return this._array.every(fCallback,oThis)
        }
        
    }
    else{
        MobileCommentJindo.$A.prototype.every=function(fCallback,oThis){
            ___checkVarType(arguments,___checkObj,"$A#every");
            var result=true;
            var arr=this._array;
            for(var i=0,l=arr.length;
            i<l;
            i++){
                if(fCallback.call(oThis,arr[i],i,arr)===false){
                    result=false;
                    break
                }
                
            }
            return result
        }
        
    }
    return this.every.apply(this,_toArray(arguments))
};
MobileCommentJindo.$A.prototype.some=function(fCallback,oThis){
    var ___checkVarType=MobileCommentJindo.$Jindo.checkVarType;
    var ___checkObj=MobileCommentJindo.$A.checkVarTypeObj;
    if(this._array.some){
        MobileCommentJindo.$A.prototype.some=function(fCallback,oThis){
            ___checkVarType(arguments,___checkObj,"$A#some");
            return this._array.some(fCallback,oThis)
        }
        
    }
    else{
        MobileCommentJindo.$A.prototype.some=function(fCallback,oThis){
            ___checkVarType(arguments,___checkObj,"$A#some");
            var result=false;
            var arr=this._array;
            for(var i=0,l=arr.length;
            i<l;
            i++){
                if(fCallback.call(oThis,arr[i],i,arr)===true){
                    result=true;
                    break
                }
                
            }
            return result
        }
        
    }
    return this.some.apply(this,_toArray(arguments))
};
MobileCommentJindo.$A.prototype.refuse=function(oValue1){
    var a=MobileCommentJindo.$A(_slice.apply(arguments));
    return this.filter(function(v,i){
        return !(a.indexOf(v)>-1)
    })
};
MobileCommentJindo.$A.prototype.unique=function(){
    var a=this._array,b=[],l=a.length;
    var i,j;
    for(i=0;
    i<l;
    i++){
        for(j=0;
        j<b.length;
        j++){
            if(a[i]==b[j]){
                break
            }
            
        }
        if(j>=b.length){
            b[j]=a[i]
        }
        
    }
    this._array=b;
    return this
};
MobileCommentJindo.$Ajax=function(url,option){
    var cl=arguments.callee;
    if(!(this instanceof cl)){
        try{
            MobileCommentJindo.$Jindo._warn(arguments.length,2,"$Ajax");
            return new cl(url,option||{})
        }
        catch(e){
            if(e instanceof TypeError){
                return null
            }
            throw e
        }
        
    }
    var ___ajax=MobileCommentJindo.$Ajax;
    var ___error=MobileCommentJindo.$Error;
    var ___except=MobileCommentJindo.$Except;
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4str":["sURL:String+"],"4obj":["sURL:String+","oOption:Hash+"]
    }
    ,"$Ajax");
    if(oArgs+""=="for_string"){
        oArgs.oOption={}
    }
    function _getXHR(){
        if(window.XMLHttpRequest){
            return new XMLHttpRequest()
        }
        else{
            if(ActiveXObject){
                try{
                    return new ActiveXObject("MSXML2.XMLHTTP")
                }
                catch(e){
                    return new ActiveXObject("Microsoft.XMLHTTP")
                }
                return null
            }
            
        }
        
    }
    var loc=location.toString();
    var domain="";
    try{
        domain=loc.match(/^https?:\/\/([a-z0-9_\-\.]+)/i)[1]
    }
    catch(e){}this._status=0;
    this._url=oArgs.sURL;
    this._headers={};
    this._options={
        type:"xhr",method:"post",proxy:"",timeout:0,onload:function(req){},onerror:null,ontimeout:function(req){},jsonp_charset:"utf-8",callbackid:"",callbackname:"",sendheader:true,async:true,decode:true,postBody:false
    };
    this._options=___ajax._setProperties(oArgs.oOption,this);
    ___ajax._validationOption(this._options,"$Ajax");
    if(___ajax.CONFIG){
        this.option(___ajax.CONFIG)
    }
    var _opt=this._options;
    _opt.type=_opt.type.toLowerCase();
    _opt.method=_opt.method.toLowerCase();
    if(window.__jindo2_callback===undefined){
        window.__jindo2_callback=[]
    }
    var t=this;
    switch(_opt.type){
        case"put":case"delete":case"get":case"post":_opt.method=_opt.type;
        case"xhr":this._request=_getXHR();
        break;
        case"flash":if(!___ajax.SWFRequest){
            throw new ___error("MobileCommentJindo.$Ajax.SWFRequest"+___except.REQUIRE_AJAX,"$Ajax")
        }
        this._request=new ___ajax.SWFRequest(function(name,value){
            return t.option.apply(t,arguments)
        });
        break;
        case"jsonp":if(!___ajax.JSONPRequest){
            throw new ___error("MobileCommentJindo.$Ajax.JSONPRequest"+___except.REQUIRE_AJAX,"$Ajax")
        }
        this._request=new ___ajax.JSONPRequest(function(name,value){
            return t.option.apply(t,arguments)
        });
        break;
        case"iframe":if(!___ajax.FrameRequest){
            throw new ___error("MobileCommentJindo.$Ajax.FrameRequest"+___except.REQUIRE_AJAX,"$Ajax")
        }
        this._request=new ___ajax.FrameRequest(function(name,value){
            return t.option.apply(t,arguments)
        })
    }
    
};
MobileCommentJindo.$Ajax._setProperties=function(option){
    option=option||{};
    var type;
    type=option.type=option.type||"xhr";
    option.onload=option.onload||function(){};
    option.method=option.method||"post";
    if(type!="iframe"){
        option.timeout=option.timeout||0;
        option.ontimeout=option.ontimeout||function(){};
        option.onerror=option.onerror||function(){}
    }
    if(type=="xhr"){
        option.async=option.async===undefined?true:option.async;
        option.postBody=option.postBody===undefined?false:option.postBody;
        option.sendheader=option.sendheader===undefined?true:option.sendheader
    }
    else{
        if(type=="jsonp"){
            option.method="get";
            option.jsonp_charset=option.jsonp_charset||"utf-8";
            option.callbackid=option.callbackid||"";
            option.callbackname=option.callbackname||""
        }
        else{
            if(type=="flash"){
                option.sendheader=option.sendheader===undefined?true:option.sendheader;
                option.decode=option.decode===undefined?true:option.decode
            }
            else{
                if(type=="iframe"){
                    option.proxy=option.proxy||""
                }
                
            }
            
        }
        
    }
    return option
};
MobileCommentJindo.$Ajax._validationOption=function(oOption,sMethod){
    var ___error=MobileCommentJindo.$Error;
    var ___except=MobileCommentJindo.$Except;
    var sType=oOption.type;
    if(sType==="jsonp"){
        if(oOption.method!=="get"){
            throw new ___error(___except.CANNOT_USE_OPTION,sMethod)
        }
        
    }
    else{
        if(sType==="flash"){
            if(!(oOption.method==="get"||oOption.method==="post")){
                throw new ___error(___except.CANNOT_USE_OPTION,sMethod,sMethod)
            }
            
        }
        
    }
    if(oOption.postBody){
        if(!(sType==="xhr"&&(oOption.method!=="get"))){
            throw new ___error(___except.CANNOT_USE_OPTION,sMethod)
        }
        
    }
    var oTypeProperty={
        xhr:"onload|timeout|ontimeout|onerror|async|method|postBody|sendheader|type",jsonp:"onload|timeout|ontimeout|onerror|jsonp_charset|callbackid|callbackname|method|type",flash:"onload|timeout|ontimeout|onerror|sendheader|decode|method|type",iframe:"onload|proxy|method|type"
    };
    var aName=[];
    var i=0;
    for(aName[i++] in oOption){}var sProperty=oTypeProperty[sType];
    for(var i=0,l=aName.length;
    i<l;
    i++){
        if(sProperty.indexOf(aName[i])==-1){
            throw new ___error(___except.CANNOT_USE_OPTION,sMethod)
        }
        
    }
    
};
MobileCommentJindo.$Ajax.prototype._onload=(function(isIE){
    var ___ajax=MobileCommentJindo.$Ajax;
    var ___jindo=MobileCommentJindo.$Jindo;
    if(isIE){
        return function(){
            var bSuccess=this._request.readyState==4&&this._request.status==200;
            var oResult;
            if(this._request.readyState==4){
                try{
                    if(this._request.status!=200&&___jindo.isFunction(this._options.onerror)){
                        if(!this._request.status==0){
                            this._options.onerror(new ___ajax.Response(this._request))
                        }
                        
                    }
                    else{
                        if(!this._is_abort){
                            oResult=this._options.onload(new ___ajax.Response(this._request))
                        }
                        
                    }
                    
                }
                finally{
                    if(___jindo.isFunction(this._oncompleted)){
                        this._oncompleted(bSuccess,oResult)
                    }
                    if(this._options.type=="xhr"){
                        this.abort();
                        try{
                            delete this._request.onload
                        }
                        catch(e){
                            this._request.onload=undefined
                        }
                        
                    }
                    delete this._request.onreadystatechange
                }
                
            }
            
        }
        
    }
    else{
        return function(){
            var bSuccess=this._request.readyState==4&&this._request.status==200;
            var oResult;
            if(this._request.readyState==4){
                try{
                    if(this._request.status!=200&&___jindo.isFunction(this._options.onerror)){
                        this._options.onerror(new ___ajax.Response(this._request))
                    }
                    else{
                        oResult=this._options.onload(new ___ajax.Response(this._request))
                    }
                    
                }
                finally{
                    this._status--;
                    if(___jindo.isFunction(this._oncompleted)){
                        this._oncompleted(bSuccess,oResult)
                    }
                    
                }
                
            }
            
        }
        
    }
    
})(_JINDO_IS_IE);
MobileCommentJindo.$Ajax.prototype.request=function(oData){
    var ___jindo=MobileCommentJindo.$Jindo;
    var oArgs=___jindo.checkVarType(arguments,{
        "4voi":[],"4obj":[___jindo._F("oData:Hash+")],"4str":["sData:String+"]
    }
    ,"$Ajax#request");
    this._status++;
    var t=this;
    var req=this._request;
    var opt=this._options;
    var data,v,a=[],data="";
    var _timer=null;
    var url=this._url;
    this._is_abort=false;
    var sUpType=opt.type.toUpperCase();
    var sUpMethod=opt.method.toUpperCase();
    if(opt.postBody&&sUpType=="XHR"&&sUpMethod!="GET"){
        if(oArgs+""=="4str"){
            data=oArgs.sData
        }
        else{
            if(oArgs+""=="4obj"){
                data=MobileCommentJindo.$Json(oArgs.oData).toString()
            }
            else{
                data=null
            }
            
        }
        
    }
    else{
        switch(oArgs+""){
            case"4voi":data=null;
            break;
            case"4obj":var oData=oArgs.oData;
            for(var k in oData){
                if(oData.hasOwnProperty(k)){
                    v=oData[k];
                    if(___jindo.isFunction(v)){
                        v=v()
                    }
                    if(___jindo.isArray(v)||(MobileCommentJindo.$A&&v instanceof MobileCommentJindo.$A)){
                        if(v instanceof MobileCommentJindo.$A){
                            v=v._array
                        }
                        for(var i=0;
                        i<v.length;
                        i++){
                            a[a.length]=k+"="+encodeURIComponent(v[i])
                        }
                        
                    }
                    else{
                        a[a.length]=k+"="+encodeURIComponent(v)
                    }
                    
                }
                
            }
            data=a.join("&")
        }
        
    }
    if(data&&sUpType=="XHR"&&sUpMethod=="GET"){
        if(url.indexOf("?")==-1){
            url+="?"
        }
        else{
            url+="&"
        }
        url+=data;
        data=null
    }
    if(sUpType=="XHR"&&opt.async){
        req.open(sUpMethod,url,opt.async)
    }
    else{
        if(sUpType=="XHR"){
            req.open(sUpMethod,url,false)
        }
        else{
            req.open(sUpMethod,url)
        }
        
    }
    if(sUpType=="XHR"&&sUpMethod=="GET"&&_JINDO_IS_IE){
        req.setRequestHeader("If-Modified-Since","Thu, 1 Jan 1970 00:00:00 GMT")
    }
    if(opt.sendheader){
        if(!this._headers["Content-Type"]){
            req.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8")
        }
        req.setRequestHeader("charset","utf-8");
        for(var x in this._headers){
            if(this._headers.hasOwnProperty(x)){
                if(typeof this._headers[x]=="function"){
                    continue
                }
                req.setRequestHeader(x,String(this._headers[x]))
            }
            
        }
        
    }
    if(req.addEventListener&&!_JINDO_IS_OP&&!_JINDO_IS_IE){
        if(this._loadFunc){
            req.removeEventListener("load",this._loadFunc,false)
        }
        this._loadFunc=function(rq){
            clearTimeout(_timer);
            _timer=undefined;
            t._onload(rq)
        };
        req.addEventListener("load",this._loadFunc,false)
    }
    else{
        if(req.onload!==undefined){
            req.onload=function(rq){
                if(req.readyState==4&&!t._is_abort){
                    clearTimeout(_timer);
                    _timer=undefined;
                    t._onload(rq)
                }
                
            }
            
        }
        else{
            if(_j_ag.match(/(?:MSIE) ([0-9.]+)/)[1]==6&&opt.async){
                var onreadystatechange=function(rq){
                    if(req.readyState==4&&!t._is_abort){
                        if(_timer){
                            clearTimeout(_timer);
                            _timer=undefined
                        }
                        t._onload(rq);
                        clearInterval(t._interval);
                        t._interval=undefined
                    }
                    
                };
                this._interval=setInterval(onreadystatechange,300)
            }
            else{
                req.onreadystatechange=function(rq){
                    if(req.readyState==4){
                        clearTimeout(_timer);
                        _timer=undefined;
                        t._onload(rq)
                    }
                    
                }
                
            }
            
        }
        
    }
    if(opt.timeout>0){
        if(this._timer){
            clearTimeout(this._timer)
        }
        _timer=setTimeout(function(){
            t._is_abort=true;
            if(t._interval){
                clearInterval(t._interval);
                t._interval=undefined
            }
            try{
                req.abort()
            }
            catch(e){}opt.ontimeout(req);
            if(___jindo.isFunction(t._oncompleted)){
                t._oncompleted(false)
            }
            
        }
        ,opt.timeout*1000);
        this._timer=_timer
    }
    this._test_url=url;
    req.send(data);
    return this
};
MobileCommentJindo.$Ajax.prototype.isIdle=function(){
    return this._status==0
};
MobileCommentJindo.$Ajax.prototype.abort=function(){
    try{
        if(this._interval){
            clearInterval(this._interval)
        }
        if(this._timer){
            clearTimeout(this._timer)
        }
        this._interval=undefined;
        this._timer=undefined;
        this._is_abort=true;
        this._request.abort()
    }
    finally{
        this._status--
    }
    return this
};
MobileCommentJindo.$Ajax.prototype.url=function(sURL){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        g:[],s:["sURL:String+"]
    }
    ,"$Ajax#url");
    switch(oArgs+""){
        case"g":return this._url;
        case"s":this._url=oArgs.sURL;
        return this
    }
    
};
MobileCommentJindo.$Ajax.prototype.option=function(name,value){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        s4var:["sKey:String+","vValue:Variant"],s4obj:["oOption:Hash+"],g:["sKey:String+"]
    }
    ,"$Ajax#option");
    switch(oArgs+""){
        case"s4var":this._options[oArgs.sKey]=oArgs.vValue;
        break;
        case"s4obj":var oOption=oArgs.oOption;
        try{
            for(var x in oOption){
                if(oOption.hasOwnProperty(x)){
                    this._options[x]=oOption[x]
                }
                
            }
            
        }
        catch(e){}break;
        case"g":return this._options[oArgs.sKey]
    }
    MobileCommentJindo.$Ajax._validationOption(this._options,"$Ajax#option");
    return this
};
MobileCommentJindo.$Ajax.prototype.header=function(name,value){
    if(this._options.type==="jsonp"){
        throw new MobileCommentJindo.$Error(MobileCommentJindo.$Except.CANNOT_USE_OPTION,"$Ajax#header")
    }
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        s4str:["sKey:String+","sValue:String+"],s4obj:["oOption:Hash+"],g:["sKey:String+"]
    }
    ,"$Ajax#option");
    switch(oArgs+""){
        case"s4str":this._headers[oArgs.sKey]=oArgs.sValue;
        break;
        case"s4obj":var oOption=oArgs.oOption;
        try{
            for(var x in oOption){
                if(oOption.hasOwnProperty(x)){
                    this._headers[x]=oOption[x]
                }
                
            }
            
        }
        catch(e){}break;
        case"g":return this._headers[oArgs.sKey]
    }
    return this
};
MobileCommentJindo.$Ajax.Response=function(req){
    this._response=req;
    this._regSheild=/^for\(;;\);/
};
MobileCommentJindo.$Ajax.Response.prototype.xml=function(){
    return this._response.responseXML
};
MobileCommentJindo.$Ajax.Response.prototype.text=function(){
    return this._response.responseText.replace(this._regSheild,"")
};
MobileCommentJindo.$Ajax.Response.prototype.status=function(){
    return this._response.status
};
MobileCommentJindo.$Ajax.Response.prototype.readyState=function(){
    return this._response.readyState
};
MobileCommentJindo.$Ajax.Response.prototype.json=function(){
    if(this._response.responseJSON){
        return this._response.responseJSON
    }
    else{
        if(this._response.responseText){
            try{
                return eval("("+this.text()+")")
            }
            catch(e){
                throw new MobileCommentJindo.$Error(MobileCommentJindo.$Except.PARSE_ERROR,"$Ajax#json")
            }
            
        }
        
    }
    return{}
};
MobileCommentJindo.$Ajax.Response.prototype.header=function(name){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4str":["name:String+"],"4voi":[]
    }
    ,"$Ajax.Response#header");
    switch(oArgs+""){
        case"4str":return this._response.getResponseHeader(name);
        case"4voi":return this._response.getAllResponseHeaders()
    }
    
};
MobileCommentJindo.$Ajax.RequestBase=MobileCommentJindo.$Class({
    _respHeaderString:"",callbackid:"",callbackname:"",responseXML:null,responseJSON:null,responseText:"",status:404,readyState:0,$init:function(fpOption){},onload:function(){},abort:function(){},open:function(){},send:function(){},setRequestHeader:function(sName,sValue){
        MobileCommentJindo.$Jindo.checkVarType(arguments,{
            "4str":["sName:String+","sValue:String+"]
        }
        ,"$Ajax.RequestBase#setRequestHeader");
        this._headers[sName]=sValue
    }
    ,getResponseHeader:function(sName){
        MobileCommentJindo.$Jindo.checkVarType(arguments,{
            "4str":["sName:String+"]
        }
        ,"$Ajax.RequestBase#getResponseHeader");
        return this._respHeaders[sName]||""
    }
    ,getAllResponseHeaders:function(){
        return this._respHeaderString
    }
    ,_getCallbackInfo:function(){
        var id="";
        if(this.option("callbackid")!=""){
            var idx=0;
            do{
                id="_"+this.option("callbackid")+"_"+idx;
                idx++
            }
            while(window.__jindo2_callback[id])
        }
        else{
            do{
                id="_"+Math.floor(Math.random()*10000)
            }
            while(window.__jindo2_callback[id])
        }
        if(this.option("callbackname")==""){
            this.option("callbackname","_callback")
        }
        return{
            callbackname:this.option("callbackname"),id:id,name:"window.__jindo2_callback."+id
        }
        
    }
    
});
MobileCommentJindo.$Ajax.JSONPRequest=MobileCommentJindo.$Class({
    _headers:{},_respHeaders:{},_script:null,_onerror:null,$init:function(fpOption){
        this.option=fpOption
    }
    ,_callback:function(data){
        if(this._onerror){
            clearTimeout(this._onerror);
            this._onerror=null
        }
        var self=this;
        this.responseJSON=data;
        this.onload(this);
        setTimeout(function(){
            self.abort()
        }
        ,10)
    }
    ,abort:function(){
        if(this._script){
            try{
                this._script.parentNode.removeChild(this._script)
            }
            catch(e){}
        }
        
    }
    ,open:function(method,url){
        MobileCommentJindo.$Jindo.checkVarType(arguments,{
            "4str":["method:String+","url:String+"]
        }
        ,"$Ajax.JSONPRequest#open");
        this.responseJSON=null;
        this._url=url
    }
    ,send:function(data){
        var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
            "4voi":[],"4nul":["data:Null"],"4str":["data:String+"]
        }
        ,"$Ajax.JSONPRequest#send");
        var t=this;
        var info=this._getCallbackInfo();
        var head=document.getElementsByTagName("head")[0];
        this._script=document.createElement("script");
        this._script.type="text/javascript";
        this._script.charset=this.option("jsonp_charset");
        if(head){
            head.appendChild(this._script)
        }
        else{
            if(document.body){
                document.body.appendChild(this._script)
            }
            
        }
        window.__jindo2_callback[info.id]=function(data){
            try{
                t.readyState=4;
                t.status=200;
                t._callback(data)
            }
            finally{
                delete window.__jindo2_callback[info.id]
            }
            
        };
        var agent=MobileCommentJindo.$Agent(navigator);
        var _loadCallback=function(){
            if(!t.responseJSON){
                t.readyState=4;
                t.status=404;
                t._onerror=setTimeout(function(){
                    t._callback(null)
                }
                ,200)
            }
            
        };
        if(agent.navigator().ie||agent.navigator().opera){
            this._script.onreadystatechange=function(){
                if(this.readyState=="loaded"){
                    _loadCallback();
                    this.onreadystatechange=null
                }
                
            }
            
        }
        else{
            this._script.onload=this._script.onerror=function(){
                _loadCallback();
                this.onerror=null;
                this.onload=null
            }
            
        }
        var delimiter="&";
        if(this._url.indexOf("?")==-1){
            delimiter="?"
        }
        switch(oArgs+""){
            case"4voi":case"4nul":data="";
            break;
            case"4str":data="&"+data
        }
        this._test_url=this._script.src=this._url+delimiter+info.callbackname+"="+info.name+data
    }
    
}).extend(MobileCommentJindo.$Ajax.RequestBase);
MobileCommentJindo.$Ajax.SWFRequest=MobileCommentJindo.$Class({
    $init:function(fpOption){
        this.option=fpOption
    }
    ,_headers:{},_respHeaders:{},_getFlashObj:function(){
        var _tmpId=MobileCommentJindo.$Ajax.SWFRequest._tmpId;
        var navi=MobileCommentJindo.$Agent(window.navigator).navigator();
        var obj;
        if(navi.ie&&navi.version==9){
            obj=document.getElementById(_tmpId)
        }
        else{
            obj=window.document[_tmpId]
        }
        return(this._getFlashObj=function(){
            return obj
        })()
    }
    ,_callback:function(status,data,headers){
        this.readyState=4;
        if(MobileCommentJindo.$Jindo.isNumeric(status)){
            this.status=status
        }
        else{
            if(status==true){
                this.status=200
            }
            
        }
        if(this.status==200){
            if(MobileCommentJindo.$Jindo.isString(data)){
                try{
                    this.responseText=this.option("decode")?decodeURIComponent(data):data;
                    if(!this.responseText||this.responseText==""){
                        this.responseText=data
                    }
                    
                }
                catch(e){
                    if(e.name=="URIError"){
                        this.responseText=data;
                        if(!this.responseText||this.responseText==""){
                            this.responseText=data
                        }
                        
                    }
                    
                }
                
            }
            if(MobileCommentJindo.$Jindo.isHash(headers)){
                this._respHeaders=headers
            }
            
        }
        this.onload(this)
    }
    ,open:function(method,url){
        MobileCommentJindo.$Jindo.checkVarType(arguments,{
            "4str":["method:String+","url:String+"]
        }
        ,"$Ajax.SWFRequest#open");
        var re=/https?:\/\/([a-z0-9_\-\.]+)/i;
        this._url=url;
        this._method=method
    }
    ,send:function(data){
        var _jjindo=MobileCommentJindo.$Jindo;
        var oArgs=_jjindo.checkVarType(arguments,{
            "4voi":[],"4nul":["data:Null"],"4str":["data:String+"]
        }
        ,"$Ajax.SWFRequest#send");
        this.responseXML=false;
        this.responseText="";
        var t=this;
        var dat={};
        var info=this._getCallbackInfo();
        var swf=this._getFlashObj();
        function f(arg){
            switch(typeof arg){
                case"string":return'"'+arg.replace(/\"/g,'\\"')+'"';
                case"number":return arg;
                case"object":var ret="",arr=[];
                if(_jjindo.isArray(arg)){
                    for(var i=0;
                    i<arg.length;
                    i++){
                        arr[i]=f(arg[i])
                    }
                    ret="["+arr.join(",")+"]"
                }
                else{
                    for(var x in arg){
                        if(arg.hasOwnProperty(x)){
                            arr[arr.length]=f(x)+":"+f(arg[x])
                        }
                        
                    }
                    ret="{"+arr.join(",")+"}"
                }
                return ret;
                default:return'""'
            }
            
        }
        data=(data||"").split("&");
        var oEach;
        for(var i=0;
        i<data.length;
        i++){
            oEach=data[i];
            pos=oEach.indexOf("=");
            key=oEach.substring(0,pos);
            val=oEach.substring(pos+1);
            dat[key]=decodeURIComponent(val)
        }
        this._current_callback_id=info.id;
        window.__jindo2_callback[info.id]=function(success,data){
            try{
                t._callback(success,data)
            }
            finally{
                delete window.__jindo2_callback[info.id]
            }
            
        };
        var oData={
            url:this._url,type:this._method,data:dat,charset:"UTF-8",callback:info.name,header_json:this._headers
        };
        swf.requestViaFlash(f(oData))
    }
    ,abort:function(){
        if(this._current_callback_id){
            window.__jindo2_callback[this._current_callback_id]=function(){
                delete window.__jindo2_callback[info.id]
            }
            
        }
        
    }
    
}).extend(MobileCommentJindo.$Ajax.RequestBase);
MobileCommentJindo.$Ajax.SWFRequest.write=function(swf_path){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4voi":[],"4str":["data:String+"]
    }
    ,"<static> $Ajax.SWFRequest#write");
    switch(oArgs+""){
        case"4voi":swf_path="./ajax.swf"
    }
    var ajax=MobileCommentJindo.$Ajax;
    ajax.SWFRequest._tmpId="tmpSwf"+(new Date()).getMilliseconds()+Math.floor(Math.random()*100000);
    var activeCallback="MobileCommentJindo.$Ajax.SWFRequest.loaded";
    var protocol=(location.protocol=="https:")?"https:":"http:";
    ajax._checkFlashLoad();
    document.write('<div style="position:absolute;top:-1000px;left:-1000px"><object id="'+ajax.SWFRequest._tmpId+'" width="1" height="1" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="'+protocol+'//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0"><param name="movie" value="'+swf_path+'"><param name = "FlashVars" value = "activeCallback='+activeCallback+'" /><param name = "allowScriptAccess" value = "always" /><embed name="'+ajax.SWFRequest._tmpId+'" src="'+swf_path+'" type="application/x-shockwave-flash" pluginspage="'+protocol+'://www.macromedia.com/go/getflashplayer" width="1" height="1" allowScriptAccess="always" swLiveConnect="true" FlashVars="activeCallback='+activeCallback+'"></embed></object></div>')
};
MobileCommentJindo.$Ajax._checkFlashLoad=function(){
    MobileCommentJindo.$Ajax._checkFlashKey=setTimeout(function(){
        MobileCommentJindo.$Ajax.SWFRequest.onerror()
    }
    ,5000);
    MobileCommentJindo.$Ajax._checkFlashLoad=function(){}
};
MobileCommentJindo.$Ajax.SWFRequest.activeFlash=false;
MobileCommentJindo.$Ajax.SWFRequest.onload=function(){};
MobileCommentJindo.$Ajax.SWFRequest.onerror=function(){};
MobileCommentJindo.$Ajax.SWFRequest.loaded=function(){
    clearTimeout(MobileCommentJindo.$Ajax._checkFlashKey);
    MobileCommentJindo.$Ajax.SWFRequest.activeFlash=true;
    MobileCommentJindo.$Ajax.SWFRequest.onload()
};
MobileCommentJindo.$Ajax.FrameRequest=MobileCommentJindo.$Class({
    _headers:{},_respHeaders:{},_frame:null,_domain:"",$init:function(fpOption){
        this.option=fpOption
    }
    ,_callback:function(id,data,header){
        var self=this;
        this.readyState=4;
        this.status=200;
        this.responseText=data;
        this._respHeaderString=header;
        header.replace(/^([\w\-]+)\s*:\s*(.+)$/m,function($0,$1,$2){
            self._respHeaders[$1]=$2
        });
        this.onload(this);
        setTimeout(function(){
            self.abort()
        }
        ,10)
    }
    ,abort:function(){
        if(this._frame){
            try{
                this._frame.parentNode.removeChild(this._frame)
            }
            catch(e){}
        }
        
    }
    ,open:function(method,url){
        MobileCommentJindo.$Jindo.checkVarType(arguments,{
            "4str":["method:String+","url:String+"]
        }
        ,"$Ajax.FrameRequest#open");
        var re=/https?:\/\/([a-z0-9_\-\.]+)/i;
        var dom=document.location.toString().match(re);
        this._method=method;
        this._url=url;
        this._remote=String(url).match(/(https?:\/\/[a-z0-9_\-\.]+)(:[0-9]+)?/i)[0];
        this._frame=null;
        this._domain=(dom[1]!=document.domain)?document.domain:""
    }
    ,send:function(data){
        var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
            "4voi":[],"4nul":["data:Null"],"4str":["data:String+"]
        }
        ,"$Ajax.FrameRequest#send");
        this.responseXML="";
        this.responseText="";
        var t=this;
        var re=/https?:\/\/([a-z0-9_\-\.]+)/i;
        var info=this._getCallbackInfo();
        var url;
        var _aStr=[];
        _aStr.push(this._remote+"/ajax_remote_callback.html?method="+this._method);
        var header=[];
        window.__jindo2_callback[info.id]=function(id,data,header){
            try{
                t._callback(id,data,header)
            }
            finally{
                delete window.__jindo2_callback[info.id]
            }
            
        };
        for(var x in this._headers){
            if(this._headers.hasOwnProperty(x)){
                header[header.length]="'"+x+"':'"+this._headers[x]+"'"
            }
            
        }
        header="{"+header.join(",")+"}";
        _aStr.push("&id="+info.id);
        _aStr.push("&header="+encodeURIComponent(header));
        _aStr.push("&proxy="+encodeURIComponent(this.option("proxy")));
        _aStr.push("&domain="+this._domain);
        _aStr.push("&url="+encodeURIComponent(this._url.replace(re,"")));
        _aStr.push("#"+encodeURIComponent(data));
        var fr=this._frame=document.createElement("iframe");
        var style=fr.style;
        style.position="absolute";
        style.visibility="hidden";
        style.width="1px";
        style.height="1px";
        var body=document.body||document.documentElement;
        if(body.firstChild){
            body.insertBefore(fr,body.firstChild)
        }
        else{
            body.appendChild(fr)
        }
        fr.src=_aStr.join("")
    }
    
}).extend(MobileCommentJindo.$Ajax.RequestBase);
MobileCommentJindo.$Ajax.Queue=function(option){
    var cl=arguments.callee;
    if(!(this instanceof cl)){
        return new cl(option||{})
    }
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4voi":[],"4obj":["option:Hash+"]
    }
    ,"$Ajax.Queue");
    option=oArgs.option;
    this._options={
        async:false,useResultAsParam:false,stopOnFailure:false
    };
    this.option(option);
    this._queue=[]
};
MobileCommentJindo.$Ajax.Queue.prototype.option=function(name,value){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        s4str:["sKey:String+","sValue:Variant"],s4obj:["oOption:Hash+"],g:["sKey:String+"]
    }
    ,"$Ajax.Queue#option");
    switch(oArgs+""){
        case"s4str":this._options[oArgs.sKey]=oArgs.sValue;
        break;
        case"s4obj":var oOption=oArgs.oOption;
        try{
            for(var x in oOption){
                if(oOption.hasOwnProperty(x)){
                    this._options[x]=oOption[x]
                }
                
            }
            
        }
        catch(e){}break;
        case"g":return this._options[oArgs.sKey]
    }
    return this
};
MobileCommentJindo.$Ajax.Queue.prototype.add=function(oAjax,oParam){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4obj":["oAjax:Hash+"],"4obj2":["oAjax:Hash+","oPram:Hash+"]
    }
    ,"$Ajax.Queue");
    switch(oArgs+""){
        case"4obj2":oParam=oArgs.oPram
    }
    this._queue.push({
        obj:oAjax,param:oParam
    });
    return this
};
MobileCommentJindo.$Ajax.Queue.prototype.request=function(){
    this._requestAsync.apply(this,this.option("async")?[]:[0]);
    return this
};
MobileCommentJindo.$Ajax.Queue.prototype._requestSync=function(nIdx,oParam){
    var t=this;
    var queue=this._queue;
    if(queue.length>nIdx+1){
        queue[nIdx].obj._oncompleted=function(bSuccess,oResult){
            if(!t.option("stopOnFailure")||bSuccess){
                t._requestSync(nIdx+1,oResult)
            }
            
        }
        
    }
    var _oParam=queue[nIdx].param||{};
    if(this.option("useResultAsParam")&&oParam){
        try{
            for(var x in oParam){
                if(_oParam[x]===undefined&&oParam.hasOwnProperty(x)){
                    _oParam[x]=oParam[x]
                }
                
            }
            
        }
        catch(e){}
    }
    queue[nIdx].obj.request(_oParam)
};
MobileCommentJindo.$Ajax.Queue.prototype._requestAsync=function(){
    for(var i=0;
    i<this._queue.length;
    i++){
        this._queue[i].obj.request(this._queue[i].param||{})
    }
    
};
MobileCommentJindo.$H=function(hashObject){
    var cl=arguments.callee;
    if(hashObject instanceof cl){
        return hashObject
    }
    if(!(this instanceof cl)){
        try{
            MobileCommentJindo.$Jindo._warn(arguments.length,1,"$H");
            return new cl(hashObject||{})
        }
        catch(e){
            if(e instanceof TypeError){
                return null
            }
            throw e
        }
        
    }
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4obj":["oObj:Hash+"],"4vod":[]
    }
    ,"$H");
    this._table={};
    for(var k in hashObject){
        if(hashObject.hasOwnProperty(k)){
            this._table[k]=hashObject[k]
        }
        
    }
    
};
MobileCommentJindo.$H.prototype.$value=function(){
    return this._table
};
MobileCommentJindo.$H.prototype.$=function(key,value){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        s4var:[MobileCommentJindo.$Jindo._F("key:String+"),"value:Variant"],s4var2:["key:Numeric","value:Variant"],g4str:["key:String+"],s4obj:["oObj:Hash+"],g4num:["key:Numeric"]
    }
    ,"$H#$");
    switch(oArgs+""){
        case"s4var":case"s4var2":this._table[key]=value;
        return this;
        case"s4obj":var obj=oArgs.oObj;
        for(var i in obj){
            this._table[i]=obj[i]
        }
        return this;
        default:return this._table[key]
    }
    
};
MobileCommentJindo.$H.prototype.length=function(){
    var i=0;
    for(var k in this._table){
        if(this._table.hasOwnProperty(k)){
            if(Object.prototype[k]!==undefined&&Object.prototype[k]===this._table[k]){
                continue
            }
            i++
        }
        
    }
    return i
};
MobileCommentJindo.$H.prototype.forEach=function(callback,thisObject){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4fun":["callback:Function+"],"4obj":["callback:Function+","thisObject:Variant"]
    }
    ,"$H#forEach");
    var t=this._table;
    var h=this.constructor;
    for(var k in t){
        if(t.hasOwnProperty(k)){
            if(!t.propertyIsEnumerable(k)){
                continue
            }
            try{
                callback.call(thisObject,t[k],k,t)
            }
            catch(e){
                if(e instanceof h.Break){
                    break
                }
                if(e instanceof h.Continue){
                    continue
                }
                throw e
            }
            
        }
        
    }
    return this
};
MobileCommentJindo.$H.prototype.filter=function(callback,thisObject){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4fun":["callback:Function+"],"4obj":["callback:Function+","thisObject:Variant"]
    }
    ,"$H#filter");
    var h=MobileCommentJindo.$H();
    var t=this._table;
    var hCon=this.constructor;
    for(var k in t){
        if(t.hasOwnProperty(k)){
            if(!t.propertyIsEnumerable(k)){
                continue
            }
            try{
                if(callback.call(thisObject,t[k],k,t)){
                    h.add(k,t[k])
                }
                
            }
            catch(e){
                if(e instanceof hCon.Break){
                    break
                }
                if(e instanceof hCon.Continue){
                    continue
                }
                throw e
            }
            
        }
        
    }
    return h
};
MobileCommentJindo.$H.prototype.map=function(callback,thisObject){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4fun":["callback:Function+"],"4obj":["callback:Function+","thisObject:Variant"]
    }
    ,"$H#map");
    var h=MobileCommentJindo.$H();
    var t=this._table;
    var hCon=this.constructor;
    for(var k in t){
        if(t.hasOwnProperty(k)){
            if(!t.propertyIsEnumerable(k)){
                continue
            }
            try{
                h.add(k,callback.call(thisObject,t[k],k,t))
            }
            catch(e){
                if(e instanceof hCon.Break){
                    break
                }
                if(e instanceof hCon.Continue){
                    h.add(k,t[k])
                }
                else{
                    throw e
                }
                
            }
            
        }
        
    }
    return h
};
MobileCommentJindo.$H.prototype.add=function(key,value){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4str":["key:String+","value:Variant"],"4num":["key:Numeric","value:Variant"]
    }
    ,"$H#add");
    this._table[key]=value;
    return this
};
MobileCommentJindo.$H.prototype.remove=function(key){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4str":["key:String+"],"4num":["key:Numeric"]
    }
    ,"$H#remove");
    if(this._table[key]===undefined){
        return null
    }
    var val=this._table[key];
    delete this._table[key];
    return val
};
MobileCommentJindo.$H.prototype.search=function(value){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4str":["value:Variant"]
    }
    ,"$H#search");
    var result=false;
    var t=this._table;
    for(var k in t){
        if(t.hasOwnProperty(k)){
            if(!t.propertyIsEnumerable(k)){
                continue
            }
            var v=t[k];
            if(v===value){
                result=k;
                break
            }
            
        }
        
    }
    return result
};
MobileCommentJindo.$H.prototype.hasKey=function(key){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4str":["key:String+"],"4num":["key:Numeric"]
    }
    ,"$H#hasKey");
    return this._table[key]!==undefined
};
MobileCommentJindo.$H.prototype.hasValue=function(value){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4str":["value:Variant"]
    }
    ,"$H#hasValue");
    return(this.search(value)!==false)
};
MobileCommentJindo.$H.prototype.sort=function(){
    var o=new Object;
    var a=[];
    for(var k in this._table){
        if(this._table.hasOwnProperty(k)){
            a[a.length]=this._table[k]
        }
        
    }
    var k=false;
    a.sort();
    for(var i=0;
    i<a.length;
    i++){
        k=this.search(a[i]);
        o[k]=a[i];
        delete this._table[k]
    }
    this._table=o;
    return this
};
MobileCommentJindo.$H.prototype.ksort=function(){
    var o=new Object;
    var a=this.keys();
    a.sort();
    for(var i=0;
    i<a.length;
    i++){
        o[a[i]]=this._table[a[i]]
    }
    this._table=o;
    return this
};
MobileCommentJindo.$H.prototype.keys=function(){
    var keys=new Array;
    for(var k in this._table){
        if(this._table.hasOwnProperty(k)){
            keys.push(k)
        }
        
    }
    return keys
};
MobileCommentJindo.$H.prototype.values=function(){
    var values=[];
    for(var k in this._table){
        if(this._table.hasOwnProperty(k)){
            values[values.length]=this._table[k]
        }
        
    }
    return values
};
MobileCommentJindo.$H.prototype.toQueryString=function(){
    var buf=[],val=null,idx=0;
    for(var k in this._table){
        if(this._table.hasOwnProperty(k)){
            val=this._table[k];
            if(MobileCommentJindo.$Jindo.isArray(val)){
                for(i=0;
                i<val.length;
                i++){
                    buf[buf.length]=encodeURIComponent(k)+"[]="+encodeURIComponent(val[i]+"")
                }
                
            }
            else{
                buf[buf.length]=encodeURIComponent(k)+"="+encodeURIComponent(this._table[k]+"")
            }
            
        }
        
    }
    return buf.join("&")
};
MobileCommentJindo.$H.prototype.empty=function(){
    this._table={};
    return this
};
MobileCommentJindo.$H.Break=MobileCommentJindo.$Jindo.Break;
MobileCommentJindo.$H.Continue=MobileCommentJindo.$Jindo.Continue;
MobileCommentJindo.$Json=function(sObject){
    var cl=arguments.callee;
    if(sObject instanceof cl){
        return sObject
    }
    if(!(this instanceof cl)){
        try{
            MobileCommentJindo.$Jindo._warn(arguments.length,1,"$Json");
            return new cl(arguments.length?sObject:{})
        }
        catch(e){
            if(e instanceof TypeError){
                return null
            }
            throw e
        }
        
    }
    MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4var":["oObject:Variant"]
    }
    ,"$Json");
    this._object=sObject
};
MobileCommentJindo.$Json._oldMakeJSON=function(sObject,sType){
    try{
        if(MobileCommentJindo.$Jindo.isString(sObject)&&/^(?:\s*)[\{\[]/.test(sObject)){
            sObject=eval("("+sObject+")")
        }
        else{
            return sObject
        }
        
    }
    catch(e){
        throw new MobileCommentJindo.$Error(MobileCommentJindo.$Except.PARSE_ERROR,sType)
    }
    return sObject
};
MobileCommentJindo.$Json.fromXML=function(sXML){
    var ___jindo=MobileCommentJindo.$Jindo;
    var oArgs=___jindo.checkVarType(arguments,{
        "4str":["sXML:String+"]
    }
    ,"<static> $Json#fromXML");
    var o={};
    var re=/\s*<(\/?[\w:\-]+)((?:\s+[\w:\-]+\s*=\s*(?:"(?:\\"|[^"])*"|'(?:\\'|[^'])*'))*)\s*((?:\/>)|(?:><\/\1>|\s*))|\s*<!\[CDATA\[([\w\W]*?)\]\]>\s*|\s*>?([^<]*)/ig;
    var re2=/^[0-9]+(?:\.[0-9]+)?$/;
    var ec={
        "&amp;":"&","&nbsp;":" ","&quot;":'"',"&lt;":"<","&gt;":">"
    };
    var fg={
        tags:["/"],stack:[o]
    };
    var es=function(s){
        if(___jindo.isUndefined(s)){
            return""
        }
        return s.replace(/&[a-z]+;/g,function(m){
            return(___jindo.isString(ec[m]))?ec[m]:m
        })
    };
    var at=function(s,c){
        s.replace(/([\w\:\-]+)\s*=\s*(?:"((?:\\"|[^"])*)"|'((?:\\'|[^'])*)')/g,function($0,$1,$2,$3){
            c[$1]=es(($2?$2.replace(/\\"/g,'"'):undefined)||($3?$3.replace(/\\'/g,"'"):undefined))
        })
    };
    var em=function(o){
        for(var x in o){
            if(o.hasOwnProperty(x)){
                if(Object.prototype[x]){
                    continue
                }
                return false
            }
            
        }
        return true
    };
    var cb=function($0,$1,$2,$3,$4,$5){
        var cur,cdata="";
        var idx=fg.stack.length-1;
        if(___jindo.isString($1)&&$1){
            if($1.substr(0,1)!="/"){
                var has_attr=(typeof $2=="string"&&$2);
                var closed=(typeof $3=="string"&&$3);
                var newobj=(!has_attr&&closed)?"":{};
                cur=fg.stack[idx];
                if(___jindo.isUndefined(cur[$1])){
                    cur[$1]=newobj;
                    cur=fg.stack[idx+1]=cur[$1]
                }
                else{
                    if(cur[$1] instanceof Array){
                        var len=cur[$1].length;
                        cur[$1][len]=newobj;
                        cur=fg.stack[idx+1]=cur[$1][len]
                    }
                    else{
                        cur[$1]=[cur[$1],newobj];
                        cur=fg.stack[idx+1]=cur[$1][1]
                    }
                    
                }
                if(has_attr){
                    at($2,cur)
                }
                fg.tags[idx+1]=$1;
                if(closed){
                    fg.tags.length--;
                    fg.stack.length--
                }
                
            }
            else{
                fg.tags.length--;
                fg.stack.length--
            }
            
        }
        else{
            if(___jindo.isString($4)&&$4){
                cdata=$4
            }
            else{
                if(___jindo.isString($5)&&$5){
                    cdata=es($5)
                }
                
            }
            
        }
        if(cdata.replace(/^\s+/g,"").length>0){
            var par=fg.stack[idx-1];
            var tag=fg.tags[idx];
            if(re2.test(cdata)){
                cdata=parseFloat(cdata,10)
            }
            else{
                if(cdata=="true"){
                    cdata=true
                }
                else{
                    if(cdata=="false"){
                        cdata=false
                    }
                    
                }
                
            }
            if(___jindo.isUndefined(par)){
                return
            }
            if(par[tag] instanceof Array){
                var o=par[tag];
                if(___jindo.isHash(o[o.length-1])&&!em(o[o.length-1])){
                    o[o.length-1].$cdata=cdata;
                    o[o.length-1].toString=function(){
                        return cdata
                    }
                    
                }
                else{
                    o[o.length-1]=cdata
                }
                
            }
            else{
                if(___jindo.isHash(par[tag])&&!em(par[tag])){
                    par[tag].$cdata=cdata;
                    par[tag].toString=function(){
                        return cdata
                    }
                    
                }
                else{
                    par[tag]=cdata
                }
                
            }
            
        }
        
    };
    sXML=sXML.replace(/<(\?|\!-)[^>]*>/g,"");
    sXML.replace(re,cb);
    return MobileCommentJindo.$Json(o)
};
MobileCommentJindo.$Json.prototype.get=function(sPath){
    var ___jindo=MobileCommentJindo.$Jindo;
    var oArgs=___jindo.checkVarType(arguments,{
        "4str":["sPath:String+"]
    }
    ,"$Json#get");
    var o=MobileCommentJindo.$Json._oldMakeJSON(this._object,"$Json#get");
    if(!(___jindo.isHash(o)||___jindo.isArray(o))){
        throw new MobileCommentJindo.$Error(MobileCommentJindo.$Except.JSON_MUST_HAVE_ARRAY_HASH,"$Json#get")
    }
    var p=sPath.split("/");
    var re=/^([\w:\-]+)\[([0-9]+)\]$/;
    var stack=[[o]],cur=stack[0];
    var len=p.length,c_len,idx,buf,j,e;
    for(var i=0;
    i<len;
    i++){
        if(p[i]=="."||p[i]==""){
            continue
        }
        if(p[i]==".."){
            stack.length--
        }
        else{
            buf=[];
            idx=-1;
            c_len=cur.length;
            if(c_len==0){
                return[]
            }
            if(re.test(p[i])){
                idx=+RegExp.$2
            }
            for(j=0;
            j<c_len;
            j++){
                e=cur[j][p[i]];
                if(___jindo.isUndefined(e)){
                    continue
                }
                if(___jindo.isArray(e)){
                    if(idx>-1){
                        if(idx<e.length){
                            buf[buf.length]=e[idx]
                        }
                        
                    }
                    else{
                        buf=buf.concat(e)
                    }
                    
                }
                else{
                    if(idx==-1){
                        buf[buf.length]=e
                    }
                    
                }
                
            }
            stack[stack.length]=buf
        }
        cur=stack[stack.length-1]
    }
    return cur
};
MobileCommentJindo.$Json.prototype.toString=function(){
    MobileCommentJindo.$Json.prototype.toString=function(){
        return MobileCommentJindo.$Json._oldToString(this._object)
    };
    return this.toString()
};
MobileCommentJindo.$Json._oldToString=function(oObj){
    var ___jindo=MobileCommentJindo.$Jindo;
    var func={
        $:function($){
            if(___jindo.isNull($)||$==Infinity){
                return"null"
            }
            if(___jindo.isFunction($)){
                return undefined
            }
            if(___jindo.isUndefined($)){
                return undefined
            }
            if(___jindo.isBoolean($)){
                return $?"true":"false"
            }
            if(___jindo.isString($)){
                return this.s($)
            }
            if(___jindo.isNumeric($)){
                return $
            }
            if(___jindo.isArray($)){
                return this.a($)
            }
            if(___jindo.isHash($)){
                return this.o($)
            }
            if(typeof $=="object"||___jindo.isRegExp($)){
                return"{}"
            }
            if(isNaN($)){
                return"null"
            }
            
        }
        ,s:function(s){
            var e={
                '"':'\\"',"\\":"\\\\","\n":"\\n","\r":"\\r","\t":"\\t"
            };
            var c=function(m){
                return(e[m]!==undefined)?e[m]:m
            };
            return'"'+s.replace(/[\\"'\n\r\t]/g,c)+'"'
        }
        ,a:function(a){
            var s="[",c="",n=a.length;
            for(var i=0;
            i<n;
            i++){
                if(___jindo.isFunction(a[i])){
                    continue
                }
                s+=c+this.$(a[i]);
                if(!c){
                    c=","
                }
                
            }
            return s+"]"
        }
        ,o:function(o){
            o=MobileCommentJindo.$H(o).ksort().$value();
            var s="{",c="";
            for(var x in o){
                if(o.hasOwnProperty(x)){
                    if(___jindo.isUndefined(o[x])||___jindo.isFunction(o[x])){
                        continue
                    }
                    s+=c+this.s(x)+":"+this.$(o[x]);
                    if(!c){
                        c=","
                    }
                    
                }
                
            }
            return s+"}"
        }
        
    };
    return func.$(oObj)
};
MobileCommentJindo.$Json.prototype.toXML=function(){
    var f=function($,tag){
        var t=function(s,at){
            return"<"+tag+(at||"")+">"+s+"</"+tag+">"
        };
        switch(typeof $){
            case"undefined":case"null":return t("");
            case"number":return t($);
            case"string":if($.indexOf("<")<0){
                return t($.replace(/&/g,"&amp;"))
            }
            else{
                return t("<![CDATA["+$+"]]>")
            }
            case"boolean":return t(String($));
            case"object":var ret="";
            if($ instanceof Array){
                var len=$.length;
                for(var i=0;
                i<len;
                i++){
                    ret+=f($[i],tag)
                }
                
            }
            else{
                var at="";
                for(var x in $){
                    if($.hasOwnProperty(x)){
                        if(x=="$cdata"||typeof $[x]=="function"){
                            continue
                        }
                        ret+=f($[x],x)
                    }
                    
                }
                if(tag){
                    ret=t(ret,at)
                }
                
            }
            return ret
        }
        
    };
    return f(MobileCommentJindo.$Json._oldMakeJSON(this._object,"$Json#toXML"),"")
};
MobileCommentJindo.$Json.prototype.toObject=function(){
    return MobileCommentJindo.$Json._oldMakeJSON(this._object,"$Json#toObject")
};
MobileCommentJindo.$Json.prototype.compare=function(oObj){
    var ___jindo=MobileCommentJindo.$Jindo;
    var oArgs=___jindo.checkVarType(arguments,{
        "4obj":["oData:Hash+"],"4arr":["oData:Array+"]
    }
    ,"$Json#compare");
    function compare(vSrc,vTar){
        if(___jindo.isArray(vSrc)){
            if(vSrc.length!==vTar.length){
                return false
            }
            for(var i=0,nLen=vSrc.length;
            i<nLen;
            i++){
                if(!arguments.callee(vSrc[i],vTar[i])){
                    return false
                }
                
            }
            return true
        }
        else{
            if(___jindo.isRegExp(vSrc)||___jindo.isFunction(vSrc)||___jindo.isDate(vSrc)){
                return String(vSrc)===String(vTar)
            }
            else{
                if(typeof vSrc==="number"&&isNaN(vSrc)){
                    return isNaN(vTar)
                }
                else{
                    if(___jindo.isHash(vSrc)){
                        var nLen=0;
                        for(var k in vSrc){
                            nLen++
                        }
                        for(var k in vTar){
                            nLen--
                        }
                        if(nLen!==0){
                            return false
                        }
                        for(var k in vSrc){
                            if(k in vTar===false||!arguments.callee(vSrc[k],vTar[k])){
                                return false
                            }
                            
                        }
                        return true
                    }
                    
                }
                
            }
            
        }
        return vSrc===vTar
    }
    try{
        return compare(MobileCommentJindo.$Json._oldMakeJSON(this._object,"$Json#compare"),oObj)
    }
    catch(e){
        return false
    }
    
};
MobileCommentJindo.$Json.prototype.$value=MobileCommentJindo.$Json.prototype.toObject;
MobileCommentJindo.$Cookie=function(){
    var cl=arguments.callee;
    var cached=cl._cached;
    if(cl._cached){
        return cl._cached
    }
    if(!(this instanceof cl)){
        return new cl
    }
    if(typeof MobileCommentJindo.$Jindo.isUndefined(cl._cached)){
        cl._cached=this
    }
    
};
MobileCommentJindo.$Cookie.prototype.keys=function(){
    var ca=document.cookie.split(";");
    var re=/^\s+|\s+$/g;
    var a=new Array;
    for(var i=0;
    i<ca.length;
    i++){
        a[a.length]=ca[i].substr(0,ca[i].indexOf("=")).replace(re,"")
    }
    return a
};
MobileCommentJindo.$Cookie.prototype.get=function(sName){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4str":["sName:String+"]
    }
    ,"$Cookie#get");
    var ca=document.cookie.split(/\s*;\s*/);
    var re=new RegExp("^(\\s*"+sName+"\\s*=)");
    for(var i=0;
    i<ca.length;
    i++){
        if(re.test(ca[i])){
            return unescape(ca[i].substr(RegExp.$1.length))
        }
        
    }
    return null
};
MobileCommentJindo.$Cookie.prototype.set=function(sName,sValue,nDays,sDomain,sPath){
    var ___jindo=MobileCommentJindo.$Jindo;
    var oArgs=___jindo.checkVarType(arguments,{
        "4str":["sName:String+","sValue:String+"],day_for_string:["sName:String+","sValue:String+","nDays:Numeric"],domain_for_string:["sName:String+","sValue:String+","nDays:Numeric","sDomain:String+"],path_for_string:["sName:String+","sValue:String+","nDays:Numeric","sDomain:String+","sPath:String+"]
    }
    ,"$Cookie#set");
    var sExpire="";
    nDays=parseInt(nDays,10);
    if(!isNaN(nDays)&&___jindo.isNumeric(nDays)){
        sExpire=";expires="+(new Date((new Date()).getTime()+nDays*1000*60*60*24)).toGMTString()
    }
    if(___jindo.isUndefined(sDomain)){
        sDomain=""
    }
    if(___jindo.isUndefined(sPath)){
        sPath="/"
    }
    document.cookie=sName+"="+escape(sValue)+sExpire+"; path="+sPath+(sDomain?"; domain="+sDomain:"");
    return this
};
MobileCommentJindo.$Cookie.prototype.remove=function(sName,sDomain,sPath){
    var ___jindo=MobileCommentJindo.$Jindo;
    var oArgs=___jindo.checkVarType(arguments,{
        "4str":["sName:String+"],domain_for_string:["sName:String+","sDomain:String+"],path_for_string:["sName:String+","sDomain:String+","sPath:String+"]
    }
    ,"$Cookie#remove");
    var aArg=_toArray(arguments);
    var aPram=[];
    for(var i=0,l=aArg.length;
    i<l;
    i++){
        aPram.push(aArg[i]);
        if(i==0){
            aPram.push("");
            aPram.push(-1)
        }
        
    }
    if(!___jindo.isNull(this.get(sName))){
        this.set.apply(this,aPram)
    }
    return this
};
MobileCommentJindo.$Element=function(el){
    var cl=arguments.callee;
    if(el&&el instanceof cl){
        return el
    }
    if(!(this instanceof cl)){
        try{
            MobileCommentJindo.$Jindo._warn(arguments.length,1,"$Element");
            return new cl(el)
        }
        catch(e){
            if(e instanceof TypeError){
                return null
            }
            throw e
        }
        
    }
    var ___jindo=MobileCommentJindo.$Jindo;
    var oArgs=___jindo.checkVarType(arguments,{
        "4str":["sID:String+"],"4nod":["oEle:Node"],"4doc":["oEle:Document+"],"4win":["oEle:Window+"]
    }
    ,"$Element");
    switch(oArgs+""){
        case"4str":el=MobileCommentJindo.$(el);
        break;
        default:el=oArgs.oEle
    }
    this._element=el;
    if(this._element!=null){
        if(this._element.__jindo__id){
            this._key=this._element.__jindo__id
        }
        else{
            this._element.__jindo__id=this._key=_makeRandom()
        }
        var tag=this._element.tagName;
        this.tag=tag!==undefined?tag.toLowerCase():""
    }
    else{
        throw new TypeError("{not_found_element}")
    }
    
};
function _makeRandom(){
    return"e"+new Date().getTime()+parseInt(Math.random()*100000000,10)
}
MobileCommentJindo.$Element._eventBind=function(oEle,sEvent,fAroundFunc,bUseCapture){
    if(oEle.addEventListener){
        if(document.documentMode==9){
            MobileCommentJindo.$Element._eventBind=function(oEle,sEvent,fAroundFunc){
                if(/resize/.test(sEvent)){
                    oEle.attachEvent("on"+sEvent,fAroundFunc)
                }
                else{
                    oEle.addEventListener(sEvent,fAroundFunc,!!bUseCapture)
                }
                
            }
            
        }
        else{
            MobileCommentJindo.$Element._eventBind=function(oEle,sEvent,fAroundFunc,bUseCapture){
                oEle.addEventListener(sEvent,fAroundFunc,!!bUseCapture)
            }
            
        }
        
    }
    else{
        MobileCommentJindo.$Element._eventBind=function(oEle,sEvent,fAroundFunc){
            oEle.attachEvent("on"+sEvent,fAroundFunc)
        }
        
    }
    MobileCommentJindo.$Element._eventBind(oEle,sEvent,fAroundFunc,bUseCapture)
};
MobileCommentJindo.$Element._unEventBind=function(oEle,sEvent,fAroundFunc){
    if(oEle.removeEventListener){
        if(document.documentMode==9){
            MobileCommentJindo.$Element._unEventBind=function(oEle,sEvent,fAroundFunc){
                if(/resize/.test(sEvent)){
                    oEle.detachEvent("on"+sEvent,fAroundFunc)
                }
                else{
                    oEle.removeEventListener(sEvent,fAroundFunc,false)
                }
                
            }
            
        }
        else{
            MobileCommentJindo.$Element._unEventBind=function(oEle,sEvent,fAroundFunc){
                oEle.removeEventListener(sEvent,fAroundFunc,false)
            }
            
        }
        
    }
    else{
        MobileCommentJindo.$Element._unEventBind=function(oEle,sEvent,fAroundFunc){
            oEle.detachEvent("on"+sEvent,fAroundFunc)
        }
        
    }
    MobileCommentJindo.$Element._unEventBind(oEle,sEvent,fAroundFunc)
};
MobileCommentJindo.$Element.prototype.$value=function(){
    return this._element
};
MobileCommentJindo.$Element.prototype.visible=function(bVisible,sDisplay){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        g:[],s4bln:[MobileCommentJindo.$Jindo._F("bVisible:Boolean")],s4str:["bVisible:Boolean","sDisplay:String+"]
    }
    ,"$Element#visible");
    switch(oArgs+""){
        case"g":return(this._getCss(this._element,"display")!="none");
        case"s4bln":this[bVisible?"show":"hide"]();
        return this;
        case"s4str":this[bVisible?"show":"hide"](sDisplay);
        return this
    }
    
};
MobileCommentJindo.$Element.prototype.show=function(sDisplay){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4voi":[],"4str":["sDisplay:String+"]
    }
    ,"$Element#show");
    var s=this._element.style;
    var b="block";
    var c={
        p:b,div:b,form:b,h1:b,h2:b,h3:b,h4:b,ol:b,ul:b,fieldset:b,td:"table-cell",th:"table-cell",li:"list-item",table:"table",thead:"table-header-group",tbody:"table-row-group",tfoot:"table-footer-group",tr:"table-row",col:"table-column",colgroup:"table-column-group",caption:"table-caption",dl:b,dt:b,dd:b
    };
    try{
        switch(oArgs+""){
            case"4voi":var type=c[this.tag];
            s.display=type||"inline";
            break;
            case"4str":s.display=sDisplay
        }
        
    }
    catch(e){
        s.display="block"
    }
    return this
};
MobileCommentJindo.$Element.prototype.hide=function(){
    this._element.style.display="none";
    return this
};
MobileCommentJindo.$Element.prototype.toggle=function(sDisplay){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4voi":[],"4str":["sDisplay:String+"]
    }
    ,"$Element#toggle");
    this[this._getCss(this._element,"display")=="none"?"show":"hide"].apply(this,arguments);
    return this
};
MobileCommentJindo.$Element.prototype.opacity=function(value){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        g:[],s:["nOpacity:Numeric"]
    }
    ,"$Element#opacity");
    var v,e=this._element,b;
    switch(oArgs+""){
        case"g":b=(this._getCss(e,"display")!="none");
        if(typeof e.filters!="undefined"){
            v=typeof e.filters.alpha=="undefined"?(b?100:0):e.filters.alpha.opacity;
            v=v/100
        }
        else{
            v=parseFloat(e.style.opacity,10);
            if(isNaN(v)){
                v=b?1:0
            }
            
        }
        return v;
        case"s":b=(this._getCss(e,"display")!="none");
        value=oArgs.nOpacity;
        e.style.zoom=1;
        value=Math.max(Math.min(value,1),0);
        if(typeof e.filters!="undefined"){
            value=Math.ceil(value*100);
            if(typeof e.filters!="unknown"&&typeof e.filters.alpha!="undefined"){
                e.filters.alpha.opacity=value
            }
            else{
                e.style.filter=(e.style.filter+" alpha(opacity="+value+")")
            }
            
        }
        else{
            e.style.opacity=value
        }
        return this
    }
    
};
MobileCommentJindo.$Element.prototype.css=function(sName,sValue){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        g:["sName:String+"],s4str:[MobileCommentJindo.$Jindo._F("sName:String+"),MobileCommentJindo.$Jindo._F("vValue:String+")],s4num:["sName:String+","vValue:Numeric"],s4obj:["oObj:Hash+"]
    }
    ,"$Element#css");
    var e=this._element;
    switch(oArgs+""){
        case"s4str":case"s4num":var obj={};
        obj[sName]=sValue;
        sName=obj;
        break;
        case"s4obj":sName=oArgs.oObj;
        break;
        case"g":var _getCss=this._getCss;
        if(sName=="opacity"){
            return this.opacity()
        }
        if((_JINDO_IS_FF||_JINDO_IS_OP)&&(sName=="backgroundPositionX"||sName=="backgroundPositionY")){
            var bp=_getCss(e,"backgroundPosition").split(/\s+/);
            return(sName=="backgroundPositionX")?bp[0]:bp[1]
        }
        if(_JINDO_IS_IE&&sName=="backgroundPosition"){
            return _getCss(e,"backgroundPositionX")+" "+_getCss(e,"backgroundPositionY")
        }
        if((_JINDO_IS_FF||_JINDO_IS_SF||_JINDO_IS_CH)&&(sName=="padding"||sName=="margin")){
            var top=_getCss(e,sName+"Top");
            var right=_getCss(e,sName+"Right");
            var bottom=_getCss(e,sName+"Bottom");
            var left=_getCss(e,sName+"Left");
            if((top==right)&&(bottom==left)){
                return top
            }
            else{
                if(top==bottom){
                    if(right==left){
                        return top+" "+right
                    }
                    else{
                        return top+" "+right+" "+bottom+" "+left
                    }
                    
                }
                else{
                    return top+" "+right+" "+bottom+" "+left
                }
                
            }
            
        }
        return _getCss(e,sName)
    }
    var v,type;
    for(var k in sName){
        if(sName.hasOwnProperty(k)){
            v=sName[k];
            if(!(MobileCommentJindo.$Jindo.isString(v)||MobileCommentJindo.$Jindo.isNumeric(v))){
                continue
            }
            if(k=="opacity"){
                this.opacity(v);
                continue
            }
            if(k=="cssFloat"&&_JINDO_IS_IE){
                k="styleFloat"
            }
            if((_JINDO_IS_FF||_JINDO_IS_OP)&&(k=="backgroundPositionX"||k=="backgroundPositionY")){
                var bp=this.css("backgroundPosition").split(/\s+/);
                v=k=="backgroundPositionX"?v+" "+bp[1]:bp[0]+" "+v;
                this._setCss(e,"backgroundPosition",v)
            }
            else{
                this._setCss(e,k,v)
            }
            
        }
        
    }
    return this
};
MobileCommentJindo.$Element.prototype._getCss=function(e,sName){
    var fpGetCss;
    if(e.currentStyle){
        fpGetCss=function(e,sName){
            try{
                if(sName=="cssFloat"){
                    sName="styleFloat"
                }
                var sStyle=e.style[sName];
                if(sStyle){
                    return sStyle
                }
                else{
                    var oCurrentStyle=e.currentStyle;
                    if(oCurrentStyle){
                        return oCurrentStyle[sName]
                    }
                    
                }
                return sStyle
            }
            catch(ex){
                throw new MobileCommentJindo.$Error((e.tagName||"document")+MobileCommentJindo.$Except.NOT_USE_CSS,"$Element#css")
            }
            
        }
        
    }
    else{
        if(window.getComputedStyle){
            fpGetCss=function(e,sName){
                try{
                    if(sName=="cssFloat"){
                        sName="float"
                    }
                    var d=e.ownerDocument||e.document||document;
                    var sVal=(e.style[sName]||d.defaultView.getComputedStyle(e,null).getPropertyValue(sName.replace(/([A-Z])/g,"-$1").toLowerCase()));
                    if(sName=="textDecoration"){
                        sVal=sVal.replace(",","")
                    }
                    return sVal
                }
                catch(ex){
                    throw new MobileCommentJindo.$Error((e.tagName||"document")+MobileCommentJindo.$Except.NOT_USE_CSS,"$Element#css")
                }
                
            }
            
        }
        else{
            fpGetCss=function(e,sName){
                try{
                    if(sName=="cssFloat"&&_JINDO_IS_IE){
                        sName="styleFloat"
                    }
                    return e.style[sName]
                }
                catch(ex){
                    throw new MobileCommentJindo.$Error((e.tagName||"document")+MobileCommentJindo.$Except.NOT_USE_CSS,"$Element#css")
                }
                
            }
            
        }
        
    }
    MobileCommentJindo.$Element.prototype._getCss=fpGetCss;
    return fpGetCss(e,sName)
};
MobileCommentJindo.$Element.prototype._setCss=function(e,k,v){
    if(("#top#left#right#bottom#").indexOf(k+"#")>0&&(typeof v=="number"||(/\d$/.test(v)))){
        e.style[k]=parseInt(v,10)+"px"
    }
    else{
        e.style[k]=v
    }
    
};
MobileCommentJindo.$Element.prototype.attr=function(sName,sValue){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        g:["sName:String+"],s4str:["sName:String+","vValue:String+"],s4num:["sName:String+","vValue:Numeric"],s4nul:["sName:String+","vValue:Null"],s4bln:["sName:String+","vValue:Boolean"],s4obj:[MobileCommentJindo.$Jindo._F("oObj:Hash+")]
    }
    ,"$Element#attr");
    var e=this._element;
    switch(oArgs+""){
        case"s4str":case"s4nul":case"s4num":case"s4bln":var obj={};
        obj[sName]=sValue;
        sName=obj;
        break;
        case"s4obj":sName=oArgs.oObj;
        break;
        case"g":if(sName=="class"||sName=="className"){
            return e.className
        }
        else{
            if(sName=="style"){
                return e.style.cssText
            }
            else{
                if(sName=="checked"||sName=="disabled"){
                    return !!e[sName]
                }
                else{
                    if(sName=="value"){
                        var val=e.getAttributeNode("value");
                        if(val==null){
                            return e.value
                        }
                        else{
                            return val.value
                        }
                        
                    }
                    else{
                        if(sName=="href"){
                            return e.getAttribute(sName,2)
                        }
                        
                    }
                    
                }
                
            }
            
        }
        return e.getAttribute(sName)
    }
    for(var k in sName){
        if(sName.hasOwnProperty(k)){
            var v=sName[k];
            if(MobileCommentJindo.$Jindo.isNull(v)){
                e.removeAttribute(k)
            }
            else{
                if(k=="class"||k=="className"){
                    e.className=v
                }
                else{
                    if(k=="style"){
                        e.style.cssText=v
                    }
                    else{
                        if(k=="checked"||k=="disabled"){
                            e[k]=v
                        }
                        else{
                            if(k=="value"){
                                e.value=v
                            }
                            else{
                                e.setAttribute(k,v)
                            }
                            
                        }
                        
                    }
                    
                }
                
            }
            
        }
        
    }
    return this
};
MobileCommentJindo.$Element.prototype.width=function(width){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        g:[],s:["nWidth:Numeric"]
    }
    ,"$Element#width");
    switch(oArgs+""){
        case"g":return this._element.offsetWidth;
        case"s":width=oArgs.nWidth;
        var e=this._element;
        e.style.width=width+"px";
        var off=e.offsetWidth;
        if(off!=width&&off!==0){
            var w=(width*2-off);
            if(w>0){
                e.style.width=w+"px"
            }
            
        }
        return this
    }
    
};
MobileCommentJindo.$Element.prototype.height=function(height){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        g:[],s:["nHeight:Numeric"]
    }
    ,"$Element#height");
    switch(oArgs+""){
        case"g":return this._element.offsetHeight;
        case"s":height=oArgs.nHeight;
        var e=this._element;
        e.style.height=height+"px";
        var off=e.offsetHeight;
        if(off!=height&&off!==0){
            var height=(height*2-off);
            if(height>0){
                e.style.height=height+"px"
            }
            
        }
        return this
    }
    
};
MobileCommentJindo.$Element.prototype.className=function(sClass){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        g:[],s:[MobileCommentJindo.$Jindo._F("sClass:String+")]
    }
    ,"$Element#className");
    var e=this._element;
    switch(oArgs+""){
        case"g":return e.className;
        case"s":e.className=sClass;
        return this
    }
    
};
MobileCommentJindo.$Element.prototype.hasClass=function(sClass){
    var ___checkVarType=MobileCommentJindo.$Jindo.checkVarType;
    if(this._element.classList){
        MobileCommentJindo.$Element.prototype.hasClass=function(sClass){
            var oArgs=___checkVarType(arguments,{
                "4str":["sClass:String+"]
            }
            ,"$Element#hasClass");
            return this._element.classList.contains(sClass)
        }
        
    }
    else{
        MobileCommentJindo.$Element.prototype.hasClass=function(sClass){
            var oArgs=___checkVarType(arguments,{
                "4str":["sClass:String+"]
            }
            ,"$Element#hasClass");
            return(" "+this._element.className+" ").indexOf(" "+sClass+" ")>-1
        }
        
    }
    return this.hasClass.apply(this,arguments)
};
MobileCommentJindo.$Element.prototype.addClass=function(sClass){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4str":["sClass:String+"]
    }
    ,"$Element#addClass");
    var e=this._element;
    var sClassName=e.className;
    var aClass=(sClass+"").split(" ");
    var sEachClass;
    for(var i=aClass.length-1;
    i>=0;
    i--){
        sEachClass=aClass[i];
        if((" "+sClassName+" ").indexOf(" "+sEachClass+" ")==-1){
            sClassName=sClassName+" "+sEachClass
        }
        
    }
    e.className=sClassName.replace(/\s+$/,"").replace(/^\s+/,"");
    return this
};
MobileCommentJindo.$Element.prototype.removeClass=function(sClass){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4str":["sClass:String+"]
    }
    ,"$Element#removeClass");
    var e=this._element;
    var sClassName=e.className;
    var aClass=(sClass+"").split(" ");
    var sEachClass;
    for(var i=aClass.length-1;
    i>=0;
    i--){
        sClassName=(" "+sClassName+" ").replace(new RegExp("\\b"+aClass[i]+"\\s+","g")," ")
    }
    e.className=sClassName.replace(/\s+$/,"").replace(/^\s+/,"");
    return this
};
MobileCommentJindo.$Element.prototype.toggleClass=function(sClass,sClass2){
    var ___checkVarType=MobileCommentJindo.$Jindo.checkVarType;
    if(this._element.classList){
        MobileCommentJindo.$Element.prototype.toggleClass=function(sClass,sClass2){
            var oArgs=___checkVarType(arguments,{
                "4str":["sClass:String+"],"4str2":["sClass:String+","sClass2:String+"]
            }
            ,"$Element#toggleClass");
            switch(oArgs+""){
                case"4str":this._element.classList.toggle(sClass+"");
                break;
                case"4str2":sClass=sClass+"";
                sClass2=sClass2+"";
                if(this.hasClass(sClass)){
                    this.removeClass(sClass);
                    this.addClass(sClass2)
                }
                else{
                    this.addClass(sClass);
                    this.removeClass(sClass2)
                }
                
            }
            return this
        }
        
    }
    else{
        MobileCommentJindo.$Element.prototype.toggleClass=function(sClass,sClass2){
            var oArgs=___checkVarType(arguments,{
                "4str":["sClass:String+"],"4str2":["sClass:String+","sClass2:String+"]
            }
            ,"$Element#toggleClass");
            sClass2=sClass2||"";
            if(this.hasClass(sClass)){
                this.removeClass(sClass);
                if(sClass2){
                    this.addClass(sClass2)
                }
                
            }
            else{
                this.addClass(sClass);
                if(sClass2){
                    this.removeClass(sClass2)
                }
                
            }
            return this
        }
        
    }
    return this.toggleClass.apply(this,arguments)
};
MobileCommentJindo.$Element.prototype.cssClass=function(vClass,bCondition){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        g:["sClass:String+"],s4bln:["sClass:String+","bCondition:Boolean"],s4obj:["oObj:Hash+"]
    }
    ,"$Element#cssClass");
    switch(oArgs+""){
        case"g":return this.hasClass(oArgs.sClass);
        case"s4bln":if(oArgs.bCondition){
            this.addClass(oArgs.sClass)
        }
        else{
            this.removeClass(oArgs.sClass)
        }
        return this;
        case"s4obj":var e=this._element;
        vClass=oArgs.oObj;
        var sClassName=e.className;
        for(var sEachClass in vClass){
            if(vClass.hasOwnProperty(sEachClass)){
                if(vClass[sEachClass]){
                    if((" "+sClassName+" ").indexOf(" "+sEachClass+" ")==-1){
                        sClassName=(sClassName+" "+sEachClass).replace(/^\s+/,"")
                    }
                    
                }
                else{
                    if((" "+sClassName+" ").indexOf(" "+sEachClass+" ")>-1){
                        sClassName=(" "+sClassName+" ").replace(" "+sEachClass+" "," ").replace(/\s+$/,"").replace(/^\s+/,"")
                    }
                    
                }
                
            }
            
        }
        e.className=sClassName;
        return this
    }
    
};
MobileCommentJindo.$Element.prototype.text=function(sText){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        g:[],s4str:["sText:String+"],s4num:[MobileCommentJindo.$Jindo._F("sText:Numeric")],s4bln:["sText:Boolean"]
    }
    ,"$Element#text");
    var ele=this._element;
    var tag=this.tag;
    switch(oArgs+""){
        case"g":var prop=(ele.innerText!==undefined)?"innerText":"textContent";
        if(tag=="textarea"||tag=="input"){
            prop="value"
        }
        return ele[prop];
        case"s4str":case"s4num":case"s4bln":var prop=(ele.innerText!==undefined)?"innerText":"textContent";
        if(tag=="textarea"||tag=="input"){
            prop="value"
        }
        sText+="";
        try{
            if(prop!="value"){
                prop=(ele.textContent!==undefined)?"textContent":"innerText"
            }
            ele[prop]=sText+""
        }
        catch(e){
            return ele.innerHTML=(sText+"").replace(/&/g,"&amp;").replace(/</g,"&lt;")
        }
        return this
    }
    
};
MobileCommentJindo.$Element.prototype.html=function(sHTML){
    var isIe=_JINDO_IS_IE;
    var isFF=_JINDO_IS_FF;
    var _param={
        g:[],s4str:[MobileCommentJindo.$Jindo._F("sText:String+")],s4num:["sText:Numeric"],s4bln:["sText:Boolean"]
    };
    var ___checkVarType=MobileCommentJindo.$Jindo.checkVarType;
    if(isIe){
        MobileCommentJindo.$Element.prototype.html=function(sHTML){
            var oArgs=___checkVarType(arguments,_param,"$Element#html");
            switch(oArgs+""){
                case"g":return this._element.innerHTML;
                case"s4str":case"s4num":case"s4bln":sHTML+="";
                if(MobileCommentJindo.cssquery){
                    MobileCommentJindo.cssquery.release()
                }
                var oEl=this._element;
                while(oEl.firstChild){
                    oEl.removeChild(oEl.firstChild)
                }
                var sId="R"+new Date().getTime()+parseInt(Math.random()*100000,10);
                var oDoc=oEl.ownerDocument||oEl.document||document;
                var oDummy;
                var sTag=oEl.tagName.toLowerCase();
                switch(sTag){
                    case"select":case"table":oDummy=oDoc.createElement("div");
                    oDummy.innerHTML="<"+sTag+' class="'+sId+'">'+sHTML+"</"+sTag+">";
                    break;
                    case"tr":case"thead":case"tbody":case"colgroup":oDummy=oDoc.createElement("div");
                    oDummy.innerHTML="<table><"+sTag+' class="'+sId+'">'+sHTML+"</"+sTag+"></table>";
                    break;
                    default:oEl.innerHTML=sHTML
                }
                if(oDummy){
                    var oFound;
                    for(oFound=oDummy.firstChild;
                    oFound;
                    oFound=oFound.firstChild){
                        if(oFound.className==sId){
                            break
                        }
                        
                    }
                    if(oFound){
                        var notYetSelected=true;
                        for(var oChild;
                        oChild=oEl.firstChild;
                        ){
                            oChild.removeNode(true)
                        }
                        for(var oChild=oFound.firstChild;
                        oChild;
                        oChild=oFound.firstChild){
                            if(sTag=="select"){
                                var cloneNode=oChild.cloneNode(true);
                                if(oChild.selected&&notYetSelected){
                                    notYetSelected=false;
                                    cloneNode.selected=true
                                }
                                oEl.appendChild(cloneNode);
                                oChild.removeNode(true)
                            }
                            else{
                                oEl.appendChild(oChild)
                            }
                            
                        }
                        oDummy.removeNode&&oDummy.removeNode(true)
                    }
                    oDummy=null
                }
                return this
            }
            
        }
        
    }
    else{
        if(isFF){
            MobileCommentJindo.$Element.prototype.html=function(sHTML){
                var oArgs=___checkVarType(arguments,_param,"$Element#html");
                switch(oArgs+""){
                    case"g":return this._element.innerHTML;
                    case"s4str":case"s4num":case"s4bln":sHTML+="";
                    var oEl=this._element;
                    if(!oEl.parentNode){
                        var sId="R"+new Date().getTime()+parseInt(Math.random()*100000,10);
                        var oDoc=oEl.ownerDocument||oEl.document||document;
                        var oDummy;
                        var sTag=oEl.tagName.toLowerCase();
                        switch(sTag){
                            case"select":case"table":oDummy=oDoc.createElement("div");
                            oDummy.innerHTML="<"+sTag+' class="'+sId+'">'+sHTML+"</"+sTag+">";
                            break;
                            case"tr":case"thead":case"tbody":case"colgroup":oDummy=oDoc.createElement("div");
                            oDummy.innerHTML="<table><"+sTag+' class="'+sId+'">'+sHTML+"</"+sTag+"></table>";
                            break;
                            default:oEl.innerHTML=sHTML
                        }
                        if(oDummy){
                            var oFound;
                            for(oFound=oDummy.firstChild;
                            oFound;
                            oFound=oFound.firstChild){
                                if(oFound.className==sId){
                                    break
                                }
                                
                            }
                            if(oFound){
                                for(var oChild;
                                oChild=oEl.firstChild;
                                ){
                                    oChild.removeNode(true)
                                }
                                for(var oChild=oFound.firstChild;
                                oChild;
                                oChild=oFound.firstChild){
                                    oEl.appendChild(oChild)
                                }
                                oDummy.removeNode&&oDummy.removeNode(true)
                            }
                            oDummy=null
                        }
                        
                    }
                    else{
                        oEl.innerHTML=sHTML
                    }
                    return this
                }
                
            }
            
        }
        else{
            MobileCommentJindo.$Element.prototype.html=function(sHTML){
                var oArgs=___checkVarType(arguments,_param,"$Element#html");
                switch(oArgs+""){
                    case"g":return this._element.innerHTML;
                    case"s4str":case"s4num":case"s4bln":sHTML+="";
                    var oEl=this._element;
                    oEl.innerHTML=sHTML;
                    return this
                }
                
            }
            
        }
        
    }
    return this.html.apply(this,arguments)
};
MobileCommentJindo.$Element.prototype.outerHTML=function(){
    var e=this._element;
    if(e.outerHTML!==undefined){
        return e.outerHTML
    }
    var oDoc=e.ownerDocument||e.document||document;
    var div=oDoc.createElement("div");
    var par=e.parentNode;
    if(!par){
        return e.innerHTML
    }
    par.insertBefore(div,e);
    div.style.display="none";
    div.appendChild(e);
    var s=div.innerHTML;
    par.insertBefore(e,div);
    par.removeChild(div);
    return s
};
MobileCommentJindo.$Element.prototype.toString=MobileCommentJindo.$Element.prototype.outerHTML;
MobileCommentJindo.$Element.prototype.attach=function(sEvent,fpCallback){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4str":["sEvent:String+","fpCallback:Function+"]
    }
    ,"$Element#attach");
    return this._add("normal",sEvent.toLowerCase(),null,fpCallback)
};
MobileCommentJindo.$Element.prototype.detach=function(sEvent,fpCallback){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        group_for_string:["sEvent:String+"],"4fun":["sEvent:String+","fpCallback:Function+"]
    }
    ,"$Element#detach");
    return this._del("normal",sEvent.toLowerCase(),null,fpCallback)
};
MobileCommentJindo.$Element.prototype.delegate=function(sEvent,vFilter,fpCallback){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4str":["sEvent:String+","vFilter:String+","fpCallback:Function+"],"4fun":["sEvent:String+","vFilter:Function+","fpCallback:Function+"]
    }
    ,"$Element#delegate");
    return this._add("delegate",sEvent.toLowerCase(),vFilter,fpCallback)
};
MobileCommentJindo.$Element.prototype.undelegate=function(sEvent,vFilter,fpCallback){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4str":["sEvent:String+","vFilter:String+","fpCallback:Function+"],"4fun":["sEvent:String+","vFilter:Function+","fpCallback:Function+"],group_for_string:["sEvent:String+","vFilter:String+"],group_for_function:["sEvent:String+","vFilter:Function+"]
    }
    ,"$Element#undelegate");
    return this._del("delegate",sEvent.toLowerCase(),vFilter,fpCallback)
};
MobileCommentJindo.$Element.prototype._add=function(sType,sEvent,vFilter,fpCallback){
    var oManager=MobileCommentJindo.$Element.eventManager;
    var oEvent=oManager.splitGroup(sEvent);
    sEvent=oEvent.event;
    var sGroup=oEvent.group;
    if((!document.addEventListener)&&("domready"==sEvent)){
        if(window.top!=window){
            throw MobileCommentJindo.$Error(MobileCommentJindo.$Except.NOT_WORK_DOMREADY,"$Element#attach")
        }
        MobileCommentJindo.$Element._domready(this._element,fpCallback);
        return this
    }
    fpCallback=oManager.revisionCallback(sType,sEvent,fpCallback);
    sEvent=oManager.revisionEvent(sType,sEvent);
    if(!oManager.isInit(this._key)){
        oManager.init(this._key,this._element)
    }
    if(!oManager.hasEvent(this._key,sEvent)){
        oManager.initEvent(this,sEvent,sGroup)
    }
    if(!oManager.hasGroup(this._key,sEvent,sGroup)){
        oManager.initGroup(this._key,sEvent,sGroup)
    }
    oManager.addEventListener(this._key,sEvent,sGroup,sType,vFilter,fpCallback);
    return this
};
MobileCommentJindo.$Element.prototype._del=function(sType,sEvent,vFilter,fpCallback){
    var oManager=MobileCommentJindo.$Element.eventManager;
    var oEvent=oManager.splitGroup(sEvent);
    sEvent=oEvent.event;
    var sGroup=oEvent.group;
    sEvent=oManager.revisionEvent(sType,sEvent);
    if((!document.addEventListener)&&("domready"==sEvent)){
        var aNewDomReady=[];
        var list=MobileCommentJindo.$Element._domready.list;
        for(var i=0,l=list.length;
        i<l;
        i++){
            if(list[i]!=fpCallback){
                aNewDomReady.push(list[i])
            }
            
        }
        MobileCommentJindo.$Element._domready.list=aNewDomReady;
        return this
    }
    var NONE_GROUP="_jindo_event_none";
    if(sGroup===NONE_GROUP&&!MobileCommentJindo.$Jindo.isFunction(fpCallback)){
        throw new MobileCommentJindo.$Error(MobileCommentJindo.$Except.HAS_FUNCTION_FOR_GROUP,"$Element#"+(sType=="normal"?"detach":"delegate"))
    }
    oManager.removeEventListener(this._key,sEvent,sGroup,sType,vFilter,fpCallback);
    return this
};
MobileCommentJindo.$Element.eventManager=(function(){
    var eventStore={};
    var NONE_GROUP="_jindo_event_none";
    function bind(fpFunc,oScope,aPram){
        return function(){
            var args=_slice.call(arguments,0);
            if(aPram.length){
                args=aPram.concat(args)
            }
            return fpFunc.apply(oScope,args)
        }
        
    }
    var touch;
    if(_JINDO_IS_MO){
        touch={
            mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"
        }
        
    }
    else{
        touch={
            mousedown:"mousedown",mousemove:"mousemove",mouseup:"mouseup"
        }
        
    }
    return{
        revisionCallback:function(sType,sEvent,fpCallback){
            if((document.addEventListener!==undefined&&(sEvent=="mouseenter"||sEvent=="mouseleave"))||(_JINDO_IS_IE&&(sType=="delegate")&&(sEvent=="mouseenter"||sEvent=="mouseleave"))){
                var fpWrapCallback=MobileCommentJindo.$Element.eventManager._fireWhenElementBoundary(sType,fpCallback);
                fpWrapCallback._origin_=fpCallback;
                fpCallback=fpWrapCallback
            }
            return fpCallback
        }
        ,_fireWhenElementBoundary:function(sType,fpCallback){
            return function(oEvent){
                var woRelatedElement=oEvent.relatedElement?MobileCommentJindo.$Element(oEvent.relatedElement):null;
                var eElement=oEvent.currentElement;
                if(sType=="delegate"){
                    eElement=oEvent.element
                }
                if(woRelatedElement&&(woRelatedElement.isEqual(eElement)||woRelatedElement.isChildOf(eElement))){
                    return
                }
                fpCallback(oEvent)
            }
            
        }
        ,revisionEvent:function(sType,sEvent){
            if(document.addEventListener!==undefined){
                this.revisionEvent=function(sType,sEvent){
                    sEvent=sEvent.toLowerCase();
                    if(sEvent=="domready"){
                        sEvent="DOMContentLoaded"
                    }
                    else{
                        if(sEvent=="mousewheel"&&!_JINDO_IS_WK&&!_JINDO_IS_OP&&!_JINDO_IS_IE){
                            sEvent="DOMMouseScroll"
                        }
                        else{
                            if(sEvent=="mouseenter"&&!_JINDO_IS_IE){
                                sEvent="mouseover"
                            }
                            else{
                                if(sEvent=="mouseleave"&&!_JINDO_IS_IE){
                                    sEvent="mouseout"
                                }
                                else{
                                    if(sEvent=="transitionend"||sEvent=="transitionstart"){
                                        var sPrefix,sPostfix=sEvent.replace("transition","");
                                        sPostfix=sPostfix.substr(0,1).toUpperCase()+sPostfix.substr(1);
                                        if(document.body.style.WebkitTransition!==undefined){
                                            sPrefix="webkit"
                                        }
                                        else{
                                            if(document.body.style.OTransition!==undefined){
                                                sPrefix="o"
                                            }
                                            else{
                                                if(document.body.style.MsTransition!==undefined){
                                                    sPrefix="ms"
                                                }
                                                
                                            }
                                            
                                        }
                                        sEvent=(sPrefix?sPrefix+"Transition":"transition")+sPostfix
                                    }
                                    else{
                                        if(sEvent=="animationstart"||sEvent=="animationend"||sEvent=="animationiteration"){
                                            var sPrefix,sPostfix=sEvent.replace("animation","");
                                            sPostfix=sPostfix.substr(0,1).toUpperCase()+sPostfix.substr(1);
                                            if(document.body.style.WebkitAnimationName!==undefined){
                                                sPrefix="webkit"
                                            }
                                            else{
                                                if(document.body.style.OAnimationName!==undefined){
                                                    sPrefix="o"
                                                }
                                                else{
                                                    if(document.body.style.MsTransitionName!==undefined){
                                                        sPrefix="ms"
                                                    }
                                                    
                                                }
                                                
                                            }
                                            sEvent=(sPrefix?sPrefix+"Animation":"animation")+sPostfix
                                        }
                                        else{
                                            if("mousedown|mousemove|mouseup".indexOf(sEvent)>-1){
                                                sEvent=touch[sEvent]
                                            }
                                            
                                        }
                                        
                                    }
                                    
                                }
                                
                            }
                            
                        }
                        
                    }
                    return sEvent
                }
                
            }
            else{
                this.revisionEvent=function(sType,sEvent){
                    if(sType=="delegate"&&sEvent=="mouseenter"){
                        sEvent="mouseover"
                    }
                    else{
                        if(sType=="delegate"&&sEvent=="mouseleave"){
                            sEvent="mouseout"
                        }
                        else{
                            if("mousedown|mousemove|mouseup".indexOf(sEvent)>-1){
                                sEvent=touch[sEvent]
                            }
                            
                        }
                        
                    }
                    return sEvent
                }
                
            }
            return this.revisionEvent(sType,sEvent)
        }
        ,test:function(){
            return eventStore
        }
        ,isInit:function(sKey){
            return !!eventStore[sKey]
        }
        ,init:function(sKey,eEle){
            eventStore[sKey]={
                ele:eEle,event:{}
            }
            
        }
        ,getEventConfig:function(sKey){
            return eventStore[sKey]
        }
        ,hasEvent:function(sKey,sEvent){
            try{
                return !!eventStore[sKey]["event"][sEvent]
            }
            catch(e){
                return false
            }
            
        }
        ,hasGroup:function(sKey,sEvent,sGroup){
            return !!eventStore[sKey]["event"][sEvent]["type"][sGroup]
        }
        ,initEvent:function(oThis,sEvent,sGroup){
            var sKey=oThis._key;
            var oEvent=eventStore[sKey]["event"];
            var fAroundFunc=bind(function(sEvent,wEvent){
                wEvent=wEvent||window.event;
                if(wEvent.currentTarget===undefined){
                    wEvent.currentTarget=this._element
                }
                var weEvent=MobileCommentJindo.$Event(wEvent);
                if(!weEvent.currentElement){
                    weEvent.currentElement=this._element
                }
                var oEle=weEvent.element;
                var oManager=MobileCommentJindo.$Element.eventManager;
                var oConfig=oManager.getEventConfig(weEvent.currentElement.__jindo__id);
                var oType=oConfig.event[sEvent].type;
                for(var i in oType){
                    if(oType.hasOwnProperty(i)){
                        var aNormal=oType[i].normal;
                        for(var j=0,l=aNormal.length;
                        j<l;
                        j++){
                            aNormal[j](weEvent)
                        }
                        var oDelegate=oType[i].delegate;
                        var aResultFilter;
                        var afpFilterCallback;
                        for(var k in oDelegate){
                            if(oDelegate.hasOwnProperty(k)){
                                aResultFilter=oDelegate[k].checker(oEle);
                                if(aResultFilter[0]){
                                    afpFilterCallback=oDelegate[k].callback;
                                    weEvent.element=aResultFilter[1];
                                    for(var m=0,leng=afpFilterCallback.length;
                                    m<leng;
                                    m++){
                                        afpFilterCallback[m](weEvent)
                                    }
                                    
                                }
                                
                            }
                            
                        }
                        
                    }
                    
                }
                
            }
            ,oThis,[sEvent]);
            oEvent[sEvent]={
                listener:fAroundFunc,type:{}
            };
            MobileCommentJindo.$Element._eventBind(oThis._element,sEvent,fAroundFunc,false)
        }
        ,initGroup:function(sKey,sEvent,sGroup){
            var oType=eventStore[sKey]["event"][sEvent]["type"];
            oType[sGroup]={
                normal:[],delegate:{}
            }
            
        }
        ,addEventListener:function(sKey,sEvent,sGroup,sType,vFilter,fpCallback){
            var oEventInfo=eventStore[sKey]["event"][sEvent]["type"][sGroup];
            if(sType==="normal"){
                oEventInfo.normal.push(fpCallback)
            }
            else{
                if(sType==="delegate"){
                    if(!this.hasDelegate(oEventInfo,vFilter)){
                        this.initDelegate(eventStore[sKey].ele,oEventInfo,vFilter)
                    }
                    this.addDelegate(oEventInfo,vFilter,fpCallback)
                }
                
            }
            
        }
        ,hasDelegate:function(oEventInfo,vFilter){
            return !!oEventInfo.delegate[vFilter]
        }
        ,initDelegate:function(eOwnEle,oEventInfo,vFilter){
            var fpCheck;
            if(MobileCommentJindo.$Jindo.isString(vFilter)){
                fpCheck=bind(function(eOwnEle,sCssquery,oEle){
                    var eIncludeEle=oEle;
                    var ___query=MobileCommentJindo.cssquery;
                    var isIncludeEle=___query.test(oEle,sCssquery);
                    if(!isIncludeEle){
                        var aPropagationElements=this._getParent(eOwnEle,oEle);
                        for(var i=0,leng=aPropagationElements.length;
                        i<leng;
                        i++){
                            eIncludeEle=aPropagationElements[i];
                            if(___query.test(eIncludeEle,sCssquery)){
                                isIncludeEle=true;
                                break
                            }
                            
                        }
                        
                    }
                    return[isIncludeEle,eIncludeEle]
                }
                ,this,[eOwnEle,vFilter])
            }
            else{
                fpCheck=bind(function(eOwnEle,fpFilter,oEle){
                    var eIncludeEle=oEle;
                    var isIncludeEle=fpFilter(eOwnEle,oEle);
                    if(!isIncludeEle){
                        var aPropagationElements=this._getParent(eOwnEle,oEle);
                        for(var i=0,leng=aPropagationElements.length;
                        i<leng;
                        i++){
                            eIncludeEle=aPropagationElements[i];
                            if(fpFilter(eOwnEle,eIncludeEle)){
                                isIncludeEle=true;
                                break
                            }
                            
                        }
                        
                    }
                    return[isIncludeEle,eIncludeEle]
                }
                ,this,[eOwnEle,vFilter])
            }
            oEventInfo.delegate[vFilter]={
                checker:fpCheck,callback:[]
            }
            
        }
        ,addDelegate:function(oEventInfo,vFilter,fpCallback){
            oEventInfo.delegate[vFilter].callback.push(fpCallback)
        }
        ,removeEventListener:function(sKey,sEvent,sGroup,sType,vFilter,fpCallback){
            var oEventInfo;
            try{
                oEventInfo=eventStore[sKey]["event"][sEvent]["type"][sGroup]
            }
            catch(e){
                return
            }
            var aNewCallback=[];
            var aOldCallback;
            if(sType==="normal"){
                aOldCallback=oEventInfo.normal
            }
            else{
                aOldCallback=oEventInfo.delegate[vFilter].callback
            }
            if(sEvent==NONE_GROUP||MobileCommentJindo.$Jindo.isFunction(fpCallback)){
                for(var i=0,l=aOldCallback.length;
                i<l;
                i++){
                    if((aOldCallback[i]._origin_||aOldCallback[i])!=fpCallback){
                        aNewCallback.push(aOldCallback[i])
                    }
                    
                }
                
            }
            if(sType==="normal"){
                delete oEventInfo.normal;
                oEventInfo.normal=aNewCallback
            }
            else{
                if(sType==="delegate"){
                    delete oEventInfo.delegate[vFilter].callback;
                    oEventInfo.delegate[vFilter].callback=aNewCallback
                }
                
            }
            this.cleanUp(sKey,sEvent)
        }
        ,cleanUpAll:function(){
            var oEvent;
            for(var sKey in eventStore){
                if(eventStore.hasOwnProperty(sKey)){
                    this.cleanUpUsingKey(sKey,true)
                }
                
            }
            
        }
        ,cleanUpUsingKey:function(sKey,bForce){
            var oEvent;
            try{
                oEvent=eventStore[sKey].event
            }
            catch(e){
                return
            }
            for(var sEvent in oEvent){
                if(oEvent.hasOwnProperty(sEvent)){
                    this.cleanUp(sKey,sEvent,bForce)
                }
                
            }
            
        }
        ,cleanUp:function(sKey,sEvent,bForce){
            var oTypeInfo;
            try{
                oTypeInfo=eventStore[sKey]["event"][sEvent]["type"]
            }
            catch(e){
                return
            }
            var oEventInfo;
            var bHasEvent=false;
            if(!bForce){
                for(var i in oTypeInfo){
                    if(oTypeInfo.hasOwnProperty(i)){
                        oEventInfo=oTypeInfo[i];
                        if(oEventInfo.normal.length){
                            bHasEvent=true;
                            break
                        }
                        var oDele=oEventInfo.delegate;
                        for(var j in oDele){
                            if(oDele.hasOwnProperty(j)){
                                if(oDele[j].callback.length){
                                    bHasEvent=true;
                                    break
                                }
                                
                            }
                            
                        }
                        if(bHasEvent){
                            break
                        }
                        
                    }
                    
                }
                
            }
            if(!bHasEvent){
                MobileCommentJindo.$Element._unEventBind(eventStore[sKey].ele,sEvent,eventStore[sKey]["event"][sEvent]["listener"]);
                delete eventStore[sKey]["event"][sEvent];
                var bAllDetach=true;
                var oEvent=eventStore[sKey]["event"];
                for(var k in oEvent){
                    if(oEvent.hasOwnProperty(k)){
                        bAllDetach=false;
                        break
                    }
                    
                }
                if(bAllDetach){
                    delete eventStore[sKey]
                }
                
            }
            
        }
        ,splitGroup:function(sEvent){
            var aMatch=/\s*(.+?)\s*\(\s*(.*?)\s*\)/.exec(sEvent);
            if(aMatch){
                return{
                    event:aMatch[1].toLowerCase(),group:aMatch[2].toLowerCase()
                }
                
            }
            else{
                return{
                    event:sEvent.toLowerCase(),group:NONE_GROUP
                }
                
            }
            
        }
        ,_getParent:function(oOwnEle,oEle){
            var e=oOwnEle;
            var a=[],p=null;
            var oDoc=oEle.ownerDocument||oEle.document||document;
            while(oEle.parentNode&&p!=e){
                p=oEle.parentNode;
                if(p==oDoc.documentElement){
                    break
                }
                a[a.length]=p;
                oEle=p
            }
            return a
        }
        
    }
    
})();
MobileCommentJindo.$Element._domready=function(doc,func){
    if(MobileCommentJindo.$Element._domready.list===undefined){
        var f=null,l=MobileCommentJindo.$Element._domready.list=[func];
        var done=false,execFuncs=function(){
            if(!done){
                done=true;
                var evt={
                    type:"domready",target:doc,currentTarget:doc
                };
                while(f=l.shift()){
                    f(evt)
                }
                
            }
            
        };
        (function(){
            try{
                doc.documentElement.doScroll("left")
            }
            catch(e){
                setTimeout(arguments.callee,50);
                return
            }
            execFuncs()
        })();
        doc.onreadystatechange=function(){
            if(doc.readyState=="complete"){
                doc.onreadystatechange=null;
                execFuncs()
            }
            
        }
        
    }
    else{
        MobileCommentJindo.$Element._domready.list.push(func)
    }
    
};
if(!MobileCommentJindo.$Jindo.isUndefined(window)&&!(_j_ag.indexOf("IEMobile")==-1&&_j_ag.indexOf("Mobile")>-1&&_JINDO_IS_SP)){
    (new MobileCommentJindo.$Element(window)).attach("unload",function(e){
        MobileCommentJindo.$Element.eventManager.cleanUpAll()
    })
}
MobileCommentJindo.$Element._getTransition=function(){
    var hasTransition=false,sTransitionName="";
    if(document.body.style.trasition){
        hasTransition=true;
        sTransitionName="trasition"
    }
    else{
        if(document.body.style.webkitTransition!==undefined){
            hasTransition=true;
            sTransitionName="webkitTransition"
        }
        else{
            if(document.body.style.OTransition!==undefined){
                hasTransition=true;
                sTransitionName="OTransition"
            }
            
        }
        
    }
    return(MobileCommentJindo.$Element._getTransition=function(){
        return{
            hasTransition:hasTransition,name:sTransitionName
        }
        
    })()
};
MobileCommentJindo.$Element.prototype.appear=function(duration,callback){
    var oTransition=MobileCommentJindo.$Element._getTransition();
    function appear(){
        var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
            "4voi":[],"4num":["nDuration:Numeric"],"4fun":["nDuration:Numeric","fpCallback:Function+"]
        }
        ,"$Element#appear");
        switch(oArgs+""){
            case"4voi":duration=0.3;
            callback=function(){};
            break;
            case"4num":duration=oArgs.nDuration;
            callback=function(){};
            break;
            case"4fun":duration=oArgs.nDuration
        }
        return[duration,callback]
    }
    if(oTransition.hasTransition){
        MobileCommentJindo.$Element.prototype.appear=function(duration,callback){
            var aOption=appear.apply(this,_toArray(arguments));
            duration=aOption[0];
            callback=aOption[1];
            var self=this;
            var ele=this._element;
            var name=oTransition.name;
            var bindFunc=function(){
                self.show();
                ele.style[name+"Property"]="";
                ele.style[name+"Duration"]="";
                ele.style[name+"TimingFunction"]="";
                ele.style.opacity="";
                callback(self);
                ele.removeEventListener(name+"End",arguments.callee,false)
            };
            if(!this.visible()){
                ele.style.opacity=ele.style.opacity||0;
                self.show()
            }
            ele.addEventListener(name+"End",bindFunc,false);
            ele.style[name+"Property"]="opacity";
            ele.style[name+"Duration"]=duration+"s";
            ele.style[name+"TimingFunction"]="linear";
            setTimeout(function(){
                ele.style.opacity="1"
            }
            ,1);
            return this
        }
        
    }
    else{
        MobileCommentJindo.$Element.prototype.appear=function(duration,callback){
            var aOption=appear.apply(this,_toArray(arguments));
            duration=aOption[0];
            callback=aOption[1];
            var self=this;
            var op=this.opacity();
            if(this._getCss(this._element,"display")=="none"){
                op=0
            }
            if(op==1){
                return this
            }
            try{
                clearTimeout(this._fade_timer)
            }
            catch(e){}var step=(1-op)/((duration||0.3)*100);
            var func=function(){
                op+=step;
                self.opacity(op);
                if(op>=1){
                    callback(self)
                }
                else{
                    self._fade_timer=setTimeout(func,10)
                }
                
            };
            this.show();
            func();
            return this
        }
        
    }
    return this.appear.apply(this,arguments)
};
MobileCommentJindo.$Element.prototype.disappear=function(duration,callback){
    var oTransition=MobileCommentJindo.$Element._getTransition();
    function disappear(){
        var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
            "4voi":[],"4num":["nDuration:Numeric"],"4fun":["nDuration:Numeric","fpCallback:Function+"]
        }
        ,"$Element#disappear");
        switch(oArgs+""){
            case"4voi":duration=0.3;
            callback=function(){};
            break;
            case"4num":duration=oArgs.nDuration;
            callback=function(){};
            break;
            case"4fun":duration=oArgs.nDuration
        }
        return[duration,callback]
    }
    if(oTransition.hasTransition){
        MobileCommentJindo.$Element.prototype.disappear=function(duration,callback){
            var aOption=disappear.apply(this,_toArray(arguments));
            duration=aOption[0];
            callback=aOption[1];
            var self=this;
            var name=oTransition.name;
            var bindFunc=function(){
                self.hide();
                ele.style[name+"Property"]="";
                ele.style[name+"Duration"]="";
                ele.style[name+"TimingFunction"]="";
                ele.style.opacity="";
                callback(self);
                this.removeEventListener(name+"End",arguments.callee,false)
            };
            var ele=this._element;
            ele.addEventListener(name+"End",bindFunc,false);
            ele.style[name+"Property"]="opacity";
            ele.style[name+"Duration"]=duration+"s";
            ele.style[name+"TimingFunction"]="linear";
            setTimeout(function(){
                ele.style.opacity="0"
            }
            ,1);
            return this
        }
        
    }
    else{
        MobileCommentJindo.$Element.prototype.disappear=function(duration,callback){
            var aOption=disappear.apply(this,_toArray(arguments));
            duration=aOption[0];
            callback=aOption[1];
            var self=this;
            var op=this.opacity();
            if(op==0){
                return this
            }
            try{
                clearTimeout(this._fade_timer)
            }
            catch(e){}var step=op/((duration||0.3)*100);
            var func=function(){
                op-=step;
                self.opacity(op);
                if(op<=0){
                    self._element.style.display="none";
                    self.opacity(1);
                    callback(self)
                }
                else{
                    self._fade_timer=setTimeout(func,10)
                }
                
            };
            func();
            return this
        }
        
    }
    return this.disappear.apply(this,arguments)
};
MobileCommentJindo.$Element.prototype.offset=function(nTop,nLeft){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        g:[],s:["nTop:Numeric","nLeft:Numeric"]
    }
    ,"$Element#offset");
    switch(oArgs+""){
        case"g":return this.offset_get();
        case"s":return this.offset_set(oArgs.nTop,oArgs.nLeft)
    }
    
};
MobileCommentJindo.$Element.prototype.offset_set=function(nTop,nLeft){
    var oEl=this._element;
    var oPhantom=null;
    if(isNaN(parseFloat(this._getCss(oEl,"top"),10))){
        oEl.style.top="0px"
    }
    if(isNaN(parseFloat(this._getCss(oEl,"left"),10))){
        oEl.style.left="0px"
    }
    var oPos=this.offset_get();
    var oGap={
        top:nTop-oPos.top,left:nLeft-oPos.left
    };
    oEl.style.top=parseFloat(this._getCss(oEl,"top"),10)+oGap.top+"px";
    oEl.style.left=parseFloat(this._getCss(oEl,"left"),10)+oGap.left+"px";
    return this
};
MobileCommentJindo.$Element.prototype.offset_get=function(nTop,nLeft){
    var oEl=this._element;
    var oPhantom=null;
    var bSafari=_JINDO_IS_SP;
    var bIE=_JINDO_IS_IE;
    var nVer=0;
    if(bIE){
        if(document.documentMode){
            nVer=document.documentMode
        }
        else{
            nVer=navigator.userAgent.match(/(?:MSIE) ([0-9.]+)/)[1]
        }
        
    }
    var fpSafari=function(oEl){
        var oPos={
            left:0,top:0
        };
        for(var oParent=oEl,oOffsetParent=oParent.offsetParent;
        oParent=oParent.parentNode;
        ){
            if(oParent.offsetParent){
                oPos.left-=oParent.scrollLeft;
                oPos.top-=oParent.scrollTop
            }
            if(oParent==oOffsetParent){
                oPos.left+=oEl.offsetLeft+oParent.clientLeft;
                oPos.top+=oEl.offsetTop+oParent.clientTop;
                if(!oParent.offsetParent){
                    oPos.left+=oParent.offsetLeft;
                    oPos.top+=oParent.offsetTop
                }
                oOffsetParent=oParent.offsetParent;
                oEl=oParent
            }
            
        }
        return oPos
    };
    var fpOthers=function(oEl){
        var oPos={
            left:0,top:0
        };
        var oDoc=oEl.ownerDocument||oEl.document||document;
        var oHtml=oDoc.documentElement;
        var oBody=oDoc.body;
        if(oEl.getBoundingClientRect){
            if(!oPhantom){
                var bHasFrameBorder=(window==top);
                if(!bHasFrameBorder){
                    try{
                        bHasFrameBorder=(window.frameElement&&window.frameElement.frameBorder==1)
                    }
                    catch(e){}
                }
                if((bIE&&nVer<8&&window.external)&&bHasFrameBorder){
                    oPhantom={
                        left:2,top:2
                    };
                    oBase=null
                }
                else{
                    oPhantom={
                        left:0,top:0
                    }
                    
                }
                
            }
            var box=oEl.getBoundingClientRect();
            if(oEl!==oHtml&&oEl!==oBody){
                oPos.left=box.left-oPhantom.left;
                oPos.top=box.top-oPhantom.top;
                oPos.left+=oHtml.scrollLeft||oBody.scrollLeft;
                oPos.top+=oHtml.scrollTop||oBody.scrollTop
            }
            
        }
        else{
            if(oDoc.getBoxObjectFor){
                var box=oDoc.getBoxObjectFor(oEl);
                var vpBox=oDoc.getBoxObjectFor(oHtml||oBody);
                oPos.left=box.screenX-vpBox.screenX;
                oPos.top=box.screenY-vpBox.screenY
            }
            else{
                for(var o=oEl;
                o;
                o=o.offsetParent){
                    oPos.left+=o.offsetLeft;
                    oPos.top+=o.offsetTop
                }
                for(var o=oEl.parentNode;
                o;
                o=o.parentNode){
                    if(o.tagName=="BODY"){
                        break
                    }
                    if(o.tagName=="TR"){
                        oPos.top+=2
                    }
                    oPos.left-=o.scrollLeft;
                    oPos.top-=o.scrollTop
                }
                
            }
            
        }
        return oPos
    };
    return(bSafari?fpSafari:fpOthers)(oEl)
};
MobileCommentJindo.$Element.prototype.evalScripts=function(sHTML){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4str":["sHTML:String+"]
    }
    ,"$Element#evalScripts");
    var aJS=[];
    sHTML=sHTML.replace(new RegExp("<script(\\s[^>]+)*>(.*?)<\/script>","gi"),function(_1,_2,sPart){
        aJS.push(sPart);
        return""
    });
    eval(aJS.join("\n"));
    return this
};
MobileCommentJindo.$Element._common=function(oElement,sMethod){
    try{
        return MobileCommentJindo.$Element(oElement)._element
    }
    catch(e){
        throw TypeError(e.message.replace(/\$Element/g,"$Element#"+sMethod).replace(/Element\.html/g,"Element.html#"+sMethod))
    }
    
};
MobileCommentJindo.$Element._prepend=function(oParent,oChild){
    var nodes=oParent.childNodes;
    if(nodes.length>0){
        oParent.insertBefore(oChild,nodes[0])
    }
    else{
        oParent.appendChild(oChild)
    }
    
};
MobileCommentJindo.$Element.prototype.append=function(oElement){
    this._element.appendChild(MobileCommentJindo.$Element._common(oElement,"append"));
    return this
};
MobileCommentJindo.$Element.prototype.prepend=function(oElement){
    MobileCommentJindo.$Element._prepend(this._element,MobileCommentJindo.$Element._common(oElement,"prepend"));
    return this
};
MobileCommentJindo.$Element.prototype.replace=function(oElement){
    oElement=MobileCommentJindo.$Element._common(oElement,"replace");
    if(MobileCommentJindo.cssquery){
        MobileCommentJindo.cssquery.release()
    }
    var e=this._element;
    var oParentNode=e.parentNode;
    if(oParentNode&&oParentNode.replaceChild){
        oParentNode.replaceChild(oElement,e);
        return this
    }
    var _o=oElement;
    oParentNode.insertBefore(_o,e);
    oParentNode.removeChild(e);
    return this
};
MobileCommentJindo.$Element.prototype.appendTo=function(oElement){
    MobileCommentJindo.$Element._common(oElement,"appendTo").appendChild(this._element);
    return this
};
MobileCommentJindo.$Element.prototype.prependTo=function(oElement){
    MobileCommentJindo.$Element._prepend(MobileCommentJindo.$Element._common(oElement,"prependTo"),this._element);
    return this
};
MobileCommentJindo.$Element.prototype.before=function(oElement){
    var o=MobileCommentJindo.$Element._common(oElement,"before");
    this._element.parentNode.insertBefore(o,this._element);
    return this
};
MobileCommentJindo.$Element.prototype.after=function(oElement){
    oElement=MobileCommentJindo.$Element._common(oElement,"after");
    this.before(oElement);
    MobileCommentJindo.$Element(oElement).before(this);
    return this
};
MobileCommentJindo.$Element.prototype.parent=function(pFunc,limit){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4voi":[],"4fun":["fpFunc:Function+"],"4nul":["fpFunc:Null"],for_function_number:["fpFunc:Function+","nLimit:Numeric"],for_null_number:["fpFunc:Null","nLimit:Numeric"]
    }
    ,"$Element#parent");
    var e=this._element;
    switch(oArgs+""){
        case"4voi":return e.parentNode?MobileCommentJindo.$Element(e.parentNode):null;
        case"4fun":case"4nul":limit=-1;
        break;
        case"for_function_number":case"for_null_number":if(oArgs.nLimit==0){
            limit=-1
        }
        
    }
    var a=[],p=null;
    while(e.parentNode&&limit--!=0){
        try{
            p=MobileCommentJindo.$Element(e.parentNode)
        }
        catch(e){
            p=null
        }
        if(e.parentNode==document.documentElement){
            break
        }
        if(!pFunc||(pFunc&&pFunc(p))){
            a[a.length]=p
        }
        e=e.parentNode
    }
    return a
};
MobileCommentJindo.$Element.prototype.child=function(pFunc,limit){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4voi":[],"4fun":["fpFunc:Function+"],"4nul":["fpFunc:Null"],for_function_number:["fpFunc:Function+","nLimit:Numeric"],for_null_number:["fpFunc:Null","nLimit:Numeric"]
    }
    ,"$Element#child");
    var e=this._element;
    var a=[],c=null,f=null;
    switch(oArgs+""){
        case"4voi":var child=e.childNodes;
        var filtered=[];
        for(var i=0,l=child.length;
        i<l;
        i++){
            if(child[i].nodeType==1){
                try{
                    filtered.push(MobileCommentJindo.$Element(child[i]))
                }
                catch(e){
                    filtered.push(null)
                }
                
            }
            
        }
        return filtered;
        case"4fun":case"4nul":limit=-1;
        break;
        case"for_function_number":case"for_null_number":if(oArgs.nLimit==0){
            limit=-1
        }
        
    }
    (f=function(el,lim){
        var ch=null,o=null;
        for(var i=0;
        i<el.childNodes.length;
        i++){
            ch=el.childNodes[i];
            if(ch.nodeType!=1){
                continue
            }
            try{
                o=MobileCommentJindo.$Element(el.childNodes[i])
            }
            catch(e){
                o=null
            }
            if(!pFunc||(pFunc&&pFunc(o))){
                a[a.length]=o
            }
            if(lim!=0){
                f(el.childNodes[i],lim-1)
            }
            
        }
        
    })(e,limit-1);
    return a
};
MobileCommentJindo.$Element.prototype.prev=function(pFunc){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4voi":[],"4fun":["fpFunc:Function+"],"4nul":["fpFunc:Null"]
    }
    ,"$Element#prev");
    var e=this._element;
    var a=[];
    switch(oArgs+""){
        case"4voi":if(!e){
            return null
        }
        do{
            e=e.previousSibling;
            if(!e||e.nodeType!=1){
                continue
            }
            try{
                if(e==null){
                    return null
                }
                return MobileCommentJindo.$Element(e)
            }
            catch(e){
                return null
            }
            
        }
        while(e);
        try{
            if(e==null){
                return null
            }
            return MobileCommentJindo.$Element(e)
        }
        catch(e){
            return null
        }
        case"4fun":case"4nul":if(!e){
            return a
        }
        do{
            e=e.previousSibling;
            if(!e||e.nodeType!=1){
                continue
            }
            if(!pFunc||pFunc(e)){
                try{
                    if(e==null){
                        a[a.length]=null
                    }
                    else{
                        a[a.length]=MobileCommentJindo.$Element(e)
                    }
                    
                }
                catch(e){
                    a[a.length]=null
                }
                
            }
            
        }
        while(e);
        try{
            return a
        }
        catch(e){
            return null
        }
        
    }
    
};
MobileCommentJindo.$Element.prototype.next=function(pFunc){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4voi":[],"4fun":["fpFunc:Function+"],"4nul":["fpFunc:Null"]
    }
    ,"$Element#next");
    var e=this._element;
    var a=[];
    switch(oArgs+""){
        case"4voi":if(!e){
            return null
        }
        do{
            e=e.nextSibling;
            if(!e||e.nodeType!=1){
                continue
            }
            try{
                if(e==null){
                    return null
                }
                return MobileCommentJindo.$Element(e)
            }
            catch(e){
                return null
            }
            
        }
        while(e);
        try{
            if(e==null){
                return null
            }
            return MobileCommentJindo.$Element(e)
        }
        catch(e){
            return null
        }
        case"4fun":case"4nul":if(!e){
            return a
        }
        do{
            e=e.nextSibling;
            if(!e||e.nodeType!=1){
                continue
            }
            if(!pFunc||pFunc(e)){
                try{
                    if(e==null){
                        a[a.length]=null
                    }
                    else{
                        a[a.length]=MobileCommentJindo.$Element(e)
                    }
                    
                }
                catch(e){
                    a[a.length]=null
                }
                
            }
            
        }
        while(e);
        try{
            return a
        }
        catch(e){
            return null
        }
        
    }
    
};
MobileCommentJindo.$Element.prototype.first=function(){
    var el=this._element.firstElementChild||this._element.firstChild;
    if(!el){
        return null
    }
    while(el&&el.nodeType!=1){
        el=el.nextSibling
    }
    try{
        return el?MobileCommentJindo.$Element(el):null
    }
    catch(e){
        return null
    }
    
};
MobileCommentJindo.$Element.prototype.last=function(){
    var el=this._element.lastElementChild||this._element.lastChild;
    if(!el){
        return null
    }
    while(el&&el.nodeType!=1){
        el=el.previousSibling
    }
    try{
        return el?MobileCommentJindo.$Element(el):null
    }
    catch(e){
        return null
    }
    
};
MobileCommentJindo.$Element._contain=function(eParent,eChild){
    if(document.compareDocumentPosition){
        return !!(eParent.compareDocumentPosition(eChild)&16)
    }
    else{
        if(eParent.contains){
            return(eParent!==eChild)&&(eParent.contains?eParent.contains(eChild):true)
        }
        else{
            if(document.body.contains){
                if(eParent===(eChild.ownerDocument||eChild.document)&&eChild.tagName&&eChild.tagName.toUpperCase()==="BODY"){
                    return true
                }
                if(eParent.nodeType===9&&eParent!==eChild){
                    eParent=eParent.body
                }
                try{
                    return(eParent!==eChild)&&(eParent.contains?eParent.contains(eChild):true)
                }
                catch(e){
                    return false
                }
                
            }
            else{
                var e=eParent;
                var el=eChild;
                while(e&&e.parentNode){
                    e=e.parentNode;
                    if(e==el){
                        return true
                    }
                    
                }
                return false
            }
            
        }
        
    }
    
};
MobileCommentJindo.$Element.prototype.isChildOf=function(element){
    try{
        return MobileCommentJindo.$Element._contain(MobileCommentJindo.$Element(element)._element,this._element)
    }
    catch(e){
        return false
    }
    
};
MobileCommentJindo.$Element.prototype.isParentOf=function(element){
    try{
        return MobileCommentJindo.$Element._contain(this._element,MobileCommentJindo.$Element(element)._element)
    }
    catch(e){
        return false
    }
    
};
MobileCommentJindo.$Element.prototype.isEqual=function(element){
    try{
        return(this._element===MobileCommentJindo.$Element(element)._element)
    }
    catch(e){
        return false
    }
    
};
MobileCommentJindo.$Element.prototype.fireEvent=function(sEvent,oProps){
    var _oParam={
        "4str":[MobileCommentJindo.$Jindo._F("sEvent:String+")],"4obj":["sEvent:String+","oProps:Hash+"]
    };
    function IE(sEvent,oProps){
        var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,_oParam,"$Element#fireEvent");
        sEvent=(sEvent+"").toLowerCase();
        var oEvent=document.createEventObject();
        switch(oArgs+""){
            case"4obj":oProps=oArgs.oProps;
            for(k in oProps){
                if(oProps.hasOwnProperty(k)){
                    oEvent[k]=oProps[k]
                }
                
            }
            oEvent.button=(oProps.left?1:0)+(oProps.middle?4:0)+(oProps.right?2:0);
            oEvent.relatedTarget=oProps.relatedElement||null
        }
        var ele=this._element;
        if(this.tag=="input"&&sEvent=="click"){
            if(ele.type=="checkbox"){
                ele.checked=(!ele.checked)
            }
            else{
                if(ele.type=="radio"){
                    ele.checked=true
                }
                
            }
            
        }
        this._element.fireEvent("on"+sEvent,oEvent);
        return this
    }
    function DOM2(sEvent,oProps){
        var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,_oParam,"$Element#fireEvent");
        var sType="HTMLEvents";
        sEvent=(sEvent+"").toLowerCase();
        if(sEvent=="click"||sEvent.indexOf("mouse")==0){
            sType="MouseEvent";
            if(sEvent=="mousewheel"){
                sEvent="dommousescroll"
            }
            
        }
        else{
            if(sEvent.indexOf("key")==0){
                sType="KeyboardEvent"
            }
            
        }
        var evt;
        switch(oArgs+""){
            case"4obj":oProps=oArgs.oProps;
            oProps.button=0+(oProps.middle?1:0)+(oProps.right?2:0);
            oProps.ctrl=oProps.ctrl||false;
            oProps.alt=oProps.alt||false;
            oProps.shift=oProps.shift||false;
            oProps.meta=oProps.meta||false;
            switch(sType){
                case"MouseEvent":evt=document.createEvent(sType);
                evt.initMouseEvent(sEvent,true,true,null,oProps.detail||0,oProps.screenX||0,oProps.screenY||0,oProps.clientX||0,oProps.clientY||0,oProps.ctrl,oProps.alt,oProps.shift,oProps.meta,oProps.button,oProps.relatedElement||null);
                break;
                case"KeyboardEvent":if(window.KeyEvent){
                    evt=document.createEvent("KeyEvents");
                    evt.initKeyEvent(sEvent,true,true,window,oProps.ctrl,oProps.alt,oProps.shift,oProps.meta,oProps.keyCode,oProps.keyCode)
                }
                else{
                    try{
                        evt=document.createEvent("Events")
                    }
                    catch(e){
                        evt=document.createEvent("UIEvents")
                    }
                    finally{
                        evt.initEvent(sEvent,true,true);
                        evt.ctrlKey=oProps.ctrl;
                        evt.altKey=oProps.alt;
                        evt.shiftKey=oProps.shift;
                        evt.metaKey=oProps.meta;
                        evt.keyCode=oProps.keyCode;
                        evt.which=oProps.keyCode
                    }
                    
                }
                break;
                default:evt=document.createEvent(sType);
                evt.initEvent(sEvent,true,true)
            }
            break;
            case"4str":evt=document.createEvent(sType);
            evt.initEvent(sEvent,true,true)
        }
        this._element.dispatchEvent(evt);
        return this
    }
    MobileCommentJindo.$Element.prototype.fireEvent=(document.dispatchEvent!==undefined)?DOM2:IE;
    return this.fireEvent.apply(this,_toArray(arguments))
};
MobileCommentJindo.$Element.prototype.empty=function(){
    if(MobileCommentJindo.cssquery){
        MobileCommentJindo.cssquery.release()
    }
    this.html("");
    return this
};
MobileCommentJindo.$Element.prototype.remove=function(oChild){
    if(MobileCommentJindo.cssquery){
        MobileCommentJindo.cssquery.release()
    }
    var ___element=MobileCommentJindo.$Element;
    ___element(___element._common(oChild,"remove")).leave();
    return this
};
MobileCommentJindo.$Element.prototype.leave=function(){
    var e=this._element;
    if(e.parentNode){
        if(MobileCommentJindo.cssquery){
            MobileCommentJindo.cssquery.release()
        }
        e.parentNode.removeChild(e)
    }
    if(this._element.__jindo__id){
        MobileCommentJindo.$Element.eventManager.cleanUpUsingKey(this._element.__jindo__id,true)
    }
    return this
};
MobileCommentJindo.$Element.prototype.wrap=function(wrapper){
    var e=this._element;
    wrapper=MobileCommentJindo.$Element._common(wrapper,"wrap");
    if(e.parentNode){
        e.parentNode.insertBefore(wrapper,e)
    }
    wrapper.appendChild(e);
    return this
};
MobileCommentJindo.$Element.prototype.ellipsis=function(stringTail){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4voi":[],"4str":["stringTail:String+"]
    }
    ,"$Element#ellipsis");
    stringTail=stringTail||"...";
    var txt=this.text();
    var len=txt.length;
    var padding=parseInt(this._getCss(this._element,"paddingTop"),10)+parseInt(this._getCss(this._element,"paddingBottom"),10);
    var cur_h=this._element.offsetHeight-padding;
    var i=0;
    var h=this.text("A")._element.offsetHeight-padding;
    if(cur_h<h*1.5){
        this.text(txt);
        return this
    }
    cur_h=h;
    while(cur_h<h*1.5){
        i+=Math.max(Math.ceil((len-i)/2),1);
        cur_h=this.text(txt.substring(0,i)+stringTail)._element.offsetHeight-padding
    }
    while(cur_h>h*1.5){
        i--;
        cur_h=this.text(txt.substring(0,i)+stringTail)._element.offsetHeight-padding
    }
    return this
};
MobileCommentJindo.$Element.prototype.indexOf=function(element){
    try{
        var e=MobileCommentJindo.$Element(element)._element;
        var n=this._element.childNodes;
        var c=0;
        var l=n.length;
        for(var i=0;
        i<l;
        i++){
            if(n[i].nodeType!=1){
                continue
            }
            if(n[i]===e){
                return c
            }
            c++
        }
        
    }
    catch(e){}return -1
};
MobileCommentJindo.$Element.prototype.queryAll=function(sSelector){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4str":["sSelector:String+"]
    }
    ,"$Element#queryAll");
    var arrEle=MobileCommentJindo.cssquery(sSelector,this._element);
    var returnArr=[];
    for(var i=0,l=arrEle.length;
    i<l;
    i++){
        returnArr.push(MobileCommentJindo.$Element(arrEle[i]))
    }
    return returnArr
};
MobileCommentJindo.$Element.prototype.query=function(sSelector){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4str":["sSelector:String+"]
    }
    ,"$Element#query");
    var ele=MobileCommentJindo.cssquery.getSingle(sSelector,this._element);
    return ele===null?ele:MobileCommentJindo.$Element(ele)
};
MobileCommentJindo.$Element.prototype.test=function(sSelector){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4str":["sSelector:String+"]
    }
    ,"$Element#test");
    return MobileCommentJindo.cssquery.test(this._element,sSelector)
};
MobileCommentJindo.$Element.prototype.xpathAll=function(sXPath){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4str":["sXPath:String+"]
    }
    ,"$Element#xpathAll");
    var arrEle=MobileCommentJindo.cssquery.xpath(sXPath,this._element);
    var returnArr=[];
    for(var i=0,l=arrEle.length;
    i<l;
    i++){
        returnArr.push(MobileCommentJindo.$Element(arrEle[i]))
    }
    return returnArr
};
MobileCommentJindo.$Element.insertAdjacentHTML=function(ins,html,insertType,type,fn,sType){
    var aArg=[html];
    aArg.callee=arguments.callee;
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(aArg,{
        "4str":["sHTML:String+"]
    }
    ,"$Element#"+sType);
    var _ele=ins._element;
    html=html+"";
    if(_ele.insertAdjacentHTML&&!(/^<(option|tr|td|th|col)(?:.*?)>/.test(html.replace(/^(\s|　)+|(\s|　)+$/g,"").toLowerCase()))){
        _ele.insertAdjacentHTML(insertType,html)
    }
    else{
        var oDoc=_ele.ownerDocument||_ele.document||document;
        var fragment=oDoc.createDocumentFragment();
        var defaultElement;
        var sTag=html.replace(/^(\s|　)+|(\s|　)+$/g,"");
        var oParentTag={
            option:"select",tr:"tbody",thead:"table",tbody:"table",col:"table",td:"tr",th:"tr",div:"div"
        };
        var aMatch=/^\<(option|tr|thead|tbody|td|th|col)(?:.*?)\>/i.exec(sTag);
        var sChild=aMatch===null?"div":aMatch[1].toLowerCase();
        var sParent=oParentTag[sChild];
        defaultElement=MobileCommentJindo._createEle(sParent,sTag,oDoc,true);
        var scripts=defaultElement.getElementsByTagName("script");
        for(var i=0,l=scripts.length;
        i<l;
        i++){
            scripts[i].parentNode.removeChild(scripts[i])
        }
        while(defaultElement[type]){
            fragment.appendChild(defaultElement[type])
        }
        fn(fragment.cloneNode(true))
    }
    return ins
};
MobileCommentJindo.$Element.prototype.appendHTML=function(sHTML){
    return MobileCommentJindo.$Element.insertAdjacentHTML(this,sHTML,"beforeEnd","firstChild",MobileCommentJindo.$Fn(function(oEle){
        var ele=this._element;
        if(ele.tagName.toLowerCase()==="table"){
            var nodes=ele.childNodes;
            for(var i=0,l=nodes.length;
            i<l;
            i++){
                if(nodes[i].nodeType==1){
                    ele=nodes[i];
                    break
                }
                
            }
            
        }
        ele.appendChild(oEle)
    }
    ,this).bind(),"appendHTML")
};
MobileCommentJindo.$Element.prototype.prependHTML=function(sHTML){
    var ___element=MobileCommentJindo.$Element;
    return ___element.insertAdjacentHTML(this,sHTML,"afterBegin","firstChild",MobileCommentJindo.$Fn(function(oEle){
        var ele=this._element;
        if(ele.tagName.toLowerCase()==="table"){
            var nodes=ele.childNodes;
            for(var i=0,l=nodes.length;
            i<l;
            i++){
                if(nodes[i].nodeType==1){
                    ele=nodes[i];
                    break
                }
                
            }
            
        }
        ___element._prepend(ele,oEle)
    }
    ,this).bind(),"prependHTML")
};
MobileCommentJindo.$Element.prototype.beforeHTML=function(sHTML){
    return MobileCommentJindo.$Element.insertAdjacentHTML(this,sHTML,"beforeBegin","firstChild",MobileCommentJindo.$Fn(function(oEle){
        this._element.parentNode.insertBefore(oEle,this._element)
    }
    ,this).bind(),"beforeHTML")
};
MobileCommentJindo.$Element.prototype.afterHTML=function(sHTML){
    return MobileCommentJindo.$Element.insertAdjacentHTML(this,sHTML,"afterEnd","firstChild",MobileCommentJindo.$Fn(function(oEle){
        this._element.parentNode.insertBefore(oEle,this._element.nextSibling)
    }
    ,this).bind(),"afterHTML")
};
MobileCommentJindo.$Element.prototype.hasEventListener=function(sEvent){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4str":["sEvent:String+"]
    }
    ,"$Element#hasEventListener");
    if(this._key){
        return !!MobileCommentJindo.$Element.eventManager.hasEvent(this._key,oArgs.sEvent)
    }
    return false
};
MobileCommentJindo.$Element.prototype.preventTapHighlight=function(bFlag){
    if(_JINDO_IS_MO){
        var sClassName="no_tap_highlight"+new Date().getTime();
        var elStyleTag=document.createElement("style");
        var elHTML=document.getElementsByTagName("html")[0];
        elStyleTag.type="text/css";
        elHTML.insertBefore(elStyleTag,elHTML.firstChild);
        var oSheet=elStyleTag.sheet||elStyleTag.styleSheet;
        oSheet.insertRule("."+sClassName+" { -webkit-tap-highlight-color: rgba(0,0,0,0); }",0);
        oSheet.insertRule("."+sClassName+" * { -webkit-tap-highlight-color: rgba(0,0,0,.25); }",0);
        MobileCommentJindo.$Element.prototype.preventTapHighlight=function(bFlag){
            return this[bFlag?"addClass":"removeClass"](sClassName)
        }
        
    }
    else{
        MobileCommentJindo.$Element.prototype.preventTapHighlight=function(bFlag){
            return this
        }
        
    }
    return this.preventTapHighlight.apply(this,_toArray(arguments))
};
MobileCommentJindo.$Fn=function(func,thisObject){
    var cl=arguments.callee;
    if(func instanceof cl){
        return func
    }
    if(!(this instanceof cl)){
        try{
            MobileCommentJindo.$Jindo._warn(arguments.length,2,"$Fn");
            return new cl(func,thisObject)
        }
        catch(e){
            if(e instanceof TypeError){
                return null
            }
            throw e
        }
        
    }
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4fun":["func:Function+"],"4fun2":["func:Function+","thisObject:Variant"],"4str":["func:String+","thisObject:String+"]
    }
    ,"$Fn");
    this._tmpElm=null;
    this._key=null;
    switch(oArgs+""){
        case"4str":this._func=eval("false||function("+func+"){"+thisObject+"}");
        break;
        case"4fun":case"4fun2":this._func=func;
        this._this=thisObject
    }
    
};
MobileCommentJindo.$Fn._commonPram=function(oPram,sMethod){
    return MobileCommentJindo.$Jindo.checkVarType(oPram,{
        "4ele":["eElement:Element+","sEvent:String+"],"4ele2":["eElement:Element+","sEvent:String+","bUseCapture:Boolean"],"4str":["eElement:String+","sEvent:String+"],"4str2":["eElement:String+","sEvent:String+","bUseCapture:Boolean"],"4arr":["aElement:Array+","sEvent:String+"],"4arr2":["aElement:Array+","sEvent:String+","bUseCapture:Boolean"],"4doc":["eElement:Document+","sEvent:String+"],"4win":["eElement:Window+","sEvent:String+"],"4doc2":["eElement:Document+","sEvent:String+","bUseCapture:Boolean"],"4win2":["eElement:Window+","sEvent:String+","bUseCapture:Boolean"]
    }
    ,sMethod)
};
MobileCommentJindo.$Fn.prototype.$value=function(){
    return this._func
};
MobileCommentJindo.$Fn.prototype.bind=function(){
    var a=_slice.call(arguments,0);
    var f=this._func;
    var t=this._this;
    var b=function(){
        var args=_slice.call(arguments,0);
        if(a.length){
            args=a.concat(args)
        }
        return f.apply(t,args)
    };
    return b
};
MobileCommentJindo.$Fn.prototype.attach=function(oElement,sEvent,bUseCapture){
    var oArgs=MobileCommentJindo.$Fn._commonPram(arguments,"$Fn#attach");
    var fn=null,l,ev=sEvent,el=oElement,ua=_j_ag;
    if(bUseCapture!==true){
        bUseCapture=false
    }
    this._bUseCapture=bUseCapture;
    switch(oArgs+""){
        case"4arr":case"4arr2":var el=oArgs.aElement;
        var ev=oArgs.sEvent;
        for(var i=0,l=el.length;
        i<l;
        i++){
            this.attach(el[i],ev,!!bUseCapture)
        }
        return this
    }
    fn=this._bind=this._bind?this._bind:this.bind();
    MobileCommentJindo.$Element(el).attach(ev,fn);
    return this
};
MobileCommentJindo.$Fn.prototype.detach=function(oElement,sEvent,bUseCapture){
    var oArgs=MobileCommentJindo.$Fn._commonPram(arguments,"$Fn#detach");
    var fn=null,l,el=oElement,ev=sEvent,ua=_j_ag;
    switch(oArgs+""){
        case"4arr":case"4arr2":var el=oArgs.aElement;
        var ev=oArgs.sEvent;
        for(var i=0,l=el.length;
        i<l;
        i++){
            this.detach(el[i],ev,!!bUseCapture)
        }
        return this
    }
    fn=this._bind=this._bind?this._bind:this.bind();
    MobileCommentJindo.$Element(oArgs.eElement).detach(oArgs.sEvent,fn);
    return this
};
MobileCommentJindo.$Fn.prototype.delay=function(nSec,args){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4num":["nSec:Numeric"],"4arr":["nSec:Numeric","args:Array+"]
    }
    ,"$Fn#delay");
    switch(oArgs+""){
        case"4num":args=args||[];
        break;
        case"4arr":args=oArgs.args
    }
    this._delayKey=setTimeout(this.bind.apply(this,args),nSec*1000);
    return this
};
MobileCommentJindo.$Fn.prototype.setInterval=function(nSec,args){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4num":["nSec:Numeric"],"4arr":["nSec:Numeric","args:Array+"]
    }
    ,"$Fn#setInterval");
    switch(oArgs+""){
        case"4num":args=args||[];
        break;
        case"4arr":args=oArgs.args
    }
    this._repeatKey=setInterval(this.bind.apply(this,args),nSec*1000);
    return this
};
MobileCommentJindo.$Fn.prototype.repeat=MobileCommentJindo.$Fn.prototype.setInterval;
MobileCommentJindo.$Fn.prototype.stopDelay=function(){
    if(this._delayKey!==undefined){
        window.clearTimeout(this._delayKey);
        delete this._delayKey
    }
    return this
};
MobileCommentJindo.$Fn.prototype.stopRepeat=function(){
    if(this._repeatKey!==undefined){
        window.clearInterval(this._repeatKey);
        delete this._repeatKey
    }
    return this
};
MobileCommentJindo.$Event=(function(isMobile){
    if(isMobile){
        return function(e){
            var cl=arguments.callee;
            if(e instanceof cl){
                return e
            }
            if(!(this instanceof cl)){
                return new cl(e)
            }
            this._event=this._posEvent=e;
            this._globalEvent=window.event;
            this.type=e.type.toLowerCase();
            if(this.type=="dommousescroll"){
                this.type="mousewheel"
            }
            else{
                if(this.type=="domcontentloaded"){
                    this.type="domready"
                }
                
            }
            this.isTouch=false;
            if(this.type.indexOf("touch")>-1){
                this._posEvent=e.changedTouches[0];
                this.isTouch=true
            }
            this.canceled=false;
            this.element=e.target||e.srcElement;
            this.currentElement=e.currentTarget;
            this.relatedElement=null;
            if(!MobileCommentJindo.$Jindo.isUndefined(e.relatedTarget)){
                this.relatedElement=e.relatedTarget
            }
            else{
                if(e.fromElement&&e.toElement){
                    this.relatedElement=e[(this.type=="mouseout")?"toElement":"fromElement"]
                }
                
            }
            
        }
        
    }
    else{
        return function(e){
            var cl=arguments.callee;
            if(e instanceof cl){
                return e
            }
            if(!(this instanceof cl)){
                return new cl(e)
            }
            if(e===undefined){
                e=window.event
            }
            if(e===window.event&&document.createEventObject){
                e=document.createEventObject(e)
            }
            this.isTouch=false;
            this._event=this._posEvent=e;
            this._globalEvent=window.event;
            this.type=e.type.toLowerCase();
            if(this.type=="dommousescroll"){
                this.type="mousewheel"
            }
            else{
                if(this.type=="domcontentloaded"){
                    this.type="domready"
                }
                
            }
            this.canceled=false;
            this.element=e.target||e.srcElement;
            this.currentElement=e.currentTarget;
            this.relatedElement=null;
            if(e.relatedTarget!==undefined){
                this.relatedElement=e.relatedTarget
            }
            else{
                if(e.fromElement&&e.toElement){
                    this.relatedElement=e[(this.type=="mouseout")?"toElement":"fromElement"]
                }
                
            }
            
        }
        
    }
    
})(_JINDO_IS_MO);
MobileCommentJindo.$Event.prototype.mouse=function(bIsScrollbar){
    MobileCommentJindo.$Jindo.checkVarType(arguments,{
        voi:[],bol:["bIsScrollbar:Boolean"]
    });
    var e=this._event;
    var ele=this.element;
    var delta=0;
    var left=false,mid=false,right=false;
    var left=e.which?e.button==0:!!(e.button&1);
    var mid=e.which?e.button==1:!!(e.button&4);
    var right=e.which?e.button==2:!!(e.button&2);
    var ret={};
    if(e.wheelDelta){
        delta=e.wheelDelta/120
    }
    else{
        if(e.detail){
            delta=-e.detail/3
        }
        
    }
    var scrollbar;
    if(bIsScrollbar){
        scrollbar=_event_isScroll(ele,e)
    }
    ret={
        delta:delta,left:left,middle:mid,right:right,scrollbar:scrollbar
    };
    this.mouse=function(bIsScrollbar){
        if(bIsScrollbar){
            ret.scrollbar=_event_isScroll(this.element,this._event);
            this.mouse=function(){
                return ret
            }
            
        }
        return ret
    };
    return ret
};
function _event_getScrollbarSize(){
    var oScrollbarSize={
        x:0,y:0
    };
    var elDummy=MobileCommentJindo.$(['<div style="',["overflow:scroll","width:100px","height:100px","position:absolute","left:-1000px","border:0","margin:0","padding:0"].join(" !important;"),' !important;">'].join(""));
    document.body.insertBefore(elDummy,document.body.firstChild);
    oScrollbarSize={
        x:elDummy.offsetWidth-elDummy.scrollWidth,y:elDummy.offsetHeight-elDummy.scrollHeight
    };
    document.body.removeChild(elDummy);
    elDummy=null;
    _event_getScrollbarSize=function(){
        return oScrollbarSize
    };
    return oScrollbarSize
}
function _event_isScroll(ele,e){
    if(ele.componentFromPoint){
        return/(scrollbar|outside)/.test(ele.componentFromPoint(e.clientX,e.clientY))
    }
    if(_JINDO_IS_FF){
        try{
            var name=e.originalTarget.localName;
            return(name==="thumb"||name==="slider"||name==="scrollcorner"||name==="scrollbarbutton")
        }
        catch(ex){
            return true
        }
        
    }
    var sDisplay=MobileCommentJindo.$Element(ele).css("display");
    if(sDisplay==="inline"){
        return false
    }
    var oPos={
        x:e.offsetX||e.layerX||0,y:e.offsetY||e.layerY||0
    };
    if(_JINDO_IS_WK){
        oPos.x-=ele.clientLeft;
        oPos.y-=ele.clientTop
    }
    var oScrollbarSize=_event_getScrollbarSize();
    var oScrollPos={
        x:[ele.clientWidth,ele.clientWidth+oScrollbarSize.x],y:[ele.clientHeight,ele.clientHeight+oScrollbarSize.y]
    };
    return((oScrollPos.x[0]<=oPos.x&&oPos.x<=oScrollPos.x[1])||(oScrollPos.y[0]<=oPos.y&&oPos.y<=oScrollPos.y[1]))
}
MobileCommentJindo.$Event.prototype.key=function(){
    var e=this._event;
    var k=e.keyCode||e.charCode;
    var ret={
        keyCode:k,alt:e.altKey,ctrl:e.ctrlKey,meta:e.metaKey,shift:e.shiftKey,up:(k==38),down:(k==40),left:(k==37),right:(k==39),enter:(k==13),esc:(k==27)
    };
    this.key=function(){
        return ret
    };
    return ret
};
MobileCommentJindo.$Event.prototype.pos=function(bGetOffset){
    MobileCommentJindo.$Jindo.checkVarType(arguments,{
        voi:[],bol:["bGetOffset:Boolean"]
    });
    var e=this._posEvent;
    var doc=(this.element.ownerDocument||document);
    var b=doc.body;
    var de=doc.documentElement;
    var pos=[b.scrollLeft||de.scrollLeft,b.scrollTop||de.scrollTop];
    var ret={
        clientX:e.clientX,clientY:e.clientY,pageX:"pageX" in e?e.pageX:e.clientX+pos[0]-b.clientLeft,pageY:"pageY" in e?e.pageY:e.clientY+pos[1]-b.clientTop,layerX:"offsetX" in e?e.offsetX:e.layerX-1,layerY:"offsetY" in e?e.offsetY:e.layerY-1
    };
    if(bGetOffset&&MobileCommentJindo.$Element){
        var offset=MobileCommentJindo.$Element(this.element).offset();
        ret.offsetX=ret.pageX-offset.left;
        ret.offsetY=ret.pageY-offset.top
    }
    return ret
};
MobileCommentJindo.$Event.prototype.stop=function(nCancel){
    MobileCommentJindo.$Jindo.checkVarType(arguments,{
        voi:[],num:["nCancel:Numeric"]
    });
    nCancel=nCancel||MobileCommentJindo.$Event.CANCEL_ALL;
    var e=(window.event&&window.event==this._globalEvent)?this._globalEvent:this._event;
    var b=!!(nCancel&MobileCommentJindo.$Event.CANCEL_BUBBLE);
    var d=!!(nCancel&MobileCommentJindo.$Event.CANCEL_DEFAULT);
    this.canceled=true;
    if(e.preventDefault!==undefined&&d){
        e.preventDefault()
    }
    if(e.stopPropagation!==undefined&&b){
        e.stopPropagation()
    }
    if(d){
        e.returnValue=false
    }
    if(b){
        e.cancelBubble=true
    }
    return this
};
MobileCommentJindo.$Event.prototype.stopDefault=function(){
    return this.stop(MobileCommentJindo.$Event.CANCEL_DEFAULT)
};
MobileCommentJindo.$Event.prototype.stopBubble=function(){
    return this.stop(MobileCommentJindo.$Event.CANCEL_BUBBLE)
};
MobileCommentJindo.$Event.CANCEL_BUBBLE=1;
MobileCommentJindo.$Event.CANCEL_DEFAULT=2;
MobileCommentJindo.$Event.CANCEL_ALL=3;
MobileCommentJindo.$Event.prototype.$value=function(){
    return this._event
};
(function(aType){
    var sTouches="Touch";
    for(var i=0,l=aType.length;
    i<l;
    i++){
        MobileCommentJindo.$Event.prototype[aType[i]+sTouches]=(function(sType){
            return function(nIndex){
                if(this.isTouch){
                    var oRet=[];
                    var ev=this._event[sType+"es"];
                    var l=ev.length;
                    var e;
                    for(var i=0;
                    i<l;
                    i++){
                        e=ev[i];
                        oRet.push({
                            id:e.identifier,event:this,element:e.target,_posEvent:e,pos:MobileCommentJindo.$Event.prototype.pos
                        })
                    }
                    this[sType]=function(nIndex){
                        var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
                            "void":[],"4num":["nIndex:Numeric"]
                        }
                        ,"$Event#"+sType);
                        if(oArgs+""=="void"){
                            return oRet
                        }
                        return oRet[nIndex]
                    }
                    
                }
                else{
                    this[sType]=function(nIndex){
                        throw new MobileCommentJindo.$Error(MobileCommentJindo.$Except.NOT_SUPPORT_METHOD,"$Event#"+sType)
                    }
                    
                }
                return this[sType].apply(this,_toArray(arguments))
            }
            
        })(aType[0]+sTouches)
    }
    
})(["changed","target"]);
MobileCommentJindo.$ElementList=function(els){
    var cl=arguments.callee;
    if(els instanceof cl){
        return els
    }
    if(!(this instanceof cl)){
        try{
            return new cl(els)
        }
        catch(e){
            if(e instanceof TypeError){
                return null
            }
            throw e
        }
        
    }
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4arr":["aEle:Array+"],"4str":["sCssQuery:String+"],"4nul":["oEle:Null"],"4und":["oEle:Undefined"]
    }
    ,"$ElementList");
    switch(oArgs+""){
        case"4arr":els=oArgs.aEle;
        break;
        case"4str":els=MobileCommentJindo.cssquery(oArgs.sCssQuery);
        break;
        case"4nul":case"4und":els=[]
    }
    this._elements=[];
    for(var i=0,l=els.length;
    i<l;
    i++){
        this._elements.push(MobileCommentJindo.$Element(els[i]))
    }
    
};
(function(proto){
    var setters=["show","hide","toggle","addClass","removeClass","toggleClass","fireEvent","leave","empty","className","width","height","text","html","css","attr"];
    for(var i=0,l=setters.length;
    i<l;
    i++){
        var name=setters[i];
        if(MobileCommentJindo.$Element.prototype[name]){
            proto[setters[i]]=(function(name){
                return function(){
                    try{
                        var args=[];
                        for(var j=0,m=arguments.length;
                        j<m;
                        j++){
                            args.push(arguments[j])
                        }
                        for(var k=0,n=this._elements.length;
                        k<n;
                        k++){
                            this._elements[k][name].apply(this._elements[k],args)
                        }
                        return this
                    }
                    catch(e){
                        throw TypeError(e.message.replace(/\$Element/g,"$Elementlist#"+name).replace(/Element\.html/g,"Elementlist.html#"+name))
                    }
                    
                }
                
            })(setters[i])
        }
        
    }
    var setters2=["appear","disappear"];
    for(var i=0,l=setters2.length;
    i<l;
    i++){
        if(MobileCommentJindo.$Element.prototype[name]){
            proto[setters2[i]]=(function(name){
                return function(duration,callback){
                    try{
                        var self=this;
                        for(var j=0,m=this._elements.length;
                        j<m;
                        j++){
                            if(j==m-1){
                                this._elements[j][name](duration,function(){
                                    callback(self)
                                })
                            }
                            else{
                                this._elements[j][name](duration)
                            }
                            
                        }
                        return this
                    }
                    catch(e){
                        throw TypeError(e.message.replace(/\$Element/g,"$Elementlist#"+name).replace(/Element\.html/g,"Elementlist.html#"+name))
                    }
                    
                }
                
            })(setters2[i])
        }
        
    }
    
})(MobileCommentJindo.$ElementList.prototype);
MobileCommentJindo.$ElementList.prototype.get=function(idx){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4num":["nIdx:Numeric"]
    }
    ,"$ElementList#get");
    return this._elements[idx]
};
MobileCommentJindo.$ElementList.prototype.getFirst=function(){
    return this._elements[0]
};
MobileCommentJindo.$ElementList.prototype.getLast=function(){
    return this._elements[Math.max(this._elements.length-1,0)]
};
MobileCommentJindo.$ElementList.prototype.length=function(nLen,oValue){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4voi":[],"4num":[MobileCommentJindo.$Jindo._F("nLen:Numeric")],"4var":["nLen:Numeric","oValue:Variant"]
    }
    ,"$ElementList#length");
    var waEle=MobileCommentJindo.$A(this._elements);
    try{
        return waEle.length.apply(waEle,_toArray(arguments))
    }
    catch(e){
        throw TypeError(e.message.replace(/\$A/g,"$Elementlist#length").replace(/A\.html/g,"Elementlist.html#length"))
    }
    
};
MobileCommentJindo.$ElementList.prototype.$value=function(){
    return this._elements
};
MobileCommentJindo.$S=function(str){
    var cl=arguments.callee;
    if(str instanceof cl){
        return str
    }
    if(!(this instanceof cl)){
        try{
            MobileCommentJindo.$Jindo._warn(arguments.length,1,"$Json");
            return new cl(str||"")
        }
        catch(e){
            if(e instanceof TypeError){
                return null
            }
            throw e
        }
        
    }
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4str":["str:String+"]
    }
    ,"$S");
    this._str=str+""
};
MobileCommentJindo.$S.prototype.$value=function(){
    return this._str
};
MobileCommentJindo.$S.prototype.toString=MobileCommentJindo.$S.prototype.$value;
MobileCommentJindo.$S.prototype.trim=function(){
    if("".trim){
        MobileCommentJindo.$S.prototype.trim=function(){
            return MobileCommentJindo.$S(this._str.trim())
        }
        
    }
    else{
        MobileCommentJindo.$S.prototype.trim=function(){
            return MobileCommentJindo.$S(this._str.replace(/^(\s|　)+/g,"").replace(/(\s|　)+$/g,""))
        }
        
    }
    return MobileCommentJindo.$S(this.trim())
};
MobileCommentJindo.$S.prototype.escapeHTML=function(){
    var entities={
        '"':"quot","&":"amp","<":"lt",">":"gt","'":"#39"
    };
    var s=this._str.replace(/[<>&"']/g,function(m0){
        return entities[m0]?"&"+entities[m0]+";":m0
    });
    return MobileCommentJindo.$S(s)
};
MobileCommentJindo.$S.prototype.stripTags=function(){
    return MobileCommentJindo.$S(this._str.replace(/<\/?(?:h[1-5]|[a-z]+(?:\:[a-z]+)?)[^>]*>/ig,""))
};
MobileCommentJindo.$S.prototype.times=function(nTimes){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4str":["nTimes:Numeric"]
    }
    ,"$S#times");
    if(!oArgs){
        return this
    }
    return MobileCommentJindo.$S(Array(oArgs.nTimes+1).join(this._str))
};
MobileCommentJindo.$S.prototype.unescapeHTML=function(){
    var entities={
        quot:'"',amp:"&",lt:"<",gt:">","#39":"'"
    };
    var s=this._str.replace(/&([a-z]+|#[0-9]+);/g,function(m0,m1){
        return entities[m1]?entities[m1]:m0
    });
    return MobileCommentJindo.$S(s)
};
MobileCommentJindo.$S.prototype.escape=function(){
    var s=this._str.replace(/([\u0080-\uFFFF]+)|[\n\r\t"'\\]/g,function(m0,m1,_){
        if(m1){
            return escape(m1).replace(/%/g,"\\")
        }
        return(_={
            "\n":"\\n","\r":"\\r","\t":"\\t"
        })[m0]?_[m0]:"\\"+m0
    });
    return MobileCommentJindo.$S(s)
};
MobileCommentJindo.$S.prototype.bytes=function(vConfig){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4voi":[],"4num":["nConfig:Numeric"],"4obj":["nConfig:Hash+"]
    }
    ,"$S#bytes");
    var code=0,bytes=0,i=0,len=this._str.length;
    var charset=((document.charset||document.characterSet||document.defaultCharset)+"");
    var cut,nBytes;
    switch(oArgs+""){
        case"4voi":cut=false;
        break;
        case"4num":cut=true;
        nBytes=vConfig;
        break;
        case"4obj":charset=vConfig.charset||charset;
        nBytes=vConfig.size||false;
        cut=!!nBytes;
        break
    }
    if(charset.toLowerCase()=="utf-8"){
        for(i=0;
        i<len;
        i++){
            code=this._str.charCodeAt(i);
            if(code<128){
                bytes+=1
            }
            else{
                if(code<2048){
                    bytes+=2
                }
                else{
                    if(code<65536){
                        bytes+=3
                    }
                    else{
                        bytes+=4
                    }
                    
                }
                
            }
            if(cut&&bytes>nBytes){
                this._str=this._str.substr(0,i);
                break
            }
            
        }
        
    }
    else{
        for(i=0;
        i<len;
        i++){
            bytes+=(this._str.charCodeAt(i)>128)?2:1;
            if(cut&&bytes>nBytes){
                this._str=this._str.substr(0,i);
                break
            }
            
        }
        
    }
    return cut?this:bytes
};
MobileCommentJindo.$S.prototype.parseString=function(){
    if(this._str==""){
        return{}
    }
    var str=this._str.split(/&/g),pos,key,val,buf={},isescape=false;
    for(var i=0;
    i<str.length;
    i++){
        key=str[i].substring(0,pos=str[i].indexOf("=")),isescape=false;
        try{
            val=decodeURIComponent(str[i].substring(pos+1))
        }
        catch(e){
            isescape=true;
            val=decodeURIComponent(unescape(str[i].substring(pos+1)))
        }
        if(key.substr(key.length-2,2)=="[]"){
            key=key.substring(0,key.length-2);
            if(MobileCommentJindo.$Jindo.isUndefined(buf[key])){
                buf[key]=[]
            }
            buf[key][buf[key].length]=isescape?escape(val):val
        }
        else{
            buf[key]=isescape?escape(val):val
        }
        
    }
    return buf
};
MobileCommentJindo.$S.prototype.escapeRegex=function(){
    var s=this._str;
    var r=/([\?\.\*\+\-\/\(\)\{\}\[\]\:\!\^\$\\\|])/g;
    return MobileCommentJindo.$S(s.replace(r,"\\$1"))
};
MobileCommentJindo.$S.prototype.format=function(){
    var args=arguments;
    var idx=0;
    var s=this._str.replace(/%([ 0])?(-)?([1-9][0-9]*)?([bcdsoxX])/g,function(m0,m1,m2,m3,m4){
        var a=args[idx++];
        var ret="",pad="";
        m3=m3?+m3:0;
        if(m4=="s"){
            ret=a+""
        }
        else{
            if(" bcdoxX".indexOf(m4)>0){
                if(!MobileCommentJindo.$Jindo.isNumeric(a)){
                    return""
                }
                ret=(m4=="c")?String.fromCharCode(a):a.toString(({
                    b:2,d:10,o:8,x:16,X:16
                })[m4]);
                if(" X".indexOf(m4)>0){
                    ret=ret.toUpperCase()
                }
                
            }
            
        }
        if(ret.length<m3){
            pad=MobileCommentJindo.$S(m1||" ").times(m3-ret.length)._str
        }
        (m2=="-")?(ret+=pad):(ret=pad+ret);
        return ret
    });
    return MobileCommentJindo.$S(s)
};
MobileCommentJindo.$Document=function(el){
    var cl=arguments.callee;
    if(el instanceof cl){
        return el
    }
    if(!(this instanceof cl)){
        try{
            MobileCommentJindo.$Jindo._warn(arguments.length,1,"$Document");
            return new cl(el||document)
        }
        catch(e){
            if(e instanceof TypeError){
                return null
            }
            throw e
        }
        
    }
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4doc":["oDocument:Document+"]
    }
    ,"$Document");
    if(oArgs==null){
        this._doc=document
    }
    else{
        this._doc=el
    }
    this._docKey=this.renderingMode()=="Standards"?"documentElement":"body"
};
(function(){
    var qu=MobileCommentJindo.cssquery;
    var type={
        query:qu.getSingle,queryAll:qu,xpathAll:qu.xpath
    };
    for(var i in type){
        MobileCommentJindo.$Document.prototype[i]=(function(sMethod,fp){
            return function(sQuery){
                var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
                    "4str":["sQuery:String+"]
                }
                ,"$Document#"+sMethod);
                return fp(sQuery,this._doc)
            }
            
        })(i,type[i])
    }
    
})();
MobileCommentJindo.$Document.prototype.$value=function(){
    return this._doc
};
MobileCommentJindo.$Document.prototype.scrollSize=function(){
    var oDoc=this._doc[_JINDO_IS_WK?"body":this._docKey];
    return{
        width:Math.max(oDoc.scrollWidth,oDoc.clientWidth),height:Math.max(oDoc.scrollHeight,oDoc.clientHeight)
    }
    
};
MobileCommentJindo.$Document.prototype.scrollPosition=function(){
    var oDoc=this._doc[_JINDO_IS_WK?"body":this._docKey];
    return{
        left:oDoc.scrollLeft||window.pageXOffset||window.scrollX||0,top:oDoc.scrollTop||window.pageYOffset||window.scrollY||0
    }
    
};
MobileCommentJindo.$Document.prototype.clientSize=function(){
    var oDoc=this._doc[this._docKey];
    var isSafari=_JINDO_IS_SP&&!_JINDO_IS_CH;
    return(isSafari)?{
        width:window.innerWidth,height:window.innerHeight
    }
    :{
        width:oDoc.clientWidth,height:oDoc.clientHeight
    }
    
};
MobileCommentJindo.$Document.prototype.renderingMode=function(){
    var agent=navigator.userAgent;
    var isIe=_JINDO_IS_IE;
    var isSafari=(_JINDO_IS_WK&&!_JINDO_IS_CH&&navigator.vendor.indexOf("Apple")>-1);
    var sRet;
    if("compatMode" in this._doc){
        sRet=this._doc.compatMode=="CSS1Compat"?"Standards":(isIe?"Quirks":"Almost")
    }
    else{
        sRet=isSafari?"Standards":"Quirks"
    }
    return sRet
};
MobileCommentJindo.$Form=function(el){
    var cl=arguments.callee;
    if(el instanceof cl){
        return el
    }
    if(!(this instanceof cl)){
        try{
            MobileCommentJindo.$Jindo._warn(arguments.length,1,"$Form");
            return new cl(el)
        }
        catch(e){
            if(e instanceof TypeError){
                return null
            }
            throw e
        }
        
    }
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4str":["oForm:String+"],"4ele":["oForm:Element+"]
    }
    ,"$Form");
    switch(oArgs+""){
        case"4str":el=MobileCommentJindo.$(el);
        break
    }
    if(!(el.tagName&&el.tagName.toUpperCase()=="FORM")){
        throw TypeError("only form")
    }
    this._form=el
};
MobileCommentJindo.$Form.prototype.$value=function(){
    return this._form
};
MobileCommentJindo.$Form.prototype.serialize=function(){
    var self=this;
    var oRet={};
    var nLen=arguments.length;
    var fpInsert=function(eEle,sKey){
        if(!eEle.disabled){
            var sVal=self.value(sKey);
            if(sVal!==undefined){
                oRet[sKey]=sVal
            }
            
        }
        
    };
    if(nLen==0){
        var len=this._form.elements.length;
        for(var i=0;
        i<len;
        i++){
            var o=this._form.elements[i];
            if(o.name){
                fpInsert(o,o.name)
            }
            
        }
        
    }
    else{
        for(var i=0;
        i<nLen;
        i++){
            fpInsert(this.element(arguments[i]),arguments[i])
        }
        
    }
    return MobileCommentJindo.$H(oRet).toQueryString()
};
MobileCommentJindo.$Form.prototype.element=function(sKey){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4voi":[],"4str":[MobileCommentJindo.$Jindo._F("sKey:String+")]
    }
    ,"$Form#element");
    switch(oArgs+""){
        case"4voi":return _toArray(this._form.elements);
        case"4str":return this._form.elements[sKey+""]
    }
    
};
MobileCommentJindo.$Form.prototype.enable=function(sKey){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        s4bln:["sName:String+","bEnable:Boolean"],s4obj:["oObj:Hash+"],g:[MobileCommentJindo.$Jindo._F("sName:String+")]
    }
    ,"$Form#enable");
    switch(oArgs+""){
        case"s4bln":var aEls=this._form[sKey];
        if(!aEls){
            return this
        }
        aEls=aEls.nodeType==1?[aEls]:aEls;
        var sFlag=oArgs.bEnable;
        for(var i=0;
        i<aEls.length;
        i++){
            aEls[i].disabled=!sFlag
        }
        return this;
        case"s4obj":sKey=oArgs.oObj;
        var self=this;
        for(var k in sKey){
            if(sKey.hasOwnProperty(k)){
                self.enable(k,sKey[k])
            }
            
        }
        return this;
        case"g":var aEls=this._form[sKey];
        if(!aEls){
            return this
        }
        aEls=aEls.nodeType==1?[aEls]:aEls;
        var bEnabled=true;
        for(var i=0;
        i<aEls.length;
        i++){
            if(aEls[i].disabled){
                bEnabled=false;
                break
            }
            
        }
        return bEnabled
    }
    
};
MobileCommentJindo.$Form.prototype.value=function(sKey){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        s4str:["sKey:String+","vValue:Variant"],s4obj:[MobileCommentJindo.$Jindo._F("oObj:Hash+")],g:["sKey:String+"]
    }
    ,"$Form#value");
    if(oArgs+""=="s4obj"){
        var self=this;
        sKey=oArgs.oObj;
        for(var k in sKey){
            if(sKey.hasOwnProperty(k)){
                self.value(k,sKey[k])
            }
            
        }
        return this
    }
    var aEls=this._form[sKey];
    if(!aEls){
        throw new MobileCommentJindo.$Error(sKey+MobileCommentJindo.$Except.NONE_ELEMENT,"$Form#value")
    }
    aEls=aEls.nodeType==1?[aEls]:aEls;
    switch(oArgs+""){
        case"s4str":var sVal=oArgs.vValue;
        var nLen=aEls.length;
        for(var i=0;
        i<nLen;
        i++){
            var o=aEls[i];
            switch(o.type){
                case"radio":o.checked=(o.value==sVal);
                break;
                case"checkbox":if(sVal.constructor==Array){
                    o.checked=MobileCommentJindo.$A(sVal).has(o.value)
                }
                else{
                    o.checked=(o.value==sVal)
                }
                break;
                case"select-one":var nIndex=-1;
                for(var i=0,len=o.options.length;
                i<len;
                i++){
                    if(o.options[i].value==sVal){
                        nIndex=i
                    }
                    
                }
                o.selectedIndex=nIndex;
                break;
                case"select-multiple":var nIndex=-1;
                if(sVal.constructor==Array){
                    var waVal=MobileCommentJindo.$A(sVal);
                    for(var i=0,len=o.options.length;
                    i<len;
                    i++){
                        o.options[i].selected=waVal.has(o.options[i].value)
                    }
                    
                }
                else{
                    for(var i=0,len=o.options.length;
                    i<len;
                    i++){
                        if(o.options[i].value==sVal){
                            nIndex=i
                        }
                        
                    }
                    o.selectedIndex=nIndex
                }
                break;
                default:o.value=sVal
            }
            
        }
        return this;
        case"g":var aRet=[];
        var nLen=aEls.length;
        for(var i=0;
        i<nLen;
        i++){
            var o=aEls[i];
            switch(o.type){
                case"radio":case"checkbox":if(o.checked){
                    aRet.push(o.value)
                }
                break;
                case"select-one":if(o.selectedIndex!=-1){
                    aRet.push(o.options[o.selectedIndex].value)
                }
                break;
                case"select-multiple":if(o.selectedIndex!=-1){
                    for(var i=0,len=o.options.length;
                    i<len;
                    i++){
                        if(o.options[i].selected){
                            aRet.push(o.options[i].value)
                        }
                        
                    }
                    
                }
                break;
                default:aRet.push(o.value)
            }
            
        }
        return aRet.length>1?aRet:aRet[0]
    }
    
};
MobileCommentJindo.$Form.prototype.submit=function(sTargetName,fValidation){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        voi:[],"4str":["sTargetName:String+"],"4fun":["fValidation:Function+"],"4fun2":["sTargetName:String+","fValidation:Function+"]
    }
    ,"$Form#submit");
    var sOrgTarget=null;
    switch(oArgs+""){
        case"4str":sOrgTarget=this._form.target;
        this._form.target=oArgs.sTargetName;
        break;
        case"4fun":case"4fun2":if(!oArgs.fValidation(this._form)){
            return this
        }
        if(oArgs+""=="4fun2"){
            sOrgTarget=this._form.target;
            this._form.target=oArgs.sTargetName
        }
        
    }
    this._form.submit();
    if(!MobileCommentJindo.$Jindo.isNull(sOrgTarget)){
        this._form.target=sOrgTarget
    }
    return this
};
MobileCommentJindo.$Form.prototype.reset=function(fValidation){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4voi":[],"4fun":["fValidation:Function+"]
    }
    ,"$Form#reset");
    if(oArgs+""=="4fun"){
        if(!fValidation(this._form)){
            return this
        }
        
    }
    this._form.reset();
    return this
};
MobileCommentJindo.$Template=function(str){
    var obj=null,tag="";
    var cl=arguments.callee;
    if(str instanceof cl){
        return str
    }
    if(!(this instanceof cl)){
        try{
            MobileCommentJindo.$Jindo._warn(arguments.length,1,"$Template");
            return new cl(str||"")
        }
        catch(e){
            if(e instanceof TypeError){
                return null
            }
            throw e
        }
        
    }
    MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4str":["str:String+"],"4ele":["ele:Element+"]
    }
    ,"$Template");
    if((obj=document.getElementById(str)||str)&&obj.tagName&&(tag=obj.tagName.toUpperCase())&&(tag=="TEXTAREA"||(tag=="SCRIPT"&&obj.getAttribute("type")=="text/template"))){
        str=(obj.value||obj.innerHTML).replace(/^\s+|\s+$/g,"")
    }
    this._str=str+""
};
MobileCommentJindo.$Template.splitter=/(?!\\)[\{\}]/g;
MobileCommentJindo.$Template.pattern=/^(?:if (.+)|elseif (.+)|for (?:(.+)\:)?(.+) in (.+)|(else)|\/(if|for)|=(.+)|js (.+)|set (.+)|gset (.+))$/;
MobileCommentJindo.$Template.prototype.process=function(data){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4obj":["data:Hash+"],"4voi":[]
    }
    ,"$Template#process");
    var key="\x01";
    var leftBrace="\x02";
    var rightBrace="\x03";
    var tpl=(" "+this._str+" ").replace(/\\{/g,leftBrace).replace(/\\}/g,rightBrace).replace(/(?!\\)\}\{/g,"}"+key+"{").split(MobileCommentJindo.$Template.splitter),i=tpl.length;
    var map={
        '"':'\\"',"\\":"\\\\","\n":"\\n","\r":"\\r","\t":"\\t","\f":"\\f"
    };
    var reg=[/(["'](?:(?:\\.)+|[^\\["']+)*["']|[a-zA-Z_](?:[\w\.]|\[(?:.*?)\])*)/g,/[\n\r\t\f"\\]/g,/^\s+/,/\s+$/,/#/g];
    var cb=[function(m){
        return(m.substring(0,1)=='"'||m.substring(0,1)=="'"||m=="null"||m=="false"||m=="true")?m:"d."+m
    }
    ,function(m){
        return map[m]||m
    }
    ,"",""];
    var stm=[];
    var lev=0;
    tpl[0]=tpl[0].substr(1);
    tpl[i-1]=tpl[i-1].substr(0,tpl[i-1].length-1);
    if(i<2){
        return tpl[0]
    }
    tpl=tpl.reverse();
    var delete_info;
    while(i--){
        if(i%2){
            tpl[i]=tpl[i].replace(MobileCommentJindo.$Template.pattern,function(){
                var m=arguments;
                if(m[11]){
                    return m[11].replace(/(\w+)(?:\s*)=(?:\s*)(?:([a-zA-Z0-9_]+)|(.+))$/g,function(){
                        var mm=arguments;
                        var str="var "+mm[1]+"=";
                        if(mm[2]){
                            str+=mm[2]
                        }
                        else{
                            str+=mm[3].replace(/(=(?:[a-zA-Z_][\w\.]*)+)/g,function(m){
                                return(m.substring(0,1)=="=")?"d."+m.replace("=",""):m
                            })
                        }
                        return str
                    })+";"
                }
                if(m[10]){
                    var a=m[10].replace(/(\w+)(?:\s*)=(?:\s*)(?:([a-zA-Z0-9_]+)|(.+))$/g,function(){
                        var mm=arguments;
                        var str="d."+mm[1]+"=";
                        if(mm[2]){
                            str+="d."+mm[2]
                        }
                        else{
                            str+=mm[3].replace(/((?:[a-zA-Z_](?:[\w\.]|\[(?:.*?)\])*)+)/g,function(m){
                                return"d."+m
                            })
                        }
                        return str
                    })+";";
                    return a
                }
                if(m[9]){
                    return"s[i++]="+m[9].replace(/(=(?:[a-zA-Z_][\w\.]*)+)/g,function(m){
                        return(m.substring(0,1)=="=")?"d."+m.replace("=",""):m
                    })+";"
                }
                if(m[8]){
                    return"s[i++]= d."+m[8]+";"
                }
                if(m[1]){
                    return"if("+m[1].replace(reg[0],cb[0]).replace(/d\.(typeof) /,"$1 ").replace(/ d\.(instanceof) d\./," $1 ")+"){"
                }
                if(m[2]){
                    return"}else if("+m[2].replace(reg[0],cb[0]).replace(/d\.(typeof) /,"$1 ").replace(/ d\.(instanceof) d\./," $1 ")+"){"
                }
                if(m[5]){
                    delete_info=m[4];
                    var _aStr=[];
                    _aStr.push("var t#=d."+m[5]+"||{},p#=MobileCommentJindo.$Jindo.isArray(t#),i#=0;");
                    _aStr.push("for(var x# in t#){");
                    _aStr.push("if(!t#.hasOwnProperty(x#)){continue;}");
                    _aStr.push("	if( (p# && isNaN(i#=parseInt(x#,10))) || (!p# && !t#.propertyIsEnumerable(x#)) ) continue;");
                    _aStr.push("	d."+m[4]+"=t#[x#];");
                    _aStr.push(m[3]?"d."+m[3]+"=p#?i#:x#;":"");
                    return _aStr.join("").replace(reg[4],lev++)
                }
                if(m[6]){
                    return"}else{"
                }
                if(m[7]){
                    if(m[7]=="for"){
                        return"delete d."+delete_info+"; };"
                    }
                    else{
                        return"};"
                    }
                    
                }
                return m[0]
            })
        }
        else{
            if(tpl[i]==key){
                tpl[i]=""
            }
            else{
                if(tpl[i]){
                    tpl[i]='s[i++]="'+tpl[i].replace(reg[1],cb[1])+'";'
                }
                
            }
            
        }
        
    }
    tpl=tpl.reverse().join("").replace(new RegExp(leftBrace,"g"),"{").replace(new RegExp(rightBrace,"g"),"}");
    var _aStr=[];
    _aStr.push("d = d||{};");
    _aStr.push("var s=[],i=0;");
    _aStr.push(tpl);
    _aStr.push('return s.join("");');
    tpl=new Function("d",""+_aStr.join(""));
    tpl=tpl(oArgs+""=="for_void"?"":oArgs.data);
    return tpl
};
MobileCommentJindo.$Date=function(src){
    var a=arguments,t="";
    var cl=arguments.callee;
    if(src&&src instanceof cl){
        return src
    }
    if(!(this instanceof cl)){
        var str="";
        for(var i=0,l=a.length;
        i<l;
        i++){
            str+="a["+i+"],"
        }
        var init=new Function("cl","a","return new cl("+str.replace(/,$/,"")+");");
        try{
            MobileCommentJindo.$Jindo._warn(arguments.length,7,"$Date");
            return init(cl,a)
        }
        catch(e){
            if(e instanceof TypeError){
                return null
            }
            throw e
        }
        
    }
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4voi":[],"4str":["src:String+"],"4num":["src:Numeric"],"4dat":["src:Date+"],"4num2":["src:Numeric","src:Numeric"],"4num3":["src:Numeric","src:Numeric","src:Numeric"],"4num4":["src:Numeric","src:Numeric","src:Numeric","src:Numeric"],"4num5":["src:Numeric","src:Numeric","src:Numeric","src:Numeric","src:Numeric"],"4num6":["src:Numeric","src:Numeric","src:Numeric","src:Numeric","src:Numeric","src:Numeric"],"4num7":["src:Numeric","src:Numeric","src:Numeric","src:Numeric","src:Numeric","src:Numeric","src:Numeric"]
    }
    ,"$Date");
    switch(oArgs+""){
        case"4voi":this._date=new Date;
        break;
        case"4num":this._date=new Date(src*1);
        break;
        case"4str":if(/(\d\d\d\d)(?:-?(\d\d)(?:-?(\d\d)))/.test(src)){
            this._date=MobileCommentJindo.$Date._makeISO(src)
        }
        else{
            this._date=cl.parse(src)
        }
        break;
        case"4dat":(this._date=new Date).setTime(src.getTime());
        this._date.setMilliseconds(src.getMilliseconds());
        break;
        case"4num2":case"4num3":case"4num4":case"4num5":case"4num6":case"4num7":for(var i=0;
        i<7;
        i++){
            if(!MobileCommentJindo.$Jindo.isNumeric(a[i])){
                a[i]=1
            }
            
        }
        this._date=new Date(a[0],a[1],a[2],a[3],a[4],a[5],a[6])
    }
    this._names={};
    for(var i in MobileCommentJindo.$Date.names){
        if(MobileCommentJindo.$Date.names.hasOwnProperty(i)){
            this._names[i]=MobileCommentJindo.$Date.names[i]
        }
        
    }
    
};
MobileCommentJindo.$Date._makeISO=function(src){
    var match=src.match(/(\d\d\d\d)(?:-?(\d\d)(?:-?(\d\d)(?:[T ](\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|(?:([-+])(\d\d)(?::?(\d\d))?)?)?)?)?)?/);
    var hour=parseInt(match[4]||0,10);
    var min=parseInt(match[5]||0,10);
    if(match[8]=="Z"){
        hour+=MobileCommentJindo.$Date.utc
    }
    else{
        if(match[9]=="+"||match[9]=="-"){
            hour+=(MobileCommentJindo.$Date.utc-parseInt(match[9]+match[10],10));
            min+=parseInt(match[9]+match[11],10)
        }
        
    }
    return new Date(match[1]||0,parseInt(match[2]||0,10)-1,match[3]||0,hour,min,match[6]||0,match[7]||0)
};
MobileCommentJindo.$Date._paramCheck=function(aPram,sType){
    return MobileCommentJindo.$Jindo.checkVarType(aPram,{
        s:["nParm:Numeric"],g:[]
    }
    ,"$Date#"+sType)
};
MobileCommentJindo.$Date.names={
    month:["January","Febrary","March","April","May","June","July","August","September","October","Novermber","December"],s_month:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],day:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s_day:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ampm:["AM","PM"]
};
MobileCommentJindo.$Date.utc=9;
MobileCommentJindo.$Date.now=function(){
    if(Date.now){
        this.now=function(){
            return Date.now()
        }
        
    }
    else{
        this.now=function(){
            return +new Date()
        }
        
    }
    return this.now()
};
MobileCommentJindo.$Date.prototype.name=function(vName,aValue){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        s4str:["sKey:String+","aValue:Array+"],s4obj:["oObject:Hash+"],g:["sKey:String+"]
    }
    ,"$Date#name");
    switch(oArgs+""){
        case"s4str":this._names[vName]=aValue;
        break;
        case"s4obj":vName=oArgs.oObject;
        for(var i in vName){
            if(vName.hasOwnProperty(i)){
                this._names[i]=vName[i]
            }
            
        }
        break;
        case"g":return this._names[vName]
    }
    return this
};
MobileCommentJindo.$Date.parse=function(strDate){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4str":["sKey:String+"]
    }
    ,"$Date#parse");
    var date=new Date(Date.parse(strDate));
    if(isNaN(date)||date=="Invalid Date"){
        throw new MobileCommentJindo.$Error(MobileCommentJindo.$Except.INVALID_DATE,"$Date#parse")
    }
    return date
};
MobileCommentJindo.$Date.prototype.$value=function(){
    return this._date
};
MobileCommentJindo.$Date.prototype.format=function(strFormat){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4str":["sFormat:String+"]
    }
    ,"$Date#format");
    strFormat=oArgs.sFormat;
    var o={};
    var d=this._date;
    var name=this._names;
    var self=this;
    return(strFormat||"").replace(/[a-z]/ig,function callback(m){
        if(o[m]!==undefined){
            return o[m]
        }
        switch(m){
            case"d":case"j":o.j=d.getDate();
            o.d=(o.j>9?"":"0")+o.j;
            return o[m];
            case"l":case"D":case"w":case"N":o.w=d.getDay();
            o.N=o.w?o.w:7;
            o.D=name.s_day[o.w];
            o.l=name.day[o.w];
            return o[m];
            case"S":return(!!(o.S=["st","nd","rd"][d.getDate()]))?o.S:(o.S="th");
            case"z":o.z=Math.floor((d.getTime()-(new Date(d.getFullYear(),0,1)).getTime())/(3600*24*1000));
            return o.z;
            case"m":case"n":o.n=d.getMonth()+1;
            o.m=(o.n>9?"":"0")+o.n;
            return o[m];
            case"L":o.L=self.isLeapYear();
            return o.L;
            case"o":case"Y":case"y":o.o=o.Y=d.getFullYear();
            o.y=(o.o+"").substr(2);
            return o[m];
            case"a":case"A":case"g":case"G":case"h":case"H":o.G=d.getHours();
            o.g=(o.g=o.G%12)?o.g:12;
            o.A=o.G<12?name.ampm[0]:name.ampm[1];
            o.a=o.A.toLowerCase();
            o.H=(o.G>9?"":"0")+o.G;
            o.h=(o.g>9?"":"0")+o.g;
            return o[m];
            case"i":o.i=(((o.i=d.getMinutes())>9)?"":"0")+o.i;
            return o.i;
            case"s":o.s=(((o.s=d.getSeconds())>9)?"":"0")+o.s;
            return o.s;
            case"u":o.u=d.getMilliseconds();
            return o.u;
            case"U":o.U=self.time();
            return o.U;
            default:return m
        }
        
    })
};
MobileCommentJindo.$Date.prototype.time=function(nTime){
    var oArgs=MobileCommentJindo.$Date._paramCheck(arguments,"time");
    nTime=oArgs.nParm;
    switch(oArgs+""){
        case"s":this._date.setTime(nTime);
        return this;
        case"g":return this._date.getTime()
    }
    
};
MobileCommentJindo.$Date.prototype.year=function(nYear){
    var oArgs=MobileCommentJindo.$Date._paramCheck(arguments,"year");
    nYear=oArgs.nParm;
    switch(oArgs+""){
        case"s":this._date.setFullYear(nYear);
        return this;
        case"g":return this._date.getFullYear()
    }
    
};
MobileCommentJindo.$Date.prototype.month=function(nMon){
    var oArgs=MobileCommentJindo.$Date._paramCheck(arguments,"month");
    nMon=oArgs.nParm;
    switch(oArgs+""){
        case"s":this._date.setMonth(nMon);
        return this;
        case"g":return this._date.getMonth()
    }
    
};
MobileCommentJindo.$Date.prototype.date=function(nDate){
    var oArgs=MobileCommentJindo.$Date._paramCheck(arguments,"date");
    nDate=oArgs.nParm;
    switch(oArgs+""){
        case"s":this._date.setDate(nDate);
        return this;
        case"g":return this._date.getDate()
    }
    
};
MobileCommentJindo.$Date.prototype.day=function(){
    return this._date.getDay()
};
MobileCommentJindo.$Date.prototype.hours=function(nHour){
    var oArgs=MobileCommentJindo.$Date._paramCheck(arguments,"hours");
    nHour=oArgs.nParm;
    switch(oArgs+""){
        case"s":this._date.setHours(nHour);
        return this;
        case"g":return this._date.getHours()
    }
    
};
MobileCommentJindo.$Date.prototype.minutes=function(nMin){
    var oArgs=MobileCommentJindo.$Date._paramCheck(arguments,"minutes");
    nMin=oArgs.nParm;
    switch(oArgs+""){
        case"s":this._date.setMinutes(nMin);
        return this;
        case"g":return this._date.getMinutes()
    }
    
};
MobileCommentJindo.$Date.prototype.seconds=function(nSec){
    var oArgs=MobileCommentJindo.$Date._paramCheck(arguments,"seconds");
    nSec=oArgs.nParm;
    switch(oArgs+""){
        case"s":this._date.setSeconds(nSec);
        return this;
        case"g":return this._date.getSeconds()
    }
    
};
MobileCommentJindo.$Date.prototype.isLeapYear=function(){
    var y=this._date.getFullYear();
    return !(y%4)&&!!(y%100)||!(y%400)
};
MobileCommentJindo.$Date.prototype.compare=function(oDate,sType){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4dat":["oDate:Date+"],"4str":["oDate:Date+","sType:String+"]
    }
    ,"$Date#compare");
    oDate=oArgs.oDate;
    sType=oArgs.sType;
    if(!sType){
        return oDate-this._date
    }
    else{
        if(sType==="s"){
            return Math.floor(oDate/1000)-Math.floor(this._date/1000)
        }
        else{
            if(sType==="i"){
                return Math.floor(Math.floor(oDate/1000)/60)-Math.floor(Math.floor(this._date/1000)/60)
            }
            else{
                if(sType==="h"){
                    return Math.floor(Math.floor(Math.floor(oDate/1000)/60)/60)-Math.floor(Math.floor(Math.floor(this._date/1000)/60)/60)
                }
                else{
                    if(sType==="d"){
                        return Math.floor(Math.floor(Math.floor(Math.floor(oDate/1000)/60)/60)/24)-Math.floor(Math.floor(Math.floor(Math.floor(this._date/1000)/60)/60)/24)
                    }
                    else{
                        if(sType==="m"){
                            return oDate.getMonth()-this._date.getMonth()
                        }
                        else{
                            if(sType==="y"){
                                return oDate.getFullYear()-this._date.getFullYear()
                            }
                            
                        }
                        
                    }
                    
                }
                
            }
            
        }
        
    }
    
};
MobileCommentJindo.$Window=function(el){
    var cl=arguments.callee;
    if(el instanceof cl){
        return el
    }
    if(!(this instanceof cl)){
        try{
            MobileCommentJindo.$Jindo._warn(arguments.length,1,"$Window");
            return new cl(el||window)
        }
        catch(e){
            if(e instanceof TypeError){
                return null
            }
            throw e
        }
        
    }
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4win":["el:Window+"]
    }
    ,"$Window");
    this._win=el
};
MobileCommentJindo.$Window.prototype.$value=function(){
    return this._win
};
MobileCommentJindo.$Window.prototype.resizeTo=function(nWidth,nHeight){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4num":["nWidth:Numeric","nHeight:Numeric"]
    }
    ,"$Window#resizeTo");
    this._win.resizeTo(nWidth,nHeight);
    return this
};
MobileCommentJindo.$Window.prototype.resizeBy=function(nWidth,nHeight){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4num":["nWidth:Numeric","nHeight:Numeric"]
    }
    ,"$Window#resizeBy");
    this._win.resizeBy(nWidth,nHeight);
    return this
};
MobileCommentJindo.$Window.prototype.moveTo=function(nLeft,nTop){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4num":["nLeft:Numeric","nTop:Numeric"]
    }
    ,"$Window#moveTo");
    this._win.moveTo(nLeft,nTop);
    return this
};
MobileCommentJindo.$Window.prototype.moveBy=function(nLeft,nTop){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4num":["nLeft:Numeric","nTop:Numeric"]
    }
    ,"$Window#moveBy");
    this._win.moveBy(nLeft,nTop);
    return this
};
MobileCommentJindo.$Window.prototype.sizeToContent=function(nWidth,nHeight){
    var oArgs=MobileCommentJindo.$Jindo.checkVarType(arguments,{
        "4num":["nWidth:Numeric","nHeight:Numeric"]
    }
    ,"$Window#sizeToContent");
    if(this._win.sizeToContent){
        this._win.sizeToContent()
    }
    else{
        if(arguments.length!=2){
            var innerX,innerY;
            var self=this._win;
            var doc=this._win.document;
            if(self.innerHeight){
                innerX=self.innerWidth;
                innerY=self.innerHeight
            }
            else{
                if(doc.documentElement&&doc.documentElement.clientHeight){
                    innerX=doc.documentElement.clientWidth;
                    innerY=doc.documentElement.clientHeight
                }
                else{
                    if(doc.body){
                        innerX=doc.body.clientWidth;
                        innerY=doc.body.clientHeight
                    }
                    
                }
                
            }
            var pageX,pageY;
            var test1=doc.body.scrollHeight;
            var test2=doc.body.offsetHeight;
            if(test1>test2){
                pageX=doc.body.scrollWidth;
                pageY=doc.body.scrollHeight
            }
            else{
                pageX=doc.body.offsetWidth;
                pageY=doc.body.offsetHeight
            }
            nWidth=pageX-innerX;
            nHeight=pageY-innerY
        }
        this._win.resizeBy(nWidth,nHeight)
    }
    return this
};
if(typeof window!="undefined"){
    for(prop in MobileCommentJindo){
        if(MobileCommentJindo.hasOwnProperty(prop)){
            window[prop]=MobileCommentJindo[prop]
        }
        
    }
    
}
MobileCommentJindo.Component=MobileCommentJindo.$Class({
    _htEventHandler:null,_htOption:null,$init:function(){
        var aInstance=this.constructor.getInstance();
        aInstance.push(this);
        this._htEventHandler={};
        this._htOption={};
        this._htOption._htSetter={}
    }
    ,option:function(sName,vValue){
        switch(typeof sName){
            case"undefined":return this._htOption;
            case"string":if(typeof vValue!="undefined"){
                if(sName=="htCustomEventHandler"){
                    if(typeof this._htOption[sName]=="undefined"){
                        this.attach(vValue)
                    }
                    else{
                        return this
                    }
                    
                }
                this._htOption[sName]=vValue;
                if(typeof this._htOption._htSetter[sName]=="function"){
                    this._htOption._htSetter[sName](vValue)
                }
                
            }
            else{
                return this._htOption[sName]
            }
            break;
            case"object":for(var sKey in sName){
                if(sKey=="htCustomEventHandler"){
                    if(typeof this._htOption[sKey]=="undefined"){
                        this.attach(sName[sKey])
                    }
                    else{
                        continue
                    }
                    
                }
                this._htOption[sKey]=sName[sKey];
                if(typeof this._htOption._htSetter[sKey]=="function"){
                    this._htOption._htSetter[sKey](sName[sKey])
                }
                
            }
            break
        }
        return this
    }
    ,optionSetter:function(sName,fSetter){
        switch(typeof sName){
            case"undefined":return this._htOption._htSetter;
            case"string":if(typeof fSetter!="undefined"){
                this._htOption._htSetter[sName]=MobileCommentJindo.$Fn(fSetter,this).bind()
            }
            else{
                return this._htOption._htSetter[sName]
            }
            break;
            case"object":for(var sKey in sName){
                this._htOption._htSetter[sKey]=MobileCommentJindo.$Fn(sName[sKey],this).bind()
            }
            break
        }
        return this
    }
    ,fireEvent:function(sEvent,oEvent){
        oEvent=oEvent||{};
        var fInlineHandler=this["on"+sEvent],aHandlerList=this._htEventHandler[sEvent]||[],bHasInlineHandler=typeof fInlineHandler=="function",bHasHandlerList=aHandlerList.length>0;
        if(!bHasInlineHandler&&!bHasHandlerList){
            return true
        }
        aHandlerList=aHandlerList.concat();
        oEvent.sType=sEvent;
        if(typeof oEvent._aExtend=="undefined"){
            oEvent._aExtend=[];
            oEvent.stop=function(){
                if(oEvent._aExtend.length>0){
                    oEvent._aExtend[oEvent._aExtend.length-1].bCanceled=true
                }
                
            }
            
        }
        oEvent._aExtend.push({
            sType:sEvent,bCanceled:false
        });
        var aArg=[oEvent],i,nLen;
        for(i=2,nLen=arguments.length;
        i<nLen;
        i++){
            aArg.push(arguments[i])
        }
        if(bHasInlineHandler){
            fInlineHandler.apply(this,aArg)
        }
        if(bHasHandlerList){
            var fHandler;
            for(i=0,fHandler;
            (fHandler=aHandlerList[i]);
            i++){
                fHandler.apply(this,aArg)
            }
            
        }
        return !oEvent._aExtend.pop().bCanceled
    }
    ,attach:function(sEvent,fHandlerToAttach){
        if(arguments.length==1){
            MobileCommentJindo.$H(arguments[0]).forEach(MobileCommentJindo.$Fn(function(fHandler,sEvent){
                this.attach(sEvent,fHandler)
            }
            ,this).bind());
            return this
        }
        var aHandler=this._htEventHandler[sEvent];
        if(typeof aHandler=="undefined"){
            aHandler=this._htEventHandler[sEvent]=[]
        }
        aHandler.push(fHandlerToAttach);
        return this
    }
    ,detach:function(sEvent,fHandlerToDetach){
        if(arguments.length==1){
            MobileCommentJindo.$H(arguments[0]).forEach(MobileCommentJindo.$Fn(function(fHandler,sEvent){
                this.detach(sEvent,fHandler)
            }
            ,this).bind());
            return this
        }
        var aHandler=this._htEventHandler[sEvent];
        if(aHandler){
            for(var i=0,fHandler;
            (fHandler=aHandler[i]);
            i++){
                if(fHandler===fHandlerToDetach){
                    aHandler=aHandler.splice(i,1);
                    break
                }
                
            }
            
        }
        return this
    }
    ,detachAll:function(sEvent){
        var aHandler=this._htEventHandler;
        if(arguments.length){
            if(typeof aHandler[sEvent]=="undefined"){
                return this
            }
            delete aHandler[sEvent];
            return this
        }
        for(var o in aHandler){
            delete aHandler[o]
        }
        return this
    }
    
});
MobileCommentJindo.Component.factory=function(aObject,htOption){
    var aReturn=[],oInstance;
    if(typeof htOption=="undefined"){
        htOption={}
    }
    for(var i=0,el;
    (el=aObject[i]);
    i++){
        oInstance=new this(el,htOption);
        aReturn[aReturn.length]=oInstance
    }
    return aReturn
};
MobileCommentJindo.Component.getInstance=function(){
    if(typeof this._aInstance=="undefined"){
        this._aInstance=[]
    }
    return this._aInstance
};
if(typeof MobileCommentJindo.m=="undefined"&&typeof Node!="undefined"&&typeof ___Old__addEventListener___=="undefined"){
    var ___Old__addEventListener___=Node.prototype.addEventListener;
    Node.prototype.addEventListener=function(type,listener,useCapture){
        var callee=arguments.callee;
        if(callee&&type==="click"&&this.tagName==="A"){
            (this.___listeners___||(this.___listeners___=[])).push({
                listener:listener,useCapture:useCapture
            })
        }
        return ___Old__addEventListener___.apply(this,arguments)
    };
    var ___Old__removeEventListener___=Node.prototype.removeEventListener;
    Node.prototype.removeEventListener=function(type,listener,useCapture){
        var callee=arguments.callee;
        if(callee&&type==="click"&&this.tagName==="A"){
            if(this.___listeners___){
                this.___listeners___.pop()
            }
            
        }
        return ___Old__removeEventListener___.apply(this,arguments)
    }
    
}
MobileCommentJindo.m=(function(){
    var __M__=MobileCommentJindo.$Class({
        $init:function(){
            this._initVar();
            this._initDeviceInfo();
            this._attachEvent()
        }
        ,_initVar:function(){
            this.MOVETYPE={
                0:"hScroll",1:"vScroll",2:"dScroll",3:"tap",4:"longTap",5:"doubleTap"
            };
            this._isVertical=null;
            this._nPreWidth=-1;
            this._nRotateTimer=null;
            this._htHandler={};
            this._htDeviceInfo={}
        }
        ,_getOrientationChangeEvt:function(){
            var bEvtName="onorientationchange" in window?"orientationchange":"resize";
            var htInfo=this.getDeviceInfo();
            if((htInfo.android&&htInfo.version==="2.1")||htInfo.galaxyTab2){
                bEvtName="resize"
            }
            return bEvtName
        }
        ,_getVertical:function(){
            var bVertical=null,sEventType=this._getOrientationChangeEvt();
            if(sEventType==="resize"){
                var screenWidth=document.documentElement.clientWidth;
                if(screenWidth<this._nPreWidth){
                    bVertical=true
                }
                else{
                    if(screenWidth==this._nPreWidth){
                        bVertical=this._isVertical
                    }
                    else{
                        bVertical=false
                    }
                    
                }
                this._nPreWidth=screenWidth
            }
            else{
                var windowOrientation=window.orientation;
                if(windowOrientation===0||windowOrientation==180){
                    bVertical=true
                }
                else{
                    if(windowOrientation==90||windowOrientation==-90){
                        bVertical=false
                    }
                    
                }
                
            }
            return bVertical
        }
        ,_attachEvent:function(){
            this._rotateEvent=MobileCommentJindo.$Fn(this._onOrientationChange,this).attach(window,this._getOrientationChangeEvt()).attach(window,"load");
            this._pageShowEvent=MobileCommentJindo.$Fn(this._onPageshow,this).attach(window,"pageshow")
        }
        ,_initDeviceInfo:function(){
            var sName=navigator.userAgent;
            var ar=null;
            function f(s,h){
                return((h||"").indexOf(s)>-1)
            }
            this._htDeviceInfo.iphone=f("iPhone",sName);
            this._htDeviceInfo.ipad=f("iPad",sName);
            this._htDeviceInfo.android=f("Android",sName);
            this._htDeviceInfo.galaxyTab=f("SHW-M180S",sName)||f("SHW-M180K",sName)||f("SHW-M180L",sName);
            this._htDeviceInfo.galaxyTab2=f("SHW-M380S",sName)||f("SHW-M380K",sName);
            this._htDeviceInfo.galaxyK=f("SHW-M130K",sName);
            this._htDeviceInfo.galaxyU=f("SHW-M130L",sName);
            this._htDeviceInfo.galaxyS=f("SHW-M110S",sName)||f("SHW-M110K",sName)||f("SHW-M110L",sName);
            this._htDeviceInfo.galaxyS2=f("SHW-M250S",sName)||f("SHW-M250K",sName)||f("SHW-M250L",sName);
            this._htDeviceInfo.version="";
            this._htDeviceInfo.bChrome=this._htDeviceInfo.android&&f("CrMo",sName);
            this._htDeviceInfo.bInapp=false;
            if(this._htDeviceInfo.iphone||this._htDeviceInfo.ipad){
                ar=sName.match(/OS\s([\d|\_]+\s)/i);
                if(ar!==null&&ar.length>1){
                    this._htDeviceInfo.version=ar[1]
                }
                
            }
            else{
                if(this._htDeviceInfo.android){
                    ar=sName.match(/Android\s(\d\.\d)/i);
                    if(ar!==null&&ar.length>1){
                        this._htDeviceInfo.version=ar[1]
                    }
                    
                }
                
            }
            this._htDeviceInfo.version=this._htDeviceInfo.version.replace(/\_/g,".");
            for(var x in this._htDeviceInfo){
                if(typeof this._htDeviceInfo[x]=="boolean"&&this._htDeviceInfo[x]&&this._htDeviceInfo.hasOwnProperty(x)){
                    this._htDeviceInfo.name=x
                }
                
            }
            if(this._htDeviceInfo.iphone||this._htDeviceInfo.ipad){
                if(!f("Safari",sName)){
                    this._htDeviceInfo.bInapp=true
                }
                
            }
            else{
                if(this._htDeviceInfo.android){
                    sName=sName.toLowerCase();
                    if(f("inapp",sName)||f("app",sName.replace("applewebkit",""))){
                        this._htDeviceInfo.bInapp=true
                    }
                    
                }
                
            }
            
        }
        ,_onOrientationChange:function(we){
            var self=this;
            if(we.type==="load"){
                this._nPreWidth=document.documentElement.clientWidth;
                if(!this._htDeviceInfo.bInapp&&(this._htDeviceInfo.iphone||this._htDeviceInfo.ipad)){
                    this._isVertical=this._getVertical()
                }
                else{
                    if(this._nPreWidth>document.documentElement.clientHeight){
                        this._isVertical=false
                    }
                    else{
                        this._isVertical=true
                    }
                    
                }
                return
            }
            if(this._getOrientationChangeEvt()==="resize"){
                setTimeout(function(){
                    self._orientationChange(we)
                }
                ,0)
            }
            else{
                var nTime=200;
                if(this.getDeviceInfo().android){
                    nTime=500
                }
                clearTimeout(this._nRotateTimer);
                this._nRotateTimer=setTimeout(function(){
                    self._orientationChange(we)
                }
                ,nTime)
            }
            
        }
        ,_orientationChange:function(we){
            var nPreVertical=this._isVertical;
            this._isVertical=this._getVertical();
            if(MobileCommentJindo.$Agent().navigator().mobile||MobileCommentJindo.$Agent().os().ipad){
                if(nPreVertical!==this._isVertical){
                    this.fireEvent("mobilerotate",{
                        isVertical:this._isVertical
                    })
                }
                
            }
            else{
                this.fireEvent("mobilerotate",{
                    isVertical:this._isVertical
                })
            }
            
        }
        ,bindRotate:function(fHandlerToBind){
            var aHandler=this._htHandler.mobilerotate;
            if(typeof aHandler=="undefined"){
                aHandler=this._htHandler.mobilerotate=[]
            }
            aHandler.push(fHandlerToBind);
            this.attach("mobilerotate",fHandlerToBind)
        }
        ,unbindRotate:function(fHandlerToUnbind){
            var aHandler=this._htHandler.mobilerotate;
            if(aHandler){
                for(var i=0,fHandler;
                (fHandler=aHandler[i]);
                i++){
                    if(fHandler===fHandlerToUnbind){
                        aHandler.splice(i,1);
                        this.detach("mobilerotate",fHandlerToUnbind);
                        break
                    }
                    
                }
                
            }
            
        }
        ,_onPageshow:function(we){
            var self=this;
            setTimeout(function(){
                self.fireEvent("mobilePageshow",{})
            }
            ,300)
        }
        ,bindPageshow:function(fHandlerToBind){
            var aHandler=this._htHandler.mobilePageshow;
            if(typeof aHandler=="undefined"){
                aHandler=this._htHandler.mobilePageshow=[]
            }
            aHandler.push(fHandlerToBind);
            this.attach("mobilePageshow",fHandlerToBind)
        }
        ,unbindPageshow:function(fHandlerToUnbind){
            var aHandler=this._htHandler.mobilePageshow;
            if(aHandler){
                for(var i=0,fHandler;
                (fHandler=aHandler[i]);
                i++){
                    if(fHandler===fHandlerToUnbind){
                        aHandler.splice(i,1);
                        this.detach("mobilePageshow",fHandlerToUnbind);
                        break
                    }
                    
                }
                
            }
            
        }
        ,getDeviceInfo:function(){
            return this._htDeviceInfo
        }
        ,isVertical:function(){
            return this._isVertical
        }
        ,getNodeElement:function(el){
            while(el.nodeType!=1){
                el=el.parentNode
            }
            return el
        }
        ,getCssOffset:function(element){
            var htOffset;
            if(MobileCommentJindo.m.getDeviceInfo().android&&parseInt(MobileCommentJindo.m.getDeviceInfo().version,10)===3){
                htOffset=MobileCommentJindo.m._getCssOffsetFromStyle(element)
            }
            else{
                if("WebKitCSSMatrix" in window&&"m11" in new WebKitCSSMatrix()){
                    htOffset=MobileCommentJindo.m._getCssOffsetFromCSSMatrix(element)
                }
                else{
                    htOffset=MobileCommentJindo.m._getCssOffsetFromStyle(element)
                }
                
            }
            return htOffset
        }
        ,_getCssOffsetFromStyle:function(element){
            var nTop=nLeft=0,s=element.style[MobileCommentJindo.m.getCssPrefix()+"Transform"];
            if(!!s&&s.length>0){
                aTemp=s.match(/translate.{0,2}\((.*)\)/);
                if(!!aTemp&&aTemp.length>1){
                    var a=aTemp[1].split(",");
                    if(!!a&&a.length>1){
                        nTop=parseInt(a[1],10);
                        nLeft=parseInt(a[0],10)
                    }
                    
                }
                
            }
            return{
                top:nTop,left:nLeft
            }
            
        }
        ,_getCssOffsetFromCSSMatrix:function(element){
            var curTransform=new WebKitCSSMatrix(window.getComputedStyle(element).webkitTransform);
            return{
                top:curTransform.m42,left:curTransform.m41
            }
            
        }
        ,attachTransitionEnd:function(element,fHandlerToBind){
            var nVersion=+MobileCommentJindo.$Jindo().version.replace(/[a-z.]/gi,"");
            if(nVersion>=151){
                element._jindo_fn_=MobileCommentJindo.$Fn(fHandlerToBind,this).attach(element,"transitionend")
            }
            else{
                element.addEventListener("webkitTransitionEnd",fHandlerToBind,false)
            }
            
        }
        ,detachTransitionEnd:function(element,fHandlerToUnbind){
            var nVersion=+MobileCommentJindo.$Jindo().version.replace(/[a-z.]/gi,"");
            if(nVersion>=151){
                if(element._jindo_fn_){
                    element._jindo_fn_.detach(element,"transitionend");
                    delete element._jindo_fn_
                }
                
            }
            else{
                element.removeEventListener("webkitTransitionEnd",fHandlerToUnbind,false)
            }
            
        }
        ,getCssPrefix:function(){
            var sCssPrefix="";
            if(typeof document.body.style.MozTransition!=="undefined"){
                sCssPrefix="Moz"
            }
            else{
                if(typeof document.body.style.webkitTransition!=="undefined"){
                    sCssPrefix="webkit"
                }
                else{
                    if(typeof document.body.style.OTransition!=="undefined"){
                        sCssPrefix="O"
                    }
                    
                }
                
            }
            return sCssPrefix
        }
        ,getClosest:function(sSelector,elBaseElement){
            var elClosest;
            var welBaseElement=MobileCommentJindo.$Element(elBaseElement);
            var reg=/<\/?(?:h[1-5]|[a-z]+(?:\:[a-z]+)?)[^>]*>/ig;
            if(reg.test(sSelector)){
                if("<"+elBaseElement.tagName.toUpperCase()+">"==sSelector.toUpperCase()){
                    elClosest=elBaseElement
                }
                else{
                    elClosest=welBaseElement.parent(function(v){
                        if("<"+v.$value().tagName.toUpperCase()+">"==sSelector.toUpperCase()){
                            return v
                        }
                        
                    });
                    elClosest=elClosest.length?elClosest[0].$value():false
                }
                
            }
            else{
                if(sSelector.indexOf(".")==0){
                    sSelector=sSelector.substring(1,sSelector.length)
                }
                if(welBaseElement.hasClass(sSelector)){
                    elClosest=elBaseElement
                }
                else{
                    elClosest=welBaseElement.parent(function(v){
                        if(v.hasClass(sSelector)){
                            return v
                        }
                        
                    });
                    elClosest=elClosest.length?elClosest[0].$value():false
                }
                
            }
            return elClosest
        }
        
    }).extend(MobileCommentJindo.Component);
    return new __M__()
})();
MobileCommentJindo.UIComponent=MobileCommentJindo.$Class({
    $init:function(){
        this._bIsActivating=false
    }
    ,isActivating:function(){
        return this._bIsActivating
    }
    ,activate:function(){
        if(this.isActivating()){
            return this
        }
        this._bIsActivating=true;
        if(arguments.length>0){
            this._onActivate.apply(this,arguments)
        }
        else{
            this._onActivate()
        }
        return this
    }
    ,deactivate:function(){
        if(!this.isActivating()){
            return this
        }
        this._bIsActivating=false;
        if(arguments.length>0){
            this._onDeactivate.apply(this,arguments)
        }
        else{
            this._onDeactivate()
        }
        return this
    }
    
}).extend(MobileCommentJindo.Component);
MobileCommentJindo.m.CheckRadioCore=MobileCommentJindo.$Class({
    $init:function(el,htUserOption){},_initVar:function(sFormType,sFormClass){
        this._sFormType=sFormType;
        this._sFormFixClass=sFormClass;
        this._sUnitClass=this.option("sClassPrefix")+sFormClass+"-unit";
        this._sOnClass=this.option("sClassPrefix")+sFormClass+"-on";
        this._sFormClass=this.option("sClassPrefix")+sFormClass;
        this._sDisableClass=this.option("sClassPrefix")+sFormClass+"-disable";
        var oDeviceInfo=MobileCommentJindo.m.getDeviceInfo();
        this._bMobile=(oDeviceInfo.iphone||oDeviceInfo.ipad||oDeviceInfo.android);
        this._sClickEvent=(this._bMobile)?"touchend":"click";
        this._bMove=false
    }
    ,_setWrapperElement:function(el,sPrefix){
        this._htWElement={};
        this._aWElUnitList=[];
        this._aWElFormList=[];
        el=(typeof el=="string"?MobileCommentJindo.$(el):el);
        this._htWElement.base=MobileCommentJindo.$Element(el);
        this._htWElement.container=MobileCommentJindo.$Element(MobileCommentJindo.$$.getSingle("."+sPrefix+this._sFormFixClass+"-cont",el));
        var aUnitList=this._htWElement.container.queryAll("."+this._sUnitClass);
        var aFormList=this._htWElement.container.queryAll("."+this._sFormClass);
        for(var i=0;
        i<aUnitList.length;
        i++){
            this._aWElUnitList[i]=MobileCommentJindo.$Element(aUnitList[i]);
            this._aWElFormList[i]=MobileCommentJindo.$Element(aFormList[i])
        }
        
    }
    ,_onActivate:function(){
        this._attachEvent()
    }
    ,_onDeactivate:function(){
        this._detachEvent()
    }
    ,_attachEvent:function(){
        this._htEvent={};
        this._htEvent.form_touchmove={
            el:this._htWElement.container.$value(),ref:MobileCommentJindo.$Fn(this._onTouchMove,this).attach(this._htWElement.container.$value(),"touchmove")
        };
        this._htEvent["form_"+this._sClickEvent]={
            el:this._htWElement.container.$value(),ref:MobileCommentJindo.$Fn(this._onCheck,this).attach(this._htWElement.container.$value(),this._sClickEvent)
        };
        if(this._bMobile){
            for(var i=0;
            i<this._aWElFormList.length;
            i++){
                this._htEvent["form"+i+"_click"]={
                    el:this._aWElFormList[i].$value(),ref:MobileCommentJindo.$Fn(this._onFormClick,this).attach(this._aWElFormList[i].$value(),"click")
                }
                
            }
            
        }
        
    }
    ,_detachEvent:function(){
        for(var p in this._htEvent){
            var ht=this._htEvent[p];
            ht.ref.detach(ht.el,p.substring(p.lastIndexOf("_")+1))
        }
        this._htEvent=null
    }
    ,_onTouchMove:function(we){
        this._bMove=true
    }
    ,_onFormClick:function(we){
        var sClassName=this._sUnitClass;
        var welElement=MobileCommentJindo.$Element(we.element);
        welElement=welElement.parent(function(v){
            return v.hasClass(sClassName)
        })[0];
        var bCurrentChecked=we.element.checked;
        var sChecked=welElement.attr("data-cb-checked");
        var bChecked=(sChecked&&sChecked=="on")?true:false;
        if(bCurrentChecked!=bChecked){
            we.element.checked=bChecked
        }
        
    }
    ,_onCheck:function(we){
        if(we.element&&!this._bMove){
            var elEventElement=MobileCommentJindo.m.getNodeElement(we.element);
            var welElement=MobileCommentJindo.$Element(elEventElement);
            var sClassName=this._sUnitClass;
            var sTagName=elEventElement.tagName.toLowerCase();
            var sType=elEventElement.getAttribute("type");
            sType=(sType)?sType:"";
            if(this._htWElement.container.isParentOf(welElement)&&!welElement.hasClass(sClassName)){
                welElement=welElement.parent(function(v){
                    return v.hasClass(sClassName)
                })[0]
            }
            else{
                if((welElement.$value()===this._htWElement.container.$value())){
                    return false
                }
                
            }
            if((welElement.hasClass(this._sDisableClass))){
                return false
            }
            var bClickOverForm=false;
            if(sTagName=="input"&&sType.toLowerCase()==this._sFormType){
                bClickOverForm=true
            }
            this._afterCheck(welElement,bClickOverForm)
        }
        this._bMove=false
    }
    ,_afterCheck:function(welElement,bClickOverForm){},_getFormIdx:function(vElement){
        var aIdxList=[];
        var aElList=[];
        var sUnitClassName=this._sUnitClass;
        var sFormClassName=this._sFormClass;
        var waElUnitList=MobileCommentJindo.$A(this._aWElUnitList);
        var waElFormList=MobileCommentJindo.$A(this._aWElFormList);
        if(vElement instanceof Array){
            aElList=vElement
        }
        else{
            if(typeof vElement=="object"){
                aElList.push(vElement)
            }
            else{
                if(!vElement||vElement===null){
                    var nLength=this._aWElUnitList.length;
                    for(var i=0;
                    i<nLength;
                    i++){
                        aIdxList.push(i)
                    }
                    
                }
                
            }
            
        }
        var nIdx=-1;
        if(aElList.length>0){
            waElUnitList.forEach(function(welElement,nElIdx){
                for(var i=0;
                i<aElList.length;
                i++){
                    if(aElList[i]===welElement.$value()){
                        aIdxList.push(nElIdx)
                    }
                    
                }
                
            });
            if(aElList.length>aIdxList.length){
                waElFormList.forEach(function(welElement,nElIdx){
                    for(var i=0;
                    i<aElList.length;
                    i++){
                        if(aElList[i]===welElement.$value()){
                            aIdxList.push(nElIdx)
                        }
                        
                    }
                    
                })
            }
            
        }
        return aIdxList
    }
    ,_useSettingForm:function(vElement,bUse){
        var aIdx=this._getFormIdx(vElement);
        var aElFormList=[];
        var aElUnitList=[];
        var sEvent=(bUse)?"enable":"disable";
        for(var i=0;
        i<aIdx.length;
        i++){
            this._setUsedForm(bUse,this._aWElFormList[aIdx[i]].$value(),this._aWElUnitList[aIdx[i]]);
            aElFormList[i]=this._aWElFormList[aIdx[i]].$value();
            aElUnitList[i]=this._aWElUnitList[aIdx[i]].$value()
        }
        return{
            aFormList:aElFormList,aUnitList:aElUnitList
        }
        
    }
    ,_setUsedForm:function(bEnable,elForm,welUnit){
        if(!bEnable){
            welUnit.addClass(this._sDisableClass);
            elForm.disabled=true
        }
        else{
            welUnit.removeClass(this._sDisableClass);
            elForm.disabled=false
        }
        
    }
    ,destroy:function(){
        this.deactivate();
        for(var p in this._htWElement){
            this._htWElement[p]=null
        }
        this._htWElement=null;
        this._sUnitClass=null;
        this._sOnClass=null;
        this._sFormClass=null;
        this._sDisableClass=null;
        this._aWElUnitList=null;
        this._aWElFormList=null
    }
    
}).extend(MobileCommentJindo.UIComponent);
MobileCommentJindo.m.Effect=MobileCommentJindo.$Class({
    $init:function(){
        this._sCssPrefix=MobileCommentJindo.m.getCssPrefix();
        var htDInfo=MobileCommentJindo.m.getDeviceInfo();
        this.bIos=(htDInfo.iphone||htDInfo.ipad);
        this.bIos3=htDInfo.iphone&&(htDInfo.version.length>0)&&(htDInfo.version.substring(0,1)=="3");
        this.bAndroid=htDInfo.android;
        this.bAndroid3Up=htDInfo.android&&(htDInfo.version.length>0)&&(htDInfo.version.substring(0,1)>="3");
        this.bAndroid2_1=htDInfo.android&&(htDInfo.version.length>0)&&(htDInfo.version==="2.1");
        this.sTranOpen=(this.bIos)?"translate3d(":"translate(";
        this.sTranEnd=(this.bIos)?",0px)":")";
        this._initVar()
    }
    ,_initVar:function(){
        this._htLayerInfo={}
    }
    ,setLayerInfo:function(htInfo){
        this._htLayerInfo={};
        for(var p in htInfo){
            this._htLayerInfo[p]=htInfo[p]
        }
        
    }
    ,getTransitionTask:function(){
        return null
    }
    ,getBeforeCommand:function(){
        return null
    }
    
});
MobileCommentJindo.m.CorePagination=MobileCommentJindo.$Class({
    _nCurrentPage:1,$init:function(htUserOption){
        this.option({
            nItem:10,nItemPerPage:10,nPage:1,bActivateOnload:true
        });
        this.option(htUserOption||{});
        this._nCurrentPage=this.option("nPage")
    }
    ,getItemCount:function(){
        return this.option("nItem")
    }
    ,getItemPerPage:function(){
        return this.option("nItemPerPage")
    }
    ,getCurrentPage:function(){
        return this._nCurrentPage
    }
    ,setItemCount:function(n){
        this.option("nItem",n)
    }
    ,setItemPerPage:function(n){
        this.option("nItemPerPage",n)
    }
    ,movePageTo:function(n){
        var nBefore=this._nCurrentPage;
        var nPage=this._convertToAvailPage(n);
        if(nPage!=this._nCurrentPage){
            this._nCurrentPage=nPage
        }
        
    }
    ,nextPageTo:function(){
        var nPage=this._nCurrentPage+1;
        this.movePageTo(nPage)
    }
    ,previousPageTo:function(){
        var nPage=this._nCurrentPage-1;
        this.movePageTo(nPage)
    }
    ,hasNextPage:function(){
        var nPage=this.getCurrentPage(),totalPage=this.getTotalPages();
        return nPage&&(nPage<totalPage)
    }
    ,hasPreviousPage:function(){
        return(this.getCurrentPage()>1)
    }
    ,getTotalPages:function(){
        var nTotal=this.option("nItem"),nCount=this.option("nItemPerPage");
        if(!nCount){
            return null
        }
        return Math.ceil(nTotal/nCount)
    }
    ,getPageItemIndex:function(nPage){
        nPage=this._convertToAvailPage(nPage);
        var nTotal=this.option("nItem"),nCount=this.option("nItemPerPage"),start,end;
        if(!nPage||!nCount){
            return null
        }
        start=(nPage-1)*nCount;
        end=Math.min(start+nCount,nTotal)-1;
        return{
            nStart:start,nEnd:end
        }
        
    }
    ,getPageOfItem:function(n){
        return Math.ceil(n/this.getItemPerPage())
    }
    ,_convertToAvailPage:function(nPage){
        var nLastPage=this.getTotalPages();
        nPage=Math.max(nPage,1);
        nPage=Math.min(nPage,nLastPage);
        return nPage
    }
    
}).extend(MobileCommentJindo.UIComponent);
MobileCommentJindo.m.Validator=MobileCommentJindo.$Class({
    validate:function(sValue,sFormat){
        var sCorrectedValue=this._getCorrectedValue(sValue,sFormat),htResult={
            bValid:this._isValid(sCorrectedValue,sFormat),sCorrectedValue:null
        };
        if(sCorrectedValue!==sValue){
            htResult.sCorrectedValue=sCorrectedValue
        }
        return htResult
    }
    
});
MobileCommentJindo.m.Touch=MobileCommentJindo.$Class({
    $init:function(sId,htUserOption){
        this._el=MobileCommentJindo.$(sId);
        var htDefaultOption={
            nMomentumDuration:350,nMoveThreshold:7,nSlopeThreshold:25,nLongTapDuration:1000,nDoubleTapDuration:400,nTapThreshold:6,bActivateOnload:true
        };
        this.option(htDefaultOption);
        this.option(htUserOption||{});
        this._initVariable();
        this._setSlope();
        if(this.option("bActivateOnload")){
            this.activate()
        }
        
    }
    ,_initVariable:function(){
        this._hasTouchEvent="ontouchstart" in window;
        this._htMoveInfo={
            nStartX:0,nStartY:0,nBeforeX:0,nBeforeY:0,nStartTime:0,nBeforeTime:0
        };
        this.bStart=false;
        this.bMove=false;
        this.nMoveType=-1;
        this.htEndInfo={};
        this._nVSlope=0;
        this._nHSlope=0;
        this.bSetSlope=false
    }
    ,_attachEvents:function(){
        this._htEvent={};
        var bTouch=this._hasTouchEvent;
        this._htEvent[bTouch?"touchstart":"mousedown"]={
            ref:MobileCommentJindo.$Fn(this._onStart,this).attach(this._el,(bTouch?"touchstart":"mousedown")),el:this._el
        };
        this._htEvent[bTouch?"touchmove":"mousemove"]={
            ref:MobileCommentJindo.$Fn(this._onMove,this).attach(this._el,(bTouch?"touchmove":"mousemove")),el:this._el
        };
        this._htEvent[bTouch?"touchend":"mouseup"]={
            ref:MobileCommentJindo.$Fn(this._onEnd,this).attach(this._el,(bTouch?"touchend":"mouseup")),el:this._el
        };
        this._htEvent.rotate=MobileCommentJindo.$Fn(this._onResize,this).bind();
        MobileCommentJindo.m.bindRotate(this._htEvent.rotate);
        if(bTouch){
            this._htEvent.touchcancel={
                ref:MobileCommentJindo.$Fn(this._onCancle,this).attach(this._el,"touchcancel"),el:this._el
            }
            
        }
        
    }
    ,_detachEvents:function(){
        for(p in this._htEvent){
            var htTargetEvent=this._htEvent[p];
            if(htTargetEvent.ref){
                htTargetEvent.ref.detach(htTargetEvent.el,p)
            }
            
        }
        MobileCommentJindo.m.unbindRotate(this._htEvent.rotate);
        this._htEvent=null
    }
    ,_onCancle:function(oEvent){
        this._onEnd(oEvent)
    }
    ,_onStart:function(oEvent){
        this._resetTouchInfo();
        var htInfo=this._getTouchInfo(oEvent);
        if(!this._fireCustomEvent("touchStart",{
            element:htInfo.el,nX:htInfo.nX,nY:htInfo.nY,oEvent:oEvent
        })){
            return
        }
        this.bStart=true;
        this._htMoveInfo.nStartX=htInfo.nX;
        this._htMoveInfo.nBeforeX=htInfo.nX;
        this._htMoveInfo.nStartY=htInfo.nY;
        this._htMoveInfo.nBeforeY=htInfo.nY;
        this._htMoveInfo.nStartTime=htInfo.nTime;
        this._startLongTapTimer(htInfo,oEvent)
    }
    ,_onMove:function(oEvent){
        if(!this.bStart){
            return
        }
        this.bMove=true;
        var htInfo=this._getTouchInfo(oEvent);
        if(this.nMoveType<0||this.nMoveType==3||this.nMoveType==4){
            this.nMoveType=this._getMoveType(htInfo.nX,htInfo.nY)
        }
        if((typeof this._nLongTapTimer!="undefined")&&this.nMoveType!=3){
            this._deleteLongTapTimer()
        }
        var htParam=this._getCustomEventParam(htInfo,false);
        htParam.oEvent=oEvent;
        var nDis=0;
        if(this.nMoveType==0){
            nDis=Math.abs(htParam.nVectorX)
        }
        else{
            if(this.nMoveType==1){
                nDis=Math.abs(htParam.nVectorY)
            }
            else{
                nDis=Math.abs(htParam.nVectorX)+Math.abs(htParam.nVectorY)
            }
            
        }
        if(nDis<this.option("nMoveThreshold")){
            return
        }
        if(!this.fireEvent("touchMove",htParam)){
            this.bStart=false;
            return
        }
        this._htMoveInfo.nBeforeX=htInfo.nX;
        this._htMoveInfo.nBeforeY=htInfo.nY;
        this._htMoveInfo.nBeforeTime=htInfo.nTime
    }
    ,_onEnd:function(oEvent){
        if(!this.bStart){
            return
        }
        this._deleteLongTapTimer();
        if(!this.bMove&&(this.nMoveType!=4)){
            this.nMoveType=3
        }
        if(this.nMoveType<0){
            return
        }
        var htInfo=this._getTouchInfo(oEvent);
        if(this._isDblTap(htInfo.nX,htInfo.nY,htInfo.nTime)){
            clearTimeout(this._nTapTimer);
            delete this._nTapTimer;
            this.nMoveType=5
        }
        var htParam=this._getCustomEventParam(htInfo,true);
        htParam.oEvent=oEvent;
        var sMoveType=htParam.sMoveType;
        if((typeof this._htEventHandler[MobileCommentJindo.m.MOVETYPE[5]]!="undefined"&&(this._htEventHandler[MobileCommentJindo.m.MOVETYPE[5]].length>0))&&(this.nMoveType==3)){
            var self=this;
            this._nTapTimer=setTimeout(function(){
                self.fireEvent("touchEnd",htParam);
                self._fireCustomEvent(sMoveType,htParam);
                delete self._nTapTimer
            }
            ,this.option("nDoubleTapDuration"))
        }
        else{
            this.fireEvent("touchEnd",htParam);
            if(this.nMoveType!=4){
                this._fireCustomEvent(sMoveType,htParam)
            }
            
        }
        this._updateTouchEndInfo(htInfo);
        this._resetTouchInfo()
    }
    ,_fireCustomEvent:function(sEvent,htOption){
        return this.fireEvent(sEvent,htOption)
    }
    ,_getCustomEventParam:function(htTouchInfo,bTouchEnd){
        var sMoveType=MobileCommentJindo.m.MOVETYPE[this.nMoveType];
        var nDuration=htTouchInfo.nTime-this._htMoveInfo.nStartTime;
        var nVectorX=nVectorY=nMomentumX=nMomentumY=nSpeedX=nSpeedY=nDisX=nDisY=0;
        nDisX=(this.nMoveType===1)?0:htTouchInfo.nX-this._htMoveInfo.nStartX;
        nDisY=(this.nMoveType===0)?0:htTouchInfo.nY-this._htMoveInfo.nStartY;
        nVectorX=htTouchInfo.nX-this._htMoveInfo.nBeforeX;
        nVectorY=htTouchInfo.nY-this._htMoveInfo.nBeforeY;
        if(bTouchEnd&&(this.nMoveType==0||this.nMoveType==1||this.nMoveType==2)){
            if(nDuration<=this.option("nMomentumDuration")){
                nSpeedX=Math.abs(nDisX)/nDuration;
                nMomentumX=(nSpeedX*nSpeedX)/2;
                nSpeedY=Math.abs(nDisY)/nDuration;
                nMomentumY=(nSpeedY*nSpeedY)/2
            }
            
        }
        var htParam={
            element:htTouchInfo.el,nX:htTouchInfo.nX,nY:htTouchInfo.nY,nVectorX:nVectorX,nVectorY:nVectorY,nDistanceX:nDisX,nDistanceY:nDisY,sMoveType:sMoveType,nStartX:this._htMoveInfo.nStartX,nStartY:this._htMoveInfo.nStartY,nStartTimeStamp:this._htMoveInfo.nStartTime
        };
        if(bTouchEnd){
            htParam.nMomentumX=nMomentumX;
            htParam.nMomentumY=nMomentumY;
            htParam.nSpeedX=nSpeedX;
            htParam.nSpeedY=nSpeedY;
            htParam.nDuration=nDuration
        }
        return htParam
    }
    ,_updateTouchEndInfo:function(htInfo){
        this.htEndInfo={
            element:htInfo.el,time:htInfo.nTime,movetype:this.nMoveType,nX:htInfo.nX,nY:htInfo.nY
        }
        
    }
    ,_deleteLongTapTimer:function(){
        if(typeof this._nLongTapTimer!="undefined"){
            clearTimeout(this._nLongTapTimer);
            delete this._nLongTapTimer
        }
        
    }
    ,_startLongTapTimer:function(htInfo,oEvent){
        var self=this;
        if((typeof this._htEventHandler[MobileCommentJindo.m.MOVETYPE[4]]!="undefined")&&(this._htEventHandler[MobileCommentJindo.m.MOVETYPE[4]].length>0)){
            self._nLongTapTimer=setTimeout(function(){
                self.fireEvent("longTap",{
                    element:htInfo.el,oEvent:oEvent,nX:htInfo.nX,nY:htInfo.nY
                });
                delete self._nLongTapTimer;
                self.nMoveType=4
            }
            ,self.option("nLongTapDuration"))
        }
        
    }
    ,_onResize:function(){
        this._setSlope()
    }
    ,_isDblTap:function(nX,nY,nTime){
        if((typeof this._nTapTimer!="undefined")&&this.nMoveType==3){
            var nGap=this.option("nTapThreshold");
            if((Math.abs(this.htEndInfo.nX-nX)<=nGap)&&(Math.abs(this.htEndInfo.nY-nY)<=nGap)){
                return true
            }
            
        }
        return false
    }
    ,_setSlope:function(){
        if(!this.bSetSlope){
            this._nHSlope=((window.innerHeight/2)/window.innerWidth).toFixed(2)*1;
            this._nVSlope=(window.innerHeight/(window.innerWidth/2)).toFixed(2)*1
        }
        
    }
    ,setSlope:function(nVSlope,nHSlope){
        this._nHSlope=nHSlope;
        this._nVSlope=nVSlope;
        this.bSetSlope=true
    }
    ,getSlope:function(){
        return{
            nVSlope:this._nVSlope,nHSlope:this._nHSlope
        }
        
    }
    ,_resetTouchInfo:function(){
        for(var x in this._htMoveInfo){
            this._htMoveInfo[x]=0
        }
        this.bStart=false;
        this.bMove=false;
        this.nMoveType=-1
    }
    ,_getMoveType:function(x,y){
        var nType=this.nMoveType;
        var nX=Math.abs(this._htMoveInfo.nStartX-x);
        var nY=Math.abs(this._htMoveInfo.nStartY-y);
        var nDis=nX+nY;
        var nGap=this.option("nTapThreshold");
        if((nX<=nGap)&&(nY<=nGap)){
            nType=3
        }
        else{
            nType=-1
        }
        if(this.option("nSlopeThreshold")<=nDis){
            var nSlope=parseFloat((nY/nX).toFixed(2),10);
            if((this._nHSlope===-1)&&(this._nVSlope===-1)){
                nType=2
            }
            else{
                if(nSlope<=this._nHSlope){
                    nType=0
                }
                else{
                    if(nSlope>=this._nVSlope){
                        nType=1
                    }
                    else{
                        nType=2
                    }
                    
                }
                
            }
            
        }
        return nType
    }
    ,_getTouchInfo:function(oEvent){
        var e=this._hasTouchEvent?oEvent.$value().changedTouches[0]:oEvent;
        var el=this._hasTouchEvent?MobileCommentJindo.m.getNodeElement(e.target):e.element;
        var x=this._hasTouchEvent?e.pageX:e.pos().pageX;
        var y=this._hasTouchEvent?e.pageY:e.pos().pageY;
        return{
            el:el,nX:x,nY:y,nTime:oEvent.$value().timeStamp
        }
        
    }
    ,getBaseElement:function(el){
        return this._el
    }
    ,_onDeactivate:function(){
        this._detachEvents()
    }
    ,_onActivate:function(){
        this._attachEvents()
    }
    ,destroy:function(){
        this.deactivate();
        this._el=null;
        for(var p in this._htMoveInfo){
            this._htMoveInfo[p]=null
        }
        this._htMoveInfo=null;
        for(var p in this.htEndInfo){
            this.htEndInfo[p]=null
        }
        this.htEndInfo=null;
        this.bStart=null;
        this.bMove=null;
        this.nMoveType=null;
        this._nVSlope=null;
        this._nHSlope=null;
        this.bSetSlope=null
    }
    
}).extend(MobileCommentJindo.UIComponent);
MobileCommentJindo.Calendar=MobileCommentJindo.$Class({
    $init:function(sLayerId,htOption){
        var htToday=this.constructor.getToday();
        this.setToday(htToday.nYear,htToday.nMonth,htToday.nDate);
        this._elLayer=MobileCommentJindo.$(sLayerId);
        this._htDefaultOption={
            sClassPrefix:"calendar-",nYear:this._htToday.nYear,nMonth:this._htToday.nMonth,nDate:this._htToday.nDate,sTitleFormat:"yyyy-mm",sYearTitleFormat:"yyyy",sMonthTitleFormat:"m",aMonthTitle:["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],bDrawOnload:true
        };
        this.option(this._htDefaultOption);
        this.option(htOption||{});
        this._assignHTMLElements();
        this.activate();
        this.setDate(this.option("nYear"),this.option("nMonth"),this.option("nDate"));
        if(this.option("bDrawOnload")){
            this.draw()
        }
        
    }
    ,getBaseElement:function(){
        return this._elLayer
    }
    ,getDate:function(){
        return this._htDate
    }
    ,getDateOfElement:function(el){
        var nDateIndex=MobileCommentJindo.$A(this._aDateContainerElement).indexOf(el);
        if(nDateIndex>-1){
            return this._aMetaData[nDateIndex]
        }
        return null
    }
    ,setToday:function(nYear,nMonth,nDate){
        if(!this._htToday){
            this._htToday={}
        }
        this._htToday.nYear=nYear;
        this._htToday.nMonth=nMonth;
        this._htToday.nDate=nDate;
        return this
    }
    ,getToday:function(){
        return{
            nYear:this._htToday.nYear,nMonth:this._htToday.nMonth,nDate:this._htToday.nDate
        }
        
    }
    ,setDate:function(nYear,nMonth,nDate){
        this._htDate={
            nYear:nYear,nMonth:(nMonth*1),nDate:(nDate*1)
        }
        
    }
    ,getShownDate:function(){
        return this._getShownDate()
    }
    ,_getShownDate:function(){
        return this.htShownDate||this.getDate()
    }
    ,_setShownDate:function(nYear,nMonth){
        this.htShownDate={
            nYear:nYear,nMonth:(nMonth*1),nDate:1
        }
        
    }
    ,_assignHTMLElements:function(){
        var sClassPrefix=this.option("sClassPrefix"),elLayer=this.getBaseElement();
        if((this.elBtnPrevYear=MobileCommentJindo.$$.getSingle(("."+sClassPrefix+"btn-prev-year"),elLayer))){
            this.wfPrevYear=MobileCommentJindo.$Fn(function(oEvent){
                oEvent.stop(MobileCommentJindo.$Event.CANCEL_DEFAULT);
                this.draw(-1,0,true)
            }
            ,this)
        }
        if((this.elBtnPrevMonth=MobileCommentJindo.$$.getSingle(("."+sClassPrefix+"btn-prev-mon"),elLayer))){
            this.wfPrevMonth=MobileCommentJindo.$Fn(function(oEvent){
                oEvent.stop(MobileCommentJindo.$Event.CANCEL_DEFAULT);
                this.draw(0,-1,true)
            }
            ,this)
        }
        if((this.elBtnNextMonth=MobileCommentJindo.$$.getSingle(("."+sClassPrefix+"btn-next-mon"),elLayer))){
            this.wfNextMonth=MobileCommentJindo.$Fn(function(oEvent){
                oEvent.stop(MobileCommentJindo.$Event.CANCEL_DEFAULT);
                this.draw(0,1,true)
            }
            ,this)
        }
        if((this.elBtnNextYear=MobileCommentJindo.$$.getSingle(("."+sClassPrefix+"btn-next-year"),elLayer))){
            this.wfNextYear=MobileCommentJindo.$Fn(function(oEvent){
                oEvent.stop(MobileCommentJindo.$Event.CANCEL_DEFAULT);
                this.draw(1,0,true)
            }
            ,this)
        }
        this.elTitle=MobileCommentJindo.$$.getSingle(("."+sClassPrefix+"title"),elLayer);
        this.elTitleYear=MobileCommentJindo.$$.getSingle(("."+sClassPrefix+"title-year"),elLayer);
        this.elTitleMonth=MobileCommentJindo.$$.getSingle(("."+sClassPrefix+"title-month"),elLayer);
        var elWeekTemplate=MobileCommentJindo.$$.getSingle("."+sClassPrefix+"week",elLayer);
        this.elWeekTemplate=elWeekTemplate.cloneNode(true);
        this.elWeekAppendTarget=elWeekTemplate.parentNode
    }
    ,_setCalendarTitle:function(nYear,nMonth,sType){
        if(nMonth<10){
            nMonth=("0"+(nMonth*1)).toString()
        }
        var elTitle=this.elTitle,sTitleFormat=this.option("sTitleFormat"),sTitle;
        if(typeof sType!="undefined"){
            switch(sType){
                case"year":elTitle=this.elTitleYear;
                sTitleFormat=this.option("sYearTitleFormat");
                sTitle=sTitleFormat.replace(/yyyy/g,nYear).replace(/y/g,(nYear).toString().substr(2,2));
                break;
                case"month":elTitle=this.elTitleMonth;
                sTitleFormat=this.option("sMonthTitleFormat");
                sTitle=sTitleFormat.replace(/mm/g,nMonth).replace(/m/g,(nMonth*1)).replace(/M/g,this.option("aMonthTitle")[nMonth-1]);
                break
            }
            
        }
        else{
            sTitle=sTitleFormat.replace(/yyyy/g,nYear).replace(/y/g,(nYear).toString().substr(2,2)).replace(/mm/g,nMonth).replace(/m/g,(nMonth*1)).replace(/M/g,this.option("aMonthTitle")[nMonth-1])
        }
        MobileCommentJindo.$Element(elTitle).text(sTitle)
    }
    ,draw:function(nYear,nMonth,bRelative){
        var sClassPrefix=this.option("sClassPrefix"),htDate=this.getDate(),oShownDate=this._getShownDate();
        if(oShownDate&&typeof bRelative!="undefined"&&bRelative){
            var htRelativeDate=this.constructor.getRelativeDate(nYear,nMonth,0,oShownDate);
            nYear=htRelativeDate.nYear;
            nMonth=htRelativeDate.nMonth
        }
        else{
            if(typeof nYear=="undefined"&&typeof nMonth=="undefined"&&typeof bRelative=="undefined"){
                nYear=htDate.nYear;
                nMonth=htDate.nMonth
            }
            else{
                nYear=nYear||oShownDate.nYear;
                nMonth=nMonth||oShownDate.nMonth
            }
            
        }
        if(this.fireEvent("beforeDraw",{
            nYear:nYear,nMonth:nMonth
        })){
            if(this.elTitle){
                this._setCalendarTitle(nYear,nMonth)
            }
            if(this.elTitleYear){
                this._setCalendarTitle(nYear,nMonth,"year")
            }
            if(this.elTitleMonth){
                this._setCalendarTitle(nYear,nMonth,"month")
            }
            this._clear(MobileCommentJindo.Calendar.getWeeks(nYear,nMonth));
            this._setShownDate(nYear,nMonth);
            var htToday=this.getToday(),nFirstDay=this.constructor.getFirstDay(nYear,nMonth),nLastDay=this.constructor.getLastDay(nYear,nMonth),nLastDate=this.constructor.getLastDate(nYear,nMonth),nDay=0,htDatePrevMonth=this.constructor.getRelativeDate(0,-1,0,{
                nYear:nYear,nMonth:nMonth,nDate:1
            }),htDateNextMonth=this.constructor.getRelativeDate(0,1,0,{
                nYear:nYear,nMonth:nMonth,nDate:1
            }),nPrevMonthLastDate=this.constructor.getLastDate(htDatePrevMonth.nYear,htDatePrevMonth.nMonth),aDate=[],bPrevMonth,bNextMonth,welDateContainer,nTempYear,nTempMonth,oParam,nIndexOfLastDate,elWeek,i;
            var nWeeks=this.constructor.getWeeks(nYear,nMonth);
            for(i=0;
            i<nWeeks;
            i++){
                elWeek=this.elWeekTemplate.cloneNode(true);
                MobileCommentJindo.$Element(elWeek).appendTo(this.elWeekAppendTarget);
                this._aWeekElement.push(elWeek)
            }
            this._aDateElement=MobileCommentJindo.$$("."+sClassPrefix+"date",this.elWeekAppendTarget);
            this._aDateContainerElement=MobileCommentJindo.$$("."+sClassPrefix+"week > *",this.elWeekAppendTarget);
            if(nFirstDay>0){
                for(i=nPrevMonthLastDate-nFirstDay;
                i<nPrevMonthLastDate;
                i++){
                    aDate.push(i+1)
                }
                
            }
            for(i=1;
            i<nLastDate+1;
            i++){
                aDate.push(i)
            }
            nIndexOfLastDate=aDate.length-1;
            for(i=1;
            i<7-nLastDay;
            i++){
                aDate.push(i)
            }
            for(i=0;
            i<aDate.length;
            i++){
                bPrevMonth=false;
                bNextMonth=false;
                welDateContainer=MobileCommentJindo.$Element(this._aDateContainerElement[i]);
                nTempYear=nYear;
                nTempMonth=nMonth;
                if(i<nFirstDay){
                    bPrevMonth=true;
                    welDateContainer.addClass(sClassPrefix+"prev-mon");
                    nTempYear=htDatePrevMonth.nYear;
                    nTempMonth=htDatePrevMonth.nMonth
                }
                else{
                    if(i>nIndexOfLastDate){
                        bNextMonth=true;
                        welDateContainer.addClass(sClassPrefix+"next-mon");
                        nTempYear=htDateNextMonth.nYear;
                        nTempMonth=htDateNextMonth.nMonth
                    }
                    else{
                        nTempYear=nYear;
                        nTempMonth=nMonth
                    }
                    
                }
                if(nDay===0){
                    welDateContainer.addClass(sClassPrefix+"sun")
                }
                if(nDay==6){
                    welDateContainer.addClass(sClassPrefix+"sat")
                }
                if(nTempYear==htToday.nYear&&(nTempMonth*1)==htToday.nMonth&&aDate[i]==htToday.nDate){
                    welDateContainer.addClass(sClassPrefix+"today")
                }
                oParam={
                    elDate:this._aDateElement[i],elDateContainer:welDateContainer.$value(),nYear:nTempYear,nMonth:nTempMonth,nDate:aDate[i],bPrevMonth:bPrevMonth,bNextMonth:bNextMonth,sHTML:aDate[i]
                };
                MobileCommentJindo.$Element(oParam.elDate).html(oParam.sHTML.toString());
                this._aMetaData.push({
                    nYear:nTempYear,nMonth:nTempMonth,nDate:aDate[i]
                });
                nDay=(nDay+1)%7;
                this.fireEvent("draw",oParam)
            }
            this.fireEvent("afterDraw",{
                nYear:nYear,nMonth:nMonth
            })
        }
        
    }
    ,_clear:function(nWeek){
        this._aMetaData=[];
        this._aWeekElement=[];
        MobileCommentJindo.$Element(this.elWeekAppendTarget).empty()
    }
    ,attachEvent:function(){
        this.activate()
    }
    ,detachEvent:function(){
        this.deactivate()
    }
    ,_onActivate:function(){
        if(this.elBtnPrevYear){
            this.wfPrevYear.attach(this.elBtnPrevYear,"click")
        }
        if(this.elBtnPrevMonth){
            this.wfPrevMonth.attach(this.elBtnPrevMonth,"click")
        }
        if(this.elBtnNextMonth){
            this.wfNextMonth.attach(this.elBtnNextMonth,"click")
        }
        if(this.elBtnNextYear){
            this.wfNextYear.attach(this.elBtnNextYear,"click")
        }
        
    }
    ,_onDeactivate:function(){
        if(this.elBtnPrevYear){
            this.wfPrevYear.detach(this.elBtnPrevYear,"click")
        }
        if(this.elBtnPrevMonth){
            this.wfPrevMonth.detach(this.elBtnPrevMonth,"click")
        }
        if(this.elBtnNextMonth){
            this.wfNextMonth.detach(this.elBtnNextMonth,"click")
        }
        if(this.elBtnNextYear){
            this.wfNextYear.detach(this.elBtnNextYear,"click")
        }
        
    }
    
}).extend(MobileCommentJindo.UIComponent);
MobileCommentJindo.Calendar.setToday=function(nYear,nMonth,nDate){
    if(!this._htToday){
        this._htToday={}
    }
    this._htToday.nYear=nYear;
    this._htToday.nMonth=nMonth;
    this._htToday.nDate=nDate;
    return this
};
MobileCommentJindo.Calendar.getToday=function(){
    var htToday=this._htToday||this.getDateHashTable(new Date());
    return{
        nYear:htToday.nYear,nMonth:htToday.nMonth,nDate:htToday.nDate
    }
    
};
MobileCommentJindo.Calendar.getDateObject=function(htDate){
    if(arguments.length==3){
        return new Date(arguments[0],arguments[1]-1,arguments[2])
    }
    return new Date(htDate.nYear,htDate.nMonth-1,htDate.nDate)
};
MobileCommentJindo.Calendar.getDateHashTable=function(oDate){
    if(arguments.length==3){
        return{
            nYear:arguments[0],nMonth:arguments[1],nDate:arguments[2]
        }
        
    }
    if(arguments.length<=1){
        oDate=oDate||new Date()
    }
    return{
        nYear:oDate.getFullYear(),nMonth:oDate.getMonth()+1,nDate:oDate.getDate()
    }
    
};
MobileCommentJindo.Calendar.getTime=function(htDate){
    return this.getDateObject(htDate).getTime()
};
MobileCommentJindo.Calendar.getFirstDay=function(nYear,nMonth){
    return new Date(nYear,nMonth-1,1).getDay()
};
MobileCommentJindo.Calendar.getLastDay=function(nYear,nMonth){
    return new Date(nYear,nMonth,0).getDay()
};
MobileCommentJindo.Calendar.getLastDate=function(nYear,nMonth){
    return new Date(nYear,nMonth,0).getDate()
};
MobileCommentJindo.Calendar.getWeeks=function(nYear,nMonth){
    var nFirstDay=this.getFirstDay(nYear,nMonth),nLastDate=this.getLastDate(nYear,nMonth);
    return Math.ceil((nFirstDay+nLastDate)/7)
};
MobileCommentJindo.Calendar.getRelativeDate=function(nYear,nMonth,nDate,htDate){
    return this.getDateHashTable(new Date(htDate.nYear+nYear,htDate.nMonth+nMonth-1,htDate.nDate+nDate))
};
MobileCommentJindo.Calendar.isValidDate=function(nYear,nMonth,nDate){
    if(nMonth<=12&&nDate<=this.getLastDate(nYear,nMonth)){
        return true
    }
    else{
        return false
    }
    
};
MobileCommentJindo.Calendar.isPast=function(htDate,htComparisonDate){
    if(this.getTime(htDate)<this.getTime(htComparisonDate)){
        return true
    }
    return false
};
MobileCommentJindo.Calendar.isFuture=function(htDate,htComparisonDate){
    if(this.getTime(htDate)>this.getTime(htComparisonDate)){
        return true
    }
    return false
};
MobileCommentJindo.Calendar.isSameDate=function(htDate,htComparisonDate){
    if(this.getTime(htDate)==this.getTime(htComparisonDate)){
        return true
    }
    return false
};
MobileCommentJindo.Calendar.isBetween=function(htDate,htFrom,htTo){
    if(this.isFuture(htDate,htTo)||this.isPast(htDate,htFrom)){
        return false
    }
    else{
        return true
    }
    
};
MobileCommentJindo.m.SlideEffect=MobileCommentJindo.$Class({
    sEffectName:"slide",getCommand:function(el,htOption){
        var sDirection=htOption.sDirection?htOption.sDirection:"left";
        var htCurOffset=MobileCommentJindo.m.getCssOffset(el);
        var toX=htCurOffset.left;
        var toY=htCurOffset.top;
        var nW=(typeof htOption.nSize!="undefined")?htOption.nSize:this._htLayerInfo.nWidth;
        var nH=(typeof htOption.nSize!="undefined")?htOption.nSize:this._htLayerInfo.nHeight;
        if(sDirection=="up"||sDirection=="down"){
            toY+=((sDirection=="up")?nH*-1:nH)
        }
        if(sDirection=="left"||sDirection=="right"){
            toX+=((sDirection=="left")?nW*-1:nW)
        }
        var htTransform={};
        if(typeof htOption.elBaseLayer!="undefined"){
            toX=0;
            toY=0;
            var welBaseLayer=MobileCommentJindo.$Element(htOption.elBaseLayer);
            var wel=MobileCommentJindo.$Element(el);
            var nH=(typeof htOption.nSize!="undefined")?htOption.nSize:welBaseLayer.height();
            var nW=(typeof htOption.nSize!="undefined")?htOption.nSize:welBaseLayer.width();
            if(sDirection=="up"||sDirection=="down"){
                toY=(sDirection=="down")?nH*-1:nH
            }
            if(sDirection=="left"||sDirection=="right"){
                toX=(sDirection=="left")?nW:nW*-1
            }
            toX=toX*-1;
            toY=toY*-1
        }
        htTransform.transform=this.sTranOpen+toX+"px, "+toY+"px"+this.sTranEnd;
        var sPosition=this._htLayerInfo.sPosition;
        var bAndroid=this.bAndroid;
        var bAndroid3Up=this.bAndroid3Up;
        var sClassHighligting=this._htLayerInfo.sClassHighligting;
        var bAndroid2_1=this.bAndroid2_1;
        var wel=MobileCommentJindo.$Element(el);
        return{
            sTaskName:this.sEffectName+"-"+sDirection,htStyle:htOption.htTo||{},htTransform:htTransform,fCallback:function(){
                var htCurOffset=MobileCommentJindo.m.getCssOffset(el);
                var top=wel.css("top").replace("px","")*1;
                var left=wel.css("left").replace("px","")*1;
                top=isNaN(top)?0:top;
                left=isNaN(left)?0:left;
                if(sPosition=="relative"){
                    wel.css("position","relative")
                }
                else{
                    wel.css("position","absolute")
                }
                var sPrefix=MobileCommentJindo.m.getCssPrefix();
                wel.css(sPrefix+"Transform","");
                if(bAndroid3Up){
                    wel.offset()
                }
                wel.$value().style.top=parseInt((top+htCurOffset.top),10)+"px";
                wel.$value().style.left=parseInt((htCurOffset.left+left),10)+"px";
                if(bAndroid&&!bAndroid3Up){
                    var elFocus=MobileCommentJindo.$$.getSingle("."+sClassHighligting,wel.$value());
                    if(elFocus){
                        if(bAndroid2_1){
                            setTimeout(function(){
                                elFocus.focus()
                            }
                            ,5)
                        }
                        else{
                            elFocus.focus()
                        }
                        
                    }
                    
                }
                
            }
            
        }
        
    }
    ,getBeforeCommand:function(el,htOption){
        var sDirection=htOption.sDirection?htOption.sDirection:"left";
        var htBeforeStyle=htOption.htFrom||{};
        var htTransform={};
        var wel=MobileCommentJindo.$Element(el);
        if(typeof htOption.elBaseLayer!="undefined"){
            var welBaseLayer=MobileCommentJindo.$Element(htOption.elBaseLayer);
            if(!welBaseLayer.isParentOf(wel)){
                welBaseLayer.append(wel);
                var sPosition=wel.css("position");
                if(!(sPosition=="relative"||sPosition=="absolute")){
                    wel.css("position","absolute")
                }
                wel.css("opacity",0)
            }
            var fromX=0,fromY=0;
            var nH=welBaseLayer.height();
            var nW=welBaseLayer.width();
            if(sDirection=="up"||sDirection=="down"){
                fromY=(sDirection=="down")?nH*-1:nH
            }
            if(sDirection=="left"||sDirection=="right"){
                fromX=(sDirection=="left")?nW:nW*-1
            }
            welBaseLayer.css("overflow","hidden");
            htBeforeStyle.left=fromX+"px";
            htBeforeStyle.top=fromY+"px";
            htBeforeStyle.opacity=this._htLayerInfo.nOpacity
        }
        return{
            htStyle:htBeforeStyle,htTransform:htTransform
        }
        
    }
    
}).extend(MobileCommentJindo.m.Effect);
MobileCommentJindo.m.PopEffect=MobileCommentJindo.$Class({
    sEffectName:"pop",getCommand:function(el,htOption){
        var sDirection=htOption.sDirection?htOption.sDirection:"in";
        var htStyle=htOption.htTo||{};
        if(typeof htStyle.opacity==="undefined"){
            htStyle.opacity=(sDirection=="in")?1:0.1
        }
        var nScale=(sDirection=="in")?1:((this.bIos3||this.bAndroid3Up)?0.1:0);
        var htCallback={};
        if(sDirection=="out"){
            htCallback.htStyle={};
            htCallback.htStyle.display="none";
            htCallback.htStyle.opacity=this._htLayerInfo.nOpacity;
            htCallback.htTransform={};
            htCallback.htTransform.transform="scale(1)"
        }
        var sTransform="scale("+nScale+")";
        if(this.bAndroid3Up){
            sTransform+=" scaleZ(1.0)"
        }
        return{
            sTaskName:this.sEffectName+"-"+sDirection,htStyle:htStyle,htTransform:{
                transform:sTransform,"transform-origin":"50% 50%"
            }
            ,fCallback:htCallback
        }
        
    }
    ,getBeforeCommand:function(el,htOption){
        var sDirection=htOption.sDirection?htOption.sDirection:"in";
        var htBeforeStyle=htOption.htFrom||{};
        if(typeof htBeforeStyle.opacity==="undefined"){
            htBeforeStyle.opacity=(sDirection=="in")?0.1:1
        }
        htBeforeStyle.display=this._htLayerInfo.sDisplay;
        var nScale=(sDirection=="in")?((this.bIos3||this.bAndroid3Up)?0.1:0):1;
        var sTransform="scale("+nScale+")";
        if(this.bAndroid3Up){
            sTransform+=" scaleZ(1.0)"
        }
        return{
            htStyle:htBeforeStyle,htTransform:{
                transform:sTransform,"transform-origin":"50% 50%"
            }
            
        }
        
    }
    
}).extend(MobileCommentJindo.m.Effect);
MobileCommentJindo.m.FlipEffect=MobileCommentJindo.$Class({
    sEffectName:"flip",getCommand:function(el,htOption){
        var sDirection=htOption.sDirection?htOption.sDirection:"left";
        var sCoord="Y";
        if(sDirection=="up"||sDirection=="down"){
            sCoord="X"
        }
        var htStyle=htOption.htTo||{};
        var welFrom=htOption.elFlipFrom?MobileCommentJindo.$Element(htOption.elFlipFrom):MobileCommentJindo.$Element(el);
        var welTo=htOption.elFlipTo?MobileCommentJindo.$Element(htOption.elFlipTo):null;
        var htTo=this._getCssRotate(this._getCssTransfrom(welFrom));
        htTo[sCoord]=htTo[sCoord]+((sDirection=="left"||sDirection=="down")?180*-1:180);
        var sTransfrom="rotateX("+htTo.X+"deg) rotateY("+htTo.Y+"deg)";
        if(welTo){
            welTo.$value().style[this._sCssPrefix+"Transform"]="rotate"+sCoord+"(0deg)";
            sTransfrom="rotate"+sCoord+"(0deg)"
        }
        return{
            sTaskName:this.sEffectName+"-"+sDirection,htStyle:htStyle,htTransform:{
                "transform-style":"preserve-3d",transform:sTransfrom
            }
            
        }
        
    }
    ,getBeforeCommand:function(el,htOption){
        var sDirection=htOption.sDirection?htOption.sDirection:"left";
        var htBeforeStyle=htOption.htFrom||{};
        var sCoord="Y",nFrom=0;
        if(sDirection=="up"||sDirection=="down"){
            sCoord="X"
        }
        var welFrom=htOption.elFlipFrom?MobileCommentJindo.$Element(htOption.elFlipFrom):MobileCommentJindo.$Element(el);
        var welTo=htOption.elFlipTo?MobileCommentJindo.$Element(htOption.elFlipTo):null;
        var elParent=welFrom.$value().parentNode;
        elParent.style.webkitPerspective="1200";
        var htFrom=this._getCssRotate(this._getCssTransfrom(welFrom));
        var sTransfrom="rotateX("+htFrom.X+"deg) rotateY("+htFrom.Y+"deg)";
        if(welTo){
            welTo.$value().style[this._sCssPrefix+"Transform"]="rotate"+sCoord+"(-180deg)";
            sTransfrom="rotate"+sCoord+"(-180deg)"
        }
        return{
            htStyle:htBeforeStyle,htTransform:{
                perspective:"1200","transform-style":"preserve-3d",transform:sTransfrom
            }
            
        }
        
    }
    ,_getCssRotate:function(str){
        var sRotate=str;
        var htReturn={
            X:0,Y:0
        };
        if(!sRotate){
            return htReturn
        }
        var aTemp=sRotate.match(/rotateX\((\-?\d*)deg/);
        if(aTemp&&aTemp.length>1){
            htReturn.X=aTemp[1]*1;
            if(htReturn.X%360==0){
                htReturn.X=0
            }
            
        }
        aTemp=sRotate.match(/rotateY\((\-?\d*)deg/);
        if(aTemp&&aTemp.length>1){
            htReturn.Y=aTemp[1]*1;
            if(htReturn.Y%360==0){
                htReturn.Y=0
            }
            
        }
        return htReturn
    }
    ,_getCssTransfrom:function(wel){
        return wel.css(this._sCssPrefix+"Transform")||""
    }
    
}).extend(MobileCommentJindo.m.Effect);
MobileCommentJindo.m.LayerEffect=MobileCommentJindo.$Class({
    $init:function(el,htUserOption){
        this.option({
            nDuration:250,bActivateOnload:true
        });
        this.option(htUserOption||{});
        this._initVar();
        this.setLayer(el);
        this._initTransition();
        if(this.option("bActivateOnload")){
            this.activate()
        }
        
    }
    ,_htEffect:{
        expand:"MobileCommentJindo.m.ExpandEffect",contract:"MobileCommentJindo.m.ContractEffect",fade:"MobileCommentJindo.m.FadeEffect",pop:"MobileCommentJindo.m.PopEffect",slide:"MobileCommentJindo.m.SlideEffect",flip:"MobileCommentJindo.m.FlipEffect"
    }
    ,_initVar:function(){
        this._htEffectInstance={};
        this._htLayerInfo={};
        this._htWElement={};
        this.bAndroid=MobileCommentJindo.m.getDeviceInfo().android;
        this.sClassHighligting="_effct_hide_highlighting_tmp"
    }
    ,_initTransition:function(){
        this._oTransition=new MobileCommentJindo.m.Transition()
    }
    ,_createEffect:function(sType){
        if(this._htEffect[sType]&&!this._htEffectInstance[sType]){
            try{
                this._htEffectInstance[sType]=eval("new "+this._htEffect[sType]+"()")
            }
            catch(e){}this._htEffectInstance[sType].setLayerInfo(this._htLayerInfo)
        }
        
    }
    ,expand:function(htOption){
        var sType="expand";
        this._run(sType,htOption)
    }
    ,contract:function(htOption){
        var sType="contract";
        this._run(sType,htOption)
    }
    ,fade:function(htOption){
        var sType="fade";
        this._run(sType,htOption)
    }
    ,pop:function(htOption){
        var sType="pop";
        this._run(sType,htOption)
    }
    ,slide:function(htOption){
        var sType="slide";
        this._run(sType,htOption)
    }
    ,flip:function(htOption){
        var sType="flip";
        this._run(sType,htOption)
    }
    ,isPlaying:function(){
        return this._oTransition.isPlaying()
    }
    ,_fireCustomEvent:function(sType,htOption){
        return this.fireEvent(sType,htOption)
    }
    ,_run:function(sType,htOption){
        if(!this._isAvailableEffect()){
            return
        }
        this._createEffect(sType);
        if(typeof htOption==="undefined"){
            htOption={}
        }
        var oEffect=this._htEffectInstance[sType];
        var el=this.getLayer();
        var nDuration=(typeof htOption.nDuration==="undefined")?this.option("nDuration"):parseInt(htOption.nDuration,10);
        var htBefore=oEffect.getBeforeCommand(el,htOption);
        var htCommand=oEffect.getCommand(el,htOption);
        if(!this._fireCustomEvent("beforeEffect",{
            elLayer:el,sEffect:htCommand.sTaskName,nDuration:nDuration
        })){
            return
        }
        if(htBefore){
            this._oTransition.queue(this.getLayer(),0,htBefore)
        }
        this._oTransition.queue(this.getLayer(),nDuration,htCommand);
        this._oTransition.start()
    }
    ,setLayer:function(el){
        this._htWElement.el=MobileCommentJindo.$(el);
        this._htWElement.wel=MobileCommentJindo.$Element(this._htWElement.el);
        if(!!this.bAndroid){
            var elFocus=MobileCommentJindo.$$.getSingle("."+this.sClassHighligting,this._htWElement.el);
            if(!elFocus){
                var sTpl='<a href="javascript:void(0)" style="position:absolute" class="'+this.sClassHighligting+'"></a>';
                var elFocus=MobileCommentJindo.$(sTpl);
                this._htWElement.wel.append(elFocus);
                elFocus.style.opacity="0";
                elFocus.style.width=0;
                elFocus.style.height=0;
                elFocus.style.left="-1000px";
                elFocus.style.top="-1000px"
            }
            
        }
        this.setSize()
    }
    ,stop:function(bAfter){
        if(typeof bAfter==="undefined"){
            bAfter=true
        }
        if(this._oTransition){
            this._oTransition.stop(bAfter)
        }
        
    }
    ,clearEffect:function(bAfter){
        if(this._oTransition){
            this._oTransition.clear(bAfter)
        }
        
    }
    ,getLayer:function(){
        return this._htWElement.el
    }
    ,setSize:function(){
        var elToMeasure=this._htWElement.el.cloneNode(true);
        var welToMeasure=MobileCommentJindo.$Element(elToMeasure);
        welToMeasure.opacity(0);
        this._htWElement.wel.after(welToMeasure);
        welToMeasure.show();
        this._htLayerInfo.nWidth=this._htWElement.wel.width();
        this._htLayerInfo.nHeight=this._htWElement.wel.height();
        welToMeasure.css({
            position:"absolute",top:"0px",left:"0px"
        });
        this._htLayerInfo.nMarginLeft=parseInt(welToMeasure.css("marginLeft"),10);
        this._htLayerInfo.nMarginTop=parseInt(welToMeasure.css("marginTop"),10);
        this._htLayerInfo.nOpacity=this._htWElement.wel.opacity();
        this._htLayerInfo.sPosition=this._htWElement.wel.css("position");
        var sDisplay=this._htWElement.wel.css("display");
        sDisplay=((sDisplay==="none")||(sDisplay.length===0))?"block":sDisplay;
        this._htLayerInfo.sDisplay=sDisplay;
        this._htLayerInfo.sClassHighligting=this.sClassHighligting;
        welToMeasure.leave();
        this._setEffectLayerInfo()
    }
    ,_setEffectLayerInfo:function(){
        for(var p in this._htEffectInstance){
            this._htEffectInstance[p].setLayerInfo(this._htLayerInfo)
        }
        
    }
    ,_onTransitionEnd:function(oCustomEvent){
        if(oCustomEvent.sTaskName){
            this._fireCustomEvent("afterEffect",{
                elLayer:oCustomEvent.element,sEffect:oCustomEvent.sTaskName,nDuration:oCustomEvent.nDuration
            })
        }
        
    }
    ,_isAvailableEffect:function(){
        return this.isActivating()
    }
    ,_onActivate:function(){
        this._attachEvent()
    }
    ,_onDeactivate:function(){
        this._detachEvent()
    }
    ,_attachEvent:function(){
        this._htEvent={};
        this._htEvent.end=MobileCommentJindo.$Fn(this._onTransitionEnd,this).bind();
        if(this._oTransition){
            this._oTransition.attach({
                end:this._htEvent.end
            })
        }
        
    }
    ,_detachEvent:function(){
        this._htEvent=null;
        if(this._oTransition){
            this._oTransition.detachAll()
        }
        
    }
    ,destroy:function(){
        this.deactivate();
        for(var p in this._htWElement){
            this._htWElement[p]=null
        }
        this._htWElement=null
    }
    
}).extend(MobileCommentJindo.UIComponent);
if(typeof MobileCommentJindo.m.TimingFunction==="undefined"){
    MobileCommentJindo.m.TimingFunction={}
}
MobileCommentJindo.m.TimingFunction._cubicBezier=function(x1,y1,x2,y2){
    return function(t){
        var cx=3*x1,bx=3*(x2-x1)-cx,ax=1-cx-bx,cy=3*y1,by=3*(y2-y1)-cy,ay=1-cy-by;
        function sampleCurveX(t){
            return((ax*t+bx)*t+cx)*t
        }
        function sampleCurveY(t){
            return((ay*t+by)*t+cy)*t
        }
        function sampleCurveDerivativeX(t){
            return(3*ax*t+2*bx)*t+cx
        }
        function solveCurveX(x,epsilon){
            var t0,t1,t2,x2,d2,i;
            for(t2=x,i=0;
            i<8;
            i++){
                x2=sampleCurveX(t2)-x;
                if(Math.abs(x2)<epsilon){
                    return t2
                }
                d2=sampleCurveDerivativeX(t2);
                if(Math.abs(d2)<0.000001){
                    break
                }
                t2=t2-x2/d2
            }
            t0=0;
            t1=1;
            t2=x;
            if(t2<t0){
                return t0
            }
            if(t2>t1){
                return t1
            }
            while(t0<t1){
                x2=sampleCurveX(t2);
                if(Math.abs(x2-x)<epsilon){
                    return t2
                }
                if(x>x2){
                    t0=t2
                }
                else{
                    t1=t2
                }
                t2=(t1-t0)*0.5+t0
            }
            return t2
        }
        return sampleCurveY(solveCurveX(t,1/200))
    }
    
};
MobileCommentJindo.m.TimingFunction.linear=MobileCommentJindo.m.TimingFunction._cubicBezier(0,0,1,1);
MobileCommentJindo.m.TimingFunction.ease_out=MobileCommentJindo.m.TimingFunction._cubicBezier(0,0,0.58,1);
MobileCommentJindo.m.TimingFunction.ease_in=MobileCommentJindo.m.TimingFunction._cubicBezier(0.42,0,1,1);
MobileCommentJindo.m.TimingFunction.ease_in_out=MobileCommentJindo.m.TimingFunction._cubicBezier(0.42,0,0.58,1);
MobileCommentJindo.m.TimingFunction.ease_out_in=MobileCommentJindo.m.TimingFunction._cubicBezier(0,0.42,1,0.58);
MobileCommentJindo.m.TimingFunction.cubicBezier=function(x1,y1,x2,y2){
    return MobileCommentJindo.m.TimingFunction._cubicBezier(x1,y1,x2,y2)
};
MobileCommentJindo.m.Transition=MobileCommentJindo.$Class({
    _aTaskQueue:null,$init:function(htUserOption){
        this.option({
            sTransitionTimingFunction:"ease-in-out"
        });
        this.option(htUserOption||{});
        this._initVar();
        this._attachEvent()
    }
    ,_initVar:function(){
        this._aTaskQueue=[];
        this._bIsPlaying=false;
        this._sCssPrefix=MobileCommentJindo.m.getCssPrefix();
        this._aBeforeStatus=[];
        if(this._sCssPrefix.length>0){
            this._sCssPrefix="-"+this._sCssPrefix.toLowerCase()+"-"
        }
        this._bAndroid=MobileCommentJindo.m.getDeviceInfo().android;
        this._nTimerAnimate=null;
        this._htCurrentTask=null
    }
    ,start:function(){
        if((!this.isPlaying())&&this.isExistTask()){
            this._prepareTask()
        }
        
    }
    ,isPlaying:function(){
        return this._bIsPlaying
    }
    ,isExistTask:function(){
        if(!this._aTaskQueue){
            return false
        }
        var nLen=this._aTaskQueue.length;
        bValue=(nLen>0)?true:false;
        return bValue
    }
    ,queue:function(elTarget,nDuration,aCommand){
        var htTask={
            sType:"style",sTaskName:"",elTarget:elTarget,nDuration:nDuration
        };
        htTask.htDefault={};
        htTask.htStyle=aCommand.htStyle||{};
        htTask.htTransform=aCommand.htTransform||{};
        htTask.sTaskName=aCommand.sTaskName||null;
        htTask.fCallback=aCommand.fCallback;
        htTask.htDefault["transition-timing-function"]=(typeof htTask.htTransform["transition-timing-function"]==="undefined")?this._getDefaultTransition().sTransitionTimingFunction:htTask.htTransform["transition-timing-function"];
        htTask.htDefault["transition-property"]=(typeof htTask.htTransform["transition-property"]==="undefined")?"all":htTask.htTransform["transition-property"];
        htTask.htDefault["transition-duration"]=nDuration+"ms";
        this._pushTask(htTask);
        return this
    }
    ,stop:function(bAfter){
        if(!this.isPlaying()){
            return
        }
        if(typeof bAfter==="undefined"){
            bAfter=true
        }
        if(!this._fireCustomEvent("stop",{
            element:this._htCurrentTask.elTarget,sTaskName:this._htCurrentTask.sTaskName,nDuration:this._htCurrentTask.nDuration
        })){
            return
        }
        this._stopTransition(bAfter)
    }
    ,clear:function(bStopAfter){
        this.stop(bStopAfter);
        this._aTaskQueue=[]
    }
    ,_resume:function(){
        if(this._htCurrentTask){
            this._doTask()
        }
        
    }
    ,_stopTransition:function(bAfter){
        this._detachTransitionEnd();
        this._elCurrent.style[this._sCssPrefix+"transition-property"]="none";
        this._initTransition();
        if(!bAfter){
            var nIndex=this._getBeforeStatusElement(this._elCurrent);
            if(nIndex>-1){
                MobileCommentJindo.$Element(this._elCurrent).attr("style",this._aBeforeStatus[nIndex].style)
            }
            
        }
        this._htCurrentTask=null;
        this._bIsPlaying=false
    }
    ,_prepareTask:function(){
        var htTask=this._popTask();
        if(htTask===null||!htTask){
            this._bIsPlaying=false;
            return
        }
        this._htCurrentTask=htTask;
        this._resume()
    }
    ,_pushTask:function(htTask){
        this._aTaskQueue.push(htTask)
    }
    ,_popTask:function(){
        if(!this.isExistTask()){
            return null
        }
        var htTask=this._aTaskQueue.shift();
        if(htTask){
            return htTask
        }
        else{
            return null
        }
        
    }
    ,_doTask:function(){
        if(this._htCurrentTask){
            this._bIsPlaying=true;
            if(!this._fireCustomEvent("start",{
                element:this._htCurrentTask.elTarget,sTaskName:this._htCurrentTask.sTaskName,nDuration:this._htCurrentTask.nDuration
            })){
                return
            }
            var el=this._htCurrentTask.elTarget;
            var wel=MobileCommentJindo.$Element(el);
            this._elCurrent=el;
            this._setBeforeStatus(wel);
            var nDuration=this._htCurrentTask.nDuration;
            var bAttachEvt=this._bAttachTransitionEvt();
            if(bAttachEvt){
                this._attachTransitionEnd(el)
            }
            this._setDefaultTransition(wel,bAttachEvt);
            var bDiff=false;
            bDiff=this._setTransform(wel);
            bDiff=this._setStyle(wel,this._htCurrentTask.htStyle)||bDiff;
            if(nDuration===0){
                this._onTransitionEnd()
            }
            else{
                if(!bDiff){
                    var self=this;
                    setTimeout(function(){
                        self._onTransitionEnd()
                    }
                    ,nDuration)
                }
                
            }
            
        }
        
    }
    ,_setDefaultTransition:function(wel,bAttachEvt){
        for(var p in this._htCurrentTask.htDefault){
            var sValue=this._htCurrentTask.htDefault[p];
            if(!(p.indexOf("duration")>-1&&!bAttachEvt)){
                wel.$value().style[this._sCssPrefix+p]=sValue
            }
            
        }
        
    }
    ,_setStyle:function(wel,htOption){
        var bDiff=false;
        for(var p in htOption){
            var sCurrent=wel.css(p);
            if(sCurrent!=htOption[p]){
                bDiff=true
            }
            wel.css(p,htOption[p])
        }
        return bDiff
    }
    ,_setStyleForAndroid:function(){},_setTransform:function(wel){
        var bDiff=false;
        if(this._bAndroid){
            bDiff=this._setTransformForAnrdoid(wel)
        }
        else{
            bDiff=this._setTransformForIos(wel)
        }
        return bDiff
    }
    ,_setTransformForIos:function(wel){
        var bDiff=false;
        for(var p in this._htCurrentTask.htTransform){
            var sValue=this._htCurrentTask.htTransform[p];
            wel.$value().style[this._sCssPrefix+p]=sValue;
            bDiff=true
        }
        return bDiff
    }
    ,_setTransformForAnrdoid:function(wel){
        var bDiff=false;
        var el=wel.$value();
        for(var p in this._htCurrentTask.htTransform){
            var sValue=this._htCurrentTask.htTransform[p];
            if(sValue.indexOf("translate")>-1){
                var nDuration=this._htCurrentTask.nDuration;
                var reg=new RegExp(/(translate.*)\((.*)\)/);
                var aMatch=sValue.match(reg);
                var sPreValue=aMatch[1];
                var aTemp=aMatch[2].replace(/px/g,"").split(",");
                var sTransfrom="transform";
                var htBeforeOffset=MobileCommentJindo.m.getCssOffset(el);
                var startTime=Date.now();
                var self=this;
                (function translate(){
                    var now=Date.now();
                    if(now>=(startTime+nDuration)){
                        clearTimeout(self._nTimerAnimate);
                        el.style[self._sCssPrefix+sTransfrom]=sValue;
                        self._onTransitionEnd();
                        return
                    }
                    var nGap=(now-startTime);
                    var nX=((sPreValue.indexOf("X")>-1)||(aTemp.length>1))?aTemp[0]:null;
                    var nY=null;
                    if(sPreValue.indexOf("Y")>-1){
                        nY=aTemp[0]
                    }
                    else{
                        if(aTemp.length>1){
                            nY=aTemp[1]
                        }
                        
                    }
                    var nZ=null;
                    if(sPreValue.indexOf("Z")>-1){
                        nZ=aTemp[0]
                    }
                    else{
                        if(aTemp.length>2){
                            nZ=aTemp[2]
                        }
                        
                    }
                    var aText=[];
                    var sX=(nX!==null)?self._getcubicBeziserPosition(htBeforeOffset.left,nX,nDuration,nGap)+"px":null;
                    var sY=(nY!==null)?self._getcubicBeziserPosition(htBeforeOffset.top,nY,nDuration,nGap)+"px":null;
                    var sZ=(nZ!==null)?nZ+"px":null;
                    if(sX!==null){
                        aText.push(sX)
                    }
                    if(sY!==null){
                        aText.push(sY)
                    }
                    if(sZ!==null){
                        aText.push(sZ)
                    }
                    el.style[self._sCssPrefix+sTransfrom]=sPreValue+"("+aText.join(",")+")";
                    self._nTimerAnimate=setTimeout(translate,1)
                })()
            }
            else{
                wel.$value().style[this._sCssPrefix+p]=sValue
            }
            bDiff=true
        }
        return bDiff
    }
    ,_bAttachTransitionEvt:function(){
        var bValue=true;
        if(this._htCurrentTask.nDuration===0){
            bValue=false
        }
        else{
            if(this._bAndroid){
                for(var p in this._htCurrentTask.htTransform){
                    var sValue=this._htCurrentTask.htTransform[p];
                    if(sValue.indexOf("translate")>-1){
                        bValue=false
                    }
                    
                }
                
            }
            
        }
        return bValue
    }
    ,_setBeforeStatus:function(wel){
        var nIndex=this._getBeforeStatusElement(wel.$value());
        if(nIndex>-1){
            this._aBeforeStatus[nIndex].style=wel.attr("style")
        }
        else{
            this._aBeforeStatus.push({
                el:wel.$value(),style:wel.attr("style")
            })
        }
        
    }
    ,_getBeforeStatusElement:function(el){
        var nIndex=-1;
        for(var i=0,nLen=this._aBeforeStatus.length;
        i<nLen;
        i++){
            if(this._aBeforeStatus[i].el===el){
                nIndex=i;
                break
            }
            
        }
        return nIndex
    }
    ,_getDefaultTransition:function(){
        return{
            sTransitionTimingFunction:this.option("sTransitionTimingFunction"),TransitionProperty:"all"
        }
        
    }
    ,_fireCustomEvent:function(sName,htParam){
        return this.fireEvent(sName,htParam)
    }
    ,_onTransitionEnd:function(){
        this._detachTransitionEnd();
        this._initTransition();
        if(this._htCurrentTask){
            var sCallbackType=typeof this._htCurrentTask.fCallback;
            if(sCallbackType=="function"){
                var self=this;
                if(this._bAndroid){
                    setTimeout(function(){
                        self._htCurrentTask.fCallback()
                    }
                    ,5)
                }
                else{
                    self._htCurrentTask.fCallback()
                }
                
            }
            else{
                if(sCallbackType=="object"){
                    var wel=MobileCommentJindo.$Element(this._htCurrentTask.elTarget);
                    for(var p in this._htCurrentTask.fCallback.htTransform){
                        var sValue=this._htCurrentTask.fCallback.htTransform[p];
                        if(p=="transform"){
                            var sPrefix=this._sCssPrefix+p;
                            var sText=wel.$value().style[sPrefix];
                            if(sText.length>0){
                                sValue=sValue
                            }
                            
                        }
                        wel.$value().style[this._sCssPrefix+p]=sValue
                    }
                    for(var p in this._htCurrentTask.fCallback.htStyle){
                        wel.css(p,this._htCurrentTask.fCallback.htStyle[p])
                    }
                    
                }
                
            }
            
        }
        if(this._htCurrentTask){
            this._fireCustomEvent("end",{
                element:this._htCurrentTask.elTarget,sTaskName:this._htCurrentTask.sTaskName,nDuration:this._htCurrentTask.nDuration
            })
        }
        var self=this;
        setTimeout(function(){
            self._prepareTask()
        }
        ,10)
    }
    ,_initTransition:function(el){
        if(typeof el==="undefined"){
            el=this._elCurrent
        }
        el.style[this._sCssPrefix+"transition-duration"]=null;
        el.style[this._sCssPrefix+"transition-timing-function"]=null;
        el.style[this._sCssPrefix+"perspective"]=null;
        el.style[this._sCssPrefix+"transform-style"]=null;
        el.style[this._sCssPrefix+"transition-property"]=null
    }
    ,_getcubicBeziserPosition:function(nStart,nEnd,nDuration,nCurrentTime){
        nStart=nStart*1;
        nEnd=nEnd*1;
        var sFunction=this.option("sTransitionTimingFunction").replace(/-/g,"_");
        var f=MobileCommentJindo.m.TimingFunction[sFunction];
        var t=nCurrentTime/nDuration;
        t=(t>1)?1:t;
        var nCurrent=f(t);
        var nValue=nStart+((nEnd-nStart)*nCurrent.toFixed(2));
        return nValue
    }
    ,_attachTransitionEnd:function(el){
        this._elTransition=el;
        MobileCommentJindo.m.attachTransitionEnd(this._elTransition,this._htEvent.transitionEnd)
    }
    ,_detachTransitionEnd:function(){
        if(this._elTransition){
            MobileCommentJindo.m.detachTransitionEnd(this._elTransition,this._htEvent.transitionEnd);
            this._elTransition=null
        }
        
    }
    ,_attachEvent:function(){
        this._htEvent={};
        this._htEvent.transitionEnd=MobileCommentJindo.$Fn(this._onTransitionEnd,this).bind()
    }
    ,_detachEvent:function(){
        this._detachTransitionEnd();
        this._htEvent=null
    }
    ,destroy:function(){
        this._detachEvent();
        for(var p in this._htWElement){
            this._htWElement[p]=null
        }
        this._htWElement=null;
        this._aTaskQueue=null;
        this._bIsPlaying=null;
        this._sCssPrefix=null;
        this._aBeforeStatus=null;
        this._bAndroid=null;
        this._nTimerAnimate=null;
        this._htCurrentTask=null
    }
    
}).extend(MobileCommentJindo.Component);
MobileCommentJindo.m.DragArea=MobileCommentJindo.$Class({
    $init:function(el,htUserOption){
        this.option({
            sClassPrefix:"drag-",bFlowOut:false,nThreshold:10,nMoveThreshold:3,bActivateOnload:true
        });
        this.option(htUserOption||{});
        this._initVar();
        this._setWrapperElement(el);
        this._initTouch();
        this._setAnchorElement();
        if(this.option("bActivateOnload")){
            this.activate()
        }
        
    }
    ,_initVar:function(){
        this._oTouch=null;
        this._sDragClass="."+this.option("sClassPrefix")+"dragging";
        this._sHandleClass="."+this.option("sClassPrefix")+"handle";
        this._htInfo={
            elDrag:null,elHandle:null,nStartX:null,nStartY:null,nX:null,nY:null,bDragStart:false,nCount:0,bPrepared:false
        };
        this._sCssUserSelect="-"+MobileCommentJindo.m.getCssPrefix()+"-user-select";
        this._sCssUserSelectValue=document.body.style[this._sCssUserSelect];
        var htInfo=MobileCommentJindo.m.getDeviceInfo();
        this._isIos=(htInfo.iphone||htInfo.ipad);
        this._aAnchor=null;
        this._fnDummyFnc=function(){
            return false
        };
        this._bBlocked=false;
        var nVersion=parseFloat(htInfo.version,10);
        this._bTouchStop=false;
        this._bTouchStop=htInfo.android&&((nVersion==2.1)||(nVersion>=3));
        if(!this._bTouchStop){
            this._bTouchStop=htInfo.iphone&&(nVersion>=3&&nVersion<4)
        }
        
    }
    ,_setWrapperElement:function(el){
        this._htWElement={};
        el=MobileCommentJindo.$(el);
        this._htWElement.base=MobileCommentJindo.$Element(el)
    }
    ,_initTouch:function(){
        if(!this._oTouch){
            this._oTouch=new MobileCommentJindo.m.Touch(this._htWElement.base.$value(),{
                nSlopeThreshold:1,nMoveThreshold:this.option("nMoveThreshold"),bActivateOnload:false
            });
            this._oTouch.setSlope(-1,-1)
        }
        
    }
    ,_getDragElement:function(el,sClass){
        if(MobileCommentJindo.$$.test(el,"input[type=text], textarea, select")){
            return null
        }
        var self=this;
        var isChildOfDragArea=function(baseElement,el){
            if(!el){
                return false
            }
            if(baseElement===document||baseElement===el){
                return true
            }
            return MobileCommentJindo.$Element(baseElement).isParentOf(el)
        };
        var elReturn=MobileCommentJindo.$$.test(el,this._sDragClass)?el:MobileCommentJindo.m.getClosest(this._sDragClass,el);
        if(!isChildOfDragArea(this._htWElement.base,elReturn)){
            elReturn=null
        }
        var elHandle=null;
        if(elReturn){
            try{
                elHandle=MobileCommentJindo.$$.getSingle(this._sHandleClass,elReturn)
            }
            catch(e){}if(elHandle){
                if(!isChildOfDragArea(elHandle,el)){
                    elReturn=null
                }
                
            }
            
        }
        return{
            elDrag:elReturn,elHandle:elHandle
        }
        
    }
    ,_onStart:function(oCustomEvt){
        if(!this.isActivating()){
            return
        }
        this._initInfo();
        var htElement=this._getDragElement(oCustomEvt.element,this._sHandleClass);
        if(!htElement.elDrag){
            return
        }
        var htParam={
            elHandle:htElement.elHandle,elDrag:htElement.elDrag,oEvent:oCustomEvt.oEvent
        };
        if(!this.fireEvent("handleDown",htParam)){
            return
        }
        if(this._bTouchStop){
            oCustomEvt.oEvent.stop()
        }
        this._htInfo.bPrepared=true;
        this._clearAnchor();
        this._htInfo.welDrag=MobileCommentJindo.$Element(htParam.elDrag);
        this._htInfo.elHandle=htParam.elHandle;
        var htOffset=this._htInfo.welDrag.offset();
        this._htInfo.nStartX=htOffset.left;
        this._htInfo.nStartY=htOffset.top;
        document.body.style[this._sCssUserSelect]="none";
        this._oTouch.attach({
            touchMove:this._htEvent.touchMove,touchEnd:this._htEvent.touchEnd
        })
    }
    ,_onMove:function(oCustomEvt){
        if(!this._htInfo.bPrepared){
            return
        }
        var nDisX=oCustomEvt.nDistanceX,nDisY=oCustomEvt.nDistanceY;
        if((Math.abs(nDisX)+Math.abs(nDisY))<this.option("nThreshold")){
            return
        }
        oCustomEvt.oEvent.stop();
        var htOffset={
            nX:this._htInfo.nStartX+nDisX,nY:this._htInfo.nStartY+nDisY
        };
        if(!this.option("bFlowOut")){
            var htNewOffset=this._onReCalculateOffset(this._htInfo.welDrag.$value(),htOffset.nX,htOffset.nY);
            htOffset.nX=htNewOffset.nX;
            htOffset.nY=htNewOffset.nY
        }
        var htParam={
            nX:htOffset.nX,nY:htOffset.nY,elDrag:this._htInfo.welDrag.$value(),elHandle:this._htInfo.elHandle,nGapX:nDisX,nGapY:nDisY,nDragCount:this._htInfo.nCount,nTouchX:oCustomEvt.nX,nTouchY:oCustomEvt.nY
        };
        if(!this._htInfo.bDragStart){
            if(!this.fireEvent("dragStart",htParam)){
                this._htInfo.bPrepared=false;
                return
            }
            
        }
        this._htInfo.bDragStart=true;
        if(!this.fireEvent("beforeDrag",htParam)){
            return
        }
        this._htInfo.welDrag.css("position","absolute");
        this._htInfo.welDrag.offset(htParam.nY,htParam.nX);
        this._htInfo.nX=htParam.nX;
        this._htInfo.nY=htParam.nY;
        this._htInfo.nCount++;
        this.fireEvent("drag",htParam)
    }
    ,_onReCalculateOffset:function(elDrag,nX,nY){
        elParent=this._htWElement.base;
        var htOffset=elParent.offset();
        var htParent={
            nX:elParent.$value().offsetLeft,nY:elParent.$value().offsetTop,nWidth:elParent.$value().offsetWidth,nHeight:elParent.$value().offsetHeight
        };
        var htDrag={
            nWidth:elDrag.offsetWidth,nHeight:elDrag.offsetHeight
        };
        var newX=Math.max(nX,htParent.nX);
        newX=Math.min(newX,htParent.nX+htParent.nWidth-htDrag.nWidth);
        var newY=Math.max(nY,htParent.nY);
        newY=Math.min(newY,htParent.nY+htParent.nHeight-htDrag.nHeight);
        return{
            nX:newX,nY:newY
        }
        
    }
    ,_onEnd:function(oCustomEvt){
        if(!this._htInfo.bPrepared){
            return
        }
        this._stopDrag(false);
        if(oCustomEvt.sMoveType===MobileCommentJindo.m.MOVETYPE[3]||oCustomEvt.sMoveType===MobileCommentJindo.m.MOVETYPE[4]){
            this._restoreAnchor()
        }
        if(this._htInfo.welDrag){
            var htParam={
                elDrag:this._htInfo.welDrag.$value(),elHandle:this._htInfo.elHandle
            };
            this.fireEvent("handleUp",htParam)
        }
        this._initInfo()
    }
    ,isDragging:function(){
        return this._htInfo.bDragStart
    }
    ,stopDragging:function(){
        this._stopDrag(true)
    }
    ,_stopDrag:function(bInterupted){
        if(typeof bInterupted==="undefined"){
            bInterupted=false
        }
        this._oTouch.detach({
            touchMove:this._htEvent.touchMove,touchEnd:this._htEvent.touchEnd
        });
        document.body.style[this._sCssUserSelect]=this._sCssUserSelectValue?this._sCssUserSelectValue:"";
        if(this.isDragging()){
            var htParam={
                nX:parseInt(this._htInfo.welDrag.css("left"),10)||0,nY:parseInt(this._htInfo.welDrag.css("top"),10)||0,elDrag:this._htInfo.welDrag.$value(),elHandle:this._htInfo.elHandle,bInterupted:bInterupted
            };
            this.fireEvent("dragEnd",htParam);
            this._htInfo.bDragStart=false
        }
        
    }
    ,_setAnchorElement:function(){
        if(this._isIos){
            this._aAnchor=MobileCommentJindo.$$("A",this._htWElement.base.$value())
        }
        
    }
    ,_clearAnchor:function(){
        if(this._aAnchor&&!this._bBlocked){
            var aClickAddEvent=null;
            for(var i=0,nILength=this._aAnchor.length;
            i<nILength;
            i++){
                if(this._fnDummyFnc!==this._aAnchor[i].onclick){
                    this._aAnchor[i]._onclick=this._aAnchor[i].onclick
                }
                this._aAnchor[i].onclick=this._fnDummyFnc;
                aClickAddEvent=this._aAnchor[i].___listeners___||[];
                for(var j=0,nJLength=aClickAddEvent.length;
                j<nJLength;
                j++){
                    ___Old__removeEventListener___.call(this._aAnchor[i],"click",aClickAddEvent[j].listener,aClickAddEvent[j].useCapture)
                }
                
            }
            this._bBlocked=true
        }
        
    }
    ,_restoreAnchor:function(){
        if(this._aAnchor&&this._bBlocked){
            var aClickAddEvent=null;
            for(var i=0,nILength=this._aAnchor.length;
            i<nILength;
            i++){
                if(this._fnDummyFnc!==this._aAnchor[i]._onclick){
                    this._aAnchor[i].onclick=this._aAnchor[i]._onclick
                }
                else{
                    this._aAnchor[i].onclick=null
                }
                aClickAddEvent=this._aAnchor[i].___listeners___||[];
                for(var j=0,nJLength=aClickAddEvent.length;
                j<nJLength;
                j++){
                    ___Old__addEventListener___.call(this._aAnchor[i],"click",aClickAddEvent[j].listener,aClickAddEvent[j].useCapture)
                }
                
            }
            this._bBlocked=false
        }
        
    }
    ,_initInfo:function(){
        this._htInfo.welDrag=null;
        this._htInfo.elHandle=null;
        this._htInfo.nStartX=null;
        this._htInfo.nStartY=null;
        this._htInfo.nX=null;
        this._htInfo.nY=null;
        this._htInfo.bDragStart=false;
        this._htInfo.nCount=0
    }
    ,_onActivate:function(){
        this._attachEvent();
        this._oTouch.activate()
    }
    ,_onDeactivate:function(){
        this._detachEvent();
        this._oTouch.deactivate()
    }
    ,_attachEvent:function(){
        this._htEvent={};
        this._htEvent.touchMove=MobileCommentJindo.$Fn(this._onMove,this).bind();
        this._htEvent.touchEnd=MobileCommentJindo.$Fn(this._onEnd,this).bind();
        this._htEvent.touchStart=MobileCommentJindo.$Fn(this._onStart,this).bind();
        this._oTouch.attach("touchStart",this._htEvent.touchStart)
    }
    ,_detachEvent:function(){
        this._oTouch.detachAll();
        for(var p in this._htEvent){
            this._htEvent[p]=null
        }
        this._htEvent=null
    }
    ,destroy:function(){
        this.deactivate();
        for(var p in this._htWElement){
            this._htWElement[p]=null
        }
        for(var p in this._htInfo){
            this._htInfo[p]=null
        }
        this._htWElement=null;
        this._htInfo=null;
        this._isIos=null;
        this._aAnchor=null;
        this._fnDummyFnc=null;
        this._bBlocked=null;
        this._bTouchStop=null
    }
    
}).extend(MobileCommentJindo.UIComponent);
window.requestAnimationFrame=(function(){
    return window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(callback){
        return setTimeout(callback,1)
    }
    
})();
window.cancelRequestAnimationFrame=(function(){
    return window.cancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||clearTimeout
})();
MobileCommentJindo.m.CoreScroll=MobileCommentJindo.$Class({
    $init:function(el,htUserOption){
        this.option({
            bActivateOnload:true,bUseHScroll:false,bUseVScroll:true,bUseMomentum:(MobileCommentJindo.m.getDeviceInfo().android?false:true),nDeceleration:0.0006,nOffsetTop:0,nOffsetBottom:0,nHeight:0,nWidth:0,bUseBounce:true,bUseHighlight:true,sClassPrefix:"scroll_",bUseTransition:this._isTransDevice()
        });
        this.option(htUserOption||{});
        this._initVar();
        this._setWrapperElement(el);
        if(this.option("bActivateOnload")){
            this.activate()
        }
        
    }
    ,_initVar:function(){
        this.isAndroid=MobileCommentJindo.m.getDeviceInfo().android;
        this.nVersion=parseInt(MobileCommentJindo.m.getDeviceInfo().version,10);
        this.sCssPrefix=MobileCommentJindo.m.getCssPrefix();
        this.sTranOpen=null;
        this.sTranEnd=null;
        this.nWrapperW=null;
        this.nWrapperH=null;
        this.nScrollW=null;
        this.nScrollH=null;
        this.nMaxScrollLeft=null;
        this.nMaxScrollTop=null;
        this.nMinScrollTop=null;
        this.bUseHScroll=null;
        this.bUseVScroll=null;
        this._oTouch=null;
        this._nLeft=0;
        this._nTop=0;
        this._bUseHighlight=this.option("bUseHighlight");
        this._aAni=[];
        this._nAniTimer=null;
        this._nFixedBugTimer=null;
        this._isAnimating=false;
        this._isControling=false;
        this._isStop=false;
        this._setTrans();
        if(this._bUseHighlight){
            if(this.isAndroid){
                this._elDummyTag=null
            }
            else{
                this._aAnchor=null;
                this._fnDummyFnc=function(){
                    return false
                };
                this._bBlocked=false
            }
            
        }
        
    }
    ,_setTrans:function(){
        var htInfo=MobileCommentJindo.m.getDeviceInfo();
        if(this._isTransDevice()){
            this.sTranOpen="3d(";
            this.sTranEnd=",0)"
        }
        else{
            this.sTranOpen="(";
            this.sTranEnd=")"
        }
        
    }
    ,getCurrentPos:function(){
        return{
            nTop:this._nTop,nLeft:this._nLeft
        }
        
    }
    ,_isTransDevice:function(){
        var htInfo=MobileCommentJindo.m.getDeviceInfo();
        return htInfo.iphone||htInfo.ipad||htInfo.galaxyS2
    }
    ,setLayer:function(el){
        el=(typeof el=="string"?MobileCommentJindo.$(el):el);
        this._htWElement.wrapper=MobileCommentJindo.$Element(el);
        this._htWElement.wrapper.css({
            position:"relative",overflow:"hidden"
        });
        this.setScroller()
    }
    ,setScroller:function(){
        this._htWElement.scroller=this._htWElement.wrapper.first();
        this._htWElement.scroller.css({
            position:"absolute",zIndex:1,left:0,top:0
        }).css(this.sCssPrefix+"TransitionProperty","-webkit-transform").css(this.sCssPrefix+"TransitionDuration",0).css(this.sCssPrefix+"Transform","translate"+this.sTranOpen+"0,0"+this.sTranEnd);
        if(this.option("bUseTransition")){
            this._htWElement.scroller.css(this.sCssPrefix+"TransitionTimingFunction","cubic-bezier(0.33,0.66,0.66,1)")
        }
        if(this._bUseHighlight&&this.isAndroid&&this.nVersion<3){
            this._elDummyTag=MobileCommentJindo.$$.getSingle("._scroller_dummy_atag_",this._htWElement.scroller.$value());
            if(!this._elDummyTag){
                this._elDummyTag=MobileCommentJindo.$("<a href='javascript:void(0);' class='_scroller_dummy_atag_'></a>");
                this._elDummyTag.style.position="absolute";
                this._elDummyTag.style.left="-1000px";
                this._elDummyTag.style.height="0px";
                this._elDummyTag.style.width="0px";
                this._htWElement.scroller.append(this._elDummyTag)
            }
            
        }
        
    }
    ,_setWrapperElement:function(el){
        this._htWElement={};
        this.setLayer(el)
    }
    ,refresh:function(bNoRepos){
        if(!this.isActivating()){
            return
        }
        if(this.option("nWidth")){
            this._htWElement.wrapper.width(parseInt(this.option("nWidth"),10))
        }
        if(this.option("nHeight")){
            this._htWElement.wrapper.height(parseInt(this.option("nHeight"),10))
        }
        this.nWrapperW=this._htWElement.wrapper.width();
        this.nWrapperH=this._htWElement.wrapper.height();
        this.nScrollW=this._htWElement.scroller.width();
        this.nScrollH=this._htWElement.scroller.height()-this.option("nOffsetBottom");
        this.nMaxScrollLeft=this.nWrapperW-this.nScrollW;
        this.nMaxScrollTop=this.nWrapperH-this.nScrollH;
        this.nMinScrollTop=-this.option("nOffsetTop");
        if(this._bUseHighlight&&!this.isAndroid){
            this._aAnchor=MobileCommentJindo.$$("A",this._htWElement.scroller.$value())
        }
        this.bUseHScroll=this.option("bUseHScroll")&&(this.nWrapperW<this.nScrollW);
        this.bUseVScroll=this.option("bUseVScroll")&&(this.nWrapperH<this.nScrollH);
        if(this.bUseHScroll&&!this.bUseVScroll){
            this._htWElement.scroller.$value().style.height="100%"
        }
        if(!this.bUseHScroll&&this.bUseVScroll){
            this._htWElement.scroller.$value().style.width="100%"
        }
        if(!this.bUseHScroll&&!this.bUseVScroll){
            this._fixedBugForAndroid()
        }
        if(!bNoRepos){
            this.restorePos(0)
        }
        
    }
    ,_setPos:function(nLeft,nTop){
        nLeft=this.bUseHScroll?nLeft:0;
        nTop=this.bUseVScroll?nTop:0;
        if(this._fireEvent("beforePosition")){
            this._isControling=true;
            this._nLeft=nLeft;
            this._nTop=nTop;
            if(this._bUseHighlight&&this.isAndroid){
                var htStyleOffset=this.getStyleOffset(this._htWElement.scroller);
                nLeft-=htStyleOffset.left;
                nTop-=htStyleOffset.top
            }
            this._htWElement.scroller.css(this.sCssPrefix+"Transform","translate"+this.sTranOpen+nLeft+"px, "+nTop+"px"+this.sTranEnd);
            this._fireEvent("position")
        }
        
    }
    ,restorePos:function(nDuration){
        if(!this.bUseHScroll&&!this.bUseVScroll){
            return
        }
        var nNewLeft=this.getPosLeft(this._nLeft),nNewTop=this.getPosTop(this._nTop);
        if(nNewLeft===this._nLeft&&nNewTop===this._nTop){
            this._isControling=false;
            this._fireEvent("afterScroll");
            this._fixedBugForAndroid();
            return
        }
        else{
            this.scrollTo(nNewLeft,nNewTop,nDuration)
        }
        
    }
    ,_getMomentum:function(nDistance,nSpeed,nMomentum,nSize,nMaxDistUpper,nMaxDistLower){
        var nDeceleration=this.option("nDeceleration"),nNewDist=nMomentum/nDeceleration,nNewTime=0,nOutsideDist=0;
        if(nDistance<0&&nNewDist>nMaxDistUpper){
            nOutsideDist=nSize/(6/(nNewDist/nSpeed*nDeceleration));
            nMaxDistUpper=nMaxDistUpper+nOutsideDist;
            nSpeed=nSpeed*nMaxDistUpper/nNewDist;
            nNewDist=nMaxDistUpper
        }
        else{
            if(nDistance>0&&nNewDist>nMaxDistLower){
                nOutsideDist=nSize/(6/(nNewDist/nSpeed*nDeceleration));
                nMaxDistLower=nMaxDistLower+nOutsideDist;
                nSpeed=nSpeed*nMaxDistLower/nNewDist;
                nNewDist=nMaxDistLower
            }
            
        }
        nNewDist=nNewDist*(nDistance>0?-1:1);
        nNewTime=nSpeed/nDeceleration;
        return{
            nDist:nNewDist,nTime:Math.round(nNewTime)
        }
        
    }
    ,_stop:function(){
        if(this.option("bUseTransition")){
            MobileCommentJindo.m.detachTransitionEnd(this._htWElement.scroller.$value(),this._htEvent.TransitionEnd)
        }
        else{
            cancelRequestAnimationFrame(this._nAniTimer)
        }
        this._aAni=[];
        this._isAnimating=false
    }
    ,scrollTo:function(nLeft,nTop,nDuration){
        this._stop();
        nLeft=this.bUseHScroll?nLeft:0;
        nTop=this.bUseVScroll?nTop:0;
        this._aAni.push({
            nLeft:nLeft,nTop:nTop,nDuration:nDuration||0
        });
        this._animate()
    }
    ,isMoving:function(){
        return this._isControling
    }
    ,_animate:function(){
        var self=this,oStep;
        if(this._isAnimating){
            return
        }
        if(!this._aAni.length){
            this.restorePos(300);
            return
        }
        do{
            oStep=this._aAni.shift();
            if(!oStep){
                return
            }
            
        }
        while(oStep.nLeft==this._nLeft&&oStep.nTop==this._nTop);
        this._isAnimating=true;
        if(this.option("bUseTransition")){
            this._transitionTime(oStep.nDuration);
            this._setPos(oStep.nLeft,oStep.nTop);
            this._isAnimating=false;
            if(oStep.nDuration){
                MobileCommentJindo.m.attachTransitionEnd(this._htWElement.scroller.$value(),this._htEvent.TransitionEnd)
            }
            else{
                this.restorePos(0)
            }
            
        }
        else{
            var startTime=Date.now(),nStartLeft=this._nLeft,nStartTop=this._nTop;
            (function animate(){
                var now=Date.now(),nEaseOut;
                if(now>=startTime+oStep.nDuration){
                    self._setPos(oStep.nLeft,oStep.nTop);
                    self._isAnimating=false;
                    self._animate();
                    return
                }
                now=(now-startTime)/oStep.nDuration-1;
                nEaseOut=Math.sqrt(1-Math.pow(now,2));
                self._setPos((oStep.nLeft-nStartLeft)*nEaseOut+nStartLeft,(oStep.nTop-nStartTop)*nEaseOut+nStartTop);
                if(self._isAnimating){
                    self._nAniTimer=requestAnimationFrame(animate)
                }
                
            })()
        }
        
    }
    ,_transitionTime:function(nDuration){
        nDuration+="ms";
        this._htWElement.scroller.css(this.sCssPrefix+"TransitionDuration",nDuration);
        this._fireEventSetDuration(nDuration)
    }
    ,_clearAnchorForIos:function(){
        if(this._aAnchor&&!this._bBlocked){
            var aClickAddEvent=null;
            for(var i=0,nILength=this._aAnchor.length;
            i<nILength;
            i++){
                if(this._fnDummyFnc!==this._aAnchor[i].onclick){
                    this._aAnchor[i]._onclick=this._aAnchor[i].onclick
                }
                this._aAnchor[i].onclick=this._fnDummyFnc;
                aClickAddEvent=this._aAnchor[i].___listeners___||[];
                for(var j=0,nJLength=aClickAddEvent.length;
                j<nJLength;
                j++){
                    ___Old__removeEventListener___.call(this._aAnchor[i],"click",aClickAddEvent[j].listener,aClickAddEvent[j].useCapture)
                }
                
            }
            this._bBlocked=true
        }
        
    }
    ,_restoreAnchorForIos:function(){
        if(this._aAnchor&&this._bBlocked){
            var aClickAddEvent=null;
            for(var i=0,nILength=this._aAnchor.length;
            i<nILength;
            i++){
                if(this._fnDummyFnc!==this._aAnchor[i]._onclick){
                    this._aAnchor[i].onclick=this._aAnchor[i]._onclick
                }
                else{
                    this._aAnchor[i].onclick=null
                }
                aClickAddEvent=this._aAnchor[i].___listeners___||[];
                for(var j=0,nJLength=aClickAddEvent.length;
                j<nJLength;
                j++){
                    ___Old__addEventListener___.call(this._aAnchor[i],"click",aClickAddEvent[j].listener,aClickAddEvent[j].useCapture)
                }
                
            }
            this._bBlocked=false
        }
        
    }
    ,_stopScroll:function(){
        var htCssOffset=MobileCommentJindo.m.getCssOffset(this._htWElement.scroller.$value()),htStyleOffset={
            left:0,top:0
        }
        ,nTop,nLeft;
        if(this._bUseHighlight&&this.isAndroid){
            htStyleOffset=this.getStyleOffset(this._htWElement.scroller)
        }
        nLeft=htCssOffset.left+htStyleOffset.left;
        nTop=htCssOffset.top+htStyleOffset.top;
        if(nLeft!==this._nLeft||nTop!==this._nTop){
            this._stop();
            this._isStop=true;
            this._setPos(this.getPosLeft(nLeft),this.getPosTop(nTop));
            this._isControling=false;
            this._fireEvent("afterScroll");
            this._fixedBugForAndroid()
        }
        
    }
    ,getStyleOffset:function(wel){
        var nLeft=parseInt(wel.css("left"),10),nTop=parseInt(wel.css("top"),10);
        nLeft=isNaN(nLeft)?0:nLeft;
        nTop=isNaN(nTop)?0:nTop;
        return{
            left:nLeft,top:nTop
        }
        
    }
    ,getPosLeft:function(nPos){
        return(nPos>=0?0:(nPos<=this.nMaxScrollLeft?this.nMaxScrollLeft:nPos))
    }
    ,getPosTop:function(nPos){
        return(nPos>=this.nMinScrollTop?this.nMinScrollTop:(nPos<=this.nMaxScrollTop?this.nMaxScrollTop:nPos))
    }
    ,_fireEventSetDuration:function(nDuration){
        this.fireEvent("setDuration",{
            nDuration:nDuration,bUseHScroll:this.bUseHScroll,bUseVScroll:this.bUseVScroll
        })
    }
    ,_fireEventbeforeScroll:function(htParam){
        return this.fireEvent("beforeScroll",htParam)
    }
    ,_fireEventScroll:function(htParam){
        this.fireEvent("scroll",htParam)
    }
    ,_fireEvent:function(sType){
        return this.fireEvent(sType,{
            nLeft:this._nLeft,nTop:this._nTop,nMaxScrollLeft:this.nMaxScrollLeft,nMaxScrollTop:this.nMaxScrollTop
        })
    }
    ,_fireTouchEvent:function(sType,we){
        return this.fireEvent(sType,{
            nLeft:this._nLeft,nTop:this._nTop,nMaxScrollLeft:this.nMaxScrollLeft,nMaxScrollTop:this.nMaxScrollTop,oEvent:we
        })
    }
    ,_onStart:function(we){
        if(!this.option("bUseHighlight")){
            we.oEvent.stop(MobileCommentJindo.$Event.DEFAULT_ALL)
        }
        this._clearFixedBug();
        if(this._fireTouchEvent("beforeTouchStart",we)){
            this._clearAnchorForIos();
            this._isAnimating=false;
            this._isControling=true;
            this._isStop=false;
            if(this.option("bUseTransition")){
                this._transitionTime(0)
            }
            this._stopScroll();
            this._oTouch.attach({
                touchMove:this._htEvent.touchMove,touchEnd:this._htEvent.touchEnd
            });
            this._fireTouchEvent("touchStart",we)
        }
        
    }
    ,_onMove:function(we){
        var weParent=we.oEvent;
        if(we.sMoveType===MobileCommentJindo.m.MOVETYPE[0]){
            if(this.bUseHScroll){
                weParent.stop(MobileCommentJindo.$Event.CANCEL_ALL)
            }
            else{
                return true
            }
            
        }
        else{
            if(we.sMoveType===MobileCommentJindo.m.MOVETYPE[1]){
                if(this.bUseVScroll){
                    weParent.stop(MobileCommentJindo.$Event.CANCEL_ALL)
                }
                else{
                    return true
                }
                
            }
            else{
                if(we.sMoveType===MobileCommentJindo.m.MOVETYPE[2]){
                    weParent.stop(MobileCommentJindo.$Event.CANCEL_ALL)
                }
                else{
                    weParent.stop(MobileCommentJindo.$Event.CANCEL_ALL);
                    return true
                }
                
            }
            
        }
        if(this._fireTouchEvent("beforeTouchMove",we)){
            var nNewLeft,nNewTop;
            this._clearFixedBug();
            if(this.option("bUseBounce")){
                nNewLeft=this._nLeft+(this._nLeft>=0||this._nLeft<=this.nMaxScrollLeft?we.nVectorX/2:we.nVectorX);
                nNewTop=this._nTop+(this._nTop>=this.nMinScrollTop||this._nTop<=this.nMaxScrollTop?we.nVectorY/2:we.nVectorY)
            }
            else{
                nNewLeft=this.getPosLeft(this._nLeft+we.nVectorX);
                nNewTop=this.getPosTop(this._nTop+we.nVectorY)
            }
            this._setPos(nNewLeft,nNewTop);
            this._fireTouchEvent("touchMove",we)
        }
        
    }
    ,_onEnd:function(we){
        if(!this._fireTouchEvent("beforeTouchEnd",we)){
            return
        }
        this._clearFixedBug();
        this._oTouch.detach({
            touchMove:this._htEvent.touchMove,touchEnd:this._htEvent.touchEnd
        });
        if(we.sMoveType===MobileCommentJindo.m.MOVETYPE[0]||we.sMoveType===MobileCommentJindo.m.MOVETYPE[1]||we.sMoveType===MobileCommentJindo.m.MOVETYPE[2]){
            this._endForScroll(we)
        }
        else{
            this._isControling=false;
            if(!this._isStop){
                if(!this._bUseHighlight){
                    var sTagName=we.element.tagName;
                    if(sTagName!="SELECT"&&sTagName!="INPUT"&&sTagName!="TEXTAREA"){
                        MobileCommentJindo.$Element(we.element).fireEvent("click")
                    }
                    
                }
                else{
                    this._restoreAnchorForIos()
                }
                
            }
            
        }
        this._fireTouchEvent("touchEnd",we)
    }
    ,_endForScroll:function(we){
        var htMomentumX={
            nDist:0,nTime:0
        }
        ,htMomentumY={
            nDist:0,nTime:0
        }
        ,htParam={
            nMomentumX:we.nMomentumX,nMomentumY:we.nMomentumY,nDistanceX:we.nDistanceX,nDistanceY:we.nDistanceY,nLeft:this._nLeft,nTop:this._nTop
        };
        if(this.option("bUseMomentum")&&(we.nMomentumX||we.nMomentumY)){
            if(this.bUseHScroll){
                htMomentumX=this._getMomentum(-we.nDistanceX,we.nSpeedX,we.nMomentumX,this.nWrapperW,-this._nLeft,-this.nMaxScrollLeft+this._nLeft)
            }
            if(this.bUseVScroll){
                htMomentumY=this._getMomentum(-we.nDistanceY,we.nSpeedY,we.nMomentumY,this.nWrapperH,-this._nTop,-this.nMaxScrollTop+this._nTop)
            }
            htParam.nNextLeft=this._nLeft+htMomentumX.nDist;
            htParam.nNextTop=this._nTop+htMomentumY.nDist;
            htParam.nTime=Math.max(Math.max(htMomentumX.nTime,htMomentumY.nTime),10);
            if(this._fireEventbeforeScroll(htParam)){
                if(this.option("bUseBounce")){
                    this.scrollTo(htParam.nNextLeft,htParam.nNextTop,htParam.nTime)
                }
                else{
                    this.scrollTo(this.getPosLeft(htParam.nNextLeft),this.getPosTop(htParam.nNextTop),htParam.nTime)
                }
                this._fireEventScroll(htParam)
            }
            
        }
        else{
            htParam.nNextLeft=this._nLeft;
            htParam.nNextTop=this._nTop;
            htParam.nTime=0;
            if(this._fireEventbeforeScroll(htParam)){
                if(this._nLeft!==htParam.nNextLeft||this._nTop!==htParam.nNextTop){
                    this.scrollTo(htParam.nNextLeft,htParam.nNextTop,htParam.nTime)
                }
                else{
                    this.restorePos(300)
                }
                this._fireEventScroll(htParam)
            }
            
        }
        
    }
    ,_onTransitionEnd:function(we){
        MobileCommentJindo.m.detachTransitionEnd(this._htWElement.scroller.$value(),this._htEvent.TransitionEnd);
        this._animate()
    }
    ,_onDocumentStart:function(we){
        if(this._htWElement.wrapper.visible()){
            if(this._htWElement.wrapper.isChildOf(we.element)){
                return true
            }
            else{
                this._stopScroll()
            }
            
        }
        
    }
    ,_onActivate:function(){
        if(!this._oTouch){
            this._oTouch=new MobileCommentJindo.m.Touch(this._htWElement.wrapper.$value(),{
                nMoveThreshold:0,nMomentumDuration:(MobileCommentJindo.m.getDeviceInfo().android?500:200),nLongTapDuration:400,nTapThreshold:1,nSlopeThreshold:5
            })
        }
        else{
            this._oTouch.activate()
        }
        this._attachEvent();
        this.refresh()
    }
    ,_onDeactivate:function(){
        this._detachEvent();
        this._oTouch.deactivate()
    }
    ,_attachEvent:function(){
        this._htEvent={};
        this._htEvent.touchStart=MobileCommentJindo.$Fn(this._onStart,this).bind();
        this._htEvent.touchMove=MobileCommentJindo.$Fn(this._onMove,this).bind();
        this._htEvent.touchEnd=MobileCommentJindo.$Fn(this._onEnd,this).bind();
        this._htEvent.TransitionEnd=MobileCommentJindo.$Fn(this._onTransitionEnd,this).bind();
        this._htEvent.document=MobileCommentJindo.$Fn(this._onDocumentStart,this).attach(document,"touchstart");
        this._oTouch.attach("touchStart",this._htEvent.touchStart)
    }
    ,_fixedBugForAndroid:function(){
        if(this._bUseHighlight&&this.isAndroid){
            var self=this;
            this._clearFixedBug();
            this._nFixedBugTimer=setTimeout(function(){
                if(self._htWElement&&self._htWElement.scroller){
                    var ele=self._htWElement.scroller.$value();
                    var htCssOffset=MobileCommentJindo.m.getCssOffset(ele);
                    var htScrollOffset=self._htWElement.scroller.offset();
                    ele.style[self.sCssPrefix+"TransitionDuration"]=null;
                    ele.style[self.sCssPrefix+"Transform"]=null;
                    self._htWElement.scroller.offset(htCssOffset.top+htScrollOffset.top,htCssOffset.left+htScrollOffset.left);
                    if(self.nVersion<3){
                        self._elDummyTag.focus()
                    }
                    
                }
                
            }
            ,200)
        }
        
    }
    ,_clearFixedBug:function(){
        if(this._bUseHighlight&&this.isAndroid){
            clearTimeout(this._nFixedBugTimer);
            this._nFixedBugTimer=-1
        }
        
    }
    ,_detachEvent:function(){
        MobileCommentJindo.m.detachTransitionEnd(this._htWElement.scroller.$value(),this._htEvent.TransitionEnd);
        this._htEvent.document.detach(document,"touchstart");
        this._oTouch.detachAll();
        if(this._elDummyTag){
            this._htWElement.scroller.remove(this._elDummyTag)
        }
        
    }
    ,destroy:function(){
        this.deactivate();
        for(var p in this._htWElement){
            this._htWElement[p]=null
        }
        this._htWElement=null;
        this._oTouch.destroy();
        delete this._oTouch
    }
    
}).extend(MobileCommentJindo.UIComponent);
MobileCommentJindo.m.LayerPosition=MobileCommentJindo.$Class({
    $init:function(el,htUserOption){
        this.option({
            bActivateOnload:true,bAutoReposition:true,sPosition:"center",nLeftMargin:0,nRightMargin:0,nTopMargin:0,nBottomMargin:0
        });
        this.option(htUserOption||{});
        this._initVar();
        this._setWrapperElement(el);
        if(this.option("bActivateOnload")){
            this.activate()
        }
        
    }
    ,_isSupportFixed:function(){
        var htInfo=MobileCommentJindo.m.getDeviceInfo();
        var isFixed=false;
        if(htInfo.android){
            if(parseInt(htInfo.version,10)>=3){
                isFixed=true
            }
            else{
                isFixed=false
            }
            
        }
        else{
            if(htInfo.ipad||htInfo.iphone){
                if(parseInt(htInfo.version,10)>=5){
                    isFixed=true
                }
                else{
                    isFixed=false
                }
                
            }
            
        }
        return isFixed
    }
    ,_onActivate:function(){
        this._isVertical=MobileCommentJindo.m.isVertical();
        if(this.option("bAutoReposition")){
            this._attachEvent()
        }
        this.setPosition()
    }
    ,_onDeactivate:function(){
        if(this.option("bAutoReposition")){
            this._detachEvent()
        }
        
    }
    ,_initVar:function(){
        var nLeft=this.option("nLeftMargin"),nTop=this.option("nTopMargin");
        this._htMargin={
            nLeft:nLeft,nRight:this.option("nRightMargin"),nTop:nTop,nBottom:this.option("nBottomMargin")
        };
        this._sPosition=this.option("sPosition");
        this._htOldPosition={
            nTop:null,nLeft:null,nBottom:null
        };
        this._htPosition={
            nTop:null,nLeft:null,nBottom:null
        };
        this._bUseFixedProperty=this.option("bAutoReposition")&&this._isSupportFixed();
        this._isVertical=null;
        this._isAndroid=MobileCommentJindo.m.getDeviceInfo().android;
        this._nPreWidth=-1
    }
    ,getPosition:function(){
        return this._sPosition
    }
    ,getMargin:function(){
        return this._htMargin
    }
    ,getLayer:function(){
        return this._htWElement.element.$value()
    }
    ,getCurrentPosition:function(){
        return this._htPosition
    }
    ,_setWrapperElement:function(el){
        this._htWElement={};
        this.setLayer(el)
    }
    ,setLayer:function(el){
        el=(typeof el=="string"?MobileCommentJindo.$(el):el);
        this._htWElement.element=MobileCommentJindo.$Element(el);
        if(this._bUseFixedProperty){
            this._htWElement.element.css("position","fixed")
        }
        else{
            this._htWElement.element.css("position","absolute")
        }
        if(el.parentNode!=document.body){
            document.body.appendChild(el)
        }
        return this
    }
    ,top:function(htMargin){
        this.setPosition("top",htMargin)
    }
    ,bottom:function(htMargin){
        this.setPosition("bottom",htMargin)
    }
    ,center:function(htMargin){
        this.setPosition("center",htMargin)
    }
    ,all:function(htMargin){
        this.setPosition("all",htMargin)
    }
    ,_fixedLayerSize:function(nWidth,nHeight){
        var nLeft=parseInt(this._htMargin.nLeft,10),nTop=parseInt(this._htMargin.nTop,10),htPadding={
            "padding-top":parseInt(this._htWElement.element.css("padding-top"),10),"padding-bottom":parseInt(this._htWElement.element.css("padding-bottom"),10),"padding-left":parseInt(this._htWElement.element.css("padding-left"),10),"padding-right":parseInt(this._htWElement.element.css("padding-right"),10)
        }
        ,htBorder={
            "border-top-width":parseInt(this._htWElement.element.css("border-top-width"),10),"border-bottom-width":parseInt(this._htWElement.element.css("border-bottom-width"),10),"border-left-width":parseInt(this._htWElement.element.css("border-left-width"),10),"border-right-width":parseInt(this._htWElement.element.css("border-right-width"),10)
        };
        nWidth-=htPadding["padding-left"]+htPadding["padding-right"]+htBorder["border-left-width"]+htBorder["border-right-width"]+nLeft+parseInt(this._htMargin.nRight,10);
        nHeight-=htPadding["padding-top"]+htPadding["padding-bottom"]+htBorder["border-top-width"]+htBorder["border-bottom-width"]+nTop+parseInt(this._htMargin.nBottom,10);
        this._htWElement.element.css({
            width:nWidth+"px",height:nHeight+"px"
        });
        return{
            nTop:nTop,nLeft:nLeft
        }
        
    }
    ,_getPosition:function(){
        var el=this._htWElement.element.$value(),nLayerWidth=el.offsetWidth,nLayerHeight=el.offsetHeight,htElementPosition={},oClientSize=MobileCommentJindo.$Document().clientSize(),nWidth=oClientSize.width,nHeight=oClientSize.height;
        nLayerWidth+=parseInt(this._htWElement.element.css("marginLeft"),10)+parseInt(this._htWElement.element.css("marginRight"),10)||0;
        nLayerHeight+=parseInt(this._htWElement.element.css("marginTop"),10)+parseInt(this._htWElement.element.css("marginBottom"),10)||0;
        if(this._sPosition==="all"){
            htElementPosition=this._fixedLayerSize(nWidth,nHeight)
        }
        else{
            htElementPosition.nLeft=parseInt((nWidth-nLayerWidth)/2,10)+parseInt(this._htMargin.nLeft,10);
            switch(this._sPosition){
                case"top":htElementPosition.nTop=parseInt(this._htMargin.nTop,10);
                break;
                case"center":htElementPosition.nTop=parseInt((nHeight-nLayerHeight)/2,10)+parseInt(this._htMargin.nTop,10);
                break;
                case"bottom":if(this._bUseFixedProperty){
                    htElementPosition.nBottom=parseInt(this._htMargin.nBottom,10)
                }
                else{
                    htElementPosition.nTop=parseInt(nHeight-nLayerHeight,10)-parseInt(this._htMargin.nBottom,10)
                }
                break
            }
            if(!this._bUseFixedProperty){
                htElementPosition=this._adjustScrollPosition(htElementPosition)
            }
            
        }
        return htElementPosition
    }
    ,_adjustScrollPosition:function(htPosition){
        var htScrollPosition=MobileCommentJindo.$Document().scrollPosition();
        htPosition.nTop+=htScrollPosition.top;
        htPosition.nLeft+=htScrollPosition.left;
        return htPosition
    }
    ,setPosition:function(sPosition,htMargin){
        if(!this.isActivating()){
            return
        }
        this._htMargin=htMargin||this._htMargin;
        this._sPosition=sPosition||this._sPosition;
        if(this._fireEvent("beforePosition")){
            var bVisible=this._htWElement.element.visible();
            if(!bVisible){
                this._htWElement.element.css({
                    left:"-9999px"
                }).show()
            }
            this._htOldPosition=this._htPosition;
            this._htPosition=this._getPosition();
            if(!bVisible){
                this._htWElement.element.hide()
            }
            if(!bVisible||this._htOldPosition.nLeft!==this._htPosition.nLeft||this._htOldPosition.nTop!==this._htPosition.nTop||this._htOldPosition.nBottom!==this._htPosition.nBottom){
                if(typeof this._htPosition.nTop==="undefined"){
                    this._htWElement.element.$value().style.top=null
                }
                else{
                    if(typeof this._htPosition.nBottom==="undefined"){
                        this._htWElement.element.$value().style.bottom=null
                    }
                    
                }
                this._htWElement.element.css({
                    left:this._htPosition.nLeft+"px",top:this._htPosition.nTop+"px",bottom:this._htPosition.nBottom+"px"
                })
            }
            this._fireEvent("position")
        }
        
    }
    ,_attachEvent:function(){
        this._htEvent={};
        this._htEvent.actionEvent=MobileCommentJindo.$Fn(this._onEvent,this);
        this._htEvent.pageShow=MobileCommentJindo.$Fn(this._onPageShow,this).bind();
        if(this._bUseFixedProperty){
            this._htEvent.actionEvent.attach(window,"resize")
        }
        else{
            this._htEvent.actionEvent.attach(window,"scroll").attach(window,"resize")
        }
        MobileCommentJindo.m.bindPageshow(this._htEvent.pageShow);
        if(!this._isAndroid){
            this._htEvent.rotate=MobileCommentJindo.$Fn(this._onRotateForIos,this).attach(window,"orientationchange")
        }
        
    }
    ,_detachEvent:function(){
        this._htEvent.actionEvent.detach(window,"scroll").detach(window,"resize");
        MobileCommentJindo.m.unbindPageshow(this._htEvent.pageShow);
        if(!this._isAndroid){
            this._htEvent.rotate.detach(window,"orientationchange")
        }
        this._htEvent=null
    }
    ,_onEvent:function(we){
        if(this._htWElement.element.visible()){
            this.setPosition()
        }
        
    }
    ,_onRotateForIos:function(){
        if(this._htWElement.element.visible()){
            var self=this;
            if(window.innerWidth<this._htWElement.element.width()){
                this._nPreWidth=this._htWElement.element.width();
                this._htWElement.element.width(window.innerWidth)
            }
            else{
                if(this._nPreWidth!==-1){
                    this._htWElement.element.width(this._nPreWidth)
                }
                
            }
            this._htWElement.element.hide();
            this.setPosition();
            setTimeout(function(){
                self._htWElement.element.show()
            }
            ,0)
        }
        
    }
    ,_onPageShow:function(){
        if(this.isActivating()){
            this.deactivate();
            this.activate()
        }
        
    }
    ,_fireEvent:function(sType){
        return this.fireEvent(sType,{
            elLayer:this.getLayer(),htMargin:this.getMargin(),htPosition:this.getCurrentPosition()
        })
    }
    ,destroy:function(){
        this.deactivate();
        for(var p in this._htWElement){
            this._htWElement[p]=null
        }
        delete this._htWElement;
        delete this._htMargin;
        delete this._sPosition;
        delete this._htPosition;
        delete this._htOldPosition;
        delete this._bUseFixedProperty
    }
    
}).extend(MobileCommentJindo.UIComponent);
MobileCommentJindo.m.ScrollEnd=MobileCommentJindo.$Class({
    $init:function(el,htUserOption){
        this._initVar();
        this._setWrapperElement(el);
        this._attachEvent()
    }
    ,_initVar:function(){
        if(MobileCommentJindo.m.getDeviceInfo().android){
            if(parseInt(MobileCommentJindo.m.getDeviceInfo().version,10)>=3){
                this._nType=2;
                this._nScrollTimer=-1
            }
            else{
                this._nType=1
            }
            
        }
        else{
            this._nType=0
        }
        this._isTouched=false;
        this._isMoved=false;
        this._nObserver=null;
        this._nScrollEndTimer=null;
        this._nPreLeft=null;
        this._nPreTop=null;
        this._isTop=false
    }
    ,_setWrapperElement:function(el){
        this._htElement={};
        this._htElement.body=document.body
    }
    ,_attachEvent:function(){
        this._htEvent={};
        this._htEvent.event_scroll={
            ref:MobileCommentJindo.$Fn(this._onScroll,this).attach(document,"scroll"),el:document
        };
        if(this._nType==1){
            this._htEvent.event_touchstart={
                ref:MobileCommentJindo.$Fn(this._onStartForAndroid,this).attach(this._htElement.body,"touchstart"),el:this._htElement.body
            };
            this._htEvent.event_touchmove={
                ref:MobileCommentJindo.$Fn(this._onMoveForAndroid,this).attach(this._htElement.body,"touchmove"),el:this._htElement.body
            };
            this._htEvent.event_touchend={
                ref:MobileCommentJindo.$Fn(this._onEndForAndroid,this).attach(this._htElement.body,"touchend"),el:this._htElement.body
            }
            
        }
        
    }
    ,_detachEvent:function(){
        for(var p in this._htEvent){
            var ht=this._htEvent[p];
            ht.ref.detach(ht.el,p.substring(p.lastIndexOf("_")))
        }
        
    }
    ,_startObserver:function(){
        var self=this;
        this._stopObserver();
        this._nObserver=setInterval(function(){
            self._observe()
        }
        ,100)
    }
    ,_observe:function(){
        if(this._isTouched||(this._nPreTop!==window.pageYOffset||this._nPreLeft!==window.pageXOffset)){
            this._nPreTop=window.pageYOffset;
            this._nPreLeft=window.pageXOffset
        }
        else{
            this._stopObserver();
            this._fireEventScrollEnd()
        }
        
    }
    ,_stopObserver:function(){
        clearInterval(this._nObserver);
        this._nObserver=null
    }
    ,_onScroll:function(we){
        switch(this._nType){
            case 0:this._fireEventScrollEnd();
            break;
            case 1:this._startObserver();
            break;
            case 2:var self=this;
            clearTimeout(this._nScrollTimer);
            this._nScrollTimer=setTimeout(function(){
                self._fireEventScrollEnd()
            }
            ,350);
            break
        }
        
    }
    ,_onStartForAndroid:function(we){
        this._stopObserver();
        this._isTouched=true;
        this._isMoved=false;
        this._nPreTop=null;
        this._nPreLeft=null;
        if(window.pageYOffset===0){
            this._isTop=true
        }
        else{
            this._isTop=false
        }
        
    }
    ,_onMoveForAndroid:function(we){
        this._isMoved=true
    }
    ,_onEndForAndroid:function(we){
        this._isTouched=false;
        if(this._isTop&&this._isMoved){
            this._startObserver()
        }
        
    }
    ,_fireEventScrollEnd:function(){
        this.fireEvent("scrollEnd",{
            nTop:window.pageYOffset,nLeft:window.pageXOffset
        })
    }
    ,_fireEventScrollEndForAndroid:function(){
        var self=this;
        clearTimeout(this._nScrollEndTimer);
        this._nScrollEndTimer=setTimeout(function(){
            self._fireEventScrollEnd()
        }
        ,500)
    }
    ,destroy:function(){
        this._detachEvent();
        this._nType=-1;
        this._isTouched=null;
        this._isMoved=null;
        this._nObserver=null;
        this._nPreLeft=null;
        this._nPreTop=null
    }
    
}).extend(MobileCommentJindo.Component);
MobileCommentJindo.m.FadeEffect=MobileCommentJindo.$Class({
    sEffectName:"fade",getCommand:function(el,htOption){
        var sDirection=htOption.sDirection?htOption.sDirection:"in";
        var htStyle=htOption.htTo||{};
        var nOpacity=(sDirection=="in")?1:0;
        htStyle.opacity=(typeof htStyle.opacity!=="undefined")?htStyle.opacity:nOpacity;
        var htCallback={};
        if(sDirection=="out"){
            htCallback.htStyle={};
            htCallback.htStyle.display="none";
            htCallback.htStyle.opacity=this._htLayerInfo.nOpacity
        }
        return{
            sTaskName:this.sEffectName+"-"+sDirection,htStyle:htStyle,htTransform:{},fCallback:htCallback
        }
        
    }
    ,getBeforeCommand:function(el,htOption){
        var sDirection=htOption.sDirection?htOption.sDirection:"in";
        var htBeforeStyle=htOption.htFrom||{};
        var nOpacity=(sDirection=="in")?0:1;
        htBeforeStyle.display=this._htLayerInfo.sDisplay;
        htBeforeStyle.opacity=(typeof htBeforeStyle.opacity=="undefined")?nOpacity:htBeforeStyle.opacity;
        return{
            htStyle:htBeforeStyle,htTransform:{}
        }
        
    }
    
}).extend(MobileCommentJindo.m.Effect);
MobileCommentJindo.m.NumberValidator=MobileCommentJindo.$Class({
    rx:/^[+-]?(\d{1,3},)?(\d{3},)*(\d)+(\.\d+)?$/,_isValid:function(sValue,sFormat){
        return this.rx.test(sValue)
    }
    ,_getCorrectedValue:function(sValue,sFormat){
        sValue=this._filterNumber(sValue);
        if(sFormat){
            sValue=this._applyComma(sValue)
        }
        return sValue
    }
    ,_applyComma:function(sValue){
        var sResult="",nIdx=0,ch=null,chCode=null,nDotIdx=sValue.indexOf("."),sIntValue=(nDotIdx!==-1?sValue.substring(0,nDotIdx):sValue),sPointValue=(nDotIdx!==-1?sValue.substr(nDotIdx):"");
        if(sIntValue.length>3){
            for(var i=sIntValue.length-1;
            i>=0;
            i--,nIdx++){
                ch=sIntValue.charAt(i);
                chCode=sIntValue.charCodeAt(i);
                sResult=(nIdx!==0&&nIdx%3===0&&(chCode>47&&chCode<58)?ch+","+sResult:ch+sResult)
            }
            return(sPointValue!==""?sResult+sPointValue:sResult)
        }
        else{
            return sValue
        }
        
    }
    ,_filterNumber:function(sValue){
        var cFirst,aValue,sIntValue,sPointValue;
        sValue=sValue.replace(/[^\d\.\-]/g,"");
        cFirst=sValue.charAt(0);
        sValue=sValue.replace(/-/g,"");
        sValue=(cFirst==="-"?cFirst+sValue:sValue);
        if(sValue.length<=0||sValue==="-"){
            return sValue
        }
        aValue=sValue.split(".");
        if(aValue.length>1){
            sIntValue=aValue.shift();
            cFirst=sIntValue.charAt(0);
            sIntValue=(sIntValue===""?0:parseInt(sIntValue,10));
            if(cFirst==="-"&&sIntValue===0){
                sIntValue="-"+sIntValue
            }
            sPointValue=aValue.join("");
            sValue=sIntValue+"."+sPointValue
        }
        else{
            sValue=String(parseFloat(aValue.join(""),10))
        }
        return sValue
    }
    
}).extend(MobileCommentJindo.m.Validator);
MobileCommentJindo.m.Accordion=MobileCommentJindo.$Class({
    $init:function(el,htUserOption){
        var htDefaultOption={
            bActivateOnload:true,sClassPrefix:"accordion-",sDirection:"vertical",nDefalutIndex:-1,bUseToggle:false,sTransitionTimingFunction:"ease",nDuration:500
        };
        this.option(htDefaultOption);
        this.option(htUserOption||{});
        this._initVar(el);
        this._setWrapperElement();
        if(this.option("bActivateOnload")){
            this.activate()
        }
        this._setSize();
        this._setDefaultExpand()
    }
    ,_initVar:function(el){
        this._elContainer=(typeof el=="string")?MobileCommentJindo.$(el):el;
        this._aAccordionBlock=MobileCommentJindo.$$("."+this.option("sClassPrefix")+"block",this._elContainer);
        var htInfo=MobileCommentJindo.m.getDeviceInfo();
        var nVersion=parseFloat(htInfo.version,10);
        if(htInfo.android&&(nVersion<3)){
            var elDummyTag=MobileCommentJindo.$$.getSingle("._accordion_dummy_atag_",this._elContainer);
            if(!elDummyTag){
                elDummyTag=MobileCommentJindo.$("<a href='javascript:void(0);' class='_accordion_dummy_atag_'></a>");
                elDummyTag.style.position="absolute";
                elDummyTag.style.left="-1000px";
                elDummyTag.style.top="-1000px";
                elDummyTag.style.width=0;
                elDummyTag.style.height=0;
                MobileCommentJindo.$Element(this._elContainer).append(elDummyTag)
            }
            
        }
        this._nExpand=-1;
        this._wfTransitionEnd=MobileCommentJindo.$Fn(this._onTransitionEnd,this).bind()
    }
    ,_setWrapperElement:function(){},_onActivate:function(){
        this._attachEvent()
    }
    ,_onDeactivate:function(){
        this._detachEvent()
    }
    ,_attachEvent:function(){
        this._htEvent={};
        MobileCommentJindo.$A(this._aAccordionBlock).forEach(function(el,index,array){
            this._htEvent["click_"+index]={
                ref:MobileCommentJindo.$Fn(this._onClick,this).attach(this.getHandler(index),"click"),el:this.getHandler(index)
            }
            
        }
        ,this)
    }
    ,_detachEvent:function(sEventKey){
        if(sEventKey){
            var htTargetEvent=this._htEvent[sEventKey];
            htTargetEvent.ref.detach(htTargetEvent.el,sEventKey.substring(0,sEventKey.indexOf("_")))
        }
        
    }
    ,_detachEventAll:function(){
        for(var p in this._htEvent){
            this._detachEvent(p)
        }
        this._htEvent=null
    }
    ,_onClick:function(we){
        we.stop();
        var elBlock=this._getBlock(we.element);
        var nIndex=(elBlock)?MobileCommentJindo.$A(this._aAccordionBlock).indexOf(elBlock):null;
        var nCurrentIndex=this.getExpandIndex();
        var bUseToggle=this.option("bUseToggle");
        if(typeof nIndex=="number"){
            if(nIndex==nCurrentIndex){
                if(bUseToggle){
                    this.collapse(nCurrentIndex);
                    this._nExpand=-1
                }
                
            }
            else{
                this.expand(nIndex);
                if(nCurrentIndex>-1){
                    this.collapse(nCurrentIndex)
                }
                
            }
            
        }
        
    }
    ,_setSize:function(){
        this._htBlockSize={};
        var nHeaderSize,nBodySize;
        MobileCommentJindo.$A(this._aAccordionBlock).forEach(function(el,index,array){
            nHeaderSize=this._getHeaderSize(index);
            nBodySize=this._getBodySize(index);
            this._htBlockSize[index]={
                nHeaderSize:nHeaderSize,nBodySize:nBodySize
            };
            if(this.option("sDirection")=="vertical"){
                MobileCommentJindo.$Element(el).height(nHeaderSize)
            }
            else{
                MobileCommentJindo.$Element(el).width(nHeaderSize)
            }
            
        }
        ,this)
    }
    ,_getHeaderSize:function(nIndex){
        var welHead=MobileCommentJindo.$Element(this.getHead(nIndex));
        var nHeaderSize=(this.option("sDirection")=="vertical")?welHead.height():welHead.width();
        return nHeaderSize
    }
    ,_getBodySize:function(nIndex){
        var welBody=MobileCommentJindo.$Element(this.getBody(nIndex));
        var nBodySize=(this.option("sDirection")=="vertical")?welBody.height():welBody.width();
        return nBodySize
    }
    ,_getSize:function(nIndex){
        if(!this._htBlockSize||!this._htBlockSize[nIndex]){
            this._setSize()
        }
        var nSize=this._htBlockSize[nIndex]["nHeaderSize"]+this._htBlockSize[nIndex]["nBodySize"];
        return nSize
    }
    ,_setDefaultExpand:function(){
        var nDefaultIndex=this.option("nDefalutIndex");
        if(nDefaultIndex>-1){
            setTimeout(MobileCommentJindo.$Fn(function(){
                this.expand(nDefaultIndex)
            }
            ,this).bind(),100)
        }
        
    }
    ,getHead:function(nIndex){
        return MobileCommentJindo.$$.getSingle("dt",this._aAccordionBlock[nIndex])
    }
    ,getBody:function(nIndex){
        return MobileCommentJindo.$$.getSingle("dd",this._aAccordionBlock[nIndex])
    }
    ,_getBlock:function(el){
        var sClassPrefix=this.option("sClassPrefix")+"block";
        var elBlock=MobileCommentJindo.m.getClosest(sClassPrefix,el);
        return elBlock
    }
    ,getHandler:function(nIndex){
        var elHead=this.getHead(nIndex);
        return MobileCommentJindo.$$.getSingle("."+this.option("sClassPrefix")+"handler",elHead)||elHead
    }
    ,getExpandIndex:function(){
        return this._nExpand
    }
    ,expand:function(nIndex){
        this._elBlock=this._aAccordionBlock[nIndex];
        if(typeof this._elBlock=="undefined"){
            return
        }
        if(!this.fireEvent("beforeExpand",{
            sType:"beforeExpand",elBlock:this._elBlock,nBeforeIndex:this._nExpand,nIndex:nIndex
        })){
            return
        }
        this._setTransition(this._elBlock,this._getSize(nIndex));
        this._nExpand=nIndex;
        this.fireEvent("expand",{
            sType:"expand",elBlock:this._elBlock,nIndex:nIndex
        })
    }
    ,collapse:function(nIndex){
        this._elBlock=this._aAccordionBlock[nIndex];
        if(typeof this._elBlock=="undefined"){
            return
        }
        if(!this.fireEvent("beforeCollapse",{
            sType:"beforeCollapse",elBlock:this._elBlock,nIndex:nIndex
        })){
            return
        }
        this._setTransition(this._elBlock,this._getHeaderSize(nIndex));
        if(this._nExpand==nIndex){
            this._nExpand=-1
        }
        this.fireEvent("collapse",{
            sType:"collapse",elBlock:this._elBlock,nIndex:nIndex
        })
    }
    ,collapseAll:function(){
        var nIndex=this.getExpandIndex();
        if(nIndex>-1){
            this.collapse(nIndex)
        }
        this._nExpand=-1
    }
    ,setEffect:function(htEffect){
        if(htEffect.sTransitionTimingFunction&&(htEffect.sTransitionTimingFunction=="ease"||htEffect.sTransitionTimingFunction=="linear"||htEffect.sTransitionTimingFunction=="ease-in"||htEffect.sTransitionTimingFunction=="ease-out"||htEffect.sTransitionTimingFunction=="ease-in-out")){
            this.option("sTransitionTimingFunction",htEffect.sTransitionTimingFunction)
        }
        if(htEffect.nDuration&&htEffect.nDuration>0){
            this.option("nDuration",htEffect.nDuration)
        }
        
    }
    ,_setTransition:function(elBlock,nBlockSize,sTransitionTimingFunction,nDuration){
        sTransitionTimingFunction=sTransitionTimingFunction||this.option("sTransitionTimingFunction");
        nDuration=nDuration||this.option("nDuration");
        if(nDuration>0){
            this._attachTransitionEnd(elBlock)
        }
        var sTransition="";
        var sDirection=this.option("sDirection");
        elBlock.style.webkitTransition="";
        elBlock.style.mozTransition="";
        if(sDirection==="vertical"){
            sTransition="height "+nDuration+"ms "+sTransitionTimingFunction;
            elBlock.style.webkitTransition=sTransition;
            elBlock.style.mozTransition=sTransition;
            elBlock.style.height=nBlockSize+"px"
        }
        else{
            if(sDirection==="horizontal"){
                sTransition="width "+nDuration+"ms "+sTransitionTimingFunction;
                elBlock.style.webkitTransition=sTransition;
                elBlock.style.mozTransition=sTransition;
                elBlock.style.width=nBlockSize+"px"
            }
            
        }
        if(nDuration===0){
            this._onTransitionEnd({
                srcElement:elBlock
            })
        }
        
    }
    ,_attachTransitionEnd:function(elBlock){
        this._elTransition=elBlock;
        this._elTransition.addEventListener("webkitTransitionEnd",this._wfTransitionEnd,false)
    }
    ,_detachTransitionEnd:function(el){
        el.removeEventListener("webkitTransitionEnd",this._wfTransitionEnd,false);
        this._elTransition=null
    }
    ,_onTransitionEnd:function(evt){
        var elDummyTag=MobileCommentJindo.$$.getSingle("._accordion_dummy_atag_",this._elContainer);
        if(elDummyTag){
            elDummyTag.focus()
        }
        this._detachTransitionEnd(evt.srcElement)
    }
    ,destroy:function(){
        this._detachEventAll();
        this._elContainer=null;
        this._aAccordionBlock=null;
        this._elBlock=null;
        this._htBlockSize=null;
        this._nExpand=null
    }
    
}).extend(MobileCommentJindo.UIComponent);
MobileCommentJindo.m.AjaxHistory=MobileCommentJindo.$Class({
    bHashEvent:false,bPushState:false,_nIntervalId:0,_htLastState:{},$init:function(htUserOption){
        this.option({
            nCheckInterval:100,bUseHash:false
        });
        this.option(htUserOption||{})
    }
    ,initialize:function(){
        this._initVar();
        this._attachEvent();
        var sHash=this._getHash();
        if(sHash){
            this._htLastState=this._getDecodedData(sHash);
            this.fireEvent("change",{
                htHistoryData:this._htLastState
            })
        }
        else{
            this.fireEvent("load")
        }
        return this
    }
    ,_initVar:function(){
        var htInfo=MobileCommentJindo.m.getDeviceInfo();
        this.bHashEvent="onhashchange" in window;
        this.bPushState=(typeof window.history!=="undefined")&&(typeof window.history.pushState!=="undefined")&&(typeof window.history.replaceState!=="undefined")&&!((htInfo.iphone||htInfo.ipad)&&(parseFloat(htInfo.version,10)<4.3));
        this._nIntervalId=0;
        this._oAgent=MobileCommentJindo.$Agent().navigator();
        this._bAndroid=htInfo.android;
        if(this.option("bUseHash")){
            this.bPushState=false
        }
        
    }
    ,_attachEvent:function(){
        this._htEvent={};
        if(this.bPushState){
            this._htEvent.popstate={
                ref:MobileCommentJindo.$Fn(this._onPopState,this).attach(window,"popstate"),el:window
            }
            
        }
        else{
            if(this.bHashEvent){
                this._htEvent.hashchange={
                    ref:MobileCommentJindo.$Fn(this._onHashChange,this).attach(window,"hashchange"),el:window
                }
                
            }
            else{
                clearInterval(this._nIntervalId);
                this._nIntervalId=setInterval(MobileCommentJindo.$Fn(this._onHashChange,this).bind(),this.option("nCheckInterval"))
            }
            
        }
        
    }
    ,_onPopState:function(event){
        var state=event.$value().state;
        if(state){
            var htData=this._cloneObject(state);
            if(!this._compareData(htData,this._htLastState)){
                this._htLastState=htData;
                this._onChange()
            }
            
        }
        
    }
    ,_onHashChange:function(){
        var htData=this._getDecodedData(this._getHash());
        if(!this._compareData(htData,this._htLastState)){
            this._htLastState=htData;
            this._onChange()
        }
        
    }
    ,_onChange:function(){
        this.fireEvent("change",{
            htHistoryData:this._htLastState
        })
    }
    ,addHistory:function(htData,bLoad){
        if(typeof bLoad==="undefined"){
            bLoad=false
        }
        if(htData&&typeof(htData)=="object"&&MobileCommentJindo.$H(htData).length()>0){
            this._htLastState=this._cloneObject(htData);
            var sHash=this._getEncodedData(this._htLastState);
            if(this.bPushState){
                if(bLoad){
                    this._replaceState(this._htLastState)
                }
                else{
                    this._pushState(this._htLastState)
                }
                
            }
            else{
                var self=this;
                if(this._bAndroid){
                    setTimeout(function(){
                        self._setHash(sHash)
                    }
                    ,0)
                }
                else{
                    this._setHash(sHash)
                }
                
            }
            
        }
        
    }
    ,_replaceState:function(htData){
        history.replaceState(htData,document.title,location.href)
    }
    ,_pushState:function(htData){
        history.pushState(htData,document.title,location.href)
    }
    ,_setHash:function(sHash){
        location.hash=sHash
    }
    ,_compareData:function(htBase,htComparison){
        if(htBase&&htComparison){
            if(MobileCommentJindo.$H(htBase).length()==MobileCommentJindo.$H(htComparison).length()){
                for(var x in htBase){
                    if(typeof(htBase[x])=="object"){
                        if(!arguments.callee(htBase[x],htComparison[x])){
                            return false
                        }
                        
                    }
                    else{
                        if(htBase[x]!=htComparison[x]){
                            return false
                        }
                        
                    }
                    
                }
                return true
            }
            else{
                return false
            }
            
        }
        else{
            return false
        }
        
    }
    ,_getEncodedData:function(htHistoryData){
        if(htHistoryData){
            if(typeof(JSON)=="object"&&typeof(JSON.stringify)=="function"){
                return encodeURIComponent(JSON.stringify(htHistoryData))
            }
            else{
                return encodeURIComponent(MobileCommentJindo.$Json(htHistoryData).toString())
            }
            
        }
        else{
            return""
        }
        
    }
    ,_getDecodedData:function(sEncodedHash){
        try{
            if(sEncodedHash){
                var sHashString=decodeURIComponent(sEncodedHash);
                if(typeof(JSON)=="object"&&typeof(JSON.parse)=="function"){
                    return JSON.parse(sHashString)
                }
                else{
                    return MobileCommentJindo.$Json(sHashString).toObject()
                }
                
            }
            
        }
        catch(e){}return{}
    }
    ,_cloneObject:function(htObj){
        var hash,newHash;
        if(htObj){
            hash=MobileCommentJindo.$Json(htObj).toString();
            newHash=MobileCommentJindo.$Json(hash).toObject()
        }
        else{
            newHash={}
        }
        return newHash
    }
    ,_getHash:function(){
        return this._oAgent.firefox?encodeURIComponent(location.hash.substring(1)):location.hash.substring(1)
    }
    ,_detachEvent:function(){
        for(var p in this._htEvent){
            var htTargetEvent=this._htEvent[p];
            htTargetEvent.ref.detach(htTargetEvent.el,p)
        }
        this._htEvent=null
    }
    ,destroy:function(){
        this._detachEvent();
        clearInterval(this._nIntervalId);
        this._nIntervalId=null
    }
    
}).extend(MobileCommentJindo.Component);
MobileCommentJindo.m.CircularFlicking=MobileCommentJindo.$Class({
    $init:function(sId,htUserOption){
        this.option({
            bHorizontal:true,sClassPrefix:"flick-",nFlickThreshold:40,nDuration:100,nTotalContents:3,bActivateOnload:true
        });
        this.option(htUserOption||{});
        this._initVar();
        this._setWrapperElement(sId);
        this._setElementSize();
        this._updatePanelPosition();
        this._initTouch();
        this._setAnchorElement();
        this._focusFixedBug();
        if(this.option("bActivateOnload")){
            this.activate()
        }
        
    }
    ,_initVar:function(){
        this._oTouch=null;
        this._bFlickLeft=null;
        this._elTransition=null;
        this._htIndexInfo={
            nPanelIndex:0,nContentIndex:0,nNextPanelIndex:0,nNextContentIndex:0
        };
        this._aCurrentPosition=[0,0,0];
        var htInfo=MobileCommentJindo.m.getDeviceInfo();
        var nVersion=parseInt(htInfo.version.substring(0,1),10);
        this.sTransformStart="translate(";
        this.sTransformEnd=")";
        if(htInfo.iphone||htInfo.ipad){
            this.sTransformStart="translate3d(";
            this.sTransformEnd=",0px)"
        }
        this._isAndroid=htInfo.android;
        this._isIos=(htInfo.iphone||htInfo.ipad);
        this._sCssPrefix=MobileCommentJindo.m.getCssPrefix();
        this._wfTransitionEnd=MobileCommentJindo.$Fn(this._onTransitionEnd,this).bind();
        this._aAnchor=null;
        this._fnDummyFnc=function(){
            return false
        };
        this._bBlocked=false;
        this._isFlicking=false;
        this._initAnimationStep()
    }
    ,_initAnimationStep:function(){
        this._htAnimationStep={
            nPosPerTime:0,nAnimateTime:0,nBeforeTime:0,nPos:0
        }
        
    }
    ,_initTouch:function(){
        this._oTouch=new MobileCommentJindo.m.Touch(this._htWElement.container.$value(),{
            nSlopeThreshold:4,nMoveThreshold:0,bActivateOnload:false
        })
    }
    ,_setWrapperElement:function(el){
        this._htWElement={};
        el=MobileCommentJindo.$(el);
        var sClass="."+this.option("sClassPrefix");
        this._htWElement.base=MobileCommentJindo.$Element(el);
        this._htWElement.container=MobileCommentJindo.$Element(MobileCommentJindo.$$.getSingle(sClass+"container",el));
        this._htWElement.container.css("overflow","hidden").css("position","absoulte");
        var aPanel=MobileCommentJindo.$$(sClass+"panel",el);
        this._htWElement.aPanel=MobileCommentJindo.$A(aPanel).forEach(function(value,index,array){
            var wel=MobileCommentJindo.$Element(value);
            array[index]=wel;
            wel.css("position","absolute").css("width","100%").css("height","100%")
        }).$value();
        if(this._isAndroid){
            this._htWElement.aDummyTag=[];
            for(var i=0,nLen=this._htWElement.aPanel.length;
            i<nLen;
            i++){
                var wel=this._htWElement.aPanel[i];
                var elDummyTag=MobileCommentJindo.$$.getSingle("._cflick_dummy_atag_",wel.$value());
                if(!elDummyTag){
                    elDummyTag=MobileCommentJindo.$("<a href='javascript:void(0);' class='_cflick_dummy_atag_'></a>");
                    elDummyTag.style.position="absolute";
                    elDummyTag.style.left="-1000px";
                    elDummyTag.style.top="-1000px";
                    elDummyTag.style.width=0;
                    elDummyTag.style.height=0;
                    wel.append(elDummyTag)
                }
                this._htWElement.aDummyTag.push(elDummyTag)
            }
            
        }
        
    }
    ,_prepareTransition:function(){
        if(this._isIos){
            for(var i=0,nLen=this._htWElement.aPanel.length;
            i<nLen;
            i++){
                this._htWElement.aPanel[i].css(this._sCssPrefix+"TransformStyle","preserve-3d")
            }
            
        }
        
    }
    ,_setElementSize:function(){
        if(this.option("bHorizontal")){
            this._htWElement.container.width(this._htWElement.base.width()*3).height(this._htWElement.base.height())
        }
        else{
            this._htWElement.container.height(this._htWElement.base.height()*3).width(this._htWElement.base.width())
        }
        
    }
    ,_setAnchorElement:function(el){
        if(this._isIos){
            this._aAnchor=MobileCommentJindo.$$("A",this._htWElement.container.$value())
        }
        
    }
    ,_updatePanelPosition:function(){
        this._aCtPosition=[];
        var el=this._htWElement.base.$value();
        var nW=this.option("bHorizontal")?el.clientWidth:el.clientHeight;
        this._htPositionInfo={
            left:nW*-1,center:0,right:nW*1
        }
        
    }
    ,_onResize:function(){
        this.refresh(this.getPanelIndex(),true)
    }
    ,getPanelIndex:function(){
        return this._htIndexInfo.nPanelIndex
    }
    ,getPanelElement:function(){
        return this._htWElement.aPanel[this.getPanelIndex()]
    }
    ,getRightPanelIndex:function(){
        var n=this.getPanelIndex()+1;
        n=(n>2)?0:n;
        return n
    }
    ,getRightPanelElement:function(){
        return this._htWElement.aPanel[this.getRightPanelIndex()]
    }
    ,getLeftPanelIndex:function(){
        var n=this.getPanelIndex()-1;
        n=(n<0)?2:n;
        return n
    }
    ,getLeftPanelElement:function(){
        return this._htWElement.aPanel[this.getLeftPanelIndex()]
    }
    ,setContentIndex:function(n,bRefresh){
        if(!this.isActivating()){
            return
        }
        if(typeof bRefresh==="undefined"){
            bRefresh=true
        }
        n=parseInt(n,10);
        if(n<0||n>(this.option("nTotalContents")-1)){
            return
        }
        if(bRefresh){
            if(!this._fireCustomEvent("beforeMove",{
                nPanelIndex:this.getPanelIndex(),nContentIndex:this.getContentIndex(),nNextPanelIndex:n%3,nNextContentIndex:n
            })){
                return
            }
            
        }
        this._htIndexInfo.nContentIndex=n;
        this._htIndexInfo.nPanelIndex=n%3;
        this._htIndexInfo.nNextContentIndex=n;
        this._htIndexInfo.nNextPanelIndex=n%3;
        if(bRefresh){
            this.refresh(this._htIndexInfo.nPanelIndex,false,true)
        }
        
    }
    ,getContentIndex:function(){
        return this._htIndexInfo.nContentIndex
    }
    ,getRightContentIndex:function(){
        var n=this.getContentIndex()+1;
        n=((n+1)>this.option("nTotalContents"))?0:n;
        return n
    }
    ,getLeftContentIndex:function(){
        var n=this.getContentIndex()-1;
        n=(n<0)?(this.option("nTotalContents")-1):n;
        return n
    }
    ,_onStart:function(oCustomEvt){
        if(!this.fireEvent("touchStart",oCustomEvt)){
            return
        }
        this._clearAnchor();
        this._oTouch.attach({
            touchMove:this._htEvent.touchMove,touchEnd:this._htEvent.touchEnd,longTap:this._htEvent.longTap
        })
    }
    ,_onMove:function(oCustomEvt){
        var bH=this.option("bHorizontal");
        var weParent=oCustomEvt.oEvent;
        if(oCustomEvt.sMoveType===MobileCommentJindo.m.MOVETYPE[0]){
            if(bH){
                weParent.stop(MobileCommentJindo.$Event.CANCEL_ALL)
            }
            else{
                return
            }
            
        }
        else{
            if(oCustomEvt.sMoveType===MobileCommentJindo.m.MOVETYPE[1]){
                if(!bH){
                    weParent.stop(MobileCommentJindo.$Event.CANCEL_ALL)
                }
                else{
                    return
                }
                
            }
            else{
                if(oCustomEvt.sMoveType===MobileCommentJindo.m.MOVETYPE[2]){
                    weParent.stop(MobileCommentJindo.$Event.CANCEL_ALL)
                }
                
            }
            
        }
        if(this._isFlicking){
            return
        }
        this.fireEvent("touchMove",oCustomEvt);
        var nDis=bH?oCustomEvt.nVectorX:oCustomEvt.nVectorY;
        this._movePanels(nDis)
    }
    ,_onEnd:function(oCustomEvt,nTime){
        this._oTouch.detach({
            touchMove:this._htEvent.touchMove,touchEnd:this._htEvent.touchEnd,longTap:this._htEvent.longTap
        });
        this._isFlicking=true;
        var htInfo=this._getSnap(oCustomEvt.nDistanceX,oCustomEvt.nDistanceY,nTime);
        if(oCustomEvt.sMoveType===MobileCommentJindo.m.MOVETYPE[3]||oCustomEvt.sMoveType===MobileCommentJindo.m.MOVETYPE[4]){
            this._restoreAnchor()
        }
        var nPanelIndex=this.getPanelIndex();
        if(nPanelIndex==htInfo.nPanelIndex){
            this._onTransitionEnd();
            return
        }
        var htParam={
            nPanelIndex:nPanelIndex,nContentIndex:this.getContentIndex(),nNextPanelIndex:htInfo.nPanelIndex,nNextContentIndex:htInfo.nContentIndex
        };
        if(this._bFlickLeft!==null){
            if(this.option("bHorizontal")){
                htParam.bLeft=this._bFlickLeft
            }
            else{
                htParam.bTop=this._bFlickLeft
            }
            
        }
        if(!this._fireCustomEvent("beforeFlicking",htParam)){
            return
        }
        var nDis=this.option("bHorizontal")?htInfo.nX:htInfo.nY;
        this._htIndexInfo.nNextPanelIndex=htInfo.nPanelIndex;
        this._htIndexInfo.nNextContentIndex=htInfo.nContentIndex;
        this._movePanels(nDis,htInfo.nTime,false);
        this.fireEvent("touchEnd",oCustomEvt)
    }
    ,_movePanels:function(nPos,nTime,bMove){
        if(typeof nTime==="undefined"){
            nTime=0
        }
        if(typeof bMove==="undefined"){
            bMove=true
        }
        var aPanel=this._htWElement.aPanel;
        if(this._isIos||(!this._isIos&&(nTime===0))){
            for(var i=0,nLen=aPanel.length;
            i<nLen;
            i++){
                var nNewPos=(bMove)?this._aCurrentPosition[i]+nPos:nPos;
                this._setPosition(aPanel[i],nNewPos,nTime);
                this._aCurrentPosition[i]=nNewPos
            }
            
        }
        else{
            var nPosPerTime=(nPos-this._aCurrentPosition[1])/nTime;
            this._htAnimationStep.nPosPerTime=nPosPerTime;
            this._htAnimationStep.nAnimateTime=nTime;
            var startTime=Date.now();
            this._htAnimationStep.nBeforeTime=startTime;
            this._htAnimationStep.nPos=nPos;
            var self=this;
            (function animate(){
                var now=Date.now();
                if(now>=(startTime+self._htAnimationStep.nAnimateTime)){
                    for(var i=0,nLen=self._htWElement.aPanel.length;
                    i<nLen;
                    i++){
                        self._setPosition(self._htWElement.aPanel[i],self._htAnimationStep.nPos,0)
                    }
                    clearTimeout(self._nTimerAnimate);
                    self._initAnimationStep();
                    self._onTransitionEnd();
                    return
                }
                var nGap=(now-self._htAnimationStep.nBeforeTime);
                self._htAnimationStep.nBeforeTime=now;
                var nPos=self._htAnimationStep.nPosPerTime*nGap;
                var aPanel=self._htWElement.aPanel;
                for(var i=0,nLen=aPanel.length;
                i<nLen;
                i++){
                    var nNewPos=self._aCurrentPosition[i]+nPos;
                    self._setPosition(aPanel[i],nNewPos,0);
                    self._aCurrentPosition[i]=nNewPos
                }
                self._nTimerAnimate=setTimeout(animate,1)
            })()
        }
        
    }
    ,_focusFixedBug:function(){
        if(typeof this._htWElement.aDummyTag==="undefined"){
            return
        }
        for(var i=0,nLen=this._htWElement.aDummyTag.length;
        i<nLen;
        i++){
            this._htWElement.aDummyTag[i].focus()
        }
        
    }
    ,_getSnap:function(nDistanceX,nDistanceY,nDuration){
        var nFinalDis=this.option("bHorizontal")?nDistanceX:nDistanceY;
        var nNewPos=this._htPositionInfo.center;
        var nTime=(typeof nDuration!="undefined")?nDuration:this.option("nDuration");
        var nPanelIndex=this.getPanelIndex();
        var nContentIndex=this.getContentIndex();
        if(Math.abs(nFinalDis)>this.option("nFlickThreshold")){
            if(nFinalDis<0){
                nNewPos=this._htPositionInfo.left;
                nPanelIndex=this.getRightPanelIndex();
                nContentIndex=this.getRightContentIndex();
                this._bFlickLeft=true
            }
            else{
                nNewPos=this._htPositionInfo.right;
                nPanelIndex=this.getLeftPanelIndex();
                nContentIndex=this.getLeftContentIndex();
                this._bFlickLeft=false
            }
            
        }
        return{
            nX:nNewPos,nY:nNewPos,nTime:nTime,nPanelIndex:nPanelIndex,nContentIndex:nContentIndex
        }
        
    }
    ,_setPosition:function(wel,nPos,nTime){
        if(typeof nTime=="undefined"){
            nTime=0
        }
        var nX=this.option("bHorizontal")?nPos:0;
        var nY=this.option("bHorizontal")?0:nPos;
        if(nTime>0){
            this._attachTransitionEnd(wel.$value())
        }
        if(nTime!==0){
            nTime+="ms"
        }
        var htCss={};
        htCss[this._sCssPrefix+"TransitionProperty"]="-webkit-transform";
        htCss[this._sCssPrefix+"TransitionDuration"]=nTime;
        htCss[this._sCssPrefix+"Transform"]=this.sTransformStart+nX+"px,"+nY+"px"+this.sTransformEnd;
        wel.css(htCss)
    }
    ,_clearAnchor:function(){
        if(this._aAnchor&&!this._bBlocked){
            var aClickAddEvent=null;
            for(var i=0,nILength=this._aAnchor.length;
            i<nILength;
            i++){
                if(this._fnDummyFnc!==this._aAnchor[i].onclick){
                    this._aAnchor[i]._onclick=this._aAnchor[i].onclick
                }
                this._aAnchor[i].onclick=this._fnDummyFnc;
                aClickAddEvent=this._aAnchor[i].___listeners___||[];
                for(var j=0,nJLength=aClickAddEvent.length;
                j<nJLength;
                j++){
                    ___Old__removeEventListener___.call(this._aAnchor[i],"click",aClickAddEvent[j].listener,aClickAddEvent[j].useCapture)
                }
                
            }
            this._bBlocked=true
        }
        
    }
    ,_restoreAnchor:function(){
        if(this._aAnchor&&this._bBlocked){
            var aClickAddEvent=null;
            for(var i=0,nILength=this._aAnchor.length;
            i<nILength;
            i++){
                if(this._fnDummyFnc!==this._aAnchor[i]._onclick){
                    this._aAnchor[i].onclick=this._aAnchor[i]._onclick
                }
                else{
                    this._aAnchor[i].onclick=null
                }
                aClickAddEvent=this._aAnchor[i].___listeners___||[];
                for(var j=0,nJLength=aClickAddEvent.length;
                j<nJLength;
                j++){
                    ___Old__addEventListener___.call(this._aAnchor[i],"click",aClickAddEvent[j].listener,aClickAddEvent[j].useCapture)
                }
                
            }
            this._bBlocked=false
        }
        
    }
    ,moveNext:function(nDuration){
        if(!this.isActivating()){
            return
        }
        var n=this.option("nFlickThreshold")*-1;
        this._onEnd({
            nDistanceX:n-10,nDistanceY:n-10
        }
        ,nDuration)
    }
    ,movePrev:function(nDuration){
        if(!this.isActivating()){
            return
        }
        var n=this.option("nFlickThreshold");
        this._onEnd({
            nDistanceX:n+10,nDistanceY:n+10
        }
        ,nDuration)
    }
    ,refresh:function(n,bResize,bFireEvent){
        if(!this.isActivating()){
            return
        }
        if(typeof bResize==="undefined"){
            bResize=false
        }
        if(typeof bFireEvent==="undefined"){
            bFireEvent=false
        }
        if(bResize){
            this._setElementSize();
            this._updatePanelPosition()
        }
        if(typeof n==="undefined"){
            n=this.getPanelIndex()
        }
        if(this._htIndexInfo.nPanelIndex!=n){
            this._htIndexInfo.nPanelIndex=n
        }
        var nCenter=this.getPanelIndex();
        var nLeft=this.getLeftPanelIndex();
        var nRight=this.getRightPanelIndex();
        var sPosition=this.option("bHorizontal")?"left":"top";
        this._htWElement.aPanel[nCenter].css(sPosition,this._htPositionInfo.center).css("zIndex",10);
        this._htWElement.aPanel[nLeft].css(sPosition,this._htPositionInfo.left).css("zIndex",1);
        this._htWElement.aPanel[nRight].css(sPosition,this._htPositionInfo.right).css("zIndex",1);
        if(bFireEvent){
            this._fireCustomEvent("move")
        }
        
    }
    ,_onTransitionEnd:function(evt){
        this._detachTransitionEnd();
        MobileCommentJindo.$A(this._htWElement.aPanel).forEach(function(value,i,array){
            value.$value().style[this._sCssPrefix+"TransitionDuration"]=null;
            value.$value().style[this._sCssPrefix+"TransitionProperty"]="";
            value.$value().style[this._sCssPrefix+"Transform"]=""
        }
        ,this);
        var bFireEvent=false;
        if(this._htIndexInfo.nPanelIndex!=this._htIndexInfo.nNextPanelIndex){
            bFireEvent=true
        }
        this.refresh(this._htIndexInfo.nNextPanelIndex);
        this._htIndexInfo.nContentIndex=this._htIndexInfo.nNextContentIndex;
        this._focusFixedBug();
        this._isFlicking=false;
        if(bFireEvent){
            this._fireCustomEvent("afterFlicking")
        }
        this._bFlickLeft=null;
        this._aCurrentPosition=[0,0,0];
        this._setAnchorElement(this._htWElement.aPanel[this.getPanelIndex()].$value())
    }
    ,_fireCustomEvent:function(sEventName,htParam){
        if(typeof htParam==="undefined"){
            htParam={
                nPanelIndex:this.getPanelIndex(),nContentIndex:this.getContentIndex(),nContentLeftIndex:this.getLeftContentIndex(),nContentRightIndex:this.getRightContentIndex(),nPanelLeftIndex:this.getLeftPanelIndex(),nPanelRightIndex:this.getRightPanelIndex()
            };
            if(this.option("bHorizontal")){
                htParam.bLeft=this._bFlickLeft
            }
            else{
                htParam.bTop=this._bFlickLeft
            }
            
        }
        return this.fireEvent(sEventName,htParam)
    }
    ,_attachTransitionEnd:function(el){
        if(el===this._htWElement.aPanel[this.getPanelIndex()].$value()){
            this._elTransition=el;
            MobileCommentJindo.m.attachTransitionEnd(this._elTransition,this._wfTransitionEnd)
        }
        
    }
    ,_detachTransitionEnd:function(){
        if(this._elTransition){
            MobileCommentJindo.m.detachTransitionEnd(this._elTransition,this._wfTransitionEnd)
        }
        
    }
    ,_onActivate:function(){
        this._attachEvent();
        this._oTouch.activate();
        this._prepareTransition();
        this.refresh()
    }
    ,_onDeactivate:function(){
        this._detachEvent();
        this._oTouch.deactivate()
    }
    ,_attachEvent:function(){
        this._htEvent={};
        this._htEvent.rotate=MobileCommentJindo.$Fn(this._onResize,this).bind();
        MobileCommentJindo.m.bindRotate(this._htEvent.rotate);
        this._htEvent.touchMove=MobileCommentJindo.$Fn(this._onMove,this).bind();
        this._htEvent.touchEnd=MobileCommentJindo.$Fn(this._onEnd,this).bind();
        this._htEvent.touchStart=MobileCommentJindo.$Fn(this._onStart,this).bind();
        this._oTouch.attach("touchStart",this._htEvent.touchStart);
        this._htEvent.pageshow=MobileCommentJindo.$Fn(this._onPageShow,this).bind();
        MobileCommentJindo.m.bindPageshow(this._htEvent.pageshow)
    }
    ,_onPageShow:function(){
        this._onResize()
    }
    ,_detachEvent:function(){
        MobileCommentJindo.m.unbindRotate(this._htEvent.rotate);
        MobileCommentJindo.m.unbindPageshow(this._htEvent.pageshow);
        this._oTouch.detachAll();
        this._htEvent=null
    }
    ,destroy:function(){
        this.deactivate();
        for(var p in this._htWElement){
            this._htWElement[p]=null
        }
        for(var p in this._htIndexInfo){
            this._htIndexInfo[p]=null
        }
        this._oTouch.destroy();
        this._elTransition=null;
        this._oTouch=null;
        this._bFlickLeft=null;
        this._isAndroid=null;
        this._aCurrentPosition=null;
        this.sTransformStart=null;
        this.sTransformEnd=null;
        this._isIos=null;
        this._aAnchor=null;
        this._fnDummyFnc=null;
        this._sCssPrefix=null;
        this._bBlocked=null;
        this._isFlicking=null;
        for(var p in this._htAnimationStep){
            this._htAnimationStep[p]=null
        }
        this._htAnimationStep=null
    }
    
}).extend(MobileCommentJindo.UIComponent);
MobileCommentJindo.m.CheckBox=MobileCommentJindo.$Class({
    $init:function(el,htUserOption){
        this.option({
            sClassPrefix:"fcb-",sType:"v",bActivateOnload:true,sUncheckBgColor:"transparent"
        });
        this.option(htUserOption||{});
        this._initVar();
        this._setWrapperElement(el,this.option("sClassPrefix"));
        this._initCheckLoad();
        if(this.option("bActivateOnload")){
            this.activate()
        }
        
    }
    ,_initVar:function(){
        this.$super._initVar("checkbox","checkbox")
    }
    ,_initCheckLoad:function(){
        var aCheckUnit=this._htWElement.container.queryAll("."+this._sUnitClass);
        var welUnit,elCheckbox;
        for(var i=0;
        i<aCheckUnit.length;
        i++){
            welUnit=MobileCommentJindo.$Element(aCheckUnit[i]);
            elCheckbox=MobileCommentJindo.$$.getSingle("input[type=checkbox]",welUnit.$value());
            this._setChecked(elCheckbox.checked,elCheckbox,welUnit)
        }
        welUnit=elCheckbox=null
    }
    ,_afterCheck:function(welElement,bClickOverForm){
        var elCheckbox=MobileCommentJindo.$$.getSingle("."+this._sFormClass,welElement.$value());
        var sChecked=welElement.attr("data-cb-checked");
        var bChecked=(sChecked&&sChecked=="on")?false:true;
        elCheckbox.checked=bChecked;
        this._setChecked(bChecked,elCheckbox,welElement)
    }
    ,_setChecked:function(bChecked,elCheckbox,welUnit){
        var sEvent="unchecked";
        var sBgColor=this.option("sCheckBgColor");
        if(!bChecked){
            sBgColor=(sBgColor)?this.option("sUncheckBgColor"):null;
            welUnit.removeClass(this._sOnClass);
            welUnit.attr("data-cb-checked","off")
        }
        else{
            welUnit.addClass(this._sOnClass);
            welUnit.attr("data-cb-checked","on");
            sEvent="checked"
        }
        (sBgColor)?welUnit.css("backgroundColor",sBgColor+" !important"):null;
        this.fireEvent(sEvent,{
            elCheckBoxUnit:welUnit.$value(),elCheckBox:elCheckbox
        })
    }
    ,getCheckedValue:function(){
        var aValue=[];
        var aCheckBoxList=this._aWElFormList;
        var elTempCheck=null;
        for(var i=0;
        i<aCheckBoxList.length;
        i++){
            elTempCheck=aCheckBoxList[i].$value();
            if(!elTempCheck.disabled&&elTempCheck.checked){
                aValue.push(elTempCheck.value)
            }
            
        }
        return aValue
    }
    ,setCheckedBox:function(bChecked,vElement){
        var aIdx=this._getFormIdx(vElement);
        var elInput=null;
        for(var i=0;
        i<aIdx.length;
        i++){
            elInput=this._aWElFormList[aIdx[i]].$value();
            if(!elInput.disabled){
                elInput.checked=bChecked;
                this._setChecked(bChecked,elInput,this._aWElUnitList[aIdx[i]])
            }
            
        }
        
    }
    ,enable:function(vElement){
        var htElForm=this._useSettingForm(vElement,true);
        this.fireEvent("enable",{
            aCheckBoxList:htElForm.aFormList,aCheckBoxUnitList:htElForm.aUnitList
        })
    }
    ,disable:function(vElement){
        var htElForm=this._useSettingForm(vElement,false);
        this.fireEvent("disable",{
            aCheckBoxList:htElForm.aFormList,aCheckBoxUnitList:htElForm.aUnitList
        })
    }
    ,geElementtByIndex:function(nIdx){
        return{
            elCheckBox:this._aWElFormList[nIdx].$value(),elCheckBoxUnit:this._aWElUnitList[nIdx].$value()
        }
        
    }
    ,destroy:function(){
        this.$super.destroy()
    }
    
}).extend(MobileCommentJindo.m.CheckRadioCore);
MobileCommentJindo.m.Datepicker=MobileCommentJindo.$Class({
    $init:function(el,htUserOption){
        this.option({
            sClassPrefix:"calendar-",sFormat:"yyyy-mm-dd",sTitleFormat:"yyyy.mm",aMonthTitle:["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],bUseEffect:false,nEffectDuration:200,bActivateOnload:true,bAutoHide:false
        });
        this.option(htUserOption||{});
        this._initVar();
        this._setWrapperElement(el);
        this._initCalendar();
        if(this.option("bActivateOnload")){
            this.activate()
        }
        
    }
    ,$static:{
        INDEX_ATTR:"data-datepickerid"
    }
    ,_initVar:function(){
        var htDeviceInfo=MobileCommentJindo.m.getDeviceInfo();
        this._oCalendar=null;
        this._htDatePickerSet={};
        this._htSelectedDatePickerSet=null;
        this._bActivate=false;
        this._bMove=false;
        this._bCalendarVisible=false;
        this._sClickEvent=(htDeviceInfo.iphone||htDeviceInfo.ipad||htDeviceInfo.android)?"touchend":"click";
        this._aDayInfo=[]
    }
    ,_setWrapperElement:function(el){
        var sClassPrefix=this.option("sClassPrefix"),aTh,elCloseBtn;
        if(!el){
            this._welCalendarBase=this._insertCalendarTemplate()
        }
        else{
            el=(typeof el=="string"?MobileCommentJindo.$(el):el);
            this._welCalendarBase=MobileCommentJindo.$Element(el)
        }
        aTh=this._welCalendarBase.queryAll("th");
        for(var i=0,nLength=aTh.length;
        i<nLength;
        i++){
            this._aDayInfo.push(MobileCommentJindo.$Element(aTh[i]).text())
        }
        this._welCalendarBase.css("position","absolute");
        this._welCalendarBase.hide();
        elCloseBtn=this._welCalendarBase.query("."+sClassPrefix+"btn-close");
        this._welCloseBtn=(elCloseBtn)?MobileCommentJindo.$Element(elCloseBtn):null
    }
    ,_insertCalendarTemplate:function(){
        var aHtml=[],sClassPrefix=this.option("sClassPrefix");
        aHtml.push("<div>");
        aHtml.push('<a href="javascript:void(0)" class="'+sClassPrefix+"btn "+sClassPrefix+'btn-prev-year">&lt;&lt;</a>');
        aHtml.push('<a href="javascript:void(0)" class="'+sClassPrefix+"btn "+sClassPrefix+'btn-prev-mon">&lt;</a>');
        aHtml.push('<strong class="'+sClassPrefix+'title"></strong>');
        aHtml.push('<a href="javascript:void(0)" class="'+sClassPrefix+"btn "+sClassPrefix+'btn-next-mon">&gt;</a>');
        aHtml.push('<a href="javascript:void(0)" class="'+sClassPrefix+"btn "+sClassPrefix+'btn-next-year">&gt;&gt;</a>');
        aHtml.push('</div><table cellspacing="0" cellpadding="0" style="');
        aHtml.push("-"+MobileCommentJindo.m.getCssPrefix()+'-tap-highlight-color:rgba(0,0,0,0);"><thead><tr>');
        aHtml.push('<th class="'+sClassPrefix+'sun">일</th><th>월</th><th>화</th><th>수</th><th>목</th><th>금</th><th class="sat">토</th>');
        aHtml.push("</tr></thead><tbody>");
        aHtml.push('<tr class="'+sClassPrefix+'week">');
        aHtml.push('<td><a href="javascript:void(0)" class="'+sClassPrefix+'date"></a></td>');
        aHtml.push('<td><a href="javascript:void(0)" class="'+sClassPrefix+'date"></a></td>');
        aHtml.push('<td><a href="javascript:void(0)" class="'+sClassPrefix+'date"></a></td>');
        aHtml.push('<td><a href="javascript:void(0)" class="'+sClassPrefix+'date"></a></td>');
        aHtml.push('<td><a href="javascript:void(0)" class="'+sClassPrefix+'date"></a></td>');
        aHtml.push('<td><a href="javascript:void(0)" class="'+sClassPrefix+'date"></a></td>');
        aHtml.push('<td><a href="javascript:void(0)" class="'+sClassPrefix+'date"></a></td>');
        aHtml.push("</tr></tbody></table>");
        aHtml.push('<div class="'+sClassPrefix+'bottom"><a href="javascript:void(0)" class="'+sClassPrefix+"btn "+sClassPrefix+'btn-close">닫기</a></div>');
        document.body.appendChild(MobileCommentJindo.$('<div id="jmc_calt" class="'+sClassPrefix+'base" style="position:absolute"></div>'));
        var welCalendar=MobileCommentJindo.$Element("jmc_calt").hide();
        welCalendar.html(aHtml.join(""));
        return welCalendar
    }
    ,_initCalendar:function(){
        var self=this,oDate=new Date(),htToday={
            nYear:oDate.getFullYear(),nMonth:oDate.getMonth()+1,nDate:oDate.getDate()
        }
        ,htCalendarOption={
            sClassPrefix:this.option("sClassPrefix"),nYear:htToday.nYear,nMonth:htToday.nMonth,nDate:htToday.nDate,sTitleFormat:this.option("sTitleFormat"),aMonthTitle:this.option("aMonthTitle")
        };
        this._oCalendar=new MobileCommentJindo.Calendar(this._welCalendarBase.$value(),htCalendarOption).attach({
            beforeDraw:function(oCustomEvent){
                var oMoveDate,oOldDate=this.getShownDate();
                oOldDate={
                    nYear:oOldDate.nYear,nMonth:oOldDate.nMonth
                };
                oMoveDate={
                    nYear:oCustomEvent.nYear,nMonth:oCustomEvent.nMonth
                };
                this._htOldDate=oOldDate;
                this._htMoveDate=oMoveDate;
                oCustomEvent.oOldDate=oOldDate;
                oCustomEvent.oMoveDate=oMoveDate;
                if(!self.fireEvent("beforeDraw",oCustomEvent)){
                    oCustomEvent.stop()
                }
                if((oOldDate.nYear!=oMoveDate.nYear||oOldDate.nMonth!=oMoveDate.nMonth)){
                    if(!self.fireEvent("beforeMoveDate",oCustomEvent)){
                        oCustomEvent.stop()
                    }
                    
                }
                
            }
            ,draw:function(oCustomEvent){
                if(!self.fireEvent("draw",oCustomEvent)){
                    oCustomEvent.stop()
                }
                
            }
            ,afterDraw:function(oCustomEvent){
                self._drawCalendarSelectDate(oCustomEvent.nYear,oCustomEvent.nMonth);
                if(self._bCalendarVisible){
                    self._fPosition()
                }
                oCustomEvent.oOldDate=this._htOldDate;
                oCustomEvent.oMoveDate=this._htMoveDate;
                self.fireEvent("afterDraw",oCustomEvent);
                if((this._htOldDate.nYear!=this._htMoveDate.nYear||this._htOldDate.nMonth!=this._htMoveDate.nMonth)){
                    if(!self.fireEvent("moveDate",oCustomEvent)){
                        oCustomEvent.stop()
                    }
                    
                }
                
            }
            
        })
    }
    ,_drawCalendarSelectDate:function(nYear,nMonth){
        if(!this._oCalendar){
            return
        }
        var sClassPrefix=this.option("sClassPrefix"),aCells=this._welCalendarBase.queryAll("."+sClassPrefix+"date"),htToday=this._oCalendar.getToday(),elDateCell;
        if(htToday.nYear!=nYear||htToday.nMonth!=nMonth){
            var elToday=this._welCalendarBase.query("."+sClassPrefix+"today");
            if(elToday){
                MobileCommentJindo.$Element(elToday).removeClass(sClassPrefix+"today")
            }
            
        }
        for(var i=0,nLength=aCells.length;
        i<nLength;
        i++){
            elDateCell=this._getDateCellElement(aCells[i]);
            if(!elDateCell){
                continue
            }
            htDate=this._oCalendar.getDateOfElement(elDateCell);
            if((nYear===htDate.nYear&&nMonth===htDate.nMonth)&&MobileCommentJindo.Calendar.isSameDate(htDate,this._htSelectedDatePickerSet)){
                MobileCommentJindo.$Element(elDateCell).removeClass(sClassPrefix+"today").addClass(sClassPrefix+"selected")
            }
            
        }
        
    }
    ,_isSelectable:function(htDatePickerOption,htDate){
        var bIsSelected=MobileCommentJindo.Calendar.isBetween(htDate,htDatePickerOption.htSelectableDateFrom,htDatePickerOption.htSelectableDateTo);
        return bIsSelected
    }
    ,addDatePickerSet:function(elInput,htOption){
        if(typeof elInput=="undefined"){
            return this
        }
        var sDatePikerSetId="DATEPICKER_"+(new Date()).getTime()+"_"+Math.floor((Math.random()*100)),welInput,htCalendarOption=this._oCalendar.option(),htDefaultOption={
            nYear:htCalendarOption.nYear,nMonth:htCalendarOption.nMonth,nDate:htCalendarOption.nDate,htSelectableDateFrom:{
                nYear:1900,nMonth:1,nDate:1
            }
            ,htSelectableDateTo:{
                nYear:2100,nMonth:12,nDate:31
            }
            ,sPosition:"bottomLeft",zIndex:50
        };
        if(typeof htOption!="undefined"){
            for(var value in htOption){
                if(typeof htDefaultOption[value]!="undefined"){
                    htDefaultOption[value]=htOption[value]
                }
                
            }
            
        }
        htOption=htDefaultOption;
        welInput=MobileCommentJindo.$Element(elInput);
        welInput.replace("<span style='position:relative;display:inline-block;'>"+welInput.toString()+"</span>");
        welInput=MobileCommentJindo.$Element(elInput);
        welInput.attr("readOnly",true).attr(MobileCommentJindo.m.Datepicker.INDEX_ATTR,sDatePikerSetId);
        htOption.wfFocusFunc=MobileCommentJindo.$Fn(this._onFocus,this).attach(elInput,"focus");
        htOption.elInput=welInput.$value();
        this._htDatePickerSet[sDatePikerSetId]=htOption;
        return this
    }
    ,removeDatePickerSet:function(elInput){
        var welInput=MobileCommentJindo.$Element(elInput),sDatePikerSetId=welInput.attr(MobileCommentJindo.m.Datepicker.INDEX_ATTR),htDatePickerSet=this._htDatePickerSet[sDatePikerSetId];
        htDatePickerSet.wfFocusFunc.detach(welInput.$value(),"focus");
        if(htDatePickerSet==this._htSelectedDatePickerSet){
            this._htSelectedDatePickerSet=null
        }
        delete this._htDatePickerSet[sDatePikerSetId];
        return this
    }
    ,_onActivate:function(){
        this._attachEvent();
        this._bActivate=true
    }
    ,_onDeactivate:function(){
        if(this._bCalendarVisible){
            this.hide()
        }
        this._detachEvent();
        this._bActivate=false
    }
    ,_attachEvent:function(){
        this._htEvent={};
        this._htEvent["document_"+this._sClickEvent]={
            el:document,ref:MobileCommentJindo.$Fn(this._onDocumentClick,this).attach(document,this._sClickEvent)
        };
        this._htEvent.document_touchmove={
            el:document,ref:MobileCommentJindo.$Fn(this._onDocumentScroll,this).attach(document,"touchmove")
        };
        this._htEvent.date_click={
            el:this._welCalendarBase.$value(),ref:MobileCommentJindo.$Fn(this._onClickDate,this).attach(this._welCalendarBase.$value(),this._sClickEvent)
        };
        if(this._welCloseBtn){
            this._htEvent.close_click={
                el:this._welCloseBtn.$value(),ref:MobileCommentJindo.$Fn(this._onClickCloseCalendar,this).attach(this._welCloseBtn.$value(),"click")
            }
            
        }
        
    }
    ,_detachEvent:function(){
        for(var p in this._htEvent){
            var ht=this._htEvent[p];
            ht.ref.detach(ht.el,p.substring(p.lastIndexOf("_")+1))
        }
        this._htEvent=null
    }
    ,_onFocus:function(we){
        if(!this._bActivate){
            return false
        }
        var elInput=we.element;
        this.show(elInput)
    }
    ,_onDocumentClick:function(we){
        var elElment=we.element;
        var welElment=MobileCommentJindo.$Element(elElment);
        var oCalendar=MobileCommentJindo.m.Datepicker.oCalendarInstance;
        var sDatepickerId=this._welCalendarBase.attr(MobileCommentJindo.m.Datepicker.INDEX_ATTR);
        var elInput=(sDatepickerId)?this._htDatePickerSet[sDatepickerId].elInput:null;
        if(this._bMove){
            this._bMove=false;
            return
        }
        if(this.option("bAutoHide")&&this._bCalendarVisible&&this._welCalendarBase.$value()!=elElment&&!this._welCalendarBase.isParentOf(welElment)&&elInput!=elElment){
            this.hide();
            elInput.blur()
        }
        this._bMove=false;
        return true
    }
    ,_onDocumentScroll:function(we){
        this._bMove=true
    }
    ,_onClickDate:function(we){
        we.stopDefault();
        if(this._bMove){
            return false
        }
        var sClassPrefix=this.option("sClassPrefix");
        var elTargetElement=MobileCommentJindo.m.getNodeElement(we.element);
        var sDatepickerId=this._welCalendarBase.attr(MobileCommentJindo.m.Datepicker.INDEX_ATTR);
        var elInput=this._htDatePickerSet[sDatepickerId].elInput;
        var elDate=this._getDateCellElement(elTargetElement);
        if(elDate){
            var welDate=MobileCommentJindo.$Element(elDate);
            if(welDate.hasClass(sClassPrefix+"next-mon")||welDate.hasClass(sClassPrefix+"prev-mon")){
                return false
            }
            var htDate=this._oCalendar.getDateOfElement(elDate);
            if(this._isSelectable(this._htSelectedDatePickerSet,htDate)){
                this.setDate(elInput,htDate);
                elInput.blur();
                this.fireEvent("selectDate",{
                    oSelectDate:htDate,oCalendar:this._oCalendar
                });
                this.hide()
            }
            
        }
        return false
    }
    ,_getDateCellElement:function(elElement){
        var welElement=MobileCommentJindo.$Element(elElement),sClassPrefix=this.option("sClassPrefix"),elDateCell,welWeek,welDate=(welElement.hasClass(sClassPrefix+"date"))?welElement:MobileCommentJindo.$$.getSingle("."+sClassPrefix+"date",welElement.$value());
        if(welDate){
            welDate=MobileCommentJindo.$Element(welDate);
            welWeek=MobileCommentJindo.m.getClosest(sClassPrefix+"week",welDate);
            if(welWeek){
                welWeek=MobileCommentJindo.$Element(welWeek);
                elDateCell=welDate.$value();
                while(!MobileCommentJindo.$Element(elDateCell.parentNode).hasClass(sClassPrefix+"week")){
                    elDateCell=elDateCell.parentNode
                }
                if(MobileCommentJindo.$Element(elDateCell).hasClass(sClassPrefix+"unselectable")){
                    elDateCell=null
                }
                
            }
            
        }
        return elDateCell
    }
    ,_onClickCloseCalendar:function(){
        this.hide()
    }
    ,_displayEffect:function(sType,wfPosition){
        this._sEffectDirection=sType;
        var elBase=this._welCalendarBase.$value();
        var sCssFix=MobileCommentJindo.m.getCssPrefix();
        var sEvent=(sCssFix=="webkit")?"webkitTransitionEnd":"transitionend";
        var sDuration=this.option("nEffectDuration")+"ms";
        this._welCalendarBase.show();
        elBase.style.opacity=(sType=="fade-in")?0:1;
        if(wfPosition){
            wfPosition()
        }
        this._fnTransitionEnd=MobileCommentJindo.$Fn(this._TransitionEnd,this).bind();
        elBase.addEventListener(sEvent,this._fnTransitionEnd,false);
        setTimeout(function(){
            elBase.style.webkitTransitionDuration=sDuration;
            elBase.style.webkitTransitionProperty="all";
            elBase.style.webkitTransitionTimingFunction="ease-in-out";
            if(sType=="fade-in"){
                elBase.style.opacity=1
            }
            else{
                if(sType=="fade-out"){
                    elBase.style.opacity=0
                }
                
            }
            
        }
        ,10)
    }
    ,_TransitionEnd:function(evt){
        var elBase=evt.currentTarget;
        var sCssFix=MobileCommentJindo.m.getCssPrefix();
        var sEvent=(sCssFix=="webkit")?"webkitTransitionEnd":"transitionend";
        var htDatePickerSet=this._htSelectedDatePickerSet;
        elBase.style.webkitTransitionDuration=null;
        elBase.style.webkitTransitionProperty=null;
        elBase.style.webkitTransitionTimingFunction=null;
        elBase.removeEventListener(sEvent,this._fnTransitionEnd,false);
        this._fnTransitionEnd=null;
        if(this._sEffectDirection=="fade-in"){
            this._bCalendarVisible=true;
            this.fireEvent("showCalendar",{
                oDrawDate:{
                    nYear:htDatePickerSet.nYear,nMonth:htDatePickerSet.nMonth,nDate:htDatePickerSet.nDate
                }
                ,oCalendar:this._oCalendar
            })
        }
        else{
            if(this._sEffectDirection=="fade-out"){
                this._bCalendarVisible=false;
                elBase.style.zIndex=0;
                elBase.style.display="none";
                var bHide=this.fireEvent("hideCalendar",{
                    oSelectDate:{
                        nYear:htDatePickerSet.nYear,nMonth:htDatePickerSet.nMonth,nDate:htDatePickerSet.nDate
                    }
                    ,oCalendar:this._oCalendar
                })
            }
            
        }
        
    }
    ,_formatDate:function(htDate){
        var oDate=new Date(htDate.nYear,htDate.nMonth-1,htDate.nDate),sDay=this._aDayInfo[oDate.getDay()],sDateStr=this.option("sFormat").replace(/(yyyy|yy|mm|dd|day)/gi,function($1){
            switch($1){
                case"yyyy":return oDate.getFullYear();
                case"yy":return oDate.getFullYear().toString().substr(2);
                case"mm":var sMonth=(oDate.getMonth()+1)+"";
                sMonth=sMonth.length===1?"0"+sMonth:sMonth;
                return sMonth;
                case"dd":var sDate=oDate.getDate()+"";
                sDate=sDate.length===1?"0"+sDate:sDate;
                return sDate;
                case"day":return sDay
            }
            
        });
        return sDateStr
    }
    ,setPosition:function(elInput,sPosition){
        var sDatepickerId=elInput.getAttribute(MobileCommentJindo.m.Datepicker.INDEX_ATTR);
        this._htDatePickerSet[sDatepickerId].sPosition=sPosition;
        if(this._isCurrentDatePicker(elInput)&&this._bCalendarVisible){
            this._fPosition=MobileCommentJindo.$Fn(function(){
                this._setCalendarPosition(elInput,sPosition)
            }
            ,this).bind();
            this._setCalendarPosition(elInput,sPosition)
        }
        
    }
    ,_setCalendarPosition:function(elInput,sPosition){
        var welInput=MobileCommentJindo.$Element(elInput);
        var welCalendarBase=this._welCalendarBase;
        var nCalendarHeight=welCalendarBase.height();
        var nCalendarWidth=welCalendarBase.width();
        var nInputHeight=welInput.height();
        var nInputWidth=welInput.width();
        var htCss={};
        var elCalendarBase=welCalendarBase.$value();
        elCalendarBase.style.left=null;
        elCalendarBase.style.right=null;
        elCalendarBase.style.top=null;
        switch(sPosition){
            case"leftTop":htCss.top="0px";
            htCss.left="-"+nCalendarWidth+"px";
            break;
            case"leftBottom":htCss.top="-"+(nCalendarHeight-nInputHeight)+"px";
            htCss.left="-"+nCalendarWidth+"px";
            break;
            case"rightTop":htCss.top="0px";
            htCss.left=nInputWidth+"px";
            break;
            case"rightBottom":htCss.top="-"+(nCalendarHeight-nInputHeight)+"px";
            htCss.left=nInputWidth+"px";
            break;
            case"bottomLeft":htCss.top=nInputHeight+"px";
            htCss.left="0px";
            break;
            case"bottomRight":htCss.top=nInputHeight+"px";
            htCss.right="0px";
            break;
            case"topLeft":htCss.top="-"+nCalendarHeight+"px";
            htCss.left="0px";
            break;
            case"topRight":htCss.top="-"+nCalendarHeight+"px";
            htCss.right="0px";
            break
        }
        welCalendarBase.css(htCss)
    }
    ,setDate:function(elInput,htDate){
        var sDatepickerId=(elInput)?elInput.getAttribute(MobileCommentJindo.m.Datepicker.INDEX_ATTR):null;
        var htDatePickerSet=this._htDatePickerSet[sDatepickerId];
        if(!sDatepickerId||!this._bActivate||!this._isSelectable(htDatePickerSet,htDate)){
            return false
        }
        elInput.value=this._formatDate(htDate);
        htDatePickerSet.nYear=htDate.nYear;
        htDatePickerSet.nMonth=htDate.nMonth;
        htDatePickerSet.nDate=htDate.nDate;
        this._htDatePickerSet[sDatepickerId]=htDatePickerSet;
        if(this._isCurrentDatePicker(elInput)&&this._bCalendarVisible){
            this._oCalendar.draw(htDate.nYear,htDate.nMonth)
        }
        
    }
    ,deleteDate:function(elInput){
        if(!elInput){
            return
        }
        var welInput=MobileCommentJindo.$Element(elInput);
        var htDatePickerSet=this._htDatePickerSet;
        var sDatepickerId=welInput.attr(MobileCommentJindo.m.Datepicker.INDEX_ATTR);
        var oDate=new Date();
        var htToday={
            nYear:oDate.getFullYear(),nMonth:oDate.getMonth()+1,nDay:oDate.getDate()
        };
        welInput.$value().value="";
        htDatePickerSet[sDatepickerId].nYear=oDate.getFullYear();
        htDatePickerSet[sDatepickerId].nMonth=oDate.getMonth()+1;
        htDatePickerSet[sDatepickerId].nDate=oDate.getDate();
        if(this._isCurrentDatePicker(welInput.$value())&&this._bCalendarVisible){
            this.hide()
        }
        this.fireEvent("clear",{
            oCalendar:this._oCalendar
        })
    }
    ,_isCurrentDatePicker:function(elInput){
        var sDatepickerId=(elInput)?elInput.getAttribute(MobileCommentJindo.m.Datepicker.INDEX_ATTR):null;
        var sSelectDatepickerId=this._welCalendarBase.attr(MobileCommentJindo.m.Datepicker.INDEX_ATTR);
        var bIsCurrentDatePicker=(sDatepickerId==sSelectDatepickerId);
        return bIsCurrentDatePicker
    }
    ,enable:function(elInput){
        var htDatePickerSet=this._htDatePickerSet;
        if(elInput){
            var welInput=MobileCommentJindo.$Element(elInput);
            welInput.$value().disabled=false
        }
        else{
            for(var sKey in htDatePickerSet){
                htDatePickerSet[sKey].elInput.disabled=false
            }
            this.activate()
        }
        this.fireEvent("enable",{
            oCalendar:this._oCalendar
        })
    }
    ,disable:function(elInput){
        var htDatePickerSet=this._htDatePickerSet;
        var bHideCalendar=false;
        if(elInput){
            var welInput=MobileCommentJindo.$Element(elInput);
            welInput.$value().disabled=true;
            bHideCalendar=(this._bCalendarVisible&&this._isCurrentDatePicker(welInput.$value()))
        }
        else{
            for(var sKey in htDatePickerSet){
                htDatePickerSet[sKey].elInput.disabled=true
            }
            this.deactivate();
            bHideCalendar=true
        }
        if(bHideCalendar&&this._bCalendarVisible){
            this.hide()
        }
        this.fireEvent("disable",{
            oCalendar:this._oCalendar
        })
    }
    ,show:function(elInput){
        var welInput=MobileCommentJindo.$Element(elInput),welBaseUnit=welInput.parent(),sDatepickerId=welInput.attr(MobileCommentJindo.m.Datepicker.INDEX_ATTR),htDatePickerSet=this._htDatePickerSet[sDatepickerId];
        if(!this.fireEvent("beforeShowCalendar",{
            oDrawDate:{
                nYear:htDatePickerSet.nYear,nMonth:htDatePickerSet.nMonth,nDate:htDatePickerSet.nDate
            }
            ,oCalendar:this._oCalendar
        })){
            return false
        }
        this._htSelectedDatePickerSet=htDatePickerSet;
        this._welCalendarBase.attr(MobileCommentJindo.m.Datepicker.INDEX_ATTR,sDatepickerId);
        this._oCalendar.draw(htDatePickerSet.nYear,htDatePickerSet.nMonth);
        welBaseUnit.append(this._welCalendarBase.$value());
        if(this._isCurrentDatePicker(elInput)&&this._bCalendarVisible){
            return
        }
        this._fPosition=MobileCommentJindo.$Fn(function(){
            this._setCalendarPosition(elInput,htDatePickerSet.sPosition)
        }
        ,this).bind();
        if(htDatePickerSet.zIndex!="none"){
            this._welCalendarBase.css("zIndex",htDatePickerSet.zIndex)
        }
        if(this.option("bUseEffect")){
            this._displayEffect("fade-in",this._fPosition)
        }
        else{
            this._welCalendarBase.show();
            this._fPosition();
            this._bCalendarVisible=true;
            this.fireEvent("showCalendar",{
                oDrawDate:{
                    nYear:htDatePickerSet.nYear,nMonth:htDatePickerSet.nMonth,nDate:htDatePickerSet.nDate
                }
                ,oCalendar:this._oCalendar
            })
        }
        
    }
    ,hide:function(){
        var htDatePickerSet=this._htSelectedDatePickerSet;
        var bHide=this.fireEvent("beforeHideCalendar",{
            oSelectDate:{
                nYear:htDatePickerSet.nYear,nMonth:htDatePickerSet.nMonth,nDate:htDatePickerSet.nDate
            }
            ,oCalendar:this._oCalendar
        });
        if(!bHide){
            return false
        }
        if(this.option("bUseEffect")){
            this._displayEffect("fade-out")
        }
        else{
            this._welCalendarBase.hide();
            this._bCalendarVisible=false;
            this.fireEvent("hideCalendar",{
                oSelectDate:{
                    nYear:htDatePickerSet.nYear,nMonth:htDatePickerSet.nMonth,nDate:htDatePickerSet.nDate
                }
                ,oCalendar:this._oCalendar
            })
        }
        
    }
    ,destroy:function(){
        this.deactivate();
        this._oCalendar=null;
        this._htDatePickerSet=null;
        this._htSelectedDatePickerSet=null;
        this._bActivate=false;
        this._bMove=false;
        this._bCalendarVisible=false;
        this._sClickEvent=null;
        this._aDayInfo=null
    }
    
}).extend(MobileCommentJindo.UIComponent);
MobileCommentJindo.m.Dialog=MobileCommentJindo.$Class({
    $init:function(htUserOption){
        var htDefaultOption={
            bActivateOnload:true,sClassPrefix:"dialog-",sPosition:"center",bUseEffect:true,bAutoClose:false,bAutoReposition:true,sFoggyColor:"gray",nFoggyOpacity:0.5,sEffectType:"pop",nEffectDuration:500
        };
        this.option(htDefaultOption);
        this.option(htUserOption||{});
        this._setWrapperElement();
        this._initVar();
        this._setDeviceSize();
        this._initElement();
        if(this.option("bActivateOnload")){
            this.activate()
        }
        
    }
    ,_setWrapperElement:function(){
        this._htWElement={};
        this._htWElement.dialog_container=MobileCommentJindo.$Element('<div class="'+this.option("sClassPrefix")+'container"></div>');
        this._htWElement.dialog_foggy=MobileCommentJindo.$Element('<div class="'+this.option("sClassPrefix")+'fog"></div>');
        this._htWElement.dialog_layer=MobileCommentJindo.$Element('<div class="'+this.option("sClassPrefix")+'layer"></div>');
        this._htWElement.dialog_clone=MobileCommentJindo.$Element('<div class="'+this.option("sClassPrefix")+'clone"></div>')
    }
    ,_initVar:function(){
        this._htDialogSize={
            width:0,height:0
        };
        this._sTemplate=null;
        this._bIsShown=false;
        this._bProcessingShow=false;
        this._bProcessingHide=false;
        this._htDeviceInfo=MobileCommentJindo.m.getDeviceInfo();
        this._bIOS=(this._htDeviceInfo.iphone||this._htDeviceInfo.ipad)?true:false;
        this._bAndroid=this._htDeviceInfo.android?true:false
    }
    ,_setDeviceSize:function(){
        if(this._bIOS||(this._bAndroid)||!MobileCommentJindo.$Agent().navigator().mobile){
            this._htDeviceSize=MobileCommentJindo.$Document().clientSize()
        }
        else{
            this._htDeviceSize={
                width:window.screen.width,height:window.screen.height
            }
            
        }
        
    }
    ,_initContainerTop:function(){
        var nTop=0;
        var bUseEffect=this.option("bUseEffect");
        var sEffectType=this.option("sEffectType");
        if(bUseEffect&&(sEffectType=="slide-up"||sEffectType=="slide-down")){
            nTop=this._htDeviceSize.height*((sEffectType=="slide-up")?1:-1)
        }
        nTop+=window.pageYOffset;
        this._htWElement.dialog_container.css("top",nTop+"px")
    }
    ,_initElement:function(){
        this._htWElement.dialog_foggy.css({
            position:"absolute",padding:"0px",margin:"0px",border:"0px",backgroundColor:this.option("sFoggyColor"),opacity:this.option("nFoggyOpacity"),width:this._htDeviceSize.width+"px",height:this._htDeviceSize.height+"px",left:"0px",top:"0px"
        });
        this._htWElement.dialog_foggy.appendTo(this._getContainer());
        this._htWElement.dialog_layer.css({
            position:"relative",backgroundColor:"white"
        });
        this._htWElement.dialog_layer.appendTo(this._getContainer());
        this._htWElement.dialog_container.css({
            position:"absolute",overflow:"hidden",width:this._htDeviceSize.width+"px",height:this._htDeviceSize.height+"px",left:"0px",zIndex:100
        });
        this._initContainerTop();
        this._htWElement.dialog_container.hide();
        this._htWElement.dialog_container.appendTo(document.body);
        if(this.option("bUseEffect")){
            this._oLayerEffect=new MobileCommentJindo.m.LayerEffect(this._getContainer())
        }
        this._htWElement.dialog_clone.css({
            position:"absolute",left:"-1000px",top:"-1000px"
        });
        this._htWElement.dialog_clone.appendTo(document.body);
        this._htWElement.dialog_clone.hide()
    }
    ,_onActivate:function(){
        this._attachEvent()
    }
    ,_onDeactivate:function(){
        this._detachEventAll()
    }
    ,_attachEvent:function(){
        this._htEvent={};
        this._htEvent.click={
            ref:MobileCommentJindo.$Fn(this._onClick,this).attach(this.getDialog(),"click"),el:this.getDialog()
        };
        this._htEvent.touchend={
            ref:MobileCommentJindo.$Fn(this._onClick,this).attach(this._getFoggy(),"touchend"),el:this._getFoggy()
        };
        this._htEvent.touchmove={
            ref:MobileCommentJindo.$Fn(this._onTouchMove,this).attach(this._getContainer(),"touchmove"),el:this._getContainer()
        };
        if(this.option("bAutoReposition")){
            this._htEvent.rotate=MobileCommentJindo.$Fn(this._onResize,this).bind();
            MobileCommentJindo.m.bindRotate(this._htEvent.rotate)
        }
        
    }
    ,_detachEvent:function(sEventKey){
        if(sEventKey){
            var htTargetEvent=this._htEvent[sEventKey];
            if(htTargetEvent.ref){
                htTargetEvent.ref.detach(htTargetEvent.el,sEventKey)
            }
            
        }
        
    }
    ,_detachEventAll:function(){
        for(var p in this._htEvent){
            this._detachEvent(p)
        }
        MobileCommentJindo.m.unbindRotate(this._htEvent.rotate);
        this._htEvent=null
    }
    ,_onClick:function(we){
        var sClassPrefix=this.option("sClassPrefix");
        var elClosestClose,elClosestConfirm,elClosestCancel,elClosestLayer,elClosestAnchor;
        if((elClosestClose=MobileCommentJindo.m.getClosest(("."+sClassPrefix+"close"),we.element))){
            if(this.fireEvent("close",{
                sType:"close",elLayer:this.getDialog()
            })){
                this.hide()
            }
            
        }
        else{
            if((elClosestConfirm=MobileCommentJindo.m.getClosest(("."+sClassPrefix+"confirm"),we.element))){
                if(this.fireEvent("confirm",{
                    sType:"confirm",elLayer:this.getDialog()
                })){
                    this.hide()
                }
                
            }
            else{
                if((elClosestCancel=MobileCommentJindo.m.getClosest(("."+sClassPrefix+"cancel"),we.element))){
                    if(this.fireEvent("cancel",{
                        sType:"cancel",elLayer:this.getDialog()
                    })){
                        this.hide()
                    }
                    
                }
                else{
                    if((elClosestLayer=MobileCommentJindo.m.getClosest(("."+sClassPrefix+"layer"),we.element))){
                        if((elClosestAnchor=MobileCommentJindo.m.getClosest(("a"),we.element))){
                            return false
                        }
                        
                    }
                    else{
                        if(this.option("bAutoClose")){
                            this.hide()
                        }
                        
                    }
                    
                }
                
            }
            
        }
        we.stop();
        return false
    }
    ,_onTouchStart:function(we){
        var sClassPrefix=this.option("sClassPrefix");
        var elClosestLayer;
        if(!(elClosestLayer=MobileCommentJindo.m.getClosest(("."+sClassPrefix+"layer"),we.element))){
            we.stop(MobileCommentJindo.$Event.CANCEL_ALL);
            return false
        }
        
    }
    ,_onTouchMove:function(we){
        we.stop(MobileCommentJindo.$Event.CANCEL_ALL);
        return false
    }
    ,_onResize:function(we){
        if(this._bProcessingShow||this._bProcessingHide){
            if(this.option("bUseEffect")){
                this._getLayerEffect().stop()
            }
            else{
                if(this._bProcessingShow){
                    this._endShowEffect()
                }
                else{
                    this._endHideEffect()
                }
                
            }
            
        }
        if(this._oTimeout){
            clearTimeout(this._oTimeout);
            this._oTimeout=null
        }
        if(this.isShown()&&this._bIOS){
            this._htWElement.dialog_container.hide()
        }
        this._oTimeout=setTimeout(MobileCommentJindo.$Fn(function(){
            this._resizeDocument();
            if(this.isShown()&&this._bIOS){
                this._htWElement.dialog_container.show()
            }
            
        }
        ,this).bind(),300)
    }
    ,_resizeDocument:function(){
        this._setDeviceSize();
        this._htWElement.dialog_container.css({
            width:this._htDeviceSize.width+"px",height:this._htDeviceSize.height+"px"
        });
        this._htWElement.dialog_foggy.css({
            width:this._htDeviceSize.width+"px",height:this._htDeviceSize.height+"px"
        });
        this._resizeDialog(true);
        if(this.option("bUseEffect")){
            this._getLayerEffect().setSize()
        }
        
    }
    ,_resizeDialog:function(bForced){
        if(this._setDialogSize()||bForced){
            this._repositionDialog()
        }
        
    }
    ,_getLayerEffect:function(){
        return this._oLayerEffect
    }
    ,_getContainer:function(){
        return this._htWElement.dialog_container.$value()
    }
    ,_getFoggy:function(){
        return this._htWElement.dialog_foggy.$value()
    }
    ,getDialog:function(){
        return this._htWElement.dialog_layer.$value()
    }
    ,setTemplate:function(sTemplate){
        this._sTemplate=sTemplate;
        this._oTemplate=MobileCommentJindo.$Template(this._sTemplate);
        this._htWElement.dialog_clone.html(sTemplate);
        this._resizeDialog()
    }
    ,getTemplate:function(){
        return this._sTemplate
    }
    ,_setDialogSize:function(){
        var nLayerWidth;
        var nLayerHeight;
        if(this.option("sPosition")=="all"){
            nLayerWidth=this._htDeviceSize.width;
            nLayerHeight=this._htDeviceSize.height
        }
        else{
            this._htWElement.dialog_clone.show();
            nLayerWidth=Math.min(this._htWElement.dialog_clone.width(),this._htDeviceSize.width);
            nLayerHeight=Math.min(this._htWElement.dialog_clone.height(),this._htDeviceSize.height);
            this._htWElement.dialog_clone.hide()
        }
        if(this._htDialogSize.width==nLayerWidth&&this._htDialogSize.height==nLayerHeight){
            return false
        }
        this._htDialogSize={
            width:nLayerWidth,height:nLayerHeight
        };
        this._htWElement.dialog_layer.css({
            width:nLayerWidth+"px",height:nLayerHeight+"px"
        });
        return this._htDialogSize
    }
    ,_getDialogSize:function(){
        return this._htDialogSize
    }
    ,_repositionDialog:function(){
        var htLayerPosition=this._getDialogPosition();
        this._htWElement.dialog_layer.css({
            top:htLayerPosition.top+"px",left:htLayerPosition.left+"px"
        });
        this._htWElement.dialog_container.css({
            top:window.pageYOffset+"px",left:window.pageXOffset+"px"
        });
        if(!this.isShown()){
            var sEffectType=this.option("sEffectType");
            if(sEffectType=="slide-up"||sEffectType=="slide-down"){
                this._initContainerTop()
            }
            
        }
        
    }
    ,_getDialogPosition:function(){
        var nWidth=this._htDeviceSize.width;
        var nHeight=this._htDeviceSize.height;
        var nLayerWidth=this._getDialogSize().width;
        var nLayerHeight=this._getDialogSize().height;
        var htLayerPosition={};
        switch(this.option("sPosition")){
            case"top":htLayerPosition.top=0;
            htLayerPosition.left=parseInt((nWidth-nLayerWidth)/2,10);
            break;
            case"center":htLayerPosition.top=parseInt((nHeight-nLayerHeight)/2,10);
            htLayerPosition.left=parseInt((nWidth-nLayerWidth)/2,10);
            break;
            case"bottom":htLayerPosition.top=parseInt(nHeight-nLayerHeight,10);
            htLayerPosition.left=parseInt((nWidth-nLayerWidth)/2,10);
            break;
            case"all":htLayerPosition.top=0;
            htLayerPosition.left=0;
            break
        }
        return htLayerPosition
    }
    ,setPosition:function(sPosition){
        if(sPosition=="top"||sPosition=="center"||sPosition=="bottom"||sPosition=="all"){
            this.option("sPosition",sPosition)
        }
        this._resizeDialog()
    }
    ,useEffect:function(){
        if(this.option("bUseEffect")){
            return false
        }
        this.option("bUseEffect",true);
        this._initContainerTop()
    }
    ,unuseEffect:function(){
        if(!this.option("bUseEffect")){
            return false
        }
        this.option("bUseEffect",false);
        this._initContainerTop()
    }
    ,setEffectType:function(sEffectType){
        this.useEffect();
        if(sEffectType=="pop"||sEffectType=="slide-up"||sEffectType=="slide-down"||sEffectType=="flip"){
            this.option("sEffectType",sEffectType);
            this._initContainerTop()
        }
        
    }
    ,setEffectDuration:function(nEffectDuration){
        this.useEffect();
        if(nEffectDuration&&nEffectDuration>99){
            this.option("nEffectDuration",nEffectDuration)
        }
        
    }
    ,setEffect:function(htEffectOption){
        this.useEffect();
        if(htEffectOption.type){
            this.setEffectType(htEffectOption.type)
        }
        if(htEffectOption.duration){
            this.setEffectDuration(htEffectOption.duration)
        }
        
    }
    ,isShown:function(){
        return this._bIsShown
    }
    ,show:function(htTemplate,htEventHandler){
        if(this.isShown()){
            return false
        }
        this._bProcessingShow=true;
        this._htEvent.touchstart={
            ref:MobileCommentJindo.$Fn(this._onTouchStart,this).attach(document,"touchstart"),el:document
        };
        if(htEventHandler){
            this._showAttachedEvent=htEventHandler;
            this.attach(htEventHandler)
        }
        this._resizeDocument();
        if(typeof htTemplate=="undefined"){
            htTemplate={}
        }
        else{
            this._htWElement.dialog_clone.html(this._oTemplate.process(htTemplate));
            this._resizeDialog()
        }
        this._htWElement.dialog_layer.html(this._oTemplate.process(htTemplate));
        if(!this.fireEvent("beforeShow",{
            sType:"beforeShow",elLayer:this.getDialog()
        })){
            return
        }
        this._showDialogLayer()
    }
    ,_showDialogLayer:function(){
        if(this.option("bUseEffect")){
            this._getLayerEffect().attach("afterEffect",MobileCommentJindo.$Fn(this._endShowEffect,this).bind());
            this._startShowEffect()
        }
        else{
            this._htWElement.dialog_container.show();
            this._endShowEffect()
        }
        
    }
    ,_startShowEffect:function(){
        var sEffectType=this.option("sEffectType");
        var nEffectDuration=this.option("nEffectDuration");
        switch(sEffectType){
            case"slide-up":this._htWElement.dialog_container.show();
            this._getLayerEffect().setSize();
            this._getLayerEffect().slide({
                sDirection:"up",nDuration:nEffectDuration
            });
            break;
            case"slide-down":this._htWElement.dialog_container.show();
            this._getLayerEffect().setSize();
            this._getLayerEffect().slide({
                sDirection:"down",nDuration:nEffectDuration
            });
            break;
            case"pop":this._getLayerEffect().pop({
                sDirection:"in",nDuration:nEffectDuration,htFrom:{
                    opacity:1
                }
                
            });
            break;
            case"flip":this._htWElement.dialog_container.show();
            this._getLayerEffect().flip({
                nDuration:nEffectDuration,elFlipFrom:this._getContainer(),elFlipTo:this._getContainer(),htFrom:{
                    opacity:0
                }
                ,htTo:{
                    opacity:1
                }
                
            });
            break
        }
        
    }
    ,_endShowEffect:function(){
        if(this.option("bUseEffect")){
            this._getLayerEffect().detachAll("afterEffect")
        }
        this.fireEvent("show",{
            sType:"show",elLayer:this.getDialog()
        });
        this._bIsShown=true;
        this._bProcessingShow=false
    }
    ,hide:function(){
        if(!this.isShown()){
            return false
        }
        this._bProcessingHide=true;
        if(!this.fireEvent("beforeHide",{
            sType:"beforeHide",elLayer:this.getDialog()
        })){
            return
        }
        this._hideDialogLayer()
    }
    ,_hideDialogLayer:function(){
        if(this.option("bUseEffect")){
            this._getLayerEffect().attach("afterEffect",MobileCommentJindo.$Fn(this._endHideEffect,this).bind());
            this._startHideEffect()
        }
        else{
            this._htWElement.dialog_container.hide();
            this._endHideEffect()
        }
        
    }
    ,_startHideEffect:function(){
        var sEffectType=this.option("sEffectType");
        var nEffectDuration=this.option("nEffectDuration");
        switch(sEffectType){
            case"slide-up":this._getLayerEffect().slide({
                sDirection:"down",nDuration:nEffectDuration
            });
            break;
            case"slide-down":this._getLayerEffect().slide({
                sDirection:"up",nDuration:nEffectDuration
            });
            break;
            case"pop":this._getLayerEffect().pop({
                sDirection:"out",nDuration:nEffectDuration,htTo:{
                    opacity:0
                }
                
            });
            break;
            case"flip":this._getLayerEffect().flip({
                nDuration:nEffectDuration,elFlipFrom:this._getContainer(),elFlipTo:this._getContainer(),htTo:{
                    opacity:0
                }
                
            });
            break
        }
        
    }
    ,_endHideEffect:function(){
        if(this.option("bUseEffect")){
            this._getLayerEffect().detachAll("afterEffect")
        }
        this.fireEvent("hide",{
            sType:"hide",elLayer:this.getDialog()
        });
        if(this._showAttachedEvent){
            for(var evt in this._showAttachedEvent){
                this.detachAll(evt)
            }
            this._showAttachedEvent=null
        }
        this._detachEvent("touchstart");
        this._htWElement.dialog_container.hide();
        this._htWElement.dialog_container.css("opacity",1);
        if(window.pageYOffset||window.pageXOffset){
            this._htWElement.dialog_container.css({
                top:"0px",left:"0px"
            })
        }
        this._bIsShown=false;
        this._bProcessingHide=false
    }
    ,destroy:function(){
        this._detachEventAll();
        if(this.option("bUseEffect")){
            this._getLayerEffect().destroy();
            this._oLayerEffect=null
        }
        this._htWElement.dialog_container.leave();
        this._htWElement.dialog_clone.leave();
        this._htWElement=null;
        this._htDeviceSize=null;
        this._htDialogSize=null;
        this._sTemplate=null;
        this._oTemplate=null;
        this._bIsShown=null;
        this._bProcessingShow=null;
        this._bProcessingHide=null;
        this._oTimeout=null;
        this._htDeviceInfo=null;
        this._bIOS=null;
        this._bAndroid=null
    }
    
}).extend(MobileCommentJindo.UIComponent);
MobileCommentJindo.m.DropArea=MobileCommentJindo.$Class({
    $init:function(el,htUserOption){
        this.option({
            sClassPrefix:"drop-",oDragInstance:null,bActivateOnload:true,bUseTouchPoint:false
        });
        this.option(htUserOption||{});
        this._initVar();
        this._setWrapperElement(el);
        if(this.option("bActivateOnload")){
            this.activate()
        }
        
    }
    ,_initVar:function(){
        this._waOveredDroppableElement=MobileCommentJindo.$A([]);
        this._sEvent="ontouchstart" in window?"touchmove":"mousemove";
        this._sDropClassName="."+this.option("sClassPrefix")+"area";
        this._aItem=null;
        this._aItemRect=null;
        this._elHandle=null;
        this._elDragging=null
    }
    ,_setWrapperElement:function(el){
        this._htWElement={};
        var el=MobileCommentJindo.$(el);
        this._htWElement.base=MobileCommentJindo.$Element(el)
    }
    ,_getRectInfo:function(el){
        var htOffset=MobileCommentJindo.$Element(el).offset();
        return{
            nLeft:htOffset.left,nTop:htOffset.top,nRight:htOffset.left+el.offsetWidth,nBottom:htOffset.top+el.offsetHeight
        }
        
    }
    ,_reCalculate:function(){
        var elBase=this._htWElement.base.$value();
        var aItem=MobileCommentJindo.$$(this._sDropClassName,elBase);
        if(elBase.tagName&&MobileCommentJindo.$$.test(elBase,this._sDropClassName)){
            aItem.push(elBase)
        }
        this._aItem=aItem;
        this._aItemRect=[];
        for(var i=0,el;
        (el=aItem[i]);
        i++){
            this._aItemRect.push(this._getRectInfo(el))
        }
        
    }
    ,_findDroppableElement:function(el){
        var elDroppable=MobileCommentJindo.$$.test(el,this._sDropClassName)?el:MobileCommentJindo.m.getClosest(this._sDropClassName,el);
        if(!this._isChildOfDropArea(el)){
            elDroppable=null
        }
        return elDroppable
    }
    ,_isChildOfDropArea:function(el){
        if(this._el===document||this._el===el){
            return true
        }
        return this._htWElement.base.isParentOf(el)
    }
    ,_isDropMove:function(nLeft,nTop,nRight,nBottom){
        var aItem=this._aItem;
        var aItemRect=this._aItemRect;
        if(!this.option("bUseTouchPoint")){
            for(var i=0,htRect,el;
            ((htRect=aItemRect[i])&&(el=aItem[i]));
            i++){
                var bHOver=this._checkOverArea({
                    nMin:htRect.nLeft,nMax:htRect.nRight
                }
                ,{
                    nMin:nLeft,nMax:nRight
                });
                var bVOver=this._checkOverArea({
                    nMin:htRect.nTop,nMax:htRect.nBottom
                }
                ,{
                    nMin:nTop,nMax:nBottom
                });
                if(bHOver&&bVOver){
                    this._addOveredDroppableElement(el);
                    this._fireMoveEvent(el,htRect,{
                        nX:nLeft,nY:nTop
                    })
                }
                else{
                    this._removeOveredDroppableElement(el)
                }
                
            }
            
        }
        else{
            for(var i=0,htRect,el;
            ((htRect=aItemRect[i])&&(el=aItem[i]));
            i++){
                if(htRect.nLeft<=nLeft&&nLeft<=htRect.nRight&&htRect.nTop<=nTop&&nTop<=htRect.nBottom){
                    this._addOveredDroppableElement(el);
                    this._fireMoveEvent(el,htRect,{
                        nX:nLeft,nY:nTop
                    })
                }
                else{
                    this._removeOveredDroppableElement(el)
                }
                
            }
            
        }
        
    }
    ,_checkOverArea:function(htBase,htCheck){
        if(htCheck.nMin<htBase.nMin){
            if(htCheck.nMax>htBase.nMin){
                return true
            }
            
        }
        else{
            if(htCheck.nMin<htBase.nMax){
                return true
            }
            
        }
        return false
    }
    ,_fireMoveEvent:function(elDrop,htRect,htTouchInfo){
        var nRatioX=(htTouchInfo.nX-htRect.nLeft)/(htRect.nRight-htRect.nLeft);
        var nRatioY=(htTouchInfo.nY-htRect.nTop)/(htRect.nBottom-htRect.nTop);
        this.fireEvent("move",{
            elHandle:this._elHandle,elDrag:this._elDragging,elDrop:elDrop,nRatioX:nRatioX,nRatioY:nRatioY
        })
    }
    ,_addOveredDroppableElement:function(elDroppable){
        if(this._waOveredDroppableElement.indexOf(elDroppable)==-1){
            this._waOveredDroppableElement.push(elDroppable);
            this.fireEvent("over",{
                elHandle:this._elHandle,elDrag:this._elDragging,elDrop:elDroppable
            })
        }
        
    }
    ,_removeOveredDroppableElement:function(elDroppable){
        var nIndex=this._waOveredDroppableElement.indexOf(elDroppable);
        if(nIndex!=-1){
            this._waOveredDroppableElement.splice(nIndex,1);
            this.fireEvent("out",{
                elHandle:this._elHandle,elDrag:this._elDragging,elDrop:elDroppable
            })
        }
        
    }
    ,_clearOveredDroppableElement:function(){
        for(var elDroppable;
        (elDroppable=this._waOveredDroppableElement.$value()[0]);
        ){
            this._waOveredDroppableElement.splice(0,1);
            this.fireEvent("drop",{
                elHandle:this._elHandle,elDrag:this._elDragging,elDrop:elDroppable
            })
        }
        
    }
    ,getOveredLists:function(){
        return this._waOveredDroppableElement?this._waOveredDroppableElement.$value():[]
    }
    ,_onActivate:function(){
        this._attachEvent();
        if(this.option("oDragInstance")){
            var oDrag=this.option("oDragInstance");
            var self=this;
            oDrag.attach({
                handleDown:function(oCustomEvent){
                    self._elHandle=oCustomEvent.elHandle;
                    self._elDragging=oCustomEvent.elDrag;
                    self._waOveredDroppableElement.empty();
                    self.fireEvent(oCustomEvent.sType,oCustomEvent)
                }
                ,dragStart:function(oCustomEvent){
                    if(!self.fireEvent(oCustomEvent.sType,oCustomEvent)){
                        oCustomEvent.stop()
                    }
                    else{
                        self._reCalculate()
                    }
                    
                }
                ,beforeDrag:function(oCustomEvent){
                    self.fireEvent(oCustomEvent.sType,oCustomEvent)
                }
                ,drag:function(oCustomEvent){
                    self._elDragging=oCustomEvent.elDrag;
                    var wel=MobileCommentJindo.$Element(oCustomEvent.elDrag);
                    var nTop=self.option("bUseTouchPoint")?oCustomEvent.nTouchY:oCustomEvent.nY;
                    var nLeft=self.option("bUseTouchPoint")?oCustomEvent.nTouchX:oCustomEvent.nX;
                    var nRight=nLeft+wel.width();
                    var nBottom=nTop+wel.height();
                    self._isDropMove(nLeft,nTop,nRight,nBottom);
                    self.fireEvent(oCustomEvent.sType,oCustomEvent)
                }
                ,dragEnd:function(oCustomEvent){
                    var oParam={};
                    oParam.aElDrop=self.getOveredLists().concat();
                    for(var p in oCustomEvent){
                        oParam[p]=oCustomEvent[p]
                    }
                    self._clearOveredDroppableElement();
                    self.fireEvent(oCustomEvent.sType,oParam)
                }
                ,handleUp:function(oCustomEvent){
                    self.fireEvent("handleUp",{
                        elHandle:self._elHandle,elDrag:self._elDragging
                    });
                    self._elHandle=null;
                    self._elDragging=null
                }
                
            })
        }
        
    }
    ,_onDeactivate:function(){
        this._detachEvent();
        if(this.option("oDragInstance")){
            var oDrag=this.option("oDragInstance");
            oDrag.detachAll()
        }
        
    }
    ,_attachEvent:function(){
        this._htEvent={}
    }
    ,_detachEvent:function(){
        this._htEvent=null
    }
    ,destroy:function(){
        this.deactivate();
        for(var p in this._htWElement){
            this._htWElement[p]=null
        }
        this._htWElement=null
    }
    
}).extend(MobileCommentJindo.UIComponent);
MobileCommentJindo.m.Flicking=MobileCommentJindo.$Class({
    $init:function(sId,htUserOption){
        this.option({
            bHorizontal:true,sClassPrefix:"flick-",bActivateOnload:true,nDefaultIndex:0,bAutoResize:true,nFlickThreshold:40,nDuration:200,bUsePreserve3dForAndorid:false
        });
        this.option(htUserOption||{});
        this._setWrapperElement(sId);
        this._initVar();
        this._setSize();
        this._initScroll();
        this._updateSizeInfo();
        if(this.option("bActivateOnload")){
            this.activate();
            this.moveTo(this.option("nDefaultIndex"),0)
        }
        
    }
    ,_initScroll:function(){
        this._oCore=new MobileCommentJindo.m.CoreScroll(this._htWElement.base.$value(),{
            bUseHScroll:this.option("bHorizontal"),bUseVScroll:!this.option("bHorizontal"),bUseMomentum:false,bUsePreserve3dForAndorid:this.option("bUsePreserve3dForAndorid"),bActivateOnload:false
        });
        this._oCore.attach({
            beforeScroll:MobileCommentJindo.$Fn(this._onBeforeScrollEnd,this).bind(),afterScroll:MobileCommentJindo.$Fn(this._onScrollEnd,this).bind()
        })
    }
    ,_initVar:function(){
        this.bHorizontal=(this.option("bHorizontal"))?true:false;
        this.nCurrentIndex=this.option("nDefaultIndex");
        this.nNextIndex=this.nCurrentIndex;
        this.bResizeing=false
    }
    ,_setWrapperElement:function(el){
        this._htWElement={};
        el=MobileCommentJindo.$(el);
        var sClass="."+this.option("sClassPrefix");
        this._htWElement.base=MobileCommentJindo.$Element(el);
        this._htWElement.wrapper=MobileCommentJindo.$Element(MobileCommentJindo.$$.getSingle(sClass+"container",el));
        var aContents=MobileCommentJindo.$$(sClass+"ct",el);
        this._htWElement.aContent=MobileCommentJindo.$A(aContents).forEach(function(value,index,array){
            array[index]=MobileCommentJindo.$Element(value)
        }).$value()
    }
    ,_setSize:function(){
        if(!this.option("bAutoResize")){
            return
        }
        var nLen=this._htWElement.aContent.length;
        if(this.bHorizontal){
            var nW=this._htWElement.base.width();
            this._htWElement.wrapper.width(nW*nLen);
            MobileCommentJindo.$A(this._htWElement.aContent).forEach(function(value){
                value.width(nW)
            })
        }
        else{
            var nH=this._htWElement.aContent[0].height();
            this._htWElement.wrapper.height(nH*nLen)
        }
        
    }
    ,_updateSizeInfo:function(){
        var sLen=this.bHorizontal?"width":"height";
        this._htPosition=[];
        var nPos=0;
        for(var i=0,nLen=this._htWElement.aContent.length;
        i<nLen;
        i++){
            if(i!=0){
                nPos+=this._htWElement.aContent[i-1][sLen]()*-1
            }
            this._htPosition.push(nPos)
        }
        
    }
    ,_onBeforeScrollEnd:function(oCustomEvt){
        var nOrignalTime=oCustomEvt.nTime;
        var htPos=this._getSnap(oCustomEvt.nLeft,oCustomEvt.nTop,oCustomEvt.nDistanceX,oCustomEvt.nDistanceY,oCustomEvt.nMomentumX,oCustomEvt.nMomentumY);
        oCustomEvt.nNextLeft=htPos.nX;
        oCustomEvt.nNextTop=htPos.nY;
        oCustomEvt.nTime=htPos.nTime;
        this.nNextIndex=htPos.nIndex
    }
    ,_onScrollEnd:function(){
        if(!this.bResizeing&&(this.nNextIndex!=this.nCurrentIndex)){
            this._setContentIndex(this.nNextIndex);
            this.fireEvent("afterFlicking",{
                nContentsIndex:this.getContentIndex()
            })
        }
        if(this.bResizeing){
            this.bResizeing=false
        }
        
    }
    ,_getSnap:function(nX,nY,nDisX,nDisY,nMomX,nMomY){
        var nPosX=nPosY=nNewPos=0;
        var nIndex=this._htWElement.aContent.length-1;
        var nCurrent=this.bHorizontal?nX:nY;
        var nDis=this.bHorizontal?nDisX:nDisY;
        var nMom=this.bHorizontal?nMomX:nMomY;
        for(var i=0,nLen=this._htPosition.length;
        i<nLen;
        i++){
            if(nCurrent>=(this._htPosition[i])){
                nIndex=i;
                break
            }
            
        }
        if(nIndex==this.nCurrentIndex&&nIndex>0&&nDis>0){
            nIndex--
        }
        if((Math.abs(nDis)<=this.option("nFlickThreshold"))){
            if(!(!MobileCommentJindo.m.getDeviceInfo().android&&nMom!=0)){
                nIndex=this.nCurrentIndex
            }
            
        }
        nNewPos=this._htPosition[nIndex];
        var nSize=Math.abs(this._htPosition[nIndex]-this._htPosition[this.nCurrentIndex]);
        var nGap=nSize?Math.abs((nNewPos-nCurrent)/nSize):0;
        var nTime=(!MobileCommentJindo.m.getDeviceInfo().android&&(nMom!=0))?Math.round(this.option("nDuration")*nGap*0.5):this.option("nDuration");
        nTime=Math.min(nTime,this.option("nDuration"));
        return{
            nX:this.bHorizontal?nNewPos:nPosX,nY:this.bHorizontal?nPosY:nNewPos,nTime:Math.round(nTime),nIndex:nIndex
        }
        
    }
    ,_getPosition:function(nIndex){
        var nPosX=nPosY=0;
        if(typeof nIndex=="undefined"){
            nIndex=this.nCurrentIndex
        }
        nIndex=Math.max(0,nIndex);
        nIndex=Math.min(this._htPosition.length-1,nIndex);
        return{
            nX:this.bHorizontal?this._htPosition[nIndex]:nPosX,nY:this.bHorizontal?nPosY:this._htPosition[nIndex]
        }
        
    }
    ,_setContentIndex:function(nIndex){
        this.nCurrentIndex=nIndex
    }
    ,getContentIndex:function(){
        return this.nCurrentIndex
    }
    ,getContentElement:function(){
        return this._htWElement.aContent[this.getContentIndex()]
    }
    ,getTotalContents:function(){
        return this._htWElement.aContent.length
    }
    ,getPrevIndex:function(){
        return Math.max(this.nCurrentIndex-1,0)
    }
    ,getPrevElement:function(){
        if(this.nCurrentIndex-1<0){
            return null
        }
        else{
            return this._htWElement.aContent[this.nCurrentIndex-1]
        }
        
    }
    ,getNextIndex:function(){
        return Math.min(this.nCurrentIndex+1,this._htWElement.aContent.length-1)
    }
    ,getNextElement:function(){
        if(this.nCurrentIndex+1>this._htWElement.aContent.length-1){
            return null
        }
        else{
            return this._htWElement.aContent[this.nCurrentIndex+1]
        }
        
    }
    ,moveTo:function(nIndex,nTime){
        if(nIndex<0||nIndex>this._htWElement.aContent.length-1){
            return
        }
        if(typeof nTime=="undefined"){
            nTime=this.option("nDuration")
        }
        var htPos=this._getPosition(nIndex);
        this.nNextIndex=nIndex;
        var htCurPos=this._oCore.getCurrentPos();
        if((htPos.nY!==htCurPos.nTop)||(htPos.nX!==htCurPos.nLeft)){
            this._oCore.scrollTo(htPos.nX,htPos.nY,nTime)
        }
        else{
            this._onScrollEnd()
        }
        
    }
    ,movePrev:function(nTime){
        this.moveTo(this.getPrevIndex(),nTime)
    }
    ,moveNext:function(nTime){
        this.moveTo(this.getNextIndex(),nTime)
    }
    ,isAnimating:function(){
        return this._oCore.isMoving()
    }
    ,_onResize:function(evt){
        var self=this;
        this._setSize();
        this._updateSizeInfo();
        this._oCore.refresh(true);
        self.bResizeing=true;
        self.moveTo(self.nCurrentIndex,0)
    }
    ,_onActivate:function(){
        this._oCore.activate();
        this._attachEvent()
    }
    ,_onDeactivate:function(){
        this._oCore.deactivate();
        this._detachEvent()
    }
    ,_attachEvent:function(){
        this._htEvent={};
        this._htEvent.rotate=MobileCommentJindo.$Fn(this._onResize,this).bind();
        MobileCommentJindo.m.bindRotate(this._htEvent.rotate)
    }
    ,_detachEvent:function(){
        for(p in this._htEvent){
            var htTargetEvent=this._htEvent[p];
            if(htTargetEvent.ref){
                htTargetEvent.ref.detach(htTargetEvent.el,p)
            }
            
        }
        MobileCommentJindo.m.unbindRotate(this._htEvent.rotate);
        this._htEvent=null
    }
    ,destroy:function(){
        this.deactivate();
        this._oCore.destroy();
        delete this._oCore;
        for(var p in this._htWElement){
            this._htWElement[p]=null
        }
        this._htWElement=null;
        this.bHorizontal=null;
        this.nCurrentIndex=null;
        this._htPosition=null
    }
    
}).extend(MobileCommentJindo.UIComponent);
MobileCommentJindo.m.FloatingLayer=MobileCommentJindo.$Class({
    $init:function(el,htUserOption){
        this.option({
            bActivateOnload:true,sPosition:"bottom",sDirection:"up",nSlideDuration:500,sSlideTimingFunction:"ease-in-out",nFadeInDuration:0,sFadeInTimingFunction:"ease-in-out",nFadeOutDuration:0,sFadeOutTimingFunction:"ease-in-out",nTimeout:-1
        });
        this.option(htUserOption||{});
        this._initVar();
        this._setWrapperElement(el);
        if(this.option("bActivateOnload")){
            this.activate()
        }
        
    }
    ,_initVar:function(){
        this._oFloatingEffect=null;
        this._oFadeinEffect=null;
        this._oLayerPosition=null;
        this._oScrollEnd=null;
        this._nTimeoutTimer=-1;
        this._isLayerOn=false;
        this._isMoving=false
    }
    ,_setWrapperElement:function(el){
        this._htWElement={};
        this._htWElement.element=MobileCommentJindo.$Element(el);
        this._htWElement.viewElement=MobileCommentJindo.$Element(this._createView());
        if(MobileCommentJindo.m.getDeviceInfo().android&&parseInt(MobileCommentJindo.m.getDeviceInfo().version,10)>=3){
            this._htWElement.targetElement=this._htWElement.viewElement
        }
        else{
            this._htWElement.targetElement=this._htWElement.element
        }
        
    }
    ,_initComponent:function(){
        var self=this,el=this._htWElement.element.$value();
        this._oLayerPosition=new MobileCommentJindo.m.LayerPosition(this._htWElement.viewElement.$value(),{
            sPosition:this.option("sPosition"),bActivateOnload:false,bAutoReposition:true
        });
        this._oFloatingEffect=new MobileCommentJindo.m.LayerEffect(el);
        if(this.option("nFadeInDuration")!==0){
            this._oFadeinEffect=new MobileCommentJindo.m.LayerEffect(this._htWElement.targetElement.$value(),{
                nDuration:this.option("nFadeInDuration")
            }).attach("afterEffect",function(){
                self._startHideTimer()
            })
        }
        this._oScrollEnd=new MobileCommentJindo.m.ScrollEnd()
    }
    ,getLayer:function(){
        return this._htWElement.element.$value()
    }
    ,_createView:function(){
        var bVisible=this._htWElement.element.visible(),welView=this._htWElement.element.query("._floatingLayer_view_divtag_");
        if(!welView){
            welView=MobileCommentJindo.$Element("<div class='_floatingLayer_view_divtag_'>")
        }
        else{
            welView=MobileCommentJindo.$Element(welView)
        }
        if(!bVisible){
            this._htWElement.element.css({
                left:"-9999px"
            }).show()
        }
        welView.css({
            width:this._htWElement.element.width()+"px",height:this._htWElement.element.height()+"px",zIndex:1000
        });
        if(!bVisible){
            this._htWElement.element.hide()
        }
        return welView
    }
    ,resize:function(nWidth,nHeight){
        this._htWElement.viewElement.css({
            width:nWidth+"px",height:nHeight+"px"
        });
        this._oLayerPosition.setPosition()
    }
    ,show:function(){
        if(this._fireEvent("beforeShow")){
            if(!this._oLayerPosition.isActivating()){
                this._oLayerPosition.activate()
            }
            this._setFloatingEffect(true);
            this._htWElement.element.show();
            this._oFloatingEffect.slide({
                sDirection:this.option("sDirection"),nDuration:this.option("nSlideDuration"),sTransitionTimingFunction:this.option("sSlideTimingFunction"),elBaseLayer:this._htWElement.viewElement.$value()
            })
        }
        
    }
    ,hide:function(){
        if(this._fireEvent("beforeHide")){
            this._stopHideTimer();
            if(this._oLayerPosition.isActivating()){
                this._oLayerPosition.deactivate()
            }
            this._detachFloatingEvent();
            this._setFloatingEffect(false);
            if(this.option("nFadeOutDuration")!==0){
                this._oFloatingEffect.fade({
                    sDirection:"out",nDuration:this.option("nFadeOutDuration"),sTransitionTimingFunction:this.option("sFadeOutTimingFunction")
                })
            }
            else{
                this._htWElement.targetElement.hide();
                this._fireEvent("hide")
            }
            
        }
        
    }
    ,_fireEvent:function(sType){
        return this.fireEvent(sType,{
            welLayer:this._htWElement.element
        })
    }
    ,_startHideTimer:function(){
        if(this.option("nTimeout")>-1){
            var self=this;
            this._stopHideTimer();
            this._nTimeoutTimer=setTimeout(function(){
                self.hide()
            }
            ,this.option("nTimeout"))
        }
        
    }
    ,_stopHideTimer:function(){
        clearTimeout(this._nTimeoutTimer);
        this._nTimeoutTimer=-1
    }
    ,_onTouchStart:function(we){
        this._initFloatingData();
        if(this._isLayer(we.element)){
            this._isLayerOn=true;
            this._htWElement.targetElement.show()
        }
        else{
            this._htWElement.targetElement.hide()
        }
        
    }
    ,_onScrollEnd:function(we){
        this._runFadeIn()
    }
    ,_onTouchMove:function(we){
        this._isMoving=true
    }
    ,_onTouchEnd:function(we){
        if(this._isLayerOn){
            this._oLayerPosition.setPosition();
            return
        }
        else{
            if(!this._isMoving){
                this._runFadeIn()
            }
            
        }
        
    }
    ,_runFadeIn:function(){
        if(this._isLayerOn){
            this._startHideTimer()
        }
        else{
            this._fadeIn()
        }
        
    }
    ,_fadeIn:function(){
        this._oLayerPosition.setPosition();
        if(this._oFadeinEffect){
            this._oFadeinEffect.clearEffect(true);
            this._oFadeinEffect.fade({
                sDirection:"in",sTransitionTimingFunction:this.option("sFadeInTimingFunction")
            })
        }
        else{
            this._htWElement.targetElement.show();
            this._startHideTimer()
        }
        
    }
    ,_isLayer:function(el){
        if(el&&(el===this._htWElement.element.$value()||this._htWElement.element.isParentOf(el))){
            return true
        }
        else{
            return false
        }
        
    }
    ,_initFloatingData:function(){
        this._stopHideTimer();
        if(this._oFloatingEffect&&this.option("nFadeOutDuration")!==0){
            this._oFloatingEffect.clearEffect(true)
        }
        if(this._oFadeinEffect){
            this._oFadeinEffect.clearEffect(true)
        }
        this._isMoving=false;
        this._isLayerOn=false
    }
    ,_onActivate:function(){
        this._initComponent()
    }
    ,_onDeactivate:function(){
        this._detachEvent();
        if(this._oFadeinEffect){
            this._oFadeinEffect.detachAll("afterEffect");
            this._oFadeinEffect.destroy()
        }
        this._oFloatingEffect.destroy();
        this._oScrollEnd.destroy();
        this._oLayerPosition.destroy();
        document.body.appendChild(this._htWElement.element.$value());
        this._htWElement.viewElement.leave()
    }
    ,_attachFloatingEvent:function(){
        this._htEvent={};
        this._htEvent.event_touchstart={
            el:document,ref:MobileCommentJindo.$Fn(this._onTouchStart,this).attach(document,"touchstart")
        };
        this._htEvent.event_touchmove={
            el:document,ref:MobileCommentJindo.$Fn(this._onTouchMove,this).attach(document,"touchmove")
        };
        this._htEvent.event_touchend={
            el:document,ref:MobileCommentJindo.$Fn(this._onTouchEnd,this).attach(document,"touchend")
        };
        this._oScrollEnd.attach("scrollEnd",MobileCommentJindo.$Fn(this._onScrollEnd,this).bind())
    }
    ,_detachEvent:function(){
        this._detachFloatingEvent()
    }
    ,_setFloatingEffect:function(isShow){
        var self=this;
        this._oFloatingEffect.detachAll("afterEffect");
        this._oFloatingEffect.clearEffect(true);
        if(this._oFadeinEffect){
            this._oFadeinEffect.clearEffect(true)
        }
        if(isShow){
            this._oFloatingEffect.attach("afterEffect",function(){
                self._attachFloatingEvent();
                self._startHideTimer();
                self._fireEvent("show")
            })
        }
        else{
            if(this.option("nFadeOutDuration")!==0){
                this._oFloatingEffect.attach("afterEffect",function(){
                    self._fireEvent("hide")
                })
            }
            
        }
        
    }
    ,_detachFloatingEvent:function(){
        for(var p in this._htEvent){
            var ht=this._htEvent[p];
            if(ht.ref){
                ht.ref.detach(ht.el,p.substring(p.lastIndexOf("_")+1))
            }
            
        }
        this._oScrollEnd.detachAll("scrollEnd");
        this._htEvent=null
    }
    ,destroy:function(){
        this.deactivate();
        for(var p in this._htWElement){
            this._htWElement[p]=null
        }
        delete this._htWElement;
        this._initFloatingData()
    }
    
}).extend(MobileCommentJindo.UIComponent);
MobileCommentJindo.m.LayerManager=MobileCommentJindo.$Class({
    $init:function(el,htUserOption){
        var oDeviceInfo=MobileCommentJindo.m.getDeviceInfo();
        this.option({
            bActivateOnload:true
        });
        this.option(htUserOption||{});
        this._initVar();
        this._setWrapperElement(el);
        if(this.option("bActivateOnload")){
            this.activate()
        }
        
    }
    ,_initVar:function(){
        this._aLink=[];
        this._oTouch=null
    }
    ,_setWrapperElement:function(el){
        this._htWElement={};
        this.setLayer(el)
    }
    ,_onActivate:function(){
        this._attachEvent()
    }
    ,_onDeactivate:function(){
        this._detachEvent()
    }
    ,setLayer:function(el){
        el=(typeof el=="string"?MobileCommentJindo.$(el):el);
        this._htWElement.element=MobileCommentJindo.$Element(el);
        this._htWElement.element.css("position","absolute");
        return this
    }
    ,getVisible:function(){
        return this._htWElement.element.visible()
    }
    ,getLayer:function(){
        return this._htWElement.element.$value()
    }
    ,getLinks:function(){
        return this._aLink
    }
    ,link:function(vElement){
        if(arguments.length>1){
            for(var i=0,len=arguments.length;
            i<len;
            i++){
                this.link(arguments[i])
            }
            return this
        }
        if(this._find(vElement)!=-1){
            return this
        }
        this._aLink.push(vElement);
        return this
    }
    ,unlink:function(vElement){
        if(arguments.length>1){
            for(var i=0,len=arguments.length;
            i<len;
            i++){
                this.unlink(arguments[i])
            }
            return this
        }
        var nIndex=this._find(vElement);
        if(nIndex>-1){
            this._aLink.splice(nIndex,1)
        }
        return this
    }
    ,_check:function(el){
        var wel=MobileCommentJindo.$Element(el);
        for(var i=0,elLink,welLink;
        (elLink=this._aLink[i]);
        i++){
            welLink=MobileCommentJindo.$Element(elLink);
            if(welLink){
                elLink=welLink.$value();
                if(elLink&&(el==elLink||wel.isChildOf(elLink))){
                    return true
                }
                
            }
            
        }
        return false
    }
    ,_find:function(el){
        for(var i=0,elLink;
        (elLink=this._aLink[i]);
        i++){
            if(elLink==el){
                return i
            }
            
        }
        return -1
    }
    ,_fireEventBeforeShow:function(){
        return this.fireEvent("beforeShow",{
            elLayer:this.getLayer(),aLinkedElement:this.getLinks()
        })
    }
    ,_fireEventShow:function(){
        this.fireEvent("show",{
            elLayer:this.getLayer(),aLinkedElement:this.getLinks()
        })
    }
    ,_fireEventBeforeHide:function(el){
        return this.fireEvent("beforeHide",{
            elTarget:el,elLayer:this.getLayer(),aLinkedElement:this.getLinks()
        })
    }
    ,_fireEventHide:function(el){
        this.fireEvent("hide",{
            elTarget:el,elLayer:this.getLayer(),aLinkedElement:this.getLinks()
        })
    }
    ,show:function(){
        if(!this.getVisible()){
            if(this._fireEventBeforeShow()){
                this._htWElement.element.show();
                this._fireEventShow()
            }
            
        }
        return this
    }
    ,hide:function(el){
        if(this.getVisible()){
            if(this._fireEventBeforeHide(el)){
                this._htWElement.element.hide();
                this._fireEventHide(el)
            }
            
        }
        return this
    }
    ,toggle:function(){
        if(this.getVisible()){
            this.hide()
        }
        else{
            this.show()
        }
        return this
    }
    ,_onEvent:function(we){
        var el=we.element;
        if(this.getVisible()){
            if(this._check(el)){
                this.fireEvent("ignore",{
                    elTarget:el
                })
            }
            else{
                this.hide(el);
                return true
            }
            we.stop()
        }
        
    }
    ,_attachEvent:function(){
        var self=this;
        this._oTouch=new MobileCommentJindo.m.Touch(document).attach("touchEnd",function(we){
            if(we.sMoveType===MobileCommentJindo.m.MOVETYPE[3]){
                self._onEvent(we)
            }
            
        })
    }
    ,_detachEvent:function(){
        if(this._oTouch){
            this._oTouch.detachAll("touchEnd")
        }
        
    }
    ,destroy:function(){
        this.deactivate();
        for(var p in this._htWElement){
            this._htWElement[p]=null
        }
        this._htWElement=null;
        delete this._aLink;
        delete this._oTouch
    }
    
}).extend(MobileCommentJindo.UIComponent);
MobileCommentJindo.m.Loading=MobileCommentJindo.$Class({
    $init:function(el,htUserOption){
        this.option({
            bActivateOnload:true,nWidth:31,nHeight:31,sDefaultForeground:"black",sDefaultBackground:"transparent",sLoadingText:"로딩중입니다",bUseFoggy:el?false:true,sFoggyColor:"gray",nFoggyOpacity:0.3
        });
        this.option(htUserOption||{});
        this._setWrapperElement(el);
        if(this.option("bActivateOnload")){
            this.activate()
        }
        
    }
    ,$static:{
        DELAY:["0","-.9167s","-.833s","-.75s","-.667s","-.5833s","-.5s","-.41667s","-.333s","-.25s","-.1667s","-.0833s"],ANIMATION_STYLE:"_loading_animation_sytle_",CONTAINER_CLASS:"_loading_container_class_"
    }
    ,_setWrapperElement:function(el){
        this._htWElement={};
        this._htWElement.base=MobileCommentJindo.$Element(MobileCommentJindo.$(el)?MobileCommentJindo.$(el):document.body);
        this._createLoading()
    }
    ,_createLoading:function(){
        this._createLoadingStyle();
        this._htWElement.container=MobileCommentJindo.$Element("<div style='zIndex: 1000'>").addClass(MobileCommentJindo.m.Loading.CONTAINER_CLASS);
        if(this.option("bUseFoggy")){
            this._createFoggy().appendTo(this._htWElement.container)
        }
        this._createLoadingElement();
        this._htWElement.loadingbox=MobileCommentJindo.$Element("<div>").css({
            zIndex:1000,position:"absolute"
        }).append(this._htWElement.loading);
        if(this.option("sLoadingText")){
            this._createLoadingText().appendTo(this._htWElement.loadingbox)
        }
        this._htWElement.loadingbox.appendTo(this._htWElement.container)
    }
    ,_createFoggy:function(){
        return this._htWElement.foggy=MobileCommentJindo.$Element("<div>").css({
            position:"absolute",padding:"0px",margin:"0px",border:"0px",backgroundColor:this.option("sFoggyColor"),opacity:this.option("nFoggyOpacity"),width:"100%",height:"100%",left:"0px",top:"0px",zIndex:1000
        })
    }
    ,_setPosition:function(){
        var nWidth=this._htWElement.loadingbox.width(),nHeight=this._htWElement.loadingbox.height(),htScrollPosition;
        if(this._isBody()){
            htScrollPosition=MobileCommentJindo.$Document().scrollPosition();
            this._htWElement.container.css({
                left:htScrollPosition.left+"px",top:htScrollPosition.top+"px",
            });
            this._htWElement.container.css({
                width:window.innerWidth+"px",height:window.innerHeight+"px"
            })
        }
        else{
            if(this._htWElement.container.width()<nWidth){
                this._htWElement.container.width(nWidth)
            }
            if(this._htWElement.container.height()<nHeight){
                this._htWElement.container.height(nHeight)
            }
            
        }
        this._htWElement.loadingbox.css({
            top:"50%",left:"50%","margin-left":-parseInt(nWidth/2,10)+"px","margin-top":-parseInt(nHeight/2,10)+"px"
        })
    }
    ,_isBody:function(){
        return this._htWElement.base.$value()===document.body
    }
    ,show:function(){
        if(this.fireEvent("beforeShow")){
            var aSpan=this._htWElement.loading.queryAll("span"),sCssPrefix=MobileCommentJindo.m.getCssPrefix();
            for(var i=0;
            i<aSpan.length;
            i++){
                MobileCommentJindo.$Element(aSpan[i]).css(sCssPrefix+"Animation","loadingfade 1s linear "+MobileCommentJindo.m.Loading.DELAY[i]+" infinite")
            }
            this._attachEvent();
            this._htWElement.container.show();
            this._setPosition();
            this.fireEvent("show")
        }
        
    }
    ,hide:function(){
        if(this.fireEvent("beforeHide")){
            var aSpan=this._htWElement.loading.queryAll("span"),sCssPrefix=MobileCommentJindo.m.getCssPrefix();
            for(var i=0;
            i<aSpan.length;
            i++){
                MobileCommentJindo.$Element(aSpan[i]).css(sCssPrefix+"Animation","")
            }
            this._detachEvent();
            this._htWElement.container.hide();
            this.fireEvent("hide")
        }
        
    }
    ,_onPrevent:function(we){
        we.stop(MobileCommentJindo.$Event.CANCEL_ALL);
        return false
    }
    ,_onRotate:function(we){
        if(this._htWElement.container.visible()){
            if(MobileCommentJindo.m.getDeviceInfo().andorid){
                this._setPosition()
            }
            else{
                this._htWElement.container.hide();
                var self=this;
                setTimeout(function(){
                    self._htWElement.container.show();
                    self._setPosition()
                }
                ,0)
            }
            
        }
        
    }
    ,_attachEvent:function(){
        this._htEvent.rotate=MobileCommentJindo.$Fn(this._onRotate,this).bind();
        this._htEvent.prevent=MobileCommentJindo.$Fn(this._onPrevent,this).attach(this._htWElement.container,"touchstart").attach(this._htWElement.container,"touchmove");
        if(this._isBody()){
            this._htEvent.prevent.attach(document.body,"touchstart")
        }
        MobileCommentJindo.m.bindRotate(this._htEvent.rotate)
    }
    ,_detachEvent:function(){
        if(this._htEvent.prevent){
            this._htEvent.prevent.detach(this._htWElement.container,"touchmove").detach(this._htWElement.container,"touchstart");
            if(this._isBody()){
                this._htEvent.prevent.detach(document.body,"touchstart")
            }
            
        }
        MobileCommentJindo.m.unbindRotate(this._htEvent.rotate)
    }
    ,_createLoadingStyle:function(){
        if(!MobileCommentJindo.$(MobileCommentJindo.m.Loading.ANIMATION_STYLE)){
            var elStyle=MobileCommentJindo.$("<style id='"+MobileCommentJindo.m.Loading.ANIMATION_STYLE+"' type='text/css'></style>");
            document.getElementsByTagName("head")[0].appendChild(elStyle);
            elStyle.sheet.insertRule("@-webkit-keyframes loadingfade{from{opacity:1}to{opacity:0}}",0)
        }
        
    }
    ,_createLoadingElement:function(){
        var sCssPrefix=MobileCommentJindo.m.getCssPrefix(),aHtml=[];
        for(var i=0;
        i<12;
        i++){
            aHtml.push("<span style='display:block;position:absolute;top:40%;left:48%;width:11%;height:24%;border-radius:6px;background:");
            aHtml.push(this.option("sDefaultForeground"));
            aHtml.push("; opacity:0; -");
            aHtml.push(sCssPrefix);
            aHtml.push("-transform:rotate(");
            aHtml.push(i*30);
            aHtml.push("deg) translate(0,-140%);'></span>")
        }
        this._htWElement.loading=MobileCommentJindo.$Element("<div>").css({
            position:"relative",margin:"0 auto"
        }).html(aHtml.join(""))
    }
    ,refresh:function(){
        this._htWElement.loading.css({
            width:this.option("nWidth")+"px",height:this.option("nHeight")+"px",background:this.option("sDefaultBackground")
        });
        if(this._htWElement.text){
            this._htWElement.text.html(this.option("sLoadingText"))
        }
        
    }
    ,_createLoadingText:function(){
        return this._htWElement.text=MobileCommentJindo.$Element("<div>").css({
            margin:"2px 0 0 0",bottom:0,width:"100%","text-align":"center"
        })
    }
    ,_onActivate:function(){
        this._htEvent={};
        this._htWElement.container.appendTo(this._htWElement.base);
        if(this._isBody()){
            this._htWElement.container.css({
                position:"absolute",top:0,left:0,width:"100%",height:"100%"
            }).hide()
        }
        else{
            this._htWElement.container.css({
                position:"relative"
            }).hide()
        }
        this.refresh()
    }
    ,_onDeactivate:function(){
        this._detachEvent();
        this._htWElement.container.leave()
    }
    ,destroy:function(){
        this.deactivate();
        for(var p in this._htWElement){
            this._htWElement[p]=null
        }
        this._htWElement=null
    }
    
}).extend(MobileCommentJindo.UIComponent);
MobileCommentJindo.m.MoreContentButton=MobileCommentJindo.$Class({
    $init:function(el,htUserOption){
        this.option({
            sClassPrefix:"more_",nTotalItem:10,nShowMaxItem:10,nItemPerPage:10,nPage:1,bActivateOnload:true,htAjax:{}
        });
        this.option(htUserOption||{});
        this.option("nItem",this.option("nShowMaxItem"));
        this._initVar();
        this._setWrapperElement(el);
        if(this.option("bActivateOnload")){
            this.activate();
            this._nCurrentPage=this.option("nPage")
        }
        
    }
    ,_initVar:function(){
        var _htDefalutAjax={
            sApi:null,htAjaxOption:{
                type:"xhr"
            }
            ,htQuery:{},sStart:"start",sDisplay:"display"
        };
        var htAjax=this.option("htAjax");
        if(!htAjax){
            this.option("htAjax",_htDefalutAjax);
            return
        }
        for(var p in _htDefalutAjax){
            if(typeof htAjax[p]=="undefined"){
                htAjax[p]=_htDefalutAjax[p]
            }
            
        }
        for(var p in _htDefalutAjax.htAjaxOption){
            if(typeof htAjax.htAjaxOption[p]=="undefined"){
                htAjax.htAjaxOption[p]=_htDefalutAjax.htAjaxOption[p]
            }
            
        }
        for(var p in _htDefalutAjax.htQuery){
            if(typeof htAjax.htQuery[p]=="undefined"){
                htAjax.htQuery[p]=_htDefalutAjax.htQuery[p]
            }
            
        }
        if(!!htAjax.sApi){
            this.oAjax=new MobileCommentJindo.$Ajax(htAjax.sApi,htAjax.htAjaxOption)
        }
        
    }
    ,_setWrapperElement:function(el){
        this._htWElement={};
        el=MobileCommentJindo.$(el);
        var sClass="."+this.option("sClassPrefix");
        this._htWElement.elBase=MobileCommentJindo.$Element(el);
        this._htWElement.elMoreButton=MobileCommentJindo.$Element(MobileCommentJindo.$$.getSingle(sClass+"button",el));
        this._htWElement.elTop=MobileCommentJindo.$Element(MobileCommentJindo.$$.getSingle(sClass+"top",el));
        this._htWElement.elLoading=MobileCommentJindo.$Element(MobileCommentJindo.$$.getSingle(sClass+"loading",el));
        this._htWElement.elMoreCnt=MobileCommentJindo.$Element(MobileCommentJindo.$$.getSingle(sClass+"moreCnt",el));
        this._htWElement.elTotal=MobileCommentJindo.$Element(MobileCommentJindo.$$.getSingle(sClass+"total",el));
        this._htWElement.elCurrent=MobileCommentJindo.$Element(MobileCommentJindo.$$.getSingle(sClass+"current",el));
        this._htWElement.elLast=MobileCommentJindo.$Element(MobileCommentJindo.$$.getSingle(sClass+"last",el));
        if(!!this._htWElement.elLast){
            this._htWElement.elLastTotal=MobileCommentJindo.$Element(MobileCommentJindo.$$.getSingle(sClass+"total",this._htWElement.elLast.$value()));
            this._htWElement.elLastCurrent=MobileCommentJindo.$Element(MobileCommentJindo.$$.getSingle(sClass+"current",this._htWElement.elLast.$value()))
        }
        
    }
    ,_onClickMore:function(oEvent){
        oEvent.stop(MobileCommentJindo.$Event.CANCEL_DEFAULT);
        if(this.hasNextPage()){
            this.more()
        }
        
    }
    ,_onClickTop:function(oEvent){
        oEvent.stop(MobileCommentJindo.$Event.CANCEL_DEFAULT);
        this.fireEvent("goTop",{
            element:oEvent.element
        })
    }
    ,more:function(bFireEvent){
        if(typeof bFireEvent=="undefined"){
            bFireEvent=true
        }
        var nPage=this._nCurrentPage+1;
        var nBeforePage=this.getCurrentPage();
        if(bFireEvent){
            if(!this.fireEvent("beforeMore",{
                nPage:nPage,nCurrentPage:nBeforePage
            })){
                return
            }
            
        }
        this.showLoadingImg();
        if(!!this.option("htAjax").sApi){
            this._callAjax(nPage,true,bFireEvent)
        }
        else{
            this._move(nPage);
            var htIndex=this.getPageItemIndex(nPage);
            if(bFireEvent){
                this.fireEvent("more",{
                    nPage:nPage,nStartIndex:htIndex.nStart,nEndIndex:htIndex.nEnd
                })
            }
            this.updateInfo()
        }
        
    }
    ,movePageTo:function(nPage,bFireEvent){
        if(typeof bFireEvent=="undefined"){
            bFireEvent=true
        }
        var nBeforePage=this.getCurrentPage();
        if(bFireEvent){
            if(!this.fireEvent("beforeMovePage",{
                nPage:nPage,nCurrentPage:nBeforePage
            })){
                return
            }
            
        }
        this.showLoadingImg();
        if(!!this.option("htAjax").sApi){
            this._callAjax(nPage,false,bFireEvent)
        }
        else{
            this._move(nPage);
            var htIndex=this.getPageItemIndex(nPage);
            if(bFireEvent){
                this.fireEvent("movePage",{
                    nPage:nPage,nBeforePage:nBeforePage,nStartIndex:0,nEndIndex:htIndex.nEnd
                })
            }
            this.updateInfo()
        }
        
    }
    ,_move:function(nPage){
        var n=this._convertToAvailPage(nPage);
        if(n!=this._nCurrentPage){
            this._nCurrentPage=n
        }
        
    }
    ,updateInfo:function(){
        var nPage=this.getCurrentPage();
        var htIndex=this.getPageItemIndex(nPage);
        this.hideLoadingImg();
        if(nPage>=this.getTotalPages()){
            this._htWElement.elBase.addClass("u_pg_end");
            this._htWElement.elMoreButton.hide();
            this._htWElement.elLast.show("block")
        }
        else{
            this._htWElement.elBase.removeClass("u_pg_end");
            this._htWElement.elMoreButton.show("block");
            this._htWElement.elLast.hide()
        }
        if(!!this._htWElement.elCurrent){
            var sText=htIndex.nEnd+1;
            this._htWElement.elCurrent.text(this._setNumberFormat(sText))
        }
        if(typeof this._htWElement.elLastCurrent!="undefined"){
            this._htWElement.elLastCurrent.text(this._setNumberFormat(htIndex.nEnd+1))
        }
        if(!!this._htWElement.elTotal){
            this._htWElement.elTotal.text(this._setNumberFormat(this.option("nTotalItem")))
        }
        if(typeof this._htWElement.elLastTotal!="undefined"){
            this._htWElement.elLastTotal.text(this._setNumberFormat(this.option("nTotalItem")))
        }
        if(!!this._htWElement.elMoreCnt){
            var nCnt=Math.min(this.getItemPerPage(),this.getItemCount()-htIndex.nEnd-1);
            this._htWElement.elMoreCnt.text(this._setNumberFormat(nCnt))
        }
        
    }
    ,_callAjax:function(nPage,bMore,bFireEvent){
        var self=this;
        this.oAjax.option("onload",null);
        this.oAjax.option("onload",function(res){
            self._onAjaxResponse(res,nPage,bMore,bFireEvent)
        });
        this.oAjax.request(this._getQueryString(nPage,bMore))
    }
    ,_onAjaxResponse:function(oResponse,nPage,bMore,bFireEvent){
        if(bFireEvent){
            this._move(nPage);
            var sEvent=bMore?"more":"movePage";
            var htIndex=this.getPageItemIndex(nPage);
            this.fireEvent(sEvent,{
                oResponse:oResponse,nPage:nPage,nStartIndex:bMore?htIndex.nStart:0,nEndIndex:htIndex.nEnd
            })
        }
        this.updateInfo()
    }
    ,_getQueryString:function(nPage,bMore){
        if(typeof bMore==="undefined"){
            bMore=true
        }
        var htQuery=this.option("htAjax").htQuery||{};
        var htIndex=this.getPageItemIndex(nPage);
        htQuery[this.option("htAjax").sStart]=bMore?htIndex.nStart:0;
        htQuery[this.option("htAjax").sDisplay]=Math.min(this.getItemPerPage(),(this.getShowMaxItem()-htIndex.nStart));
        return htQuery
    }
    ,_setNumberFormat:function(sText){
        sText=sText.toString();
        var sReturn="";
        var nDot=0;
        var nLastPosition=sText.length;
        for(var i=nLastPosition;
        i>=0;
        i--){
            var sChar=sText.charAt(i);
            if(i>nLastPosition){
                sReturn=sChar+sReturn;
                continue
            }
            if(/[0-9]/.test(sChar)){
                if(nDot>=3){
                    sReturn=","+sReturn;
                    nDot=0
                }
                nDot++;
                sReturn=sChar+sReturn
            }
            
        }
        return sReturn
    }
    ,showLoadingImg:function(){
        if(!!this._htWElement.elLoading){
            this._htWElement.elLoading.show()
        }
        
    }
    ,hideLoadingImg:function(){
        if(!!this._htWElement.elLoading){
            this._htWElement.elLoading.hide()
        }
        
    }
    ,reset:function(nShowMaxItem){
        if(typeof nShowMaxItem=="undefined"){
            nShowMaxItem=this.option("nShowMaxItem")
        }
        this.setShowMaxItem(nShowMaxItem);
        this.movePageTo(1,false)
    }
    ,getTotalItem:function(){
        return this.option("nTotalItem")
    }
    ,setTotalItem:function(n){
        this.option("nTotalItem",n)
    }
    ,getShowMaxItem:function(){
        return this.option("nShowMaxItem")
    }
    ,setShowMaxItem:function(n){
        this.option("nShowMaxItem",n);
        this.option("nItem",n)
    }
    ,_onActivate:function(){
        this._attachEvent()
    }
    ,_onDeactivate:function(){
        this._detachEvent()
    }
    ,_attachEvent:function(){
        this._htEvent={};
        if(!!this._htWElement.elMoreButton){
            this._htEvent.click_More={
                ref:MobileCommentJindo.$Fn(this._onClickMore,this).attach(this._htWElement.elMoreButton,"click"),el:this._htWElement.elMoreButton.$value()
            }
            
        }
        if(!!this._htWElement.elTop){
            this._htEvent.click_Top={
                ref:MobileCommentJindo.$Fn(this._onClickTop,this).attach(this._htWElement.elTop,"click"),el:this._htWElement.elTop.$value()
            }
            
        }
        
    }
    ,_detachEvent:function(){
        for(var p in this._htEvent){
            var htTargetEvent=this._htEvent[p];
            htTargetEvent.ref.detach(htTargetEvent.el,p.substring(0,p.indexOf("_")))
        }
        this._htEvent=null
    }
    ,header:function(vName,vValue){
        if(this.oAjax){
            return this.oAjax.header(vName,vValue)
        }
        
    }
    ,destroy:function(){
        this._detachEvent();
        for(var p in this._htWElement){
            this._htWElement[p]=null
        }
        this._htWElement=null
    }
    
}).extend(MobileCommentJindo.m.CorePagination);
MobileCommentJindo.m.PageNavigation=MobileCommentJindo.$Class({
    $init:function(el,htUserOption){
        this.option({
            sClassPrefix:"page_",nItem:10,nItemPerPage:10,nPage:1,bActivateOnload:true,sInfoTemplate:"{=PAGE} / {=TOTALPAGE}",htAjax:{}
        });
        this.option(htUserOption||{});
        this._initVar();
        this._setWrapperElement(el);
        if(this.option("bActivateOnload")){
            this.activate();
            this._nCurrentPage=this.option("nPage")
        }
        
    }
    ,_initVar:function(){
        var _htDefalutAjax={
            sApi:null,htAjaxOption:{
                type:"xhr"
            }
            ,htQuery:{},sPage:"page",sDisplay:"display"
        };
        var htAjax=this.option("htAjax");
        if(!htAjax){
            this.option("htAjax",_htDefalutAjax);
            return
        }
        for(var p in _htDefalutAjax){
            if(typeof htAjax[p]=="undefined"){
                htAjax[p]=_htDefalutAjax[p]
            }
            
        }
        for(var p in _htDefalutAjax.htAjaxOption){
            if(typeof htAjax.htAjaxOption[p]=="undefined"){
                htAjax.htAjaxOption[p]=_htDefalutAjax.htAjaxOption[p]
            }
            
        }
        for(var p in _htDefalutAjax.htQuery){
            if(typeof htAjax.htQuery[p]=="undefined"){
                htAjax.htQuery[p]=_htDefalutAjax.htQuery[p]
            }
            
        }
        if(!!htAjax.sApi){
            this.oAjax=new MobileCommentJindo.$Ajax(htAjax.sApi,htAjax.htAjaxOption)
        }
        
    }
    ,_setWrapperElement:function(el){
        this._htWElement={};
        el=MobileCommentJindo.$(el);
        var sClass="."+this.option("sClassPrefix");
        this._htWElement.elBase=MobileCommentJindo.$Element(el);
        this._htWElement.elPrev=MobileCommentJindo.$Element(MobileCommentJindo.$$.getSingle(sClass+"prev",el));
        this._htWElement.elNext=MobileCommentJindo.$Element(MobileCommentJindo.$$.getSingle(sClass+"next",el));
        this._htWElement.elPrevOff=MobileCommentJindo.$Element(MobileCommentJindo.$$.getSingle(sClass+"prev-off",el));
        this._htWElement.elNextOff=MobileCommentJindo.$Element(MobileCommentJindo.$$.getSingle(sClass+"next-off",el));
        this._htWElement.elInfo=MobileCommentJindo.$Element(MobileCommentJindo.$$.getSingle(sClass+"info",el))
    }
    ,_onClickPrev:function(oEvent){
        oEvent.stop();
        if(!this.hasPreviousPage()){
            return
        }
        var nPage=this.getCurrentPage();
        this.movePageTo(nPage-1)
    }
    ,_onClickNext:function(oEvent){
        oEvent.stop();
        if(!this.hasNextPage()){
            return
        }
        var nPage=this.getCurrentPage();
        this.movePageTo(nPage+1)
    }
    ,movePageTo:function(n,bFireEvent){
        if(typeof bFireEvent=="undefined"){
            bFireEvent=true
        }
        if(bFireEvent){
            if(!this._fireEventBefore(n)){
                return
            }
            
        }
        if(!!this.option("htAjax").sApi){
            this._callAjax(n,bFireEvent)
        }
        else{
            this._move(n);
            if(bFireEvent){
                this._fireEventEnd()
            }
            this.updateInfo();
            this.updateNavigation()
        }
        
    }
    ,_move:function(n){
        var nPage=this._convertToAvailPage(n);
        if(nPage!=this._nCurrentPage){
            this._nCurrentPage=nPage
        }
        
    }
    ,_callAjax:function(nPage,bFireEvent){
        var self=this;
        this.oAjax.option("onload",null);
        this.oAjax.option("onload",function(res){
            self._onAjaxResponse(res,nPage,bFireEvent)
        });
        this.oAjax.request(this._getQueryString(nPage))
    }
    ,_fireEventBefore:function(nPage){
        return this.fireEvent("beforeMove",{
            nPage:nPage,nCurrentPage:this.getCurrentPage()
        })
    }
    ,_fireEventEnd:function(oResponse){
        if(typeof oResponse=="undefined"){
            oResponse=null
        }
        var nPage=this.getCurrentPage();
        var htIndex=this.getPageItemIndex(nPage);
        return this.fireEvent("move",{
            nPage:this.getCurrentPage(),nStartIndex:htIndex.nStart,nEndIndex:htIndex.nEnd,oResponse:oResponse
        })
    }
    ,_onAjaxResponse:function(oResponse,nPage,bFireEvent){
        this._move(nPage);
        if(bFireEvent){
            this._fireEventEnd(oResponse)
        }
        this.updateInfo();
        this.updateNavigation()
    }
    ,_getQueryString:function(n){
        var htQuery=this.option("htAjax").htQuery||{};
        var htIndex=this.getPageItemIndex(n);
        htQuery[this.option("htAjax").sPage]=n;
        htQuery[this.option("htAjax").sDisplay]=Math.min(this.getItemPerPage(),(this.getItemCount()-htIndex.nStart));
        return htQuery
    }
    ,updateInfo:function(){
        if(!this._htWElement.elInfo){
            return
        }
        var nPage=this.getCurrentPage();
        var htIndex=this.getPageItemIndex(nPage);
        var sText=this.option("sInfoTemplate").replace(/\{=PAGE\}/,nPage).replace(/\{=TOTALPAGE\}/,this.getTotalPages()).replace(/\{=ITEMCOUT\}/,this.option("nItem")).replace(/\{=STARTINDEX\}/,htIndex.nStart+1).replace(/\{=ENDINDEX\}/,htIndex.nEnd+1);
        this._htWElement.elInfo.html(sText)
    }
    ,updateNavigation:function(){
        var nPage=this.getCurrentPage();
        if(!!this._htWElement.elPrev){
            this._htWElement.elPrev.hide()
        }
        if(!!this._htWElement.elNext){
            this._htWElement.elNext.hide()
        }
        if(this._htWElement.elPrevOff){
            this._htWElement.elPrevOff.hide()
        }
        if(this._htWElement.elNextOff){
            this._htWElement.elNextOff.hide()
        }
        if(this.getTotalPages()==1){
            return
        }
        if(nPage==1){
            if(!!this._htWElement.elPrevOff){
                this._htWElement.elPrevOff.show("inline-block")
            }
            if(!!this._htWElement.elNext){
                this._htWElement.elNext.show("inline-block")
            }
            
        }
        else{
            if(nPage==this.getTotalPages()){
                if(!!this._htWElement.elNextOff){
                    this._htWElement.elNextOff.show("inline-block")
                }
                if(!!this._htWElement.elPrev){
                    this._htWElement.elPrev.show("inline-block")
                }
                
            }
            else{
                if(!!this._htWElement.elPrev){
                    this._htWElement.elPrev.show("inline-block")
                }
                if(!!this._htWElement.elNext){
                    this._htWElement.elNext.show("inline-block")
                }
                
            }
            
        }
        
    }
    ,reset:function(nItem){
        if(typeof nItem=="undefined"){
            nItem=this.option("nItem")
        }
        this.setItemCount(nItem);
        this.movePageTo(1,false)
    }
    ,_onActivate:function(){
        this._attachEvent()
    }
    ,_onDeactivate:function(){
        this._detachEvent()
    }
    ,_attachEvent:function(){
        this._htEvent={};
        if(!!this._htWElement.elNext){
            this._htEvent.click_Next={
                ref:MobileCommentJindo.$Fn(this._onClickNext,this).attach(this._htWElement.elNext,"click"),el:this._htWElement.elNext.$value()
            }
            
        }
        if(!!this._htWElement.elPrev){
            this._htEvent.click_Prev={
                ref:MobileCommentJindo.$Fn(this._onClickPrev,this).attach(this._htWElement.elPrev,"click"),el:this._htWElement.elPrev.$value()
            }
            
        }
        
    }
    ,_detachEvent:function(){
        for(var p in this._htEvent){
            var htTargetEvent=this._htEvent[p];
            htTargetEvent.ref.detach(htTargetEvent.el,p.substring(0,p.indexOf("_")))
        }
        this._htEvent=null
    }
    ,destroy:function(){
        this.deactivate();
        for(var p in this._htWElement){
            this._htWElement[p]=null
        }
        this._htWElement=null
    }
    
}).extend(MobileCommentJindo.m.CorePagination);
MobileCommentJindo.m.PreventClickEvent=MobileCommentJindo.$Class({
    $init:function(el,htUserOption){
        this.option({
            bActivateOnload:true,sClassPrefix:"evt-"
        });
        this.option(htUserOption||{});
        this._setWrapperElement(el);
        if(this.option("bActivateOnload")){
            this.activate()
        }
        
    }
    ,_setWrapperElement:function(el){
        this._htWElement={};
        this._htWElement.target=MobileCommentJindo.$Element(el)
    }
    ,_onDeactivate:function(){
        this._detachEvents()
    }
    ,_onActivate:function(){
        this._attachEvents()
    }
    ,_attachEvents:function(){
        this._htEvent={};
        this._htEvent.prevent=MobileCommentJindo.$Fn(this._onPrevent,this).attach(this._htWElement.target,"touchstart")
    }
    ,_detachEvents:function(){
        this._htEvent.prevent.detach(this._htWElement.target,"touchstart");
        this._htEvent.prevent=null
    }
    ,_onPrevent:function(we){
        var wel=MobileCommentJindo.$Element(MobileCommentJindo.m.getNodeElement(we.element));
        if(!wel.hasClass(this.option("sClassPrefix")+"except")){
            we.stop(MobileCommentJindo.$Event.CANCEL_ALL);
            this.fireEvent("prevent",{
                wel:wel
            });
            return false
        }
        else{
            this.fireEvent("pass",{
                wel:wel
            })
        }
        
    }
    ,destroy:function(){
        this.deactivate();
        for(var p in this._htWElement){
            console.log(p);
            this._htWElement[p]=null
        }
        this._htWElement=null;
        this._htEvent=null
    }
    
}).extend(MobileCommentJindo.UIComponent);
MobileCommentJindo.m.RadioButton=MobileCommentJindo.$Class({
    $init:function(el,htUserOption){
        this.option({
            sClassPrefix:"frb-",sType:"v",bActivateOnload:true,sUncheckBgColor:"transparent"
        });
        this.option(htUserOption||{});
        this._initVar();
        this._setWrapperElement(el,this.option("sClassPrefix"));
        this._initRadioLoad();
        if(this.option("bActivateOnload")){
            this.activate()
        }
        
    }
    ,_initVar:function(){
        this.$super._initVar("radio","radiobtn");
        this._nPreSelectIdx=-1
    }
    ,_initRadioLoad:function(){
        var aRadioBtnList=this._aWElFormList;
        for(var i=0;
        i<aRadioBtnList.length;
        i++){
            if(aRadioBtnList[i].$value().checked){
                this._setChecked(i);
                break
            }
            
        }
        
    }
    ,_afterCheck:function(welElement,bClickOverForm){
        var nIdx=-1;
        nIdx=this._htWElement.container.indexOf(welElement);
        this._setChecked(nIdx)
    }
    ,_onFormClick:function(we){
        var sClassName=this._sUnitClass;
        var welElement=MobileCommentJindo.$Element(we.element);
        welElement=welElement.parent(function(v){
            return v.hasClass(sClassName)
        })[0];
        var sChecked=welElement.attr("data-cb-checked");
        we.element.checked=(sChecked&&sChecked=="on")?true:false;
        nIdx=this._htWElement.container.indexOf(welElement);
        if(we.element.checked){
            if(this._nPreSelectIdx!=nIdx){
                this._onCheck(we)
            }
            
        }
        
    }
    ,_setChecked:function(nIdx){
        var elCurrentRadioBtn=this._aWElFormList[nIdx].$value();
        var welCurrentRadioUnit=this._aWElUnitList[nIdx];
        if(elCurrentRadioBtn.disabled){
            return false
        }
        var sBgColor=this.option("sCheckBgColor");
        var elPreRadioUnit=null;
        var elPreRadioBtn=null;
        if(this._nPreSelectIdx>-1){
            sBgColor=(sBgColor)?this.option("sUncheckBgColor"):null;
            elPreRadioUnit=this._aWElUnitList[this._nPreSelectIdx].$value();
            elPreRadioBtn=this._aWElFormList[this._nPreSelectIdx].$value();
            this._aWElUnitList[this._nPreSelectIdx].removeClass(this._sOnClass);
            elPreRadioBtn.checked=false;
            if(sBgColor){
                this._aWElUnitList[this._nPreSelectIdx].css("backgroundColor",sBgColor+" !important")
            }
            
        }
        welCurrentRadioUnit.addClass(this._sOnClass);
        welCurrentRadioUnit.attr("data-cb-checked","on");
        elCurrentRadioBtn.checked=true;
        sBgColor=this.option("sCheckBgColor");
        if(sBgColor){
            welCurrentRadioUnit.css("backgroundColor",sBgColor+" !important")
        }
        this._nPreSelectIdx=nIdx;
        this.fireEvent("checked",{
            elPreRadioButtonUnit:elPreRadioUnit,elPreRadioButton:elPreRadioBtn,elRadioButtonUnit:welCurrentRadioUnit.$value(),elRadioButton:elCurrentRadioBtn
        })
    }
    ,getCheckedValue:function(){
        var sValue="";
        if(this._nPreSelectIdx>-1){
            if(!this._aWElFormList[this._nPreSelectIdx].$value().disabled){
                sValue=this._aWElFormList[this._nPreSelectIdx].$value().value
            }
            
        }
        return sValue
    }
    ,setCheckedButton:function(vElement){
        var aIdx=this._getFormIdx(vElement);
        if(aIdx.length>0){
            this._setChecked(aIdx[0])
        }
        
    }
    ,enable:function(vElement){
        var htElForm=this._useSettingForm(vElement,true);
        this.fireEvent("enable",{
            aRadioButtonList:htElForm.aFormList,aRadioButtonUnitList:htElForm.aUnitList
        })
    }
    ,disable:function(vElement){
        var htElForm=this._useSettingForm(vElement,false);
        this.fireEvent("disable",{
            aRadioButtonList:htElForm.aFormList,aRadioButtonUnitList:htElForm.aUnitList
        })
    }
    ,getElementByIndex:function(nIdx){
        return{
            elRadioButton:this._aWElFormList[nIdx].$value(),elRadioButtonUnit:this._aWElUnitList[nIdx].$value()
        }
        
    }
    ,destroy:function(){
        this.$super.destroy()
    }
    
}).extend(MobileCommentJindo.m.CheckRadioCore);
MobileCommentJindo.m.Scroll=MobileCommentJindo.$Class({
    $init:function(el,htUserOption){
        this.option({
            bActivateOnload:true,bUseScrollbar:true,bUseFixedScrollbar:false,bUsePullDown:false,bUsePullUp:false,sClassPrefix:"scroll_",bUseVScroll:true,bUseHScroll:false,bUseBounce:true,fnPullDownIdle:null,fnPullDownBeforeUpdate:null,fnPullDownUpdating:null,fnPullUpIdle:null,fnPullUpBeforeUpdate:null,fnPullUpUpdating:null,bAutoResize:false
        });
        this.option(htUserOption||{});
        this._initVar();
        this._setWrapperElement(el);
        this._InitPullUpdateFunc();
        if(this.option("bActivateOnload")){
            this.activate()
        }
        
    }
    ,_initVar:function(){
        this._oCore=null;
        this._isPullDown=false;
        this._isPullUp=false;
        this._isUpdating=false;
        this._nOrgMaxScrollTop=null;
        this._nPropHScroll=0;
        this._nPropVScroll=0
    }
    ,_setWrapperElement:function(el){
        this._htWElement={};
        this._htWElement.wrapper=MobileCommentJindo.$Element(el);
        var elTemp=this._htWElement.wrapper.query("."+this.option("sClassPrefix")+"pullDown");
        this._htWElement.pullDown=elTemp?MobileCommentJindo.$Element(elTemp):null;
        elTemp=this._htWElement.wrapper.query("."+this.option("sClassPrefix")+"pullUp");
        this._htWElement.pullUp=elTemp?MobileCommentJindo.$Element(elTemp):null
    }
    ,_InitPullUpdateFunc:function(){
        if(this.option("bUsePullDown")===true){
            if(!this.option("fnPullDownIdle")){
                this.option("fnPullDownIdle",function(wel){
                    wel.html("업데이트하시려면 아래로 내려주세요")
                })
            }
            if(!this.option("fnPullDownBeforeUpdate")){
                this.option("fnPullDownBeforeUpdate",function(wel){
                    wel.html("업데이트 합니다")
                })
            }
            if(!this.option("fnPullDownUpdating")){
                this.option("fnPullDownUpdating",function(wel){
                    wel.html("업데이트 중입니다...")
                })
            }
            
        }
        if(this.option("bUsePullUp")===true){
            if(!this.option("fnPullUpIdle")){
                this.option("fnPullUpIdle",function(wel){
                    wel.html("더 보시려면 위로 올려주세요")
                })
            }
            if(!this.option("fnPullUpBeforeUpdate")){
                this.option("fnPullUpBeforeUpdate",function(wel){
                    wel.html("로드 합니다")
                })
            }
            if(!this.option("fnPullUpUpdating")){
                this.option("fnPullUpUpdating",function(wel){
                    wel.html("로드 중...")
                })
            }
            
        }
        
    }
    ,_onActivate:function(){
        if(this._oCore){
            this._oCore.activate()
        }
        this.refresh();
        this._attachEvent()
    }
    ,setUsePullDown:function(bUse){
        this.option("bUsePullDown",bUse);
        this._refreshPullStatus()
    }
    ,setUsePullUp:function(bUse){
        this.option("bUsePullUp",bUse);
        this._refreshPullStatus()
    }
    ,width:function(nValue){
        if(nValue){
            this.option("nWidth",nValue);
            this.refresh()
        }
        else{
            if(this.option("nWidth")){
                return parseInt(this.option("nWidth"),10)
            }
            else{
                return this._htWElement.wrapper.width()
            }
            
        }
        
    }
    ,height:function(nValue){
        if(nValue){
            this.option("nHeight",nValue);
            this.refresh()
        }
        else{
            if(this.option("nHeight")){
                return parseInt(this.option("nHeight"),10)
            }
            else{
                return this._htWElement.wrapper.height()
            }
            
        }
        
    }
    ,_refreshPullStatus:function(){
        this._isUpdating=false;
        this._nOrgMaxScrollTop=null;
        this._isPullDown=this.option("bUsePullDown")&&this.option("bUseVScroll")&&!this.option("bUseHScroll")&&this.option("bUseBounce")&&(this._htWElement.pullDown!==null);
        this._isPullUp=this.option("bUsePullUp")&&this.option("bUseVScroll")&&!this.option("bUseHScroll")&&this.option("bUseBounce")&&(this._htWElement.pullUp!==null);
        if(this._isPullDown&&this.option("fnPullDownIdle")){
            this._htWElement.pullDown._isReady_=false;
            this.option("fnPullDownIdle")(this._htWElement.pullDown)
        }
        if(this._isPullUp&&this.option("fnPullUpIdle")){
            this._htWElement.pullUp._isReady_=false;
            this.option("fnPullUpIdle")(this._htWElement.pullUp)
        }
        
    }
    ,refresh:function(){
        if(!this.isActivating()){
            return
        }
        this._refreshPullStatus();
        if(this._oCore){
            this._oCore.option({
                nOffsetTop:this._isPullDown?this._htWElement.pullDown.height():0,nOffsetBottom:this._isPullUp?this._htWElement.pullUp.height():0,nWidth:this.option("nWidth"),nHeight:this.option("nHeight")
            });
            this._oCore.refresh()
        }
        else{
            var htOption=this.option();
            htOption.bActivateOnload=true;
            htOption.nOffsetTop=this._isPullDown?this._htWElement.pullDown.height():0;
            htOption.nOffsetBottom=this._isPullUp?this._htWElement.pullUp.height():0;
            this._oCore=new MobileCommentJindo.m.CoreScroll(this._htWElement.wrapper,htOption)
        }
        if(this.option("bUseScrollbar")){
            this._refreshScroll("V");
            this._refreshScroll("H")
        }
        
    }
    ,scrollTo:function(nLeft,nTop,nDuration){
        nDuration=nDuration||0;
        nLeft=-Math.abs(nLeft);
        nTop=-Math.abs(nTop);
        nTop+=this.getTop();
        this._oCore.scrollTo((nLeft>=this.getLeft()?this.getLeft():(nLeft<=this.getRight()?this.getRight():nLeft)),(nTop>=this.getTop()?this.getTop():(nTop<=this.getBottom()?this.getBottom():nTop)),nDuration)
    }
    ,getRight:function(){
        return this._oCore.nMaxScrollLeft
    }
    ,getLeft:function(){
        return 0
    }
    ,getBottom:function(){
        return this._oCore.nMaxScrollTop
    }
    ,getTop:function(){
        return this._oCore.nMinScrollTop
    }
    ,getCurrentPos:function(){
        return this._oCore.getCurrentPos()
    }
    ,_onDeactivate:function(){
        this._detachEvent();
        this._oCore.deactivate()
    }
    ,_attachEvent:function(){
        this._htEvent={};
        this._oCore.attach({
            beforeTouchStart:MobileCommentJindo.$Fn(this._onBeforeTouchStart,this).bind(),touchStart:MobileCommentJindo.$Fn(this._onTouchStart,this).bind(),beforeTouchMove:MobileCommentJindo.$Fn(this._onBeforeTouchMove,this).bind(),touchMove:MobileCommentJindo.$Fn(this._onTouchMove,this).bind(),beforeTouchEnd:MobileCommentJindo.$Fn(this._onBeforeTouchEnd,this).bind(),touchEnd:MobileCommentJindo.$Fn(this._onTouchEnd,this).bind(),beforePosition:MobileCommentJindo.$Fn(this._onBeforePosition,this).bind(),position:MobileCommentJindo.$Fn(this._onPosition,this).bind(),setDuration:MobileCommentJindo.$Fn(this._onSetDuration,this).bind(),afterScroll:MobileCommentJindo.$Fn(this._onAfterScroll,this).bind()
        });
        if(this.option("bAutoResize")){
            this._htEvent.rotate=MobileCommentJindo.$Fn(this._onRotate,this).bind();
            MobileCommentJindo.m.bindRotate(this._htEvent.rotate)
        }
        
    }
    ,_fixedBugForAndroid:function(wel){
        if(this._oCore.isAndroid){
            var ele=wel.$value();
            var htOffset=MobileCommentJindo.m.getCssOffset(ele);
            var htIndicatorOffset=wel.offset();
            ele.style[this._oCore.sCssPrefix+"TransitionDuration"]=null;
            ele.style[this._oCore.sCssPrefix+"Transform"]=null;
            wel.offset(htOffset.top+htIndicatorOffset.top,htOffset.left+htIndicatorOffset.left)
        }
        
    }
    ,_onRotate:function(we){
        this.refresh()
    }
    ,_onSetDuration:function(we){
        if(this.option("bUseScrollbar")){
            if(we.bUseHScroll&&this._htWElement.HscrollbarIndicator){
                this._htWElement.HscrollbarIndicator.css(this._oCore.sCssPrefix+"TransitionDuration",we.nDuration)
            }
            if(we.bUseVScroll&&this._htWElement.VscrollbarIndicator){
                this._htWElement.VscrollbarIndicator.css(this._oCore.sCssPrefix+"TransitionDuration",we.nDuration)
            }
            
        }
        
    }
    ,_onBeforeTouchStart:function(we){
        return this.fireEvent("beforeTouchStart",we)
    }
    ,_onTouchStart:function(we){
        this.fireEvent("touchStart",we)
    }
    ,_onBeforeTouchMove:function(we){
        return this.fireEvent("beforeTouchMove",we)
    }
    ,_onTouchMove:function(we){
        if(this._isPullDown||this._isPullUp){
            this._touchMoveForUpdate(we)
        }
        this.fireEvent("touchMove",we)
    }
    ,_onBeforeTouchEnd:function(we){
        return this.fireEvent("beforeTouchEnd",we)
    }
    ,_onTouchEnd:function(we){
        if(this._isPullDown&&this._htWElement.pullDown._isReady_){
            this._pullUploading(this._htWElement.pullDown,false)
        }
        if(this._isPullUp&&this._htWElement.pullUp._isReady_){
            this._pullUploading(this._htWElement.pullUp,true)
        }
        this.fireEvent("touchEnd",we)
    }
    ,_onBeforePosition:function(we){
        return this.fireEvent("beforePosition",we)
    }
    ,_onPosition:function(we){
        if(this.option("bUseScrollbar")){
            this._setScrollBarPos("V",we.nTop);
            this._setScrollBarPos("H",we.nLeft)
        }
        this.fireEvent("position",we)
    }
    ,_onAfterScroll:function(we){
        if(this.option("bUseScrollbar")&&!this.option("bUseFixedScrollbar")){
            this._hideScrollBar("H");
            this._hideScrollBar("V")
        }
        this.fireEvent("afterScroll",we)
    }
    ,_hideScrollBar:function(sDirection){
        var wel=this._htWElement[sDirection+"scrollbar"],bUseScroll=(sDirection==="H"?this._oCore.bUseHScroll:this._oCore.bUseVScroll);
        if(bUseScroll&&wel){
            if(this._oCore.isAndroid){
                this._fixedBugForAndroid(this._htWElement[sDirection+"scrollbarIndicator"]);
                wel.opacity(0)
            }
            else{
                wel.css(this._oCore.sCssPrefix+"TransitionDuration","300ms").opacity(0)
            }
            
        }
        
    }
    ,_fireEventPullDown:function(){
        if(!this._htWElement){
            return
        }
        this.fireEvent("pullDown",{
            welElement:this._htWElement.pullDown,oScroll:this
        })
    }
    ,_fireEventPullUp:function(){
        if(!this._htWElement){
            return
        }
        this.fireEvent("pullUp",{
            welElement:this._htWElement.pullUp,oScroll:this
        })
    }
    ,_pullUploading:function(wel,isUp){
        var fn=isUp?this.option("fnPullUpUpdating"):this.option("fnPullDownUpdating");
        var self=this;
        this._isUpdating=true;
        wel._isReady_=false;
        if(fn){
            setTimeout(function(){
                fn(wel);
                if(isUp){
                    self._fireEventPullUp()
                }
                else{
                    self._fireEventPullDown()
                }
                
            }
            ,0)
        }
        
    }
    ,_touchMoveForUpdate:function(we){
        if(this._isUpdating){
            return
        }
        var nTopMargin=this._oCore.option("nOffsetTop");
        var nBottomMargin=this._oCore.option("nOffsetBottom");
        we.nMaxScrollTop=this._nOrgMaxScrollTop?this._nOrgMaxScrollTop:we.nMaxScrollTop;
        if(this._isPullDown){
            if(this._htWElement.pullDown._isReady_){
                if(nTopMargin>we.nTop){
                    this._htWElement.pullDown._isReady_=false;
                    if(this.option("fnPullDownIdle")){
                        this.option("fnPullDownIdle")(this._htWElement.pullDown);
                        this._oCore.nMinScrollTop=-nTopMargin
                    }
                    
                }
                
            }
            else{
                if(we.nTop>nTopMargin){
                    this._htWElement.pullDown._isReady_=true;
                    if(this.option("fnPullDownBeforeUpdate")){
                        this.option("fnPullDownBeforeUpdate")(this._htWElement.pullDown);
                        this._oCore.nMinScrollTop=0
                    }
                    
                }
                
            }
            
        }
        if(this._isPullUp){
            if(this._htWElement.pullUp._isReady_){
                if(we.nTop>=(we.nMaxScrollTop-nBottomMargin)){
                    this._htWElement.pullUp._isReady_=false;
                    if(this.option("fnPullUpIdle")){
                        this.option("fnPullUpIdle")(this._htWElement.pullUp);
                        this._oCore.nMaxScrollTop=we.nMaxScrollTop
                    }
                    
                }
                
            }
            else{
                if(we.nTop<(we.nMaxScrollTop-nBottomMargin)){
                    this._htWElement.pullUp._isReady_=true;
                    if(this.option("fnPullUpBeforeUpdate")){
                        this.option("fnPullUpBeforeUpdate")(this._htWElement.pullUp);
                        this._nOrgMaxScrollTop=we.nMaxScrollTop;
                        this._oCore.nMaxScrollTop=we.nMaxScrollTop-nBottomMargin
                    }
                    
                }
                
            }
            
        }
        
    }
    ,isMoving:function(){
        return this._oCore.isMoving()
    }
    ,_detachEvent:function(){
        this._oCore.detachAll();
        if(this.option("bAutoResize")){
            MobileCommentJindo.m.unbindRotate(this._htEvent.rotate)
        }
        this._htEvent=null
    }
    ,_createScroll:function(sDirection){
        if(!(sDirection==="H"?this._oCore.bUseHScroll:this._oCore.bUseVScroll)){
            return
        }
        var welScrollbar=this._htWElement[sDirection+"scrollbar"],welScrollbarIndicator=this._htWElement[sDirection+"scrollbarIndicator"],welWrapper=this._htWElement.wrapper;
        if(welScrollbar){
            welWrapper.remove(welScrollbar);
            this._htWElement[sDirection+"scrollbar"]=this._htWElement[sDirection+"scrollbarIndicator"]=null
        }
        welScrollbar=this._createScrollbar(sDirection);
        welScrollbarIndicator=this._createScrollbarIndicator(sDirection);
        this._htWElement[sDirection+"scrollbar"]=welScrollbar;
        this._htWElement[sDirection+"scrollbarIndicator"]=welScrollbarIndicator;
        welScrollbar.append(welScrollbarIndicator);
        welWrapper.append(welScrollbar);
        this._refreshScroll(sDirection)
    }
    ,_refreshScroll:function(sDirection){
        if(!(sDirection==="H"?this._oCore.bUseHScroll:this._oCore.bUseVScroll)){
            return
        }
        if(!this._htWElement[sDirection+"scrollbar"]){
            this._createScroll(sDirection)
        }
        var welScrollbar=this._htWElement[sDirection+"scrollbar"],welScrollbarIndicator=this._htWElement[sDirection+"scrollbarIndicator"],nSize=0;
        if(sDirection==="H"){
            welScrollbar.width(this._oCore.nWrapperW);
            nSize=Math.max(Math.round(Math.pow(this._oCore.nWrapperW,2)/this._oCore.nScrollW),8);
            this._nPropHScroll=(welScrollbar.width()-nSize)/this._oCore.nMaxScrollLeft;
            welScrollbarIndicator.width(nSize)
        }
        else{
            welScrollbar.height(this._oCore.nWrapperH);
            nSize=Math.max(Math.round(Math.pow(this._oCore.nWrapperH,2)/this._oCore.nScrollH),8);
            this._nPropVScroll=(welScrollbar.height()-nSize)/this._oCore.nMaxScrollTop;
            welScrollbarIndicator.height(nSize)
        }
        
    }
    ,_createScrollbar:function(sDirection){
        var welScrollbar=MobileCommentJindo.$Element("<div>");
        welScrollbar.css({
            position:"absolute",zIndex:100,bottom:(sDirection==="H"?"1px":(this._oCore.bUseHScroll?"7":"2")+"px"),right:(sDirection==="H"?(this._oCore.bUseVScroll?"7":"2")+"px":"1px"),pointerEvents:"none",overflow:"hidden"
        });
        if(!this.option("bUseFixedScrollbar")){
            welScrollbar.css(this._oCore.sCssPrefix+"TransitionProperty","opacity").css(this._oCore.sCssPrefix+"TransitionDuration","0").opacity(0)
        }
        if(sDirection==="H"){
            welScrollbar.css({
                height:"7px",left:"2px"
            })
        }
        else{
            welScrollbar.css({
                width:"7px",top:"2px"
            })
        }
        return welScrollbar
    }
    ,_createScrollbarIndicator:function(sDirection){
        var welScrollbarIndicator=MobileCommentJindo.$Element("<div>");
        welScrollbarIndicator.css({
            position:"absolute",zIndex:100,border:"1px solid rgba(255,255,255,0.9)",borderRadius:"3px",pointerEvents:"none",left:0,top:0,"background-color":"rgba(0,0,0,0.5)"
        }).css(this._oCore.sCssPrefix+"BackgroundClip","padding-box").css(this._oCore.sCssPrefix+"BoxSizing","border-box").css(this._oCore.sCssPrefix+"BorderRadius","3px").css(this._oCore.sCssPrefix+"TransitionProperty","-webkit-transform").css(this._oCore.sCssPrefix+"Transform","translate"+this._oCore.sTransOpen+"0,0"+this._oCore.sTransEnd);
        if(this._oCore.option("bUseTransition")){
            welScrollbarIndicator.css(this._oCore.sCssPrefix+"TransitionTimingFunction","cubic-bezier(0.33,0.66,0.66,1)")
        }
        if(sDirection==="H"){
            welScrollbarIndicator.css("height","100%")
        }
        else{
            welScrollbarIndicator.css("width","100%")
        }
        return welScrollbarIndicator
    }
    ,_setScrollBarPos:function(sDirection,nPos){
        var bUseScroll=(sDirection==="H"?this._oCore.bUseHScroll:this._oCore.bUseVScroll);
        if(!bUseScroll){
            return
        }
        var welIndicator=this._htWElement[sDirection+"scrollbarIndicator"],welScrollbar=this._htWElement[sDirection+"scrollbar"];
        nPos=this["_nProp"+sDirection+"Scroll"]*nPos;
        if(welIndicator){
            if(this._oCore.isAndroid){
                var nBufferPos=parseInt((sDirection==="H"?welIndicator.css("left"):welIndicator.css("top")),10);
                nPos-=isNaN(nBufferPos)?0:nBufferPos
            }
            welIndicator.css(this._oCore.sCssPrefix+"Transform","translate"+this._oCore.sTranOpen+(sDirection==="H"?nPos+"px,0":"0,"+nPos+"px")+this._oCore.sTranEnd)
        }
        if(!this.option("bUseFixedScrollbar")&&welScrollbar){
            welScrollbar.css(this._oCore.sCssPrefix+"TransitionDuration",0).opacity(1)
        }
        
    }
    ,destroy:function(){
        this.deactivate();
        for(var p in this._htWElement){
            this._htWElement[p]=null
        }
        this._oCore.destroy();
        delete this._oCore;
        this._htWElement=null
    }
    
}).extend(MobileCommentJindo.UIComponent);
MobileCommentJindo.m.Slider=MobileCommentJindo.$Class({
    $init:function(sId,htUserOption){
        this.option({
            sClassPrefix:"slider-",bVertical:false,nMinValue:0,nMaxValue:100,nDefaultValue:0,bActivateOnload:true
        });
        this.option(htUserOption||{});
        this._setWrapperElement(sId);
        this._initVar();
        if(this.option("bActivateOnload")){
            this.activate();
            this.setValue(this.option("nDefaultValue"))
        }
        
    }
    ,_initVar:function(){
        var nMove=this.option("bVertical")?0:6;
        this._oTouch=new MobileCommentJindo.m.Touch(this._htWElement.track.$value(),{
            nMoveGap:nMove,bActivateOnload:false
        });
        this._oTouch.attach({
            touchMove:MobileCommentJindo.$Fn(this._onMove,this).bind(),touchEnd:MobileCommentJindo.$Fn(this._onMove,this).bind(),touchStart:MobileCommentJindo.$Fn(this._onStart,this).bind()
        });
        this._htSwap={
            left:this.option("bVertical")?"top":"left",width:this.option("bVertical")?"height":"width",nX:this.option("bVertical")?"nY":"nX"
        };
        var nSize=this._htWElement.thumb[this._htSwap.width]()/2;
        this._htWElement.thumb.css("margin-"+this._htSwap.left,nSize*-1)
    }
    ,_setWrapperElement:function(el){
        this._htWElement={};
        var el=MobileCommentJindo.$(el);
        var sClass="."+this.option("sClassPrefix");
        this._htWElement.track=MobileCommentJindo.$Element(el);
        var elThumb=MobileCommentJindo.$$.getSingle(sClass+"thumb",el);
        this._htWElement.thumb=elThumb?MobileCommentJindo.$Element(elThumb):null;
        var elRang=MobileCommentJindo.$$.getSingle(sClass+"range",el);
        this._htWElement.range=elRang?MobileCommentJindo.$Element(elRang):null
    }
    ,_onStart:function(oCustomEvt){
        oCustomEvt.oEvent.stop(MobileCommentJindo.$Event.CANCEL_DEFAULT)
    }
    ,_onMove:function(oCustomEvt){
        if(oCustomEvt.sType=="touchMove"){
            oCustomEvt.oEvent.stop(MobileCommentJindo.$Event.CANCEL_DEFAULT)
        }
        var nCurrent=oCustomEvt[this._htSwap.nX]-this._htWElement.track.offset()[this._htSwap.left]-(this._htWElement.thumb[this._htSwap.width]()/2);
        var nPos=this._getAdjustedPos(nCurrent);
        this._move(nPos)
    }
    ,_move:function(nPos,bFireEvent){
        if(typeof bFireEvent=="undefined"){
            bFireEvent=true
        }
        var nValue=this.getValue(nPos);
        var nAdjustPos=Math.round(nPos);
        var nAdjustValue=this.getValue(nAdjustPos);
        var htOption={
            nValue:nValue,nPosition:nPos,nAdjustValue:nAdjustValue,nAdjustPosition:nAdjustPos
        };
        if(bFireEvent&&!this._fireBeforeEvent(htOption)){
            return
        }
        if(htOption.nAdjustValue!=nAdjustValue){
            htOption.nAdjustPosition=this._getPositionFromValue(htOption.nAdjustValue)
        }
        this._moveThumb(htOption.nAdjustPosition);
        if(bFireEvent){
            this._fireChangeEvent(htOption)
        }
        if(this._htWElement.range){
            this._htWElement.range.css(this._htSwap.width,htOption.nAdjustPosition+"%")
        }
        
    }
    ,_fireBeforeEvent:function(htOption){
        return this.fireEvent("beforeChange",htOption)
    }
    ,_fireChangeEvent:function(htOption){
        this.fireEvent("change",htOption)
    }
    ,_moveThumb:function(n){
        if(n>100||n<0){
            return
        }
        this._htWElement.thumb.css("webkitTransitionDuration","0ms");
        this._htWElement.thumb.css("webkitTransitionProperty",this._htSwap.left);
        this._htWElement.thumb.css(this._htSwap.left,n+"%")
    }
    ,_getTrackInfo:function(){
        var nTrackSize=this.option("bVertical")?this._htWElement.track.height():this._htWElement.track.width();
        var nThumbSize=this.option("bVertical")?this._htWElement.thumb.height():this._htWElement.thumb.width();
        var nMaxPos=nTrackSize-(nThumbSize/2);
        return{
            maxPos:nMaxPos,max:this.option("nMaxValue")*1,min:this.option("nMinValue")*1
        }
        
    }
    ,getValue:function(nPos){
        if(typeof nPos=="undefined"){
            nPos=this.getPosition()
        }
        var oInfo=this._getTrackInfo();
        var nValue=oInfo.min+((oInfo.max-oInfo.min)*(nPos/100));
        return nValue
    }
    ,setValue:function(nValue,bFireEvent){
        nValue=nValue*1;
        var nPos=this._getPositionFromValue(nValue);
        if(typeof bFireEvent=="undefined"){
            bFireEvent=true
        }
        this._move(nPos,bFireEvent)
    }
    ,_getAdjustedPos:function(nDistance){
        var htInfo=this._getTrackInfo();
        var nPecent=(nDistance*100)/htInfo.maxPos;
        nPecent=Math.max(0,nPecent);
        nPecent=Math.min(nPecent,100);
        return nPecent
    }
    ,getPosition:function(){
        var sPos=this._htWElement.thumb.css(this._htSwap.left);
        return(sPos=="auto")?0:parseInt(sPos,10)
    }
    ,setPosition:function(nPos,bFireEvent){
        if(typeof bFireEvent=="undefined"){
            bFireEvent=true
        }
        this._move(nPos,bFireEvent)
    }
    ,_getPositionFromValue:function(nValue){
        var htInfo=this._getTrackInfo();
        var nPecent=((nValue-htInfo.min)*100)/(htInfo.max-htInfo.min);
        nPecent=isNaN(nPecent)?100:nPecent;
        nPecent=Math.max(0,nPecent);
        nPecent=Math.min(100,nPecent);
        return nPecent
    }
    ,_onClick:function(evt){
        evt.stop()
    }
    ,_attachEvent:function(){
        this._htEvent={}
    }
    ,_detachEvent:function(sEventKey){
        if(sEventKey){
            var htTargetEvent=this._htEvent[sEventKey];
            htTargetEvent.ref.detach(htTargetEvent.el,sEventKey)
        }
        
    }
    ,_onActivate:function(){
        this._attachEvent();
        this._oTouch.activate()
    }
    ,_onDeactivate:function(){
        this._detachEvent();
        this._oTouch.deactivate()
    }
    ,destroy:function(){
        this.deactivate();
        for(var p in this._htWElement){
            this._htWElement[p]=null
        }
        this._htWElement=null;
        for(var p in this._htSwap){
            this._htSwap[p]=null
        }
        this._htSwap=null;
        this._oTouch.detachAll()
    }
    
}).extend(MobileCommentJindo.UIComponent);
MobileCommentJindo.m.SlideTab=MobileCommentJindo.$Class({
    $init:function(el,htUserOption){
        this.option({
            bActivateOnload:true,nDefaultIndex:0,sClassPrefix:"tc-",nSlideDuration:200,sTimingFunction:"ease-in-out",nCountPerVeiw:3
        });
        this.option(htUserOption||{});
        this._initVar();
        this._setWrapperElement(el);
        this._initData();
        if(this.option("bActivateOnload")){
            this.activate()
        }
        this.select(this.option("nDefaultIndex"))
    }
    ,_initVar:function(){
        this._nCurrentPage=1;
        this._nCurrentIndex=-1;
        this._nTotalPage=1;
        this._nPageWidth=0;
        this._aTab=[];
        this._aPanel=[];
        this._aDummyTab=[];
        this._oEffect=null;
        this._isNext=null
    }
    ,getCurrentIndex:function(){
        return this._nCurrentIndex
    }
    ,getCurrentPage:function(){
        return this._nCurrentPage
    }
    ,getTotalPage:function(){
        return this._nTotalPage
    }
    ,getTab:function(nIdx){
        if(nIdx!==null&&this._aTab.length>nIdx){
            return this._aTab[nIdx]
        }
        else{
            return this._aTab
        }
        
    }
    ,getPanel:function(nIdx){
        if(nIdx!==null&&this._aPanel.length>nIdx){
            return this._aPanel[nIdx]
        }
        else{
            return this._aPanel
        }
        
    }
    ,_setWrapperElement:function(el){
        var sPrefix=this.option("sClassPrefix"),elTmp=null;
        el=(typeof el=="string"?MobileCommentJindo.$(el):el);
        if(!el){
            return
        }
        this._htWElement={};
        this._htWElement.baseElement=MobileCommentJindo.$Element(el);
        elTemp=MobileCommentJindo.$$.getSingle("."+sPrefix+"tabview",el);
        this._htWElement.tab_view=elTemp?MobileCommentJindo.$Element(elTemp):null;
        elTemp=MobileCommentJindo.$$.getSingle("."+sPrefix+"tab-cont",el);
        this._htWElement.tab_container=elTemp?MobileCommentJindo.$Element(elTemp):null;
        if(this._htWElement.tab_container){
            this._htWElement.tab_container.css("-"+MobileCommentJindo.m.getCssPrefix()+"-tap-highlight-color","rgba(0,0,0,0)")
        }
        elTemp=MobileCommentJindo.$$.getSingle("."+sPrefix+"panel-cont",el);
        this._htWElement.panel_container=elTemp?MobileCommentJindo.$Element(elTemp):null;
        elTemp=MobileCommentJindo.$$.getSingle("."+sPrefix+"prev",el);
        this._htWElement.prev=elTemp?MobileCommentJindo.$Element(elTemp):null;
        elTemp=MobileCommentJindo.$$.getSingle("."+sPrefix+"next",el);
        this._htWElement.next=elTemp?MobileCommentJindo.$Element(elTemp):null;
        this._htWElement.baseElement.css("position","relative");
        this._htWElement.tab_view.css("overflow","hidden")
    }
    ,_initData:function(){
        var nCountPreView=this.option("nCountPerVeiw"),el=null,nRemainPage;
        this._aTab=this._htWElement.tab_container.queryAll("."+this.option("sClassPrefix")+"tab");
        this._aPanel=this._htWElement.panel_container.queryAll("."+this.option("sClassPrefix")+"panel");
        for(var i=0,nLength=this._aTab.length;
        i<nLength;
        i++){
            this._aTab[i]=MobileCommentJindo.$Element(this._aTab[i]);
            this._aPanel[i]=MobileCommentJindo.$Element(this._aPanel[i])
        }
        this._nTotalPage=parseInt(this._aTab.length/nCountPreView,10);
        nRemainPage=this._aTab.length%nCountPreView;
        if(nRemainPage>0){
            this._nTotalPage++
        }
        for(j=0,nLength=nCountPreView-nRemainPage;
        j<nLength;
        j++){
            el=MobileCommentJindo.$("<li></li>");
            this._aDummyTab.push(MobileCommentJindo.$Element(el));
            this._htWElement.tab_container.append(el)
        }
        this._oEffect=new MobileCommentJindo.m.LayerEffect(this._htWElement.tab_container.$value())
    }
    ,resize:function(){
        var nTabWidth,nPrePageWidth=this._nPageWidth;
        this._nPageWidth=this._htWElement.tab_view.width()-this._htWElement.prev.width()-this._htWElement.next.width();
        nTabWidth=this._nPageWidth/this.option("nCountPerVeiw");
        if(nPrePageWidth>this._nPageWidth){
            this._setTabWidth(nTabWidth);
            this._htWElement.tab_container.width(this._nPageWidth*this._nTotalPage)
        }
        else{
            this._htWElement.tab_container.width(this._nPageWidth*this._nTotalPage);
            this._setTabWidth(nTabWidth)
        }
        this._htWElement.tab_container.css("left",(this._nCurrentPage-1)*-this._nPageWidth)
    }
    ,_setTabWidth:function(nTabWidth){
        for(var i in this._aTab){
            this._aTab[i].width(nTabWidth)
        }
        for(i in this._aDummyTab){
            this._aDummyTab[i].width(nTabWidth)
        }
        
    }
    ,_fireEventBeforeSelect:function(){
        return this.fireEvent("beforeSelect",{
            nIndex:this._nCurrentIndex,elTab:this._aTab[this._nCurrentIndex],elPanel:this._aPanel[this._nCurrentIndex]
        })
    }
    ,_fireEventSelect:function(){
        this.fireEvent("select",{
            nIndex:this._nCurrentIndex,elTab:this._aTab[this._nCurrentIndex],elPanel:this._aPanel[this._nCurrentIndex]
        })
    }
    ,_fireEventBeforePrev:function(){
        return this.fireEvent("beforePrev",{
            nPage:this._nCurrentPage,nIndex:this._nCurrentIndex,nTotalPage:this._nTotalPage
        })
    }
    ,_fireEventPrev:function(){
        this.fireEvent("prev",{
            nPage:this._nCurrentPage,nIndex:this._nCurrentIndex,nTotalPage:this._nTotalPage
        })
    }
    ,_fireEventBeforeNext:function(){
        return this.fireEvent("beforeNext",{
            nPage:this._nCurrentPage,nIndex:this._nCurrentIndex,nTotalPage:this._nTotalPage
        })
    }
    ,_fireEventNext:function(){
        this.fireEvent("next",{
            nPage:this._nCurrentPage,nIndex:this._nCurrentIndex,nTotalPage:this._nTotalPage
        })
    }
    ,select:function(nIdx){
        if(nIdx!==null&&this._aTab.length>nIdx&&(this._nCurrentIndex!==nIdx)){
            if(this._fireEventBeforeSelect()){
                var sSelect=this.option("sClassPrefix")+"selected";
                if(this._nCurrentIndex>-1){
                    this._aTab[this._nCurrentIndex].removeClass(sSelect);
                    this._aPanel[this._nCurrentIndex].removeClass(sSelect);
                    this._aPanel[this._nCurrentIndex].hide()
                }
                this._aTab[nIdx].addClass(sSelect);
                this._aPanel[nIdx].addClass(sSelect);
                this._aPanel[nIdx].show();
                this._nCurrentIndex=nIdx;
                this._fireEventSelect()
            }
            
        }
        
    }
    ,_onActivate:function(){
        this.resize();
        this._attachEvent()
    }
    ,_onDeactivate:function(){
        this._detachEvent()
    }
    ,_attachEvent:function(){
        this._htEvent={};
        this._htEvent.prev_click={
            ref:MobileCommentJindo.$Fn(this._onPrev,this).attach(this._htWElement.prev,"click"),el:this._htWElement.prev
        };
        this._htEvent.next_click={
            ref:MobileCommentJindo.$Fn(this._onNext,this).attach(this._htWElement.next,"click"),el:this._htWElement.next
        };
        this._htEvent.tabSelect_click={
            ref:MobileCommentJindo.$Fn(this._onSelect,this).attach(this._htWElement.tab_container,"click"),el:this._htWElement.tab_container
        };
        this._oEffect.attach("afterEffect",MobileCommentJindo.$Fn(this._onEndEffect,this).bind())
    }
    ,_onEndEffect:function(){
        if(this._isNext){
            this._nCurrentPage++;
            this._fireEventNext()
        }
        else{
            this._nCurrentPage--;
            this._fireEventPrev()
        }
        this._isNext=null;
        this.select((this._nCurrentPage-1)*this.option("nCountPerVeiw"))
    }
    ,_detachEvent:function(){
        for(var p in this._htEvent){
            var ht=this._htEvent[p];
            ht.ref.detach(ht.el,p.substring(p.lastIndexOf("_")))
        }
        this._htEvent=null
    }
    ,_onPrev:function(we){
        if((this._nCurrentPage>1)&&!this._oEffect.isPlaying()){
            if(this._fireEventBeforePrev()){
                this._oEffect.slide({
                    sDirection:"right",nDuration:this.option("nSlideDuration"),sTransitionTimingFunction:this.option("sTimingFunction"),nSize:this._nPageWidth
                });
                this._isNext=false
            }
            
        }
        
    }
    ,_onNext:function(we){
        if((this._nCurrentPage<this._nTotalPage)&&!this._oEffect.isPlaying()){
            if(this._fireEventBeforeNext()){
                this._oEffect.slide({
                    sDirection:"left",nDuration:this.option("nSlideDuration"),sTransitionTimingFunction:this.option("sTimingFunction"),nSize:this._nPageWidth
                });
                this._isNext=true
            }
            
        }
        
    }
    ,_onSelect:function(we){
        if(we.element){
            we.stop();
            var welElement=MobileCommentJindo.$Element(we.element);
            var sClassName=this.option("sClassPrefix")+"tab";
            if(this._htWElement.tab_container.isParentOf(welElement)&&!welElement.hasClass(sClassName)){
                welElement=welElement.parent(function(v){
                    return v.hasClass(sClassName)
                })[0]
            }
            var nIdx=this._htWElement.tab_container.indexOf(welElement);
            if(nIdx>-1){
                this.select(nIdx)
            }
            
        }
        
    }
    ,destroy:function(){
        this.deactivate();
        for(var p in this._htWElement){
            this._htWElement[p]=null
        }
        this._htWElement=null;
        for(p in this._aTab){
            this._aTab[p]=null
        }
        this._aTab=null;
        for(p in this._aDummyTab){
            this._aDummyTab[p]=null
        }
        this._aDummyTab=null;
        for(p in this._aPanel){
            this._aPanel[p]=null
        }
        this._aPanel=null;
        this._nCurrentPage=1;
        this._nCurrentIndex=0;
        this._nTotalPage=1;
        this._nPageWidth=0;
        this._oEffect.destroy();
        delete this._oEffect
    }
    
}).extend(MobileCommentJindo.UIComponent);
MobileCommentJindo.m.Tab=MobileCommentJindo.$Class({
    $init:function(el,htUserOption){
        this.option({
            sClassPrefix:"tc-",nDefaultIndex:0,bActivateOnload:true
        });
        this.option(htUserOption||{});
        this._initVar();
        this._setWrapperElement(el);
        this._initData();
        if(this.option("bActivateOnload")){
            this.activate()
        }
        this.select(this.option("nDefaultIndex"))
    }
    ,_initVar:function(){
        this._nCurrentIndex=-1;
        this._aTab=[];
        this._aPanel=[];
        this._isNext=null
    }
    ,_setWrapperElement:function(el){
        this._htWElement={};
        var sPrefix=this.option("sClassPrefix");
        el=(typeof el=="string"?MobileCommentJindo.$(el):el);
        this._htWElement.tab_container=MobileCommentJindo.$Element(MobileCommentJindo.$$.getSingle("."+sPrefix+"tab-cont",el));
        this._htWElement.panel_container=MobileCommentJindo.$Element(MobileCommentJindo.$$.getSingle("."+sPrefix+"panel-cont",el))
    }
    ,_initData:function(){
        this._aTab=this._htWElement.tab_container.queryAll("."+this.option("sClassPrefix")+"tab");
        this._aPanel=this._htWElement.panel_container.queryAll("."+this.option("sClassPrefix")+"panel");
        for(var i=0,nLength=this._aTab.length;
        i<nLength;
        i++){
            this._aTab[i]=MobileCommentJindo.$Element(this._aTab[i]);
            this._aPanel[i]=MobileCommentJindo.$Element(this._aPanel[i])
        }
        
    }
    ,_onActivate:function(){
        this._attachEvent()
    }
    ,_onDeactivate:function(){
        this._detachEvent()
    }
    ,_attachEvent:function(){
        this._htEvent={};
        this._htEvent.tab_click={
            el:this._htWElement.tab_container,ref:MobileCommentJindo.$Fn(this._onSelect,this).attach(this._htWElement.tab_container,"click")
        }
        
    }
    ,_detachEvent:function(){
        for(var p in this._htEvent){
            var ht=this._htEvent[p];
            ht.ref.detach(ht.el,p.substring(p.lastIndexOf("_")+1))
        }
        this._htEvent=null
    }
    ,getCurrentIndex:function(){
        return this._nCurrentIndex
    }
    ,getCurrentPage:function(){
        return(this._nCurrentIndex+1)
    }
    ,getTab:function(nIdx){
        if(nIdx!==null&&this._aTab.length>nIdx){
            return this._aTab[nIdx]
        }
        else{
            return this._aTab
        }
        
    }
    ,getPanel:function(nIdx){
        if(nIdx!==null&&this._aPanel.length>nIdx){
            return this._aPanel[nIdx]
        }
        else{
            return this._aPanel
        }
        
    }
    ,_onSelect:function(we){
        if(we.element){
            we.stop();
            var welElement=MobileCommentJindo.$Element(we.element);
            var sClassName=this.option("sClassPrefix")+"tab";
            if(this._htWElement.tab_container.isParentOf(welElement)&&!welElement.hasClass(sClassName)){
                welElement=welElement.parent(function(v){
                    return v.hasClass(sClassName)
                })[0]
            }
            var nIdx=this._htWElement.tab_container.indexOf(welElement);
            if(nIdx>-1){
                this.select(nIdx)
            }
            
        }
        
    }
    ,select:function(nIdx){
        if(nIdx!==null&&this._aTab.length>nIdx&&(this._nCurrentIndex!=nIdx)){
            if(this._fireEventBeforeSelect()){
                var sSelect=this.option("sClassPrefix")+"selected";
                if(this._nCurrentIndex>-1){
                    this._aTab[this._nCurrentIndex].removeClass(sSelect);
                    this._aPanel[this._nCurrentIndex].removeClass(sSelect)
                }
                this._aTab[nIdx].addClass(sSelect);
                this._aPanel[nIdx].addClass(sSelect);
                this._nCurrentIndex=nIdx;
                this._fireEventSelect()
            }
            
        }
        
    }
    ,_fireEventBeforeSelect:function(){
        return this.fireEvent("beforeSelect",{
            nIndex:this._nCurrentIndex,elTab:this._aTab[this._nCurrentIndex],elPanel:this._aPanel[this._nCurrentIndex]
        })
    }
    ,_fireEventSelect:function(){
        this.fireEvent("select",{
            nIndex:this._nCurrentIndex,elTab:this._aTab[this._nCurrentIndex],elPanel:this._aPanel[this._nCurrentIndex]
        })
    }
    ,destroy:function(){
        this.deactivate();
        this._detachEvent();
        for(var p in this._htWElement){
            this._htWElement[p]=null
        }
        this._htWElement=null
    }
    
}).extend(MobileCommentJindo.UIComponent);
MobileCommentJindo.m.TextArea=MobileCommentJindo.$Class({
    $init:function(el,htUserOption){
        this.option({
            sClassPrefix:"fta-",bActivateOnload:true,bUseRadius:false,sRadiusSize:"0.5em",nExpandHeight:30,nMaxHeight:-1
        });
        this.option(htUserOption||{});
        this._initVar();
        this._setWrapperElement(el);
        if(this.option("bUseRadius")){
            this._applyRadiusStyle(this.option("sRadiusSize"))
        }
        if(this.option("bActivateOnload")){
            this.activate()
        }
        
    }
    ,_initVar:function(){
        this._nTimer=-1;
        this._bTouchTextArea=false;
        this._touchMoved=false
    }
    ,_setWrapperElement:function(el){
        this._htWElement={};
        var sPrefix=this.option("sClassPrefix");
        el=(typeof el=="string"?MobileCommentJindo.$(el):el);
        this._htWElement.textarea=MobileCommentJindo.$Element(el)
    }
    ,_applyRadiusStyle:function(sRadius){
        var sCssName=MobileCommentJindo.m.getCssPrefix()+"BorderRadius";
        var oCssProperty={
            sCssName:sRadius,borderRadius:sRadius
        };
        this._htWElement.textarea.css(oCssProperty);
        oCssFirstProperty=null
    }
    ,_onActivate:function(){
        this._attachEvent()
    }
    ,_onDeactivate:function(){
        this._detachEvent();
        clearInterval(this._nTimer);
        this._nTimer=-1
    }
    ,_attachEvent:function(){
        this._htEvent={};
        var elTextArea=this._htWElement.textarea.$value();
        this._htEvent.textarea_focus={
            el:elTextArea,ref:MobileCommentJindo.$Fn(this._onFocus,this).attach(elTextArea,"focus")
        };
        this._htEvent.textarea_blur={
            el:elTextArea,ref:MobileCommentJindo.$Fn(this._onBlur,this).attach(elTextArea,"blur")
        }
        
    }
    ,_detachEvent:function(){
        for(var p in this._htEvent){
            var ht=this._htEvent[p];
            ht.ref.detach(ht.el,p.substring(p.lastIndexOf("_")+1))
        }
        this._htEvent=null
    }
    ,_onFocus:function(we){
        if(this._nTimer>-1){
            return
        }
        this._htWElement.textarea.addClass(this.option("sClassPrefix")+"textarea-focus");
        this._nTimer=setInterval(MobileCommentJindo.$Fn(this._checkHeightAndExpand,this).bind(),10);
        this.fireEvent("focus",{
            elTextArea:this._htWElement.textarea.$value()
        })
    }
    ,_onBlur:function(we){
        if(this._nTimer==-1){
            return
        }
        clearInterval(this._nTimer);
        this._nTimer=-1;
        this._htWElement.textarea.removeClass(this.option("sClassPrefix")+"textarea-focus");
        this.fireEvent("blur",{
            elTextArea:this._htWElement.textarea.$value()
        })
    }
    ,_checkHeightAndExpand:function(){
        if(this._hasEnoughHeight()===false){
            this._expandHeight()
        }
        
    }
    ,_hasEnoughHeight:function(){
        var elTextArea=this._htWElement.textarea.$value();
        if(elTextArea.scrollHeight>elTextArea.clientHeight){
            return false
        }
        return true
    }
    ,_expandHeight:function(){
        var elTextArea=this._htWElement.textarea.$value();
        var nMaxHeight=this.option("nMaxHeight");
        var nExpandHeight=this.option("nExpandHeight");
        var nNewHeight=elTextArea.scrollHeight+nExpandHeight;
        if(nMaxHeight>0&&nNewHeight>=nMaxHeight){
            elTextArea.style.height=nMaxHeight+"px"
        }
        else{
            elTextArea.style.height=elTextArea.scrollHeight+nExpandHeight+"px";
            this.fireEvent("expand",{
                elTextArea:this._htWElement.textarea.$value()
            })
        }
        
    }
    ,getValue:function(){
        return this._htWElement.textarea.$value().value
    }
    ,setValue:function(sValue){
        this._htWElement.textarea.$value().value=sValue;
        this._checkHeightAndExpand()
    }
    ,deleteValue:function(){
        this._htWElement.textarea.$value().value=""
    }
    ,enable:function(){
        var elTextArea=this._htWElement.textarea.$value();
        elTextArea.disabled=false;
        this._htWElement.textarea.removeClass(this.option("sClassPrefix")+"textarea-disable");
        this.fireEvent("enable",{
            elTextArea:elTextArea
        })
    }
    ,disable:function(){
        var elTextArea=this._htWElement.textarea.$value();
        elTextArea.disabled=true;
        this._htWElement.textarea.addClass(this.option("sClassPrefix")+"textarea-disable");
        this.fireEvent("disable",{
            elTextArea:elTextArea
        })
    }
    ,setExpandHeight:function(nExpandHeight){
        this.option("nExpandHeight",nExpandHeight)
    }
    ,getExpandHeight:function(){
        return this.option("nExpandHeight")
    }
    ,setMaxHeight:function(nMaxHeight){
        this.option("nMaxHeight",nMaxHeight);
        var elTextArea=this._htWElement.textarea.$value();
        if(nMaxHeight>0&&elTextArea.scrollHeight>=nMaxHeight){
            elTextArea.style.height=nMaxHeight+"px"
        }
        else{
            if(nMaxHeight>0&&elTextArea.scrollHeight<nMaxHeight){
                elTextArea.style.height=elTextArea.scrollHeight+"px"
            }
            
        }
        
    }
    ,getMaxHeight:function(){
        return this.option("nMaxHeight")
    }
    ,destroy:function(){
        this.deactivate();
        if(this._oTimer){
            clearInterval(this._oTimer);
            this._oTimer=null
        }
        for(var p in this._htWElement){
            this._htWElement[p]=null
        }
        this._htWElement=null;
        this._bTouchTextArea=null;
        this._touchMoved=null
    }
    
}).extend(MobileCommentJindo.UIComponent);
MobileCommentJindo.m.ToggleSlider=MobileCommentJindo.$Class({
    $init:function(sId,htUserOption){
        this.option({
            sClassPrefix:"tslider-",bUseDrag:true,bActivateOnload:true,nOnPosition:50,nOffPosition:0,bStatus:true
        });
        this.option(htUserOption||{});
        this._setWrapperElement(sId);
        this._initVar();
        if(this.option("bActivateOnload")){
            this.activate();
            if(this.option("bStatus")){
                this.bStatusOn=false;
                this.on()
            }
            else{
                this.bStatusOn=true;
                this.off()
            }
            
        }
        
    }
    ,_initVar:function(){
        if(this._htWElement.track){
            this._oTouch=new MobileCommentJindo.m.Touch(this._htWElement.track.$value(),{
                nSlopeThreshold:1,nMoveGap:2,bActivateOnload:false
            });
            this._oTouch.attach({
                touchMove:MobileCommentJindo.$Fn(this._onMove,this).bind(),touchEnd:MobileCommentJindo.$Fn(this._onEnd,this).bind(),touchStart:MobileCommentJindo.$Fn(this._onStart,this).bind()
            })
        }
        else{
            this._oTouch=null
        }
        this.bMove=false;
        this.htInfo={
            nMax:Math.max(this.option("nOnPosition"),this.option("nOffPosition")),nMin:Math.min(this.option("nOnPosition"),this.option("nOffPosition")),nGap:Math.round(Math.abs((this.option("nOnPosition")-this.option("nOffPosition"))/2))
        }
        
    }
    ,_setWrapperElement:function(el){
        this._htWElement={};
        var el=MobileCommentJindo.$(el);
        var sClass="."+this.option("sClassPrefix");
        this._htWElement.base=MobileCommentJindo.$Element(el);
        var aRadio=el?MobileCommentJindo.$$("[name="+this.option("sClassPrefix")+"radio]",el):null;
        this._htWElement.aRadio=MobileCommentJindo.$A(aRadio).forEach(function(value,index,array){
            array[index]=MobileCommentJindo.$Element(value)
        }).$value();
        this._htWElement.track=el?MobileCommentJindo.$Element(MobileCommentJindo.$$.getSingle(sClass+"track",el)):null;
        this._htWElement.thumb=el?MobileCommentJindo.$Element(MobileCommentJindo.$$.getSingle(sClass+"thumb",el)):null
    }
    ,_onStart:function(oCustomEvt){
        oCustomEvt.oEvent.stop(MobileCommentJindo.$Event.CANCEL_DEFAULT)
    }
    ,_onMove:function(oCustomEvt){
        if(!this.option("bUseDrag")){
            return
        }
        oCustomEvt.oEvent.stop(MobileCommentJindo.$Event.DEFAULT);
        this.bMove=true;
        var nDis=oCustomEvt.nDistanceX;
        var n=this._getAdjustedPos(nDis);
        this._moveThumb(n)
    }
    ,_onEnd:function(oCustomEvt){
        if(oCustomEvt.sMoveType=="tap"){
            this.toggle()
        }
        else{
            if(this.bMove){
                var nCurrent=this.isOn()?this.option("nOnPosition"):this.option("nOffPosition");
                var nPos=this._getPosition();
                if(Math.abs(nCurrent-nPos)>this.htInfo.nGap){
                    this.toggle()
                }
                else{
                    this._move(this.isOn(),false)
                }
                
            }
            else{
                this.toggle()
            }
            
        }
        this.bMove=false
    }
    ,_move:function(bOn,bFireEvent){
        if(typeof bFireEvent=="undefined"){
            bFireEvent=true
        }
        var nDis=this.option("nOffPosition");
        if(bFireEvent){
            if(!this.fireEvent("beforeChange",{
                bOn:this.isOn()
            })){
                return false
            }
            
        }
        if(bOn){
            nDis=this.option("nOnPosition")
        }
        this._moveThumb(nDis,100);
        if(bFireEvent){
            this.fireEvent("change",{
                bOn:bOn
            })
        }
        this.bStatusOn=bOn;
        this._updateForm()
    }
    ,toggle:function(){
        if(this.isOn()){
            this.off()
        }
        else{
            this.on()
        }
        
    }
    ,on:function(){
        if(!this.isOn()){
            this._move(true)
        }
        
    }
    ,off:function(){
        if(this.isOn()){
            this._move(false)
        }
        
    }
    ,isOn:function(){
        return this.bStatusOn
    }
    ,_updateForm:function(){
        if(!this._htWElement.aRadio){
            return
        }
        var value=this.isOn()?"on":"off";
        for(var i=0,nLen=this._htWElement.aRadio.length;
        i<nLen;
        i++){
            var wel=this._htWElement.aRadio[i];
            if(wel.$value().value==value){
                wel.$value().checked=true
            }
            else{
                wel.$value().checked=false
            }
            
        }
        
    }
    ,_moveThumb:function(n,nTime){
        if(n>this.htInfo.nMax||n<this.htInfo.nMin){
            return
        }
        if(typeof nTime=="undefined"){
            nTime=0
        }
        if(this._htWElement.thumb){
            this._htWElement.thumb.css("webkitTransitionDuration",nTime+"ms");
            this._htWElement.thumb.css("webkitTransitionProperty","left");
            this._htWElement.thumb.css("left",n+"%")
        }
        
    }
    ,_getAdjustedPos:function(nDis){
        var nPecent=Math.round((nDis*100)/this._htWElement.track.width());
        nPecent=nPecent+(this.isOn()?this.option("nOnPosition"):this.option("nOffPosition"));
        nPecent=Math.max(this.htInfo.nMin,nPecent);
        nPecent=Math.min(this.htInfo.nMax,nPecent);
        return nPecent
    }
    ,_getPosition:function(){
        var sPos=this._htWElement.thumb.css("left");
        return(sPos=="auto")?0:parseInt(sPos,10)
    }
    ,_onClick:function(evt){
        evt.stop()
    }
    ,_attachEvent:function(){
        this._htEvent={};
        this._htEvent.click={
            ref:MobileCommentJindo.$Fn(this._onClick,this).attach(this._htWElement.thumb,"click"),el:this._htWElement.thumb
        }
        
    }
    ,_detachEvent:function(sEventKey){
        if(sEventKey){
            var htTargetEvent=this._htEvent[sEventKey];
            htTargetEvent.ref.detach(htTargetEvent.el,sEventKey)
        }
        
    }
    ,_onActivate:function(){
        this._attachEvent();
        if(this._oTouch){
            this._oTouch.activate()
        }
        
    }
    ,_onDeactivate:function(){
        this._detachEvent();
        if(this._oTouch){
            this._oTouch.deactivate()
        }
        
    }
    ,destroy:function(){
        this.deactivate();
        for(var p in this._htWElement){
            this._htWElement[p]=null
        }
        this._htWElement=null;
        this._oTouch.detachAll();
        this._oTouch=null;
        this.bMove=null;
        this.bStatusOn=null
    }
    
}).extend(MobileCommentJindo.UIComponent);
MobileCommentJindo.m.ExpandEffect=MobileCommentJindo.$Class({
    sEffectName:"expand",getCommand:function(el,htOption){
        var sDirection=htOption.sDirection?htOption.sDirection:"down";
        var sProperty="width";
        var nSize=this._htLayerInfo.nWidth;
        if(sDirection=="up"||sDirection=="down"){
            sProperty="height";
            nSize=this._htLayerInfo.nHeight
        }
        var htStyle=htOption.htTo||{};
        htStyle[sProperty]=nSize+"px";
        if(sDirection=="left"){
            htStyle["margin-left"]=this._htLayerInfo.nMarginLeft+"px"
        }
        if(sDirection=="up"){
            htStyle["margin-top"]=this._htLayerInfo.nMarginTop+"px"
        }
        return{
            sTaskName:this.sEffectName+"-"+sDirection,htStyle:htStyle,htTransform:{}
        }
        
    }
    ,getBeforeCommand:function(el,htOption){
        var sDirection=htOption.sDirection?htOption.sDirection:"down";
        var sProperty="width";
        if(sDirection=="up"||sDirection=="down"){
            sProperty="height"
        }
        var htBeforeStyle=htOption.htFrom||{};
        htBeforeStyle[sProperty]="0";
        htBeforeStyle.overflow="hidden";
        if(sDirection=="left"){
            htBeforeStyle["margin-left"]=(this._htLayerInfo.nWidth+this._htLayerInfo.nMarginLeft)+"px"
        }
        if(sDirection=="up"){
            htBeforeStyle["margin-top"]=(this._htLayerInfo.nHeight+this._htLayerInfo.nMarginTop)+"px"
        }
        return{
            htStyle:htBeforeStyle,htTransform:{}
        }
        
    }
    
}).extend(MobileCommentJindo.m.Effect);
MobileCommentJindo.m.TextInput=MobileCommentJindo.$Class({
    $init:function(el,htUserOption){
        this.option({
            sClassPrefix:"fit-",bUseValidate:false,bActivateOnload:true
        });
        this.option(htUserOption||{});
        this._initVar();
        this._setWrapperElement(el);
        this._init();
        if(this.option("bActivateOnload")){
            this.activate()
        }
        
    }
    ,$static:{
        INDEX_ATTR:"data-index",VALIDATE_ATTR:"data-validate"
    }
    ,_initVar:function(){
        this._aTextInput=[];
        this._sPreValue=null;
        this._nWatcher=null;
        this._sClickEvent=(MobileCommentJindo.m.getDeviceInfo().iphone||MobileCommentJindo.m.getDeviceInfo().ipad||MobileCommentJindo.m.getDeviceInfo().android)?"touchstart":"mousedown";
        this._nFocusTimer=null;
        this._nBlurTimer=null
    }
    ,_setWrapperElement:function(el){
        this._htWElement={};
        this._htWElement.baseElement=MobileCommentJindo.$Element(el)
    }
    ,_init:function(){
        var welUnit,welInput,welDel,sValidate,aBaseList,aValidate=[];
        aBaseList=this._htWElement.baseElement.queryAll("."+this.option("sClassPrefix")+"textinput-unit");
        for(var i=0,nLength=aBaseList.length;
        i<nLength;
        i++){
            welUnit=MobileCommentJindo.$Element(aBaseList[i]);
            welUnit.attr(MobileCommentJindo.m.TextInput.INDEX_ATTR,i).css("position","relative");
            welInput=MobileCommentJindo.$Element(welUnit.query("input"));
            welInput.attr(MobileCommentJindo.m.TextInput.INDEX_ATTR,i);
            welDel=welUnit.query("."+this.option("sClassPrefix")+"clear-btn");
            if(welDel){
                welDel=MobileCommentJindo.$Element(welDel);
                welDel.attr(MobileCommentJindo.m.TextInput.INDEX_ATTR,i).css({
                    position:"absolute",zIndex:100,cursor:"pointer",right:"0px",top:"0px"
                }).hide()
            }
            this._aTextInput.push({
                welUnit:welUnit,welInput:welInput,welDel:welDel
            })
        }
        
    }
    ,_attachEvent:function(){
        this._htEvent={};
        this._htEvent.focus=MobileCommentJindo.$Fn(this._onFocus,this);
        this._htEvent.blur=MobileCommentJindo.$Fn(this._onBlur,this);
        this._htEvent.clear=MobileCommentJindo.$Fn(this._onClear,this);
        for(var i=0,nLength=this._aTextInput.length;
        i<nLength;
        i++){
            this._attachUnitEvent(this._aTextInput[i])
        }
        
    }
    ,_attachUnitEvent:function(htUnit){
        this._htEvent.focus.attach(htUnit.welInput,"focus");
        this._htEvent.blur.attach(htUnit.welInput,"blur");
        if(htUnit.welDel){
            this._htEvent.clear.attach(htUnit.welDel,this._sClickEvent)
        }
        
    }
    ,_detachEvent:function(){
        for(var i=0,nLength=this._aTextInput.length;
        i<nLength;
        i++){
            this._detachUnitEvent(this._aTextInput[i])
        }
        for(var p in this._htEvent){
            this._htEvent[p]=null
        }
        this._htEvent=null
    }
    ,_detachUnitEvent:function(htUnit){
        this._htEvent.focus.detach(htUnit.welInput,"focus");
        this._htEvent.blur.detach(htUnit.welInput,"blur");
        if(htUnit.welDel){
            this._htEvent.clear.detach(htUnit.welDel,this._sClickEvent)
        }
        
    }
    ,_displayClearBtn:function(welInput){
        var nIdx=this.getIndex(welInput),welClearBtn=this._aTextInput[nIdx].welDel;
        if(!welClearBtn){
            return
        }
        if(MobileCommentJindo.$S(welInput.$value().value).trim()!=""){
            if(!welClearBtn.visible()&&this.fireEvent("beforeShowClearBtn",{
                nIndex:nIdx,welClearBtn:welClearBtn
            })){
                welClearBtn.show();
                this.fireEvent("showClearBtn",{
                    nIndex:nIdx,welClearBtn:welClearBtn
                })
            }
            
        }
        else{
            if(welClearBtn.visible()&&this.fireEvent("beforeHideClearBtn",{
                nIndex:nIdx,welClearBtn:welClearBtn
            })){
                welClearBtn.hide();
                this.fireEvent("hideClearBtn",{
                    nIndex:nIdx,welClearBtn:welClearBtn
                })
            }
            
        }
        
    }
    ,_validate:function(welInput){
        var sValidate=welInput.attr(MobileCommentJindo.m.TextInput.VALIDATE_ATTR);
        if(!sValidate){
            return
        }
        var sValue=welInput.$value().value,htResult=MobileCommentJindo.m.Validation.validate(sValidate,sValue),nIdx=this.getIndex(welInput);
        if(htResult){
            if(typeof htResult.sCorrectedValue!=="undefined"&&htResult.sCorrectedValue!==null){
                welInput.$value().value=this._sPreValue=htResult.sCorrectedValue
            }
            this.fireEvent((htResult.bValid?"valid":"invalid"),{
                htValidate:htResult,htTextInput:this._aTextInput[nIdx],nIndex:nIdx
            })
        }
        
    }
    ,_onFocus:function(we){
        var nIdx=this.getIndex(we.element);
        var self=this;
        if(MobileCommentJindo.m.getDeviceInfo().android){
            clearTimeout(this._nFocusTimer);
            this._nFocusTimer=setTimeout(function(){
                self._processFocus(nIdx)
            }
            ,100)
        }
        else{
            self._processFocus(nIdx)
        }
        
    }
    ,_processFocus:function(nIdx){
        var htTextInput=this._aTextInput[nIdx];
        var welTextInputUnit=htTextInput.welUnit;
        var sCssName=this.option("sClassPrefix")+"focus";
        if(!welTextInputUnit.hasClass(sCssName)){
            welTextInputUnit.addClass(sCssName)
        }
        this._runWatcher(htTextInput.welInput);
        this.fireEvent("focus",{
            nIndex:nIdx,htTextInput:htTextInput
        })
    }
    ,_onBlur:function(we){
        var nIdx=this.getIndex(we.element);
        var self=this;
        if(MobileCommentJindo.m.getDeviceInfo().android){
            clearTimeout(this._nBlurTimer);
            this._nBlurTimer=setTimeout(function(){
                self._processBlur(nIdx)
            }
            ,100)
        }
        else{
            self._processBlur(nIdx)
        }
        
    }
    ,_processBlur:function(nIdx){
        this._aTextInput[nIdx].welUnit.removeClass(this.option("sClassPrefix")+"focus");
        this._stopWatcher();
        if(this.option("bUseValidate")){
            var welInput=this._aTextInput[nIdx].welInput;
            this._validate(welInput);
            this._displayClearBtn(welInput)
        }
        this.fireEvent("blur",{
            nIndex:nIdx,htTextInput:this._aTextInput[nIdx]
        })
    }
    ,_onClear:function(we){
        var welBtn=MobileCommentJindo.$Element(we.element);
        nIndex=this.getIndex(welBtn),welInput=this._aTextInput[nIndex].welInput,htInfo=MobileCommentJindo.m.getDeviceInfo(),nVersion=parseInt(htInfo.version,10);
        welInput.$value().value="";
        if(htInfo.android&&nVersion===3){
            this._detachUnitEvent(this._aTextInput[nIndex]);
            welInput.$value().blur();
            welInput.$value().focus();
            this._attachUnitEvent(this._aTextInput[nIndex])
        }
        else{
            if(!htInfo.android&&nVersion>4){
                welInput.$value().blur();
                welInput.$value().focus()
            }
            
        }
        this._displayClearBtn(welInput);
        this.fireEvent("clear",{
            nIndex:nIndex,htTextInput:this._aTextInput[nIndex]
        });
        we.stop(MobileCommentJindo.$Event.CANCEL_ALL);
        return false
    }
    ,_runWatcher:function(welInput){
        var self=this,sValue=null;
        this._stopWatcher();
        this._nWatcher=setInterval(function(){
            self._onChange(welInput)
        }
        ,100)
    }
    ,_stopWatcher:function(){
        clearInterval(this._nWatcher);
        this._nWatcher=null;
        this._sPreValue=null
    }
    ,_onChange:function(welInput){
        var sValue=welInput.$value().value;
        if(this._sPreValue!=sValue){
            this._sPreValue=sValue;
            this.fireEvent("change",{
                sPreValue:sValue,welInput:welInput,nIndex:this.getIndex(welInput)
            });
            this._displayClearBtn(welInput)
        }
        else{
            this._displayClearBtn(welInput)
        }
        
    }
    ,_getTextInputList:function(vElement){
        var aTextInputUnit=[];
        if(vElement){
            if(vElement instanceof Array){
                for(var i=0,nLength=vElement.length;
                i<nLength;
                i++){
                    aTextInputUnit.push(MobileCommentJindo.$Element(vElement[i]))
                }
                
            }
            else{
                aTextInputUnit.push(MobileCommentJindo.$Element(vElement))
            }
            
        }
        else{
            for(var i=0,nLength=this._aTextInput.length;
            i<nLength;
            i++){
                aTextInputUnit.push(this._aTextInput[i].welUnit)
            }
            
        }
        return aTextInputUnit
    }
    ,_useSettingUnit:function(vElement,bUse){
        var self=this;
        this._stopWatcher();
        var aTextInputUnit=this._getTextInputList(vElement);
        if(MobileCommentJindo.m.getDeviceInfo().android){
            setTimeout(function(){
                self._useSettingUnitCore(aTextInputUnit,bUse)
            }
            ,100)
        }
        else{
            self._useSettingUnitCore(aTextInputUnit,bUse)
        }
        
    }
    ,_useSettingUnitCore:function(aTextInputUnit,bUse){
        for(var i=0,nLength=aTextInputUnit.length;
        i<nLength;
        i++){
            if(bUse){
                this._enableElement(aTextInputUnit[i])
            }
            else{
                this._disableElement(aTextInputUnit[i])
            }
            
        }
        this.fireEvent((bUse?"enable":"disable"),{
            aTextInputUnit:aTextInputUnit
        })
    }
    ,_enableElement:function(welUnit){
        var nIdx=this.getIndex(welUnit),welInput=this._aTextInput[nIdx].welInput;
        this._detachUnitEvent(this._aTextInput[nIdx]);
        this._attachUnitEvent(this._aTextInput[nIdx]);
        welUnit.removeClass(this.option("sClassPrefix")+"disable");
        welInput.$value().disabled=false;
        this._displayClearBtn(welInput)
    }
    ,_disableElement:function(welUnit){
        var nIdx=this.getIndex(welUnit),welInput=this._aTextInput[nIdx].welInput,welDel=this._aTextInput[nIdx].welDel;
        this._detachUnitEvent(this._aTextInput[nIdx]);
        welUnit.addClass(this.option("sClassPrefix")+"disable");
        welInput.$value().disabled=true;
        if(welDel){
            welDel.hide()
        }
        
    }
    ,enable:function(vElement){
        if(this.isActivating()){
            this._useSettingUnit(vElement,true)
        }
        
    }
    ,disable:function(vElement){
        if(this.isActivating()){
            this._useSettingUnit(vElement,false)
        }
        
    }
    ,getElement:function(nIdx){
        if(nIdx<this._aTextInput.length&&nIdx>=0){
            return this._aTextInput[nIdx].welUnit
        }
        
    }
    ,getInputElement:function(nIdx){
        if(nIdx<this._aTextInput.length&&nIdx>=0){
            return this._aTextInput[nIdx].welInput
        }
        
    }
    ,getDelElement:function(nIdx){
        if(nIdx<this._aTextInput.length&&nIdx>=0){
            return this._aTextInput[nIdx].welDel
        }
        
    }
    ,getIndex:function(ele){
        return parseInt(MobileCommentJindo.$Element(ele).attr(MobileCommentJindo.m.TextInput.INDEX_ATTR),10)
    }
    ,getLength:function(){
        return this._aTextInput.length
    }
    ,_onActivate:function(){
        this._attachEvent()
    }
    ,_onDeactivate:function(){
        this._detachEvent();
        this._stopWatcher()
    }
    ,destroy:function(){
        this.deactivate();
        for(var p in this._htWElement){
            this._htWElement[p]=null
        }
        this._htWElement=null
    }
    
}).extend(MobileCommentJindo.UIComponent);
MobileCommentJindo.m.Validation=MobileCommentJindo.$Class({
    $init:function(){},$static:{
        _htValidator:{},_htValidatorType:{
            email:"MobileCommentJindo.m.EmailValidator",url:"MobileCommentJindo.m.UrlValidator",tel:"MobileCommentJindo.m.TelValidator",date:"MobileCommentJindo.m.DateValidator",number:"MobileCommentJindo.m.NumberValidator",currency:"MobileCommentJindo.m.CurrencyValidator",require:"MobileCommentJindo.m.RequireValidator"
        }
        ,_createValidator:function(sType){
            if(MobileCommentJindo.m.Validation._htValidatorType[sType]&&!MobileCommentJindo.m.Validation._htValidator[sType]){
                MobileCommentJindo.m.Validation._htValidator[sType]=eval("new "+MobileCommentJindo.m.Validation._htValidatorType[sType]+"()")
            }
            
        }
        ,add:function(sType,sClassName){
            MobileCommentJindo.m.Validation._htValidatorType[sType]=sClassName
        }
        ,remove:function(sType){
            delete MobileCommentJindo.m.Validation._htValidatorType[sType]
        }
        ,_parse:function(sValidate){
            var aValidate=sValidate.split(";");
            var sType,sValue,htValidateData={};
            for(var i=0,nLength=aValidate.length;
            i<nLength;
            i++){
                var aTemp=aValidate[i].split(":");
                if(aTemp){
                    sType=aTemp[0];
                    sValue=aTemp.length>1?aTemp[1]:null;
                    htValidateData[sType]=htValidateData[sType]||sValue;
                    MobileCommentJindo.m.Validation._createValidator(sType)
                }
                
            }
            return htValidateData
        }
        ,validate:function(sValidate,sValue){
            var htResult,htValidateData=MobileCommentJindo.m.Validation._parse(sValidate);
            if("require" in htValidateData){
                htResult=MobileCommentJindo.m.Validation._htValidator.require.validate(sValue);
                if(!htResult.bValid){
                    return{
                        bValid:false,sType:"require",sPreValue:sValue
                    }
                    
                }
                else{
                    delete htValidateData.require
                }
                
            }
            if(MobileCommentJindo.$S(sValue).trim()==""){
                return null
            }
            for(var sType in htValidateData){
                htResult=MobileCommentJindo.m.Validation._htValidator[sType].validate(sValue,htValidateData[sType]);
                if(!htResult.bValid){
                    htResult.sType=sType;
                    htResult.sPreValue=sValue;
                    return htResult
                }
                
            }
            htResult.bValid=true;
            htResult.sPreValue=sValue;
            return htResult
        }
        
    }
    
});
MobileCommentJindo.m.CurrencyValidator=MobileCommentJindo.$Class({
    rx:/^[+-]?[^\s\t\v\d]+(\d{1,3},)?(\d{3},)*(\d)+(\.\d+)?$/,_getCorrectedValue:function(sValue,sFormat){
        sValue=this._applyComma(this._filterNumber(sValue));
        sFormat=sFormat||"\\";
        sValue=(sValue.charAt(0)==="-"?"-"+sFormat+sValue.substring(1):sFormat+sValue);
        return sValue
    }
    
}).extend(MobileCommentJindo.m.NumberValidator);
MobileCommentJindo.m.DateValidator=MobileCommentJindo.$Class({
    _isValid:function(sValue,sFormat){
        sFormat=sFormat||"yyyy-mm-dd";
        sValue=sValue.replace(/[\.-]/g,"");
        var sFormatData=sFormat.replace(/[\d\.-]/g,""),nYear=sValue.substr(sFormatData.indexOf("yyyy"),4)*1,nMonth=sValue.substr(sFormatData.indexOf("mm"),2)*1,nDay=sValue.substr(sFormatData.indexOf("dd"),2)*1;
        if((nMonth>=1&&nMonth<=12)&&(nDay>=1&&nDay<=31)&&(nYear>=1000)){
            return true
        }
        return false
    }
    ,_getCorrectedValue:function(sValue,sFormat){
        sFormat=sFormat||"yyyy-mm-dd";
        var sFormatData=sFormat.replace(/[\d\.-]/g,"");
        sValue=sValue.replace(/[^\d]/g,"").substr(0,sFormatData.length);
        if(sValue.length>=(sFormatData.length-1)){
            sValue=this._getFormatted(sValue,sFormat)
        }
        return sValue
    }
    ,_getFormatted:function(sDateStr,sFormat){
        var sFormatData=sFormat.replace(/[\.-]/g,""),sYear=sDateStr.substr(sFormatData.indexOf("yyyy"),4),sMonth=sDateStr.substr(sFormatData.indexOf("mm"),2),sDay=sDateStr.substr(sFormatData.indexOf("dd"),2);
        return sFormat.replace(/(yyyy|mm|dd)/gi,function($1){
            switch($1){
                case"yyyy":return sYear;
                case"mm":return sMonth;
                case"dd":return sDay
            }
            
        })
    }
    
}).extend(MobileCommentJindo.m.Validator);
MobileCommentJindo.m.EmailValidator=MobileCommentJindo.$Class({
    rx:/^(([\w-]+\.)+[\w-]+|([a-zA-Z]{1}|[\w-]{2,}))@((([0-1]?[0-9]{1,2}|25[0-5]|2[0-4][0-9])\.([0-1]?[0-9]{1,2}|25[0-5]|2[0-4][0-9])\.([0-1]?[0-9]{1,2}|25[0-5]|2[0-4][0-9])\.([0-1]?[0-9]{1,2}|25[0-5]|2[0-4][0-9])){1}|([a-zA-Z]+[\w-]+\.)+[a-zA-Z]{2,4})$/,_isValid:function(sValue){
        if(this.rx.test(sValue)){
            return true
        }
        else{
            return false
        }
        
    }
    ,_getCorrectedValue:function(sValue){
        sValue=sValue.replace(/[^\w\.\@]/g,"").replace(/\.{2,}/g,".");
        var aEmail=sValue.split("@");
        if(aEmail.length>2){
            sValue=aEmail.shift()+"@"+aEmail.join("")
        }
        return sValue
    }
    
}).extend(MobileCommentJindo.m.Validator);
MobileCommentJindo.m.RequireValidator=MobileCommentJindo.$Class({
    validate:function(sValue){
        sValue=MobileCommentJindo.$S(sValue).trim();
        var htResult={
            bValid:false,sCorrectedValue:null
        };
        htResult.bValid=sValue!=""?true:false;
        return htResult
    }
    
}).extend(MobileCommentJindo.m.Validator);
MobileCommentJindo.m.TelValidator=MobileCommentJindo.$Class({
    rx:/^(\d{2,3})(\d{3,4})(\d{4})$/,_isValid:function(sValue){
        sValue=sValue.replace(/[^\d]/g,"");
        if(this.rx.test(sValue)){
            var nLength=sValue.length,bResult=false;
            if(sValue.charAt(0)==="0"){
                if((nLength===9&&sValue.substring(0,2)==="02")||nLength===10||nLength===11){
                    bResult=true
                }
                
            }
            return bResult
        }
        else{
            return false
        }
        
    }
    ,_getCorrectedValue:function(sValue,sFormat){
        sValue=sValue.replace(/[^\d]/g,"");
        sValue=(sValue.length>11?sValue.substr(0,11):sValue);
        return this._applyFormat(sValue,sFormat)
    }
    ,_applyFormat:function(sValue,sFormat){
        sFormat=sFormat||"-";
        var nLength=sValue.length;
        if(sValue.charAt(0)==="0"){
            if(nLength===9&&sValue.substring(0,2)==="02"){
                sValue=sValue.substr(0,2)+sFormat+sValue.substr(2,3)+sFormat+sValue.substr(5,4)
            }
            else{
                if(nLength===10){
                    sValue=sValue.substr(0,3)+sFormat+sValue.substr(3,3)+sFormat+sValue.substr(6,4)
                }
                else{
                    if(nLength===11){
                        if(sValue.substr(0,4)==="0505"){
                            sValue=sValue.substr(0,4)+sFormat+sValue.substr(4,3)+sFormat+sValue.substr(7,4)
                        }
                        else{
                            sValue=sValue.substr(0,3)+sFormat+sValue.substr(3,4)+sFormat+sValue.substr(7,4)
                        }
                        
                    }
                    
                }
                
            }
            
        }
        return sValue
    }
    
}).extend(MobileCommentJindo.m.Validator);
MobileCommentJindo.m.UrlValidator=MobileCommentJindo.$Class({
    rx:/(^(http:\/\/)|^(https:\/\/)|(^[A-Za-z0-9\.-]+))+([A-Za-z0-9\.-])*(\.[A-Za-z]{2,}(\/([A-Za-z0-9\.-])*)*)$/,_isValid:function(sValue,sFormat){
        if(this.rx.test(sValue)){
            return true
        }
        else{
            return false
        }
        
    }
    ,_getCorrectedValue:function(sValue){
        return sValue.replace(/[^A-Za-z0-9-\?&\.\:\/]/g,"").replace(/\.{2,}/g,"").replace(/\?{2,}/g,"").replace(/&{2,}/g,"").replace(/\:{3,}/g,"")
    }
    
}).extend(MobileCommentJindo.m.Validator);
nhn=(typeof nhn!=="undefined")?nhn:{};
nhn.comment=nhn.comment||{};
nhn.comment.mobile=nhn.comment.mobile||{};
(function(){
    var J=window.nhn.comment.mobile.jindo||jindo,Comment=nhn.comment.mobile;
    nhn.comment.mobile.NAME="nhn.comment.mobile";
    nhn.comment.mobile.VERSION="1.0.0.4641"
})();
nhn=(typeof nhn!=="undefined")?nhn:{};
nhn.comment=nhn.comment||{};
nhn.comment.mobile=nhn.comment.mobile||{};
(function(){
    var J=window.nhn.comment.mobile.jindo||jindo,Comment=nhn.comment.mobile;
    nhn.comment.mobile.NAME="nhn.comment.mobile";
    nhn.comment.mobile.VERSION="1.0.0.4641";
    Comment.Util={
        trim:function(sStr){
            var re=/^\s+|\s+$/g;
            return sStr.replace(re,"")
        }
        ,dateFormat:function(sDate,sDateFormat){
            var aDatetime=sDate.split(/\+/);
            aDatetime=aDatetime[0].split(/T/);
            if(aDatetime.length>1){
                var ymd=aDatetime[0].split(/-/);
                var his=aDatetime[1].split(/:/);
                var year=ymd[0];
                var month=ymd[1];
                var dayOfMonth=ymd[2];
                var time=his[0];
                var minute=his[1];
                var second=his[2].split(/\./);
                var milli=second[1];
                second=second[0];
                year=Number(year);
                month=Number(month)-1;
                var day=Number(dayOfMonth);
                time=Number(time);
                minute=Number(minute);
                second=Number(second);
                var oDate=J.$Date(year,month,day,time,minute,second,milli);
                return oDate.format(sDateFormat)
            }
            else{
                return aDatetime[0]
            }
            
        }
        ,multiLine:function(sText,bEnableMultiLine){
            sText=sText.split(/\r/).join("");
            if(bEnableMultiLine){
                sText=sText.split(/\n/).join("<br/>")
            }
            else{
                sText=sText.split(/\n/).join(" ")
            }
            return sText
        }
        ,scrollTop:function(){
            window.scrollTo(0,1)
        }
        ,isInterruptedComment:function(nStatus){
            return nStatus>=7&&nStatus<=9
        }
        ,compareTextWithoutRetuneChar:function(sParamText1,sParamText2){
            var sText1=sParamText1;
            var sText2=sParamText2;
            sText1=sText1.replace(/\r/g,"");
            sText1=sText1.replace(/\n/g,"");
            sText2=sText2.replace(/\r/g,"");
            sText2=sText2.replace(/\n/g,"");
            if(sText1==sText2){
                return true
            }
            return false
        }
        ,validation:function(sContents,nMin,sMax,sEmptyError,sMinError,sMaxError){
            sContents=J.$S(sContents).trim().$value();
            if(sEmptyError&&sContents.length===0){
                alert(sEmptyError);
                return false
            }
            if(sMinError&&sContents.length<nMin){
                alert(J.$Template(sMinError).process({
                    min:escape(nMin.toString())
                }));
                return false
            }
            if(sMaxError&&sContents.length>sMax){
                alert(J.$Template(sMaxError).process({
                    max:escape(sMax.toString())
                }));
                return false
            }
            return true
        }
        ,isFunctionalKey:function(nKeyCode){
            if(nKeyCode==null){
                return false
            }
            switch(nKeyCode){
                case 8:case 18:case 17:case 37:case 38:case 39:case 40:case 33:case 34:case 46:case 16:case 35:case 36:case 45:case 20:case 27:return true
            }
            return false
        }
        ,movePage:function(sUrl,htParams){
            sUrl=this.removeParamsInUrl(sUrl,htParams);
            var sQueryString=this.makeQueryString(htParams);
            if(sUrl.indexOf("?")>-1){
                sUrl+="&"+sQueryString
            }
            else{
                sUrl+="?"+sQueryString
            }
            this.redirect(sUrl)
        }
        ,redirect:function(sUrl){
            if(!sUrl){
                return
            }
            window.location.href=sUrl
        }
        ,removeParamsInUrl:function(sUrl,htParams){
            if(htParams){
                for(var sParam in htParams){
                    sUrl=sUrl.replace(new RegExp("\\b"+sParam+"=[^&#]*","g"),"")
                }
                sUrl=sUrl.replace("&&","&").replace("?&","?").replace("&#","#").replace(/(.*)[&?]$/,"$1")
            }
            return sUrl
        }
        ,makeQueryString:function(htParams){
            var aParam=[],sValue="";
            if(htParams){
                for(var sParam in htParams){
                    sValue=htParams[sParam];
                    if(!sValue){
                        continue
                    }
                    aParam.push(sParam+"="+encodeURIComponent(htParams[sParam]))
                }
                
            }
            return aParam.join("&")
        }
        ,preventTapHighlightForJindoNotSupported:function(){
            if(typeof J.$Element.prototype.preventTapHighlight==="function"){
                return
            }
            (function(){
                if(J.$Agent().navigator().msafari){
                    var sClassName="no_tap_highlight"+new Date().getTime();
                    var elStyleTag=document.createElement("style");
                    var elHTML=document.getElementsByTagName("html")[0];
                    elStyleTag.type="text/css";
                    elHTML.insertBefore(elStyleTag,elHTML.firstChild);
                    var oSheet=elStyleTag.sheet||elStyleTag.styleSheet;
                    oSheet.insertRule("."+sClassName+" { -webkit-tap-highlight-color: rgba(0,0,0,0); }",0);
                    oSheet.insertRule("."+sClassName+" * { -webkit-tap-highlight-color: rgba(0,0,0,.25); }",0);
                    J.$Element.prototype.preventTapHighlight=function(bFlag){
                        return this[bFlag?"addClass":"removeClass"](sClassName)
                    }
                    
                }
                else{
                    J.$Element.prototype.preventTapHighlight=function(bFlag){
                        return this
                    }
                    
                }
                
            })()
        }
        ,arraySetJindoNotSupported:function(){
            if(typeof J.$Element.prototype.set==="function"){
                return
            }
            (function(){
                J.$A.prototype.set=function(nIndex,vValue){
                    this._array[nIndex]=vValue;
                    return this
                }
                
            })()
        }
        ,popUp:function(url,name,width,height){
            var popup=window.open(url,name,"width="+width+",height="+height+",status=no,left=0,top=0");
            if(popup){
                popup.focus();
                return popup
            }
            
        }
        
    }
    
})();
nhn=(typeof nhn!=="undefined")?nhn:{};
nhn.comment=nhn.comment||{};
nhn.comment.mobile=nhn.comment.mobile||{};
nhn.comment.mobile.Util=nhn.comment.mobile.Util||{};
(function(){
    var J=window.nhn.comment.mobile.jindo||jindo,Comment=nhn.comment.mobile,Util=nhn.comment.mobile.Util;
    nhn.comment.mobile.NAME="nhn.comment.mobile";
    nhn.comment.mobile.VERSION="1.0.0.4641";
    Util.DomData={
        set:function(elEl,sKey,aVars){
            if(this.get(elEl,sKey)){
                this.remove(elEl,sKey)
            }
            elEl.className+=(elEl.className?" ":"")+sKey+(aVars instanceof Array?"("+this._encode(aVars).join(",")+")":"");
            return elEl
        }
        ,_encode:function(sStr){
            if(!sStr){
                return sStr
            }
            if(sStr instanceof Array){
                var aRet=[];
                for(var i=0,nLen=sStr.length;
                i<nLen;
                i++){
                    aRet.push(arguments.callee(sStr[i]))
                }
                return aRet
            }
            return String(sStr).replace(/(["',\(\)\\])/g,function(_,sChar){
                switch(sChar){
                    case",":sChar=".";
                    break;
                    case"(":sChar="[";
                    break;
                    case")":sChar="]";
                    break
                }
                return"\\"+sChar
            })
        }
        ,_decode:function(sStr){
            if(!sStr){
                return sStr
            }
            if(sStr instanceof Array){
                var aRet=[];
                for(var i=0,nLen=sStr.length;
                i<nLen;
                i++){
                    aRet.push(arguments.callee(sStr[i]))
                }
                return aRet
            }
            return String(sStr).replace(/\\(["'\.\[\]\\])/g,function(_,sChar){
                switch(sChar){
                    case".":sChar=",";
                    break;
                    case"[":sChar="(";
                    break;
                    case"]":sChar=")";
                    break
                }
                return sChar
            })
        }
        ,get:function(elEl,sKey){
            var oRegExp=this._getRegExp(sKey);
            var elResult=this._checkElement(elEl,oRegExp);
            if(elResult){
                return(this.last()||"").split(",")
            }
            return null
        }
        ,remove:function(elEl,sKey){
            var oRegExp=this._getRegExp(sKey);
            elEl.className=elEl.className.replace(oRegExp,"$4").replace(/(^\s+|\s+$)/g,"");
            return elEl
        }
        ,last:function(){
            return this._lastValue
        }
        ,getParent:function(elEl,sKey,aVars){
            var oRegExp=this._getRegExp(sKey,aVars);
            var elRet;
            var bHasClass=false;
            try{
                bHasClass="className" in elEl
            }
            catch(e){}for(;
            elEl&&bHasClass;
            elEl=elEl.parentNode){
                if(elRet=this._checkElement(elEl,oRegExp)){
                    return elRet
                }
                
            }
            return null
        }
        ,getChild:function(elEl,sKey,aVars){
            if(elEl===document&&typeof aVars==="undefined"){
                this._gatherCollection();
                var elRet=this._oCollection[sKey];
                if(elRet&&this._isInHTML(elRet)){
                    return elRet
                }
                return J.$$.getSingle("div."+sKey)||J.$$.getSingle("."+sKey)
            }
            var oRegExp=this._getRegExp(sKey,aVars);
            var aChilds=elEl.getElementsByTagName("*");
            for(var i=0,elChild;
            elChild=aChilds[i];
            i++){
                if(elRet=this._checkElement(elChild,oRegExp)){
                    return elRet
                }
                
            }
            return null
        }
        ,getChildAll:function(elEl,sKey,aVars){
            var aRet=[];
            var sTagName="*";
            if(/^([a-z0-9]+)\./.test(sKey)){
                sTagName=RegExp.$1;
                sKey=sKey.replace(/^([a-z0-9]+)\./,"")
            }
            var oRegExp=this._getRegExp(sKey,aVars);
            var elRet;
            var aChilds=elEl.getElementsByTagName(sTagName);
            for(var i=0,elChild;
            elChild=aChilds[i];
            i++){
                if(elRet=this._checkElement(elChild,oRegExp)){
                    aRet.push(elRet)
                }
                
            }
            return aRet
        }
        ,_getRegExp:function(sKey,aVars){
            if(aVars){
                var sEscapedKey=sKey+("("+this._encode(aVars).join(",")+")").replace(/([\/\(\)\[\]\+\.\*\?\|\{\}\\])/g,"\\$1");
                return new RegExp("(^|\\s+)"+sEscapedKey+"(\\s+|$)","i")
            }
            return new RegExp("(^|\\s+)"+sKey+"(\\(([^)]*)\\))?(\\s+|$)","i")
        }
        ,_checkElement:function(elEl,oRegExp){
            if(oRegExp.test(elEl.className)){
                this._lastValue=this._decode(RegExp.$3);
                return elEl
            }
            return null
        }
        ,_gatherCollection:function(){
            if(this._oCollection){
                return
            }
            var oCollection={};
            var aEls=document.getElementsByTagName("*");
            var rReg=/(^|\b)_(\w+)(?=\(|\b|$)/g;
            for(var i=0,elEl;
            elEl=aEls[i];
            i++){
                var aResult=elEl.className.match(rReg);
                if(aResult){
                    for(var j=0,nLen=aResult.length;
                    j<nLen;
                    j++){
                        if(!oCollection[aResult[j]]){
                            oCollection[aResult[j]]=elEl
                        }
                        
                    }
                    
                }
                
            }
            this._oCollection=oCollection
        }
        ,_isInHTML:function(elEl){
            do{
                if(elEl===document.body){
                    return true
                }
                
            }
            while(elEl=elEl.parentNode);
            return false
        }
        
    }
    
})();
nhn=(typeof nhn!=="undefined")?nhn:{};
nhn.comment=nhn.comment||{};
nhn.comment.mobile=nhn.comment.mobile||{};
nhn.comment.mobile.Util=nhn.comment.mobile.Util||{};
(function(){
    var J=window.nhn.comment.mobile.jindo||jindo,Comment=nhn.comment.mobile,Util=nhn.comment.mobile.Util;
    nhn.comment.mobile.NAME="nhn.comment.mobile";
    nhn.comment.mobile.VERSION="1.0.0.4641";
    Util.Bubbler=J.$Class({
        $init:function(elEl){
            this._el=elEl;
            this._eventTypes={};
            this._fpEventHandler=J.$Fn(this._eventHandler,this)
        }
        ,attach:function(sEvent,fpHandler){
            if(typeof sEvent=="object"){
                var fp=arguments.callee;
                J.$H(sEvent).forEach(function(f,k){
                    fp.call(this,k,f)
                }
                ,this);
                return this
            }
            if(J.$Agent().navigator().msafari){
                sEvent=sEvent.replace(/:mousedown$/,":touchstart").replace(/:mousemove$/,":touchmove").replace(/:mouseup$/,":touchend")
            }
            var aParsed=sEvent.split(":");
            var sClassName=aParsed[0];
            var sType=aParsed[1].toLowerCase();
            var sNot=/^!/.test(sClassName)?"T":"F";
            sClassName=sClassName.replace(/^!/,"");
            var sRealType=sType;
            if(sRealType=="mouseenter"){
                sRealType="mouseover"
            }
            else{
                if(sRealType=="mouseleave"){
                    sRealType="mouseout"
                }
                
            }
            if(!(sType in this._eventTypes)){
                this._eventTypes[sType]=J.$H();
                this._fpEventHandler.attach(this._el,sRealType)
            }
            var whClassNames=this._eventTypes[sType];
            if(!whClassNames.hasKey(sClassName)){
                whClassNames.$(sClassName,{
                    T:J.$A(),F:J.$A()
                })
            }
            whClassNames.$(sClassName)[sNot].push(fpHandler);
            return this
        }
        ,detach:function(sEvent,fpHandler){
            if(typeof sEvent=="object"){
                var fp=arguments.callee;
                J.$H(sEvent).forEach(function(f,k){
                    fp.call(this,k,f)
                }
                ,this);
                return this
            }
            if(J.$Agent().navigator().msafari){
                sEvent=sEvent.replace(/:mousedown$/,":touchstart").replace(/:mousemove$/,":touchmove").replace(/:mouseup$/,":touchend")
            }
            var aParsed=sEvent.split(":");
            var sClassName=aParsed[0];
            var sType=aParsed[1].toLowerCase();
            var sNot=/^!/.test(sClassName)?"T":"F";
            sClassName=sClassName.replace(/^!/,"");
            var whClassNames=this._eventTypes[sType];
            var waHandlers=whClassNames.$(sClassName)[sNot];
            if(waHandlers){
                var nIndexOf=waHandlers.indexOf(fpHandler);
                if(nIndexOf!=-1){
                    waHandlers.splice(nIndexOf,1)
                }
                
            }
            
        }
        ,_eventHandler:function(oEvent){
            var sType=oEvent.type.toLowerCase();
            var sAltType=null;
            if(sType=="mouseover"){
                sAltType="mouseenter"
            }
            else{
                if(sType=="mouseout"){
                    sAltType="mouseleave"
                }
                
            }
            if(sAltType){
                this._launchEventHandlers(oEvent,this._eventTypes[sAltType],true)
            }
            this._launchEventHandlers(oEvent,this._eventTypes[sType]);
            oEvent=null
        }
        ,_launchEventHandlers:function(oEvent,whClassNames,bAltType){
            if(!whClassNames){
                return
            }
            var elSrc=oEvent.element;
            var elRelSrc=oEvent.relatedElement;
            whClassNames.forEach(function(oHandlers,sClassName){
                var waHandlers=oHandlers.F;
                var waNotHandlers=oHandlers.T;
                var elTar=Util.DomData.getParent(elSrc,sClassName);
                if(!elTar){
                    waNotHandlers.forEach(function(fpHandler){
                        fpHandler(oEvent)
                    });
                    J.$H.Continue()
                }
                if(bAltType){
                    var elRelTar=Util.DomData.getParent(elRelSrc,sClassName);
                    if(elTar===elRelTar){
                        waNotHandlers.forEach(function(fpHandler){
                            fpHandler(oEvent)
                        });
                        J.$H.Continue()
                    }
                    
                }
                var aArgs=Util.DomData.get(elTar,sClassName);
                waHandlers.forEach(function(fpHandler){
                    fpHandler(oEvent,elTar,aArgs)
                });
                elTar=null
            }
            ,this)
        }
        
    })
})();
nhn=(typeof nhn!=="undefined")?nhn:{};
nhn.comment=nhn.comment||{};
nhn.comment.mobile=nhn.comment.mobile||{};
(function(){
    var J=window.nhn.comment.mobile.jindo||jindo,Comment=nhn.comment.mobile,Util=nhn.comment.mobile.Util;
    nhn.comment.mobile.NAME="nhn.comment.mobile";
    nhn.comment.mobile.VERSION="1.0.0.4641";
    Comment.Config=J.$Class({
        message:{},$init:function(htOptions){
            this.instance={};
            this._initDefaultConfig();
            this._initConvertOption();
            if(typeof htOptions=="object"){
                this.option(htOptions)
            }
            Util.preventTapHighlightForJindoNotSupported();
            Util.arraySetJindoNotSupported()
        }
        ,_initDefaultConfig:function(){
            this.option("servicePath","comments");
            this.option("isLogin",false);
            this.option("objectUrl",""+document.location);
            this.option("certUrl","https://nid.naver.com/user/mobile_rncheck.nhn?todo=start");
            this.option("loginUrl","https://nid.naver.com/nidlogin.login?svctype=262144");
            this.option("browser",J.$Agent().navigator().getName());
            var serviceAddress=document.location.protocol+"//";
            serviceAddress+=document.location.host+"/";
            serviceAddress+=this.option("servicePath")+"/";
            this.option("serviceAddress",serviceAddress);
            this.option("categoryId","default");
            this.option("viewCategoryId",undefined);
            this.option("method","post");
            this.option("pageSize",25);
            this.option("pageNo",1);
            this.option("useMoreContent",true);
            this.option("isRedirectAfterDelete",false);
            this.option("formation",["count","write","list","page"]);
            this.option("commands",["delete"]);
            this.option("isHideWriteForm",false);
            this.option("maximumCommentLength",500);
            this.option("enableMultiLine",false);
            this.option("useEscapeHtml",true);
            this.option("myNickName","");
            this.option("dateFormat","Y-m-d H:i");
            this.option("booleans",{});
            this.option("comment",[]);
            this.option("convention",{});
            this.option("initialized",false);
            this.option("pagingParameterName","page");
            this.option("hidePageAreaIfOnlyOnePageExist",true);
            this.option("maxDepth",3);
            var htDeviceInfo=J.m.getDeviceInfo();
            this.option("isBIos",(htDeviceInfo.iphone||htDeviceInfo.ipad));
            this.option("errorHandlers",{});
            this.option({
                elements:{
                    body:"#comment_module",countArea:".__comment_info",count:".__comment_count",writeboxRoot:".__comment_writebox_root_area",writebox:".__comment_writebox",textarea:"textarea",writeButton:".__comment_write_btn",list:".__comment_list",paginate:".__comment_page_area",pagemore:".__comment_page_more",pagenavigation:".__comment_page_navigation",commandArea:".__comment_command"
                }
                
            });
            this.option({
                css:{
                    commentItem:"__comment_item",commendDel:"__comment_del_btn",commendReport:"__comment_report_btn",textarea:"__comment_textarea",writeButton:"__comment_write_btn",replyItem:"__reply_item",noList:"__comment_no_list",writePrompt:"__comment_write_prompt"
                }
                
            });
            this.option({
                templates:{
                    countArea:'<div class="u_comment_top __comment_info"></div>',countSimple:'<div><span class="u_comment_sum __comment_count">총 {=count}건</span><span class="__comment_writebox_view"><a class="u_comment_btn " href="#">리뷰 쓰기</a></span></div>',rootWriteBoxArea:'<div class="u_comment_write __comment_writebox_root_area"></div>',replyWriteBoxArea:'<div class="__reply_item({=commentNo})" style="display:none;"></div>',writeBox:'<form action="#" method="post"><fieldset class="__comment_writebox"><legend class="u_hc">댓글입력</legend><div><label class="u_hc" for="upload_txt">댓글</label><span class="u_comment_input"><textarea id="upload_txt" class="u_comment_upload __comment_textarea(0)" rows="5" cols="30"></textarea></span><input class="u_comment_ulbtn __comment_write_btn" type="button" value="등록"></div><p class="u_comment_promt __comment_write_prompt(0)">{=writePrompt}</p></fieldset></form>',replyWriterArea:'<span class="u_comment_reply_writer u_comment_reply_writer{=replyLevel} __reply_writer">{=myNickName}</span>',replyBox:'<div class="u_comment_write u_comment_reply_area u_comment_reply_area{=replyLevel} __reply_item({=commentNo})"><form action="#" method="post"><fieldset><legend class="u_hc">댓글입력</legend><div><label class="u_hc" for="upload_txt{=commentNo}">댓글</label><span class="u_comment_input"><textarea id="upload_txt{=commentNo}" class="u_comment_upload __comment_textarea({=commentNo})" rows="5" cols="30"></textarea></span><input class="u_comment_reply_ulbtn __comment_write_btn" type="button" value="등록"></div><p class="u_comment_promt __comment_write_prompt({=commentNo})">{=writePrompt}</p></fieldset></form></div>',writePrompt:"최대 {=maximumCommentLength}자 까지 작성할 수 있으며, 주제와 무관한 댓글, 악플은 삭제될 수 있습니다.",list:'<ul class="__comment_list">{=noList}{=emptyComment}</ul>',noList:'<li class="u_comment_lst u_no_lst __comment_no_list" style="display:none;"><div><span class="u_no_data">데이터가 존재하지 않습니다.</span></div></li>',comment:'<li class="u_comment_lst u_comment_lst{=replyLevel} __comment_item({=commentNo})"><div><span class="u_comment_data u_comment_span_data{=replyLevel}">{if replyLevel > 1}<span>{=writerNickName} ({=writerId})</span>{else}{=writerNickName} ({=writerId}){/if} {=registeredDate}</span><span class="u_commont_lstbtn u_comment_lstbtn{=replyLevel} __comment_command"></span></div><div><p class="u_comment_txt u_comment_txt{=replyLevel}" style="word-break:break-all;line-break: all;word-wrap:break-word;">{=contents}</p></div>{if maxDepth > replyLevel}<a class="reply __comment_reply_form_btn" href="#">덧글쓰기</a>{/if}</li>',deleteComment:'<li class="u_comment_lst u_delete_comment_lst{=replyLevel} __comment_item({=commentNo})"><div><span class="u_comment_data u_delete_comment_span_data{=replyLevel}">{if replyLevel > 1}<span>{=writerNickName} ({=writerId})</span>{else}{=writerNickName} ({=writerId}){/if} {=registeredDate}</span><span class="u_commont_lstbtn u_delete_comment_lstbtn{=replyLevel} __comment_command"></span></div><div><p class="u_comment_txt u_delete_comment_txt{=replyLevel}" style="word-break:break-all;line-break: all;word-wrap:break-word;">댓글이 삭제되었습니다.</p></div></li>',blockComment:'<li class="u_comment_lst u_block_comment_lst{=replyLevel} __comment_item({=commentNo})"><div><span class="u_comment_data u_delete_comment_span_data{=replyLevel}">{if replyLevel > 1}<span>{=writerNickName} ({=writerId})</span>{else}{=writerNickName} ({=writerId}){/if} {=registeredDate}</span><span class="u_commont_lstbtn __comment_command"></span></div><div><p class="u_comment_txt" style="word-break:break-all;line-break: all;word-wrap:break-word;">{if status == 7 }본 게시물은 저작권법 제103조에 의거하여 저작권자의 요청으로 임시 게시중단 되었습니다.{elseif status == 8 || status == 9}본 게시물은 정보통신망이용촉진및정보보호등에 관한 법률 제44조의2를 준수하기 위해 다른 이용자의 요청으로 임시 게시중단 되었습니다.{/if}</p></div></li>',emptyComment:'<li class="u_comment_lst u_empty_comment_lst __comment_item(empty)" style="display:none;"><div><p class="u_comment_txt u_emtpy_comment_txt" style="word-break:break-all;line-break: all;word-wrap:break-word;">. . .</p></div></li>',deleteCommand:'{if isMine}<a href="#" class="u_comment_delbtn __comment_del_btn"><span class="u_hc">삭제</span></a>{/if}',reportCommand:'{if !isMine}<a href="#" class="u_comment_reportbtn __comment_report_btn"><span class="u_hc">신고</span></a>{/if}',reportForm:'<form id="commentReportForm" method="GET"><input type="hidden" name="itemSvcCd" id="itemSvcCd" value="CBM"/><input type="hidden" name="itemType" id="itemType" value="CMNT"/><input type="hidden" name="itemVirtualSvcCd" id="itemVirtualSvcCd" value=""/><input type="hidden" name="itemId" id="itemId" value=""/><input type="hidden" name="itemTitle" id="itemTitle" value=""/><input type="hidden" name="itemCateId" id="itemCateId" class="itemCateId0" value=""/><input type="hidden" name="itemCateName" id="itemCateName" class="itemCateName0" value=""/><input type="hidden" name="itemCateLevel" id="itemCateLevel" class="itemCateLevel0" value=""/><input type="hidden" name="itemWriterId" id="itemWriterId" value=""/><input type="hidden" name="itemEncyptWriterId" id="itemEncyptWriterId" value=""/><input type="hidden" name="itemWriterNick" id="itemWriterNick"/><input type="hidden" name="itemDt" id="itemDt" value=""/><input type="hidden" name="m" id="m" value="rprtMobileFrm"/><input type="hidden" name="retUrl" id="retUrl" value=""/><input type="submit" style="display:none;"/></form>',pageArea:'<div class="__comment_page_area"></div>',pageMore:'<div class="u_pg __comment_page_more"><a href="#" class="u_pg_btn __comment_more_button"><span class="u_pg_wrap"><span class="u_pg_area"><span class="u_pg_lod __comment_more_loading" style="display:none;"><span class="u_pg_lodic">로딩중..</span></span><span class="u_pg_txt"><span><span class="__comment_more_moreCnt"></span>개 더보기</span><br/><span class="u_pg_cnt"><span class="__comment_more_current"></span> / <span class="u_pg_total __comment_more_total"></span></span></span></span></span></a><span class="u_pg_btn __comment_more_last" style="display:none;"><span class="u_pg_wrap"><span class="u_pg_area"><span class="u_pg_txt"><span class="u_pg_cnt"><span class="__comment_more_current"></span> / <span class="u_pg_total __comment_more_total"></span></span></span></span></span></span><a href="#" class="u_pg_top __comment_more_top">맨위로</a></div>',pageNavigation:'<div class="u_pg2 __comment_page_navigation"><a href="#" class="u_pg2_btn __comment_page_prev"><span class="u_pg2_prev">이전</span></a><span class="u_pg2_btn __comment_page_prev-off"><span class="u_pg2_prev">이전</span></span><em class="u_pg2_pg __comment_page_info">1-10 <span class="u_pg2_total">/ </span></em><a href="#" class="u_pg2_btn __comment_page_next"><span class="u_pg2_next">다음</span></a><span class="u_pg2_btn __comment_page_next-off"><span class="u_pg2_next">다음</span></span></div>',pageInfoTemplate:'{=STARTINDEX}-{=ENDINDEX}<span class="u_pg2_total">/ {=ITEMCOUT}</span>'
                }
                
            })
        }
        ,_initConvertOption:function(){
            var booleans=this.option("booleans");
            booleans.isMine=true;
            booleans.isAdmin=true;
            booleans.isReply=true;
            booleans.isDeleted=true;
            booleans.isVisible=true;
            booleans.isAuthor=true;
            booleans.isAuthorComment=true;
            booleans.isUserRecommend=true;
            booleans.isAuthorRecommend=true;
            booleans.isRecommendArea=true;
            booleans.isMobile=true;
            var comment=this.option("comment");
            comment.push("parentCommentNo");
            comment.push("commentNo");
            comment.push("writerNickName");
            comment.push("writerId");
            comment.push("writerIp");
            comment.push("maskedWriterId");
            comment.push("isMine");
            comment.push("isAdmin");
            comment.push("contents");
            comment.push("registeredDate");
            comment.push("modifiedDate");
            comment.push("replyLevel");
            comment.push("isReply");
            comment.push("isDeleted");
            comment.push("isVisible");
            comment.push("writerProfileUrl");
            comment.push("writerProfileType");
            comment.push("isMe2DayPosted");
            comment.push("upCount");
            comment.push("downCount");
            comment.push("isUserRecommend");
            comment.push("isAuthorRecommend");
            comment.push("isRecommendArea");
            comment.push("isAuthor");
            comment.push("isAuthorComment");
            comment.push("replyCount");
            comment.push("objectScore");
            comment.push("status");
            comment.push("isMobile");
            comment.push("personacon");
            comment.push("categoryId");
            var convention=this.option("convention");
            convention={
                parentCommentNo:"parent_comment_no",commentNo:"comment_no",groupNo:"group_no",writerNickName:"writer_nickname",writerId:"writer_id",encodedWriterId:"enc_writer_id",maskedWriterId:"masked_writer_id",writerIp:"writer_ip",registeredDate:"registered_ymdt",modifiedDate:"modified_ymdt",replyLevel:"reply_level",typeCode:"comment_type_code",isMine:"is_mine",isAdmin:"is_admin",isReply:"is_reply",isDeleted:"deleted_yn",isVisible:"visible_yn",isMe2DayPosted:"is_me2day_posted",ticket:"ticket",objectId:"object_id",objectUrl:"object_url",replyCount:"reply_count",writerProfileUrl:"writer_profile_url",writerProfileType:"writer_profile_type",upCount:"up_count",downCount:"down_count",isUserRecommend:"user_recommend_yn",isAuthorRecommend:"author_recommend_yn",isRecommendArea:"is_recommend_area",isAuthor:"is_author",isAuthorComment:"is_author_comment",objectScore:"object_score",status:"status",isMobile:"mobile_yn",personacon:"personacon",categoryId:"category_id"
            };
            this.option("convention",convention)
        }
        ,element:function(oName,sElement){
            var htElements=this.option("elements");
            if(typeof htElements=="undefined"||htElements===null){
                htElements={};
                this.option("elements",htElements)
            }
            if(typeof oName=="object"){
                for(var sKey in oName){
                    htElements[sKey]=oName[sKey]
                }
                
            }
            else{
                if(typeof oName=="string"){
                    if(typeof sElement=="string"){
                        htElements[oName]=sElement
                    }
                    else{
                        return htElements[oName]
                    }
                    
                }
                else{
                    return null
                }
                
            }
            
        }
        ,template:function(oName,sTemplate){
            var htTemplates=this.option("templates");
            if(typeof htTemplates=="undefined"||htTemplates===null){
                htTemplates={};
                this.option("templates",htTemplates)
            }
            if(typeof oName=="object"){
                for(var sKey in oName){
                    htTemplates[sKey]=oName[sKey]
                }
                
            }
            else{
                if(typeof oName=="string"){
                    if(typeof sTemplate=="string"){
                        htTemplates[oName]=sTemplate
                    }
                    else{
                        return J.$Template(htTemplates[oName])
                    }
                    
                }
                else{
                    return null
                }
                
            }
            
        }
        ,css:function(oName,sStyle){
            var htStyles=this.option("css");
            if(typeof htStyles=="undefined"||htStyles===null){
                htStyles={};
                this.option("css",htStyles)
            }
            if(typeof oName=="object"){
                for(var sKey in oName){
                    htStyles[sKey]=oName[sKey]
                }
                
            }
            else{
                if(typeof oName=="string"){
                    if(typeof sStyle=="string"){
                        htStyles[oName]=sStyle
                    }
                    else{
                        return htStyles[oName]
                    }
                    
                }
                else{
                    return null
                }
                
            }
            
        }
        ,message:function(oName,sMessage){
            var htMessage=this.message;
            if(typeof oName=="object"){
                for(var sKey in oName){
                    htMessage[sKey]=oName[sKey]
                }
                
            }
            else{
                if(typeof oName=="string"){
                    if(typeof sMessage=="string"){
                        htMessage[oName]=sMessage
                    }
                    
                }
                
            }
            
        }
        
    }).extend(J.Component);
    Comment.Config.prototype.message.UNAVAILABLE_OPERATION="요청한 동작을 수행할 수 없습니다.";
    Comment.Config.prototype.message.ALREADY_REPORT="이미 신고된 글입니다.";
    Comment.Config.prototype.message.REPORT_COMPLETE="신고 완료 처리 되었습니다.";
    Comment.Config.prototype.message.NOT_LOGIN="로그인이 필요한 서비스 입니다.\n로그인 하시겠습니까?";
    Comment.Config.prototype.message.EXCEED_MAX_LENGTH="최대 {=max}자까지 입력할 수 있습니다.";
    Comment.Config.prototype.message.NO_CONTENTS="내용을 입력해주세요.";
    Comment.Config.prototype.message.DELETE_CONFIRM="정말 삭제하시겠습니까?";
    Comment.Config.prototype.message.CREATE_ERROR_PWORD_BLOCK="작성하신 내용에 금칙어가 포함되어 있습니다. [{=pwords}]";
    Comment.Config.prototype.message.CREATE_ERROR_PWORD_ABUSING="작성하신 내용에 사용이 제한된 문구가 포함되어 일시적으로 등록이 제한됩니다.";
    Comment.Config.prototype.message.DEFAULT_TEXT="";
    Comment.Config.prototype.message.NOT_AUTHENTICATED="정보통신망법에 따라 게시판에 글 작성 시 실명확인이 필요합니다.\n실명확인을 하시겠습니까?";
    nhn.comment.config=new Comment.Config()
})();
nhn=(typeof nhn!=="undefined")?nhn:{};
nhn.comment=nhn.comment||{};
nhn.comment.mobile=nhn.comment.mobile||{};
(function(){
    var J=window.nhn.comment.mobile.jindo||jindo,Comment=nhn.comment.mobile;
    nhn.comment.mobile.NAME="nhn.comment.mobile";
    nhn.comment.mobile.VERSION="1.0.0.4641";
    Comment.Ajax=J.$Class({
        message:{},_htDefaultErrors:{},error:{
            create:{}
        }
        ,$init:function(){
            this.option("handlers",{});
            this.option("list","list_comment.nhn");
            this.option("moreList","list_next_comment.nhn");
            this.option("create","set_comment.nhn");
            this.option("delete","delete_comment.nhn");
            this.option("isReport","isreported_comment.nhn");
            this.option("report","report_comment.nhn");
            this.option("isLogin","is_logged_in.nhn");
            this.option("checkAuth","is_authenticated_name.nhn");
            this.indexInstance=Comment.Ajax.getInstance().length-1;
            this.config=Comment.Config.getInstance()[this.indexInstance]
        }
        ,initErrorHandler:function(){
            this.setErrorHandlers({
                "403101":J.$Fn(this._handleNotLoginError,this).bind(),"301":J.$Fn(this._handleNotAuthError,this).bind()
            });
            this.setErrorHandlers(this.config.option("errorHandlers"))
        }
        ,getCommonParams:function(){
            var htParams={};
            htParams.ticket=this.config.option("ticket");
            htParams.object_id=this.config.option("objectId");
            htParams._ts=(new Date().getTime());
            if(typeof this.config.option("lkey")!="undefined"){
                htParams.lkey=this.config.option("lkey")
            }
            if(typeof this.config.option("viewCategoryId")!="undefined"){
                htParams.view_category_id=this.config.option("viewCategoryId")
            }
            if(typeof this.config.option("categoryId")!="undefined"){
                htParams.category_id=this.config.option("categoryId")
            }
            return htParams
        }
        ,getListParams:function(){
            var htParams=this.getCommonParams();
            htParams.page_size=this.config.option("pageSize");
            return htParams
        }
        ,getUrl:function(sOperation){
            var sUrl=this.config.option("serviceAddress")+this.option(sOperation);
            return sUrl
        }
        ,call:function(htOptions){
            var handler=this.option("handlers");
            delete handler[htOptions.operation];
            handler[htOptions.operation]=htOptions.onSuccess;
            var sUrl=this.getUrl(htOptions.operation);
            var req=J.$Ajax(sUrl,{
                method:this.config.option("method")||"post",async:htOptions.async?htOptions.async:false,onload:J.$Fn(this._onSuccess,this).bind(htOptions.operation,htOptions.param),onerror:J.$Fn(this._onError,this).bind(htOptions.errorMessage)
            });
            req.request(htOptions.param)
        }
        ,callSync:function(operation,param){
            var sUrl=this.getUrl(operation);
            var context={
                success:undefined,response:undefined
            };
            var req=J.$Ajax(sUrl,{
                method:this.config.option("method")||"post",async:false,onload:J.$Fn(this._onSuccessSync,this).bind(context),onerror:J.$Fn(this._onErrorSync,this).bind(context)
            });
            req.request(param);
            if(context.success){
                var errorCode=this._errorHandler(context.response,this.error[operation]);
                if(errorCode==0){
                    return context.response
                }
                
            }
            
        }
        ,_onSuccessSync:function(context,response){
            context.success=true;
            context.response=response.json()
        }
        ,_onErrorSync:function(context,response){
            context.success=false
        }
        ,_onSuccess:function(sType,htParams,oResult){
            var oMessage=oResult.json();
            if(this._errorHandler(oMessage,this.error[sType])===0){
                var fn=this.option("handlers")[sType];
                fn(oMessage,htParams)
            }
            
        }
        ,_onError:function(oMessage,oResult){
            if(typeof oMessage!="undefined"){
                alert(oMessage)
            }
            
        }
        ,_errorHandler:function(message,errorhandler){
            if(!message.error){
                return -1
            }
            var error=message.error;
            if(!error.no||error.no=="0"){
                return Number(error.no)
            }
            if(error.no=="-1"){
                alert(this.config.message.UNAVAILABLE_OPERATION);
                return Number(error.no)
            }
            if(errorhandler&&errorhandler[error.no]){
                var fnTemp=J.$Fn(errorhandler[error.no],this).bind();
                fnTemp(message)
            }
            else{
                if(this._htDefaultErrors&&this._htDefaultErrors[error.no]){
                    this._htDefaultErrors[error.no](message,this)
                }
                else{
                    alert(error.message)
                }
                
            }
            return Number(error.no)
        }
        ,setErrorHandlers:function(htHandlers){
            if(typeof htHandlers!="object"){
                return
            }
            for(var sKey in htHandlers){
                this._htDefaultErrors[sKey]=htHandlers[sKey]
            }
            
        }
        ,_handleNotLoginError:function(oResult,oThis){
            oThis.config.option("isLogin",false);
            oThis.config.instance.auth.redirectLogin()
        }
        ,_handleNotAuthError:function(oResult,oThis){
            oThis.config.option("isAuth",false);
            oThis.config.instance.auth.redirectAuth()
        }
        
    }).extend(J.Component);
    nhn.comment.ajax=new Comment.Ajax()
})();
nhn=(typeof nhn!=="undefined")?nhn:{};
nhn.comment=nhn.comment||{};
nhn.comment.mobile=nhn.comment.mobile||{};
(function(){
    var J=window.nhn.comment.mobile.jindo||jindo,Comment=nhn.comment.mobile,Util=Comment.Util;
    nhn.comment.mobile.NAME="nhn.comment.mobile";
    nhn.comment.mobile.VERSION="1.0.0.4641";
    Comment.CommentItem=J.$Class({
        $init:function(htOptions){
            this.indexInstance=htOptions.indexInstance;
            this.config=Comment.Config.getInstance()[this.indexInstance];
            var _values=this.config.option("comment");
            var _convention=this.config.option("convention");
            var _booleans=this.config.option("booleans");
            for(var i=0;
            i<_values.length;
            i++){
                var key=_convention[_values[i]];
                if(typeof key=="undefined"){
                    key=_values[i]
                }
                var value=htOptions[key];
                if(_booleans[_values[i]]){
                    value=(value=="Y")
                }
                this.option(_values[i],value)
            }
            this.option("maxDepth",this.config.option("maxDepth"));
            this.option("config",this.config)
        }
        ,createItem:function(welParent,nPreSiblingCommentNo){
            var sTplComment=null;
            if(this.option("isDeleted")){
                sTplComment=this.config.template("deleteComment")
            }
            else{
                if(Util.isInterruptedComment(this.option("status"))){
                    sTplComment=this.config.template("blockComment")
                }
                else{
                    sTplComment=this.config.template("comment")
                }
                
            }
            var sComment=sTplComment.process(this.option());
            var welComment=J.$Element(sComment);
            if(nPreSiblingCommentNo==0){
                welParent.prepend(welComment)
            }
            else{
                var welPreSiblingLi=J.$Element(this.config.instance.listarea.getElCommentLiTag(nPreSiblingCommentNo));
                welPreSiblingLi.after(welComment)
            }
            this._populateCommand(welComment);
            this._createReplyWriteBox(welComment)
        }
        ,_populateCommand:function(welComment){
            if(welComment==null){
                return
            }
            var welCommandArea=J.$Element(welComment.query(this.config.element("commandArea")));
            if(welCommandArea==null){
                return
            }
            var sCommandText=this._createCommand();
            if(sCommandText==null){
                return
            }
            welCommandArea.appendHTML(sCommandText)
        }
        ,_createReplyWriteBox:function(welComment){
            this.option("isLogin",this.config.option("isLogin"));
            this.option("maximumCommentLength",this.config.option("maximumCommentLength"));
            this.config.instance.writearea.createReplyArea(welComment,this.option())
        }
        ,_createCommand:function(){
            var aCommands=this.config.option("commands");
            var sOperation="",sText="",aCommandText=[];
            for(var i=0;
            i<aCommands.length;
            i++){
                sText="";
                sOperation=aCommands[i];
                if(this.option("isDeleted")){
                    continue
                }
                if(Util.isInterruptedComment(this.option("status"))&&!(sOperation==="delete")){
                    continue
                }
                sText=this.config.template(sOperation+"Command").process(this.option());
                if(sText==""){
                    continue
                }
                aCommandText.push(sText)
            }
            return aCommandText.join("")
        }
        ,getCommentNo:function(){
            return this.option("commentNo")
        }
        ,getReplyLevel:function(){
            return this.option("replyLevel")
        }
        ,getRegisteredDate:function(){
            return this.option("registeredDate")
        }
        ,isDeleted:function(){
            return this.option("isDeleted")==true
        }
        
    }).extend(J.Component)
})();
nhn=(typeof nhn!=="undefined")?nhn:{};
nhn.comment=nhn.comment||{};
nhn.comment.mobile=nhn.comment.mobile||{};
(function(){
    var J=window.nhn.comment.mobile.jindo||jindo,Comment=nhn.comment.mobile,Util=nhn.comment.mobile.Util;
    nhn.comment.mobile.NAME="nhn.comment.mobile";
    nhn.comment.mobile.VERSION="1.0.0.4641";
    Comment.Command=J.$Class({
        $init:function(){
            this.indexInstance=Comment.Command.getInstance().length-1;
            this.config=Comment.Config.getInstance()[this.indexInstance]
        }
        ,deleteComment:function(oEvent,elItem){
            oEvent.stop();
            var deleteConfirmMessage=this.config.message.DELETE_CONFIRM;
            if(!confirm(deleteConfirmMessage)){
                return false
            }
            var htParams=this.config.instance.ajax.getListParams();
            htParams.comment_no=this.getCommentNo(elItem);
            htParams.page_no=this.config.instance.pagearea.getPageNo();
            this.config.instance.ajax.call({
                operation:"delete",onSuccess:J.$Fn(this._onDeleteComment,this).bind(),param:htParams
            })
        }
        ,reportComment:function(oEvent,elItem){
            oEvent.stop();
            var params={};
            params.ticket=this.config.option("ticket");
            params.object_id=this.config.option("objectId");
            params.comment_no=this.getCommentNo(elItem);
            var response=this.config.instance.ajax.callSync("isReport",params);
            if(response){
                if(response.reported_yn===0){
                    var url=document.location.protocol+"//"+document.location.host+"/comments/get_report_information.nhn";
                    if(params.ticket==""||params.commentNo=="-1"){
                        alert(commonMessage.openFail)
                    }
                    J.$Ajax(url,{
                        async:false,onload:this.redirectCommonReport
                    }).request({
                        comment_no:params.comment_no,ticket:params.ticket,object_id:params.object_id,is_mobile:params.is_mobile,retUrl:params.retUrl
                    })
                }
                else{
                    alert(this.config.message.ALREADY_REPORT)
                }
                
            }
            
        }
        ,redirectCommonReport:function(result){
            var message=result.json();
            var categoryList=message.category;
            var report=J.$Form("commentReportForm");
            report.$value().action=message.srp_url;
            report.value("itemVirtualSvcCd",message.virtual_service_code);
            report.value("itemId",message.content_id);
            report.value("itemTitle",message.contents);
            var categoryId="";
            var categoryIds=new Array();
            var categoryNames=new Array();
            var categoryLevels=new Array();
            for(var index in categoryList){
                var category=categoryList[index];
                if(categoryId.length>0){
                    categoryId+=";"
                }
                categoryId+=category.category_id;
                categoryIds.push(categoryId);
                categoryNames.push(category.category_name);
                categoryLevels.push(category.category_level)
            }
            report.value("itemCateId",categoryIds);
            report.value("itemCateName",categoryNames);
            report.value("itemCateLevel",categoryLevels);
            report.value("itemWriterId",message.masked_writer_id);
            report.value("itemEncyptWriterId",unescape(message.writer_id));
            report.value("itemWriterNick",message.writer_nickname);
            report.value("itemDt",message.registered_ymdt);
            report.value("retUrl",encodeURIComponent(window.location.href));
            report.submit()
        }
        ,getCommentNo:function(elItem){
            var sItemClass=this.config.css("commentItem");
            var elParent=Util.DomData.getParent(elItem,sItemClass);
            Util.DomData.get(elParent,sItemClass);
            return Util.DomData.last()
        }
        ,_onDeleteComment:function(oResponse,htParams){
            if(this.config.option("isBIos")&&!this.config.option("isRedirectAfterDelete")){
                this.config.instance.listarea.deleteCommentForIos(htParams.comment_no)
            }
            else{
                if(!this.config.option("isRedirectAfterDelete")){
                    this.config.instance.listarea.refreshWithTheResult(oResponse)
                }
                else{
                    var htParam={};
                    htParam[this.config.option("pagingParameterName")]=this.config.option("pageNo");
                    Util.movePage(this.config.option("objectUrl"),htParam)
                }
                
            }
            var oResult={};
            oResult.commentNo=htParams.comment_no;
            oResult.totalCount=this.config.instance.pagearea.getTotalCount();
            this._processAfterDelete(oResult)
        }
        ,_processAfterDelete:function(oResult){
            this.config.fireEvent("afterDelete",{
                result:oResult
            })
        }
        ,toggleReplyForm:function(oEvent,elItem){
            oEvent.stop();
            var sCommentNo=this.getCommentNo(elItem);
            var welReplyForm=J.$Element(Util.DomData.getChild(this.config.instance.listarea.getAreaElement().$value(),this.config.css("replyItem"),[sCommentNo]));
            this.config.instance.listarea.toggleTargetAreaDependsOnLoginAndAuth(welReplyForm)
        }
        
    }).extend(J.Component);
    nhn.comment.command=new Comment.Command()
})();
nhn=(typeof nhn!=="undefined")?nhn:{};
nhn.comment=nhn.comment||{};
nhn.comment.mobile=nhn.comment.mobile||{};
(function(){
    var J=window.nhn.comment.mobile.jindo||jindo,Comment=nhn.comment.mobile,Util=nhn.comment.mobile.Util;
    nhn.comment.mobile.NAME="nhn.comment.mobile";
    nhn.comment.mobile.VERSION="1.0.0.4641";
    Comment.CountArea=J.$Class({
        $init:function(){
            this._welArea=null;
            this.indexInstance=Comment.CountArea.getInstance().length-1;
            this.config=Comment.Config.getInstance()[this.indexInstance]
        }
        ,createArea:function(){
            this._welArea=J.$Element(this.config.template("countArea").process());
            return this._welArea
        }
        ,afterCreateArea:function(){
            this.update(0);
            this._createBubbler()
        }
        ,getAreaElement:function(){
            return this._welArea
        }
        ,update:function(nTotalCount){
            var elCount=null;
            this.getAreaElement().empty();
            elCount=this.config.template("countSimple").process({
                count:nTotalCount
            });
            this.getAreaElement().append(elCount)
        }
        ,_createBubbler:function(){
            this._oBubbler=new Util.Bubbler(this.getAreaElement().$value()).attach({
                "__comment_writebox_view:click":J.$Fn(this._onClickWriteboxView,this).bind()
            });
            this.getAreaElement().preventTapHighlight(true)
        }
        ,_onClickWriteboxView:function(oEvent){
            oEvent.stop();
            this.config.instance.listarea.toggleTargetAreaDependsOnLoginAndAuth(this.config.instance.writearea.getAreaElement())
        }
        
    }).extend(J.Component);
    nhn.comment.countarea=new Comment.CountArea()
})();
nhn=(typeof nhn!=="undefined")?nhn:{};
nhn.comment=nhn.comment||{};
nhn.comment.mobile=nhn.comment.mobile||{};
(function(){
    var J=window.nhn.comment.mobile.jindo||jindo,Comment=nhn.comment.mobile,Util=Comment.Util;
    nhn.comment.mobile.NAME="nhn.comment.mobile";
    nhn.comment.mobile.VERSION="1.0.0.4641";
    Comment.WriteArea=J.$Class({
        $init:function(){
            this._whtWriteArea=J.$H({});
            this._welArea=null;
            this._welTextarea=null;
            this.indexInstance=Comment.WriteArea.getInstance().length-1;
            this.config=Comment.Config.getInstance()[this.indexInstance]
        }
        ,createArea:function(){
            this._welArea=J.$Element(this.config.template("rootWriteBoxArea").process());
            return this._welArea
        }
        ,afterCreateArea:function(){
            this._createWriteBox();
            this._createBubbler(this._welArea,this._welTextarea)
        }
        ,createReplyArea:function(welComment,htOptions){
            if(welComment==null||htOptions==null){
                return
            }
            var sReplyWriteArea=this.config.template("replyWriteBoxArea").process(htOptions);
            var welReplyWriteArea=J.$Element(sReplyWriteArea);
            var sReplyWriterArea=this._createReplyWriterAreaHtml(htOptions.replyLevel);
            welReplyWriteArea.append(J.$Element(sReplyWriterArea));
            htOptions.writePrompt=this._createWritePromptHtml(0);
            var sWriteBox=this.config.template("replyBox").process(htOptions);
            welReplyWriteArea.append(J.$Element(sWriteBox));
            welComment.append(welReplyWriteArea);
            var welTargetTextarea=J.$Element(Util.DomData.getChild(welReplyWriteArea.$value(),this.config.css("textarea")));
            welTargetTextarea.text(this.config.message.DEFAULT_TEXT);
            this._createBubbler(welReplyWriteArea,welTargetTextarea)
        }
        ,_createReplyWriterAreaHtml:function(sReplyLevel){
            var htParam={};
            htParam.replyLevel=sReplyLevel;
            htParam.myNickName=this.config.option("myNickName");
            return this.config.template("replyWriterArea").process(htParam)
        }
        ,_createWritePromptHtml:function(sLength){
            return this.config.template("writePrompt").process({
                maximumCommentLength:this.config.option("maximumCommentLength"),inputCommentLength:sLength
            })
        }
        ,_updatePromptArea:function(sTargetCommentNo,sLength){
            var elTargetPrompt=Util.DomData.getChild(this.config.instance.core.getBody().$value(),this.config.css("writePrompt"),[sTargetCommentNo]);
            if(elTargetPrompt==null){
                return
            }
            var sWritePrompt=this._createWritePromptHtml(sLength);
            J.$Element(elTargetPrompt).html(sWritePrompt)
        }
        ,getAreaElement:function(){
            return this._welArea
        }
        ,show:function(){
            this._welArea.show()
        }
        ,focus:function(sTargetCommentNo){
            this._getTargetTextarea(sTargetCommentNo).$value().focus()
        }
        ,blur:function(sTargetCommentNo){
            this._getTargetTextarea(sTargetCommentNo).$value().blur()
        }
        ,_createWriteBox:function(){
            var sWritePrompt=this._createWritePromptHtml(0);
            var sWriteBox=this.config.template("writeBox").process({
                isLogin:this.config.option("isLogin"),writePrompt:sWritePrompt
            });
            var welWriteBox=J.$Element(sWriteBox);
            this._welArea.append(welWriteBox);
            this._welTextarea=J.$Element(welWriteBox.query(this.config.element("textarea")));
            this._welTextarea.text(this.config.message.DEFAULT_TEXT);
            if(this.config.option("isHideWriteForm")){
                this._welArea.hide()
            }
            else{
                this._welArea.show()
            }
            
        }
        ,_createBubbler:function(welTargetWriteArea,welTargetTextArea){
            this._oBubbler=new Util.Bubbler(welTargetWriteArea.$value()).attach({
                "__comment_textarea:keydown":J.$Fn(this._onKeyDownWriteBox,this).bind(),"__comment_write_btn:click":J.$Fn(this._onClickWriteBtn,this).bind()
            });
            J.$Fn(this._onBlurWriteBox,this).attach(welTargetTextArea.$value(),"blur");
            J.$Fn(this._onFocusWriteBox,this).attach(welTargetTextArea.$value(),"focus");
            welTargetWriteArea.preventTapHighlight(true)
        }
        ,releaseBubbler:function(sCommentNo){
            var elTargetTextArea=Util.DomData.getChild(this.config.instance.listarea.getAreaElement().$value(),this.config.css("textarea"),[sCommentNo]);
            J.$Fn(this._onBlurWriteBox,this).detach(elTargetTextArea,"blur");
            J.$Fn(this._onFocusWriteBox,this).detach(elTargetTextArea,"focus")
        }
        ,_onFocusWriteBox:function(oEvent){
            this._afterFocus(oEvent)
        }
        ,_afterFocus:function(oEvent){
            var welTextarea=J.$Element(oEvent.$value().target);
            if(welTextarea==null){
                welTextarea=J.$Element(oEvent.element)
            }
            this._hideDefaultText(welTextarea)
        }
        ,_onBlurWriteBox:function(oEvent){
            var welTextarea=J.$Element(oEvent.$value().target);
            if(welTextarea==null){
                welTextarea=J.$Element(oEvent.element)
            }
            this._showDefaultText(welTextarea)
        }
        ,_onKeyDownWriteBox:function(oEvent){
            setTimeout(J.$Fn(this._doAfterKeyDownEvent,this).bind(oEvent),10)
        }
        ,_doAfterKeyDownEvent:function(oEvent){
            var elTarget=oEvent.$value().target;
            if(elTarget==null){
                elTarget=oEvent.element
            }
            var sTargetCommentNo=Util.DomData.get(elTarget,this.config.css("textarea"))[0];
            if(Util.isFunctionalKey(oEvent.key().keyCode)){
                var welTextArea=this._getTargetTextarea(sTargetCommentNo);
                this._whtWriteArea.$(sTargetCommentNo,welTextArea.text());
                this._updatePromptArea(sTargetCommentNo,J.$S(welTextArea.text()).trim().$value().length);
                return
            }
            this._detectOverMaxLength(sTargetCommentNo)
        }
        ,_onClickWriteBtn:function(oEvent){
            oEvent.stop();
            if(!this.config.instance.auth.redirectLogin()){
                return
            }
            if(!this.config.instance.auth.redirectAuth()){
                return
            }
            var welForm=J.$Element(oEvent.element).parent(function(v){
                return v.tag=="form"
            })[0];
            var elTextArea=Util.DomData.getChild(welForm.$value(),this.config.css("textarea"));
            var welTextarea=J.$Element(elTextArea);
            var sTargetCommentNo=Util.DomData.get(elTextArea,this.config.css("textarea"))[0];
            var sText=Util.trim(welTextarea.text());
            if(!Util.validation(sText,1,this.config.option("maximumCommentLength"),this.config.message.NO_CONTENTS,false,this.config.message.EXCEED_MAX_LENGTH)){
                this.focus(sTargetCommentNo);
                return
            }
            if(sText.length===0||Util.compareTextWithoutRetuneChar(sText,this.config.message.DEFAULT_TEXT)){
                alert(this.config.message.NO_CONTENTS);
                this.focus(sTargetCommentNo);
                return
            }
            var oParam={};
            oParam.parent_comment_no=sTargetCommentNo;
            this._requestWrite(sText,oParam)
        }
        ,_requestWrite:function(sText,oParam){
            var htParams=this.config.instance.ajax.getCommonParams();
            htParams.page_size=this.config.option("pageSize");
            htParams.object_url=this.config.option("objectUrl");
            htParams.contents=sText;
            htParams.mobile_yn="Y";
            for(var prop in oParam){
                htParams[prop]=oParam[prop]
            }
            if(!this._processBeforeWrite(htParams)){
                return
            }
            this.config.instance.ajax.call({
                operation:"create",onSuccess:J.$Fn(this._onWrite,this).bind(),errorMessage:this.config.message.UNAVAILABLE_OPERATION,param:htParams
            })
        }
        ,_onWrite:function(oResponse,htParams){
            this._initTargetWriteArea(htParams.parent_comment_no);
            if(!this._processAfterWrite(this._extractCreatedCommentFromResponse(oResponse))){
                return
            }
            if(this.config.option("isBIos")){
                this._writeForIos(oResponse,htParams);
                return
            }
            this._writeForAndroid(oResponse,htParams)
        }
        ,_initTargetWriteArea:function(sCommentNo){
            this._hideTargetReplyForm(sCommentNo);
            this._getTargetTextarea(sCommentNo).text(this.config.message.DEFAULT_TEXT);
            this._updatePromptArea(sCommentNo,0)
        }
        ,_writeForAndroid:function(oResponse,htParams){
            this.config.instance.listarea.refreshWithTheResult(oResponse)
        }
        ,_processBeforeWrite:function(htParam){
            return this.config.fireEvent("beforeWrite",{
                oParam:htParam
            })
        }
        ,_processAfterWrite:function(htResultComment){
            return this.config.fireEvent("afterWrite",{
                oResultComment:htResultComment
            })
        }
        ,_writeForIos:function(oResponse,htParams){
            var oRawCreatedComment=this._extractCreatedCommentFromResponse(oResponse);
            oRawCreatedComment=this.config.instance.listarea.preProcessForRawComment(oRawCreatedComment,oResponse.author_yn);
            var oComment=new Comment.CommentItem(oRawCreatedComment);
            var nPreSiblingCommentNo=this.config.instance.commentListModel.findPreSiblingCommentNoOfCreatedComment(oRawCreatedComment.parent_comment_no,oRawCreatedComment.reply_level);
            oComment.createItem(this.config.instance.listarea.getAreaElement(),nPreSiblingCommentNo);
            this.config.instance.commentListModel.addComment(oComment,nPreSiblingCommentNo);
            this.config.instance.listarea.showOrHideEmptyLiTag();
            this.config.instance.listarea.showOrHideNoListLiTag();
            this.config.instance.pagearea.update(oResponse.page_no,this.config.instance.pagearea.getTotalCount()+1);
            this.config.instance.countarea.update(this.config.instance.pagearea.getTotalCount())
        }
        ,_hideTargetReplyForm:function(sParentCommentNo){
            if(sParentCommentNo==null||sParentCommentNo==0){
                return
            }
            var elTargetTextArea=Util.DomData.getChild(this.config.instance.listarea.getAreaElement().$value(),this.config.css("replyItem"),[sParentCommentNo]);
            if(elTargetTextArea==null){
                return
            }
            J.$Element(elTargetTextArea).hide()
        }
        ,_extractCreatedCommentFromResponse:function(oResponse){
            if(oResponse==null||oResponse.comment_list==null||oResponse.create_result==null||oResponse.create_result.comment_no==null){
                return null
            }
            var aCommentList=oResponse.comment_list;
            for(var nIndex in aCommentList){
                if(aCommentList[nIndex].comment_no==oResponse.create_result.comment_no){
                    return aCommentList[nIndex]
                }
                
            }
            return null
        }
        ,_detectOverMaxLength:function(sTargetCommentNo){
            var wel=this._getTargetTextarea(sTargetCommentNo);
            var sText=wel.text();
            var sResult=Util.validation(sText,1,this.config.option("maximumCommentLength"),false,false,this.config.message.EXCEED_MAX_LENGTH);
            if(sResult){
                this._whtWriteArea.$(sTargetCommentNo,sText);
                this._updatePromptArea(sTargetCommentNo,sText.trim().length);
                return
            }
            var sPrevText=this._whtWriteArea.$(sTargetCommentNo);
            wel.text(sPrevText==null?"":sPrevText)
        }
        ,_getTargetTextarea:function(sTargetCommentNo){
            if(sTargetCommentNo==0){
                return this._welTextarea
            }
            return J.$Element(Util.DomData.getChild(this.config.instance.listarea.getAreaElement().$value(),this.config.css("textarea"),[sTargetCommentNo]))
        }
        ,_showDefaultText:function(welTextarea){
            var sText=welTextarea.text();
            if(Util.trim(sText)==""){
                welTextarea.text(this.config.message.DEFAULT_TEXT)
            }
            
        }
        ,_hideDefaultText:function(welTextarea){
            var sText=welTextarea.text();
            if(Util.compareTextWithoutRetuneChar(sText,this.config.message.DEFAULT_TEXT)){
                welTextarea.text("")
            }
            
        }
        
    }).extend(J.Component);
    nhn.comment.writearea=new Comment.WriteArea()
})();
nhn=(typeof nhn!=="undefined")?nhn:{};
nhn.comment=nhn.comment||{};
nhn.comment.mobile=nhn.comment.mobile||{};
(function(){
    var J=window.nhn.comment.mobile.jindo||jindo,Comment=nhn.comment.mobile,Util=nhn.comment.mobile.Util;
    nhn.comment.mobile.NAME="nhn.comment.mobile";
    nhn.comment.mobile.VERSION="1.0.0.4641";
    Comment.ListArea=J.$Class({
        $init:function(){
            this._welArea=null;
            this.indexInstance=Comment.ListArea.getInstance().length-1;
            this.config=Comment.Config.getInstance()[this.indexInstance];
            this._oResult=null
        }
        ,createArea:function(){
            var sNoListLiTag=this.config.template("noList").process();
            var sEmptyComment=this.config.template("emptyComment").process();
            this._welArea=J.$Element(this.config.template("list").process({
                noList:sNoListLiTag,emptyComment:sEmptyComment
            }));
            return this._welArea
        }
        ,afterCreateArea:function(){
            this._createBubbler()
        }
        ,getAreaElement:function(){
            return this._welArea
        }
        ,_createBubbler:function(){
            this._oBubbler=new Util.Bubbler(this.getAreaElement().$value()).attach({
                "__comment_del_btn:click":J.$Fn(this.config.instance.command.deleteComment,this.config.instance.command).bind(),"__comment_report_btn:click":J.$Fn(this.config.instance.command.reportComment,this.config.instance.command).bind(),"__comment_reply_form_btn:click":J.$Fn(this.config.instance.command.toggleReplyForm,this.config.instance.command).bind()
            });
            this.getAreaElement().preventTapHighlight(true)
        }
        ,requestList:function(sType,nNo){
            var htParams=this.config.instance.ajax.getListParams();
            if(sType=="page"){
                htParams.page_no=nNo
            }
            this.config.instance.ajax.call({
                operation:"list",onSuccess:J.$Fn(this.showList,this).bind(),param:htParams
            })
        }
        ,empty:function(){
            this.getAreaElement().empty();
            this.config.instance.commentListModel.reset();
            var sNoListLiTag=this.config.template("noList").process();
            var sEmptyComment=this.config.template("emptyComment").process();
            this.getAreaElement().append(sNoListLiTag);
            this.getAreaElement().append(sEmptyComment)
        }
        ,refresh:function(){
            this.empty();
            this.requestList("page",1)
        }
        ,refreshWithTheResult:function(oResult){
            this.empty();
            this.showList(oResult)
        }
        ,showList:function(oResult){
            if(oResult==null||oResult.comment_list==null||oResult.total_count==null||oResult.page_no==null){
                return
            }
            this._processBeforeShowList(oResult);
            var sLastCommentNo=this.config.instance.commentListModel.getBaseLastCommentNo();
            this._addCommentToBaseAndRemoveBottom(oResult.comment_list,oResult.author_yn);
            this.showOrHideEmptyLiTag();
            this.showOrHideNoListLiTag();
            if(this.config.option("isBIos")&&(oResult.comment_list==null||oResult.comment_list.length<this.config.option("pageSize"))){
                this.config.instance.pagearea.makeLastPage()
            }
            this._removeAndReturnTheCount(sLastCommentNo);
            this.config.instance.pagearea.update(oResult.page_no,oResult.total_count,true);
            this.config.instance.countarea.update(this.config.instance.pagearea.getTotalCount());
            this._processAfterShowList(oResult);
            this._oResult=oResult
        }
        ,_addCommentToBaseAndRemoveBottom:function(htCommentList,sAuthorYn){
            if(htCommentList==null){
                return
            }
            var oRawComment=null,oComment=null;
            for(var nIndex=0;
            nIndex<htCommentList.length;
            nIndex++){
                oRawComment=this.preProcessForRawComment(htCommentList[nIndex],sAuthorYn);
                oComment=new Comment.CommentItem(oRawComment);
                this._removeBottomCommentWhenListing(oComment.getCommentNo());
                var nLastCommentNo=this.config.instance.commentListModel.getBaseLastCommentNo();
                oComment.createItem(this.getAreaElement(),nLastCommentNo);
                this.config.instance.commentListModel.addComment(oComment)
            }
            
        }
        ,_removeBottomCommentWhenListing:function(sCommentNo){
            if(!this.config.option("isBIos")||!this.config.instance.commentListModel.isExistInBottomCommentList(sCommentNo)){
                return
            }
            this.config.instance.commentListModel.removeComment(sCommentNo);
            this._removeElCommentLiTag(sCommentNo)
        }
        ,getElCommentLiTag:function(sCommentNo){
            if(sCommentNo==null){
                return null
            }
            return Util.DomData.getChild(this.getAreaElement().$value(),this.config.css("commentItem"),[sCommentNo])
        }
        ,_removeElCommentLiTag:function(sCommentNo){
            this.config.instance.writearea.releaseBubbler(sCommentNo);
            var elItem=this.getElCommentLiTag(sCommentNo);
            this.getAreaElement().remove(elItem)
        }
        ,_processBeforeShowList:function(oResult){
            this.config.fireEvent("beforeList",{
                result:oResult
            })
        }
        ,_processAfterShowList:function(oResult){
            this.config.fireEvent("afterList",{
                result:oResult
            })
        }
        ,showOrHideEmptyLiTag:function(){
            if(!this.config.option("isBIos")){
                return
            }
            var elEmptyLiTag=this.getElCommentLiTag("empty");
            if(elEmptyLiTag==null){
                return
            }
            var welEmptyLiTag=J.$Element(elEmptyLiTag);
            if(this.config.instance.commentListModel.isEmptyBottomComment()){
                welEmptyLiTag.hide();
                return
            }
            welEmptyLiTag.show()
        }
        ,showOrHideNoListLiTag:function(){
            var elNoListLiTag=Util.DomData.getChild(this.getAreaElement().$value(),this.config.css("noList"));
            if(elNoListLiTag==null){
                return
            }
            var welNoListLiTag=J.$Element(elNoListLiTag);
            if(this.config.instance.commentListModel.isEmptyBaseComment()){
                welNoListLiTag.show();
                return
            }
            welNoListLiTag.hide()
        }
        ,deleteCommentForIos:function(nCommentNo){
            if(nCommentNo==null){
                return
            }
            this.config.instance.commentListModel.markTargetCommentDeleted(nCommentNo);
            if(!this.config.instance.commentListModel.canRemoveTargetComment(nCommentNo)){
                this._makeDeletedComment(nCommentNo);
                return
            }
            var nRemovedCommentCount=this._removeAndReturnTheCount(nCommentNo);
            this.showOrHideEmptyLiTag();
            this.showOrHideNoListLiTag();
            this.config.instance.pagearea.update(this.config.instance.pagearea.getPageNo(),this.config.instance.pagearea.getTotalCount()-nRemovedCommentCount);
            this.config.instance.countarea.update(this.config.instance.pagearea.getTotalCount())
        }
        ,_makeDeletedComment:function(nCommentNo){
            var oDeletedCommentInfo=this.config.instance.commentListModel.getCommentInfoFromBaseAndBottom(nCommentNo);
            if(oDeletedCommentInfo==null){
                return
            }
            var oRawDeletedComment=this._preProcessForDeleteComment(oDeletedCommentInfo);
            var oDeletedComment=new Comment.CommentItem(oRawDeletedComment);
            var elItem=this.getElCommentLiTag(nCommentNo);
            if(elItem==null){
                return
            }
            J.$Element(elItem).hide();
            oDeletedComment.createItem(this.getAreaElement(),nCommentNo);
            this.getAreaElement().remove(elItem)
        }
        ,_preProcessForDeleteComment:function(oDeletedCommentInfo){
            var oRawDeletedComment={};
            oRawDeletedComment.indexInstance=this.indexInstance;
            oRawDeletedComment.writer_id="********";
            oRawDeletedComment.writer_nickname="";
            oRawDeletedComment.comment_no=oDeletedCommentInfo.commentNo;
            oRawDeletedComment.registered_ymdt=oDeletedCommentInfo.registeredDate;
            oRawDeletedComment.reply_level=oDeletedCommentInfo.replyLevel;
            oRawDeletedComment.deleted_yn="Y";
            return oRawDeletedComment
        }
        ,_removeAndReturnTheCount:function(nCommentNo){
            var nCount=0;
            if(!this.config.option("isBIos")){
                return nCount
            }
            while(this.config.instance.commentListModel.canRemoveTargetComment(nCommentNo)){
                var htPreSiblingComment=this.config.instance.commentListModel.getPreSiblingCommentInfo(nCommentNo);
                this.config.instance.commentListModel.removeComment(nCommentNo);
                this._removeElCommentLiTag(nCommentNo);
                nCount++;
                if(htPreSiblingComment==null){
                    break
                }
                nCommentNo=htPreSiblingComment.commentNo
            }
            return nCount
        }
        ,preProcessForRawComment:function(htComment,sAuthorYn){
            if(htComment.done_preprocessing){
                return htComment
            }
            htComment.registered_ymdt=Comment.Util.dateFormat(htComment.registered_ymdt,this.config.option("dateFormat"));
            htComment.modified_ymdt=Comment.Util.dateFormat(htComment.modified_ymdt,this.config.option("dateFormat"));
            if(this.config.option("useEscapeHtml")){
                htComment.contents=htComment.contents.replace("<!-- Not Allowed Tag Filtered -->","");
                htComment.contents=J.$S(htComment.contents).unescapeHTML().escapeHTML().$value()
            }
            htComment.contents=Comment.Util.multiLine(htComment.contents,this.config.option("enableMultiLine"));
            htComment.indexInstance=this.indexInstance;
            htComment.is_author=sAuthorYn;
            htComment.done_preprocessing=true;
            return htComment
        }
        ,toggleTargetAreaDependsOnLoginAndAuth:function(welTarget){
            if(welTarget==null){
                return
            }
            if(!this.config.instance.auth.redirectLogin()){
                return
            }
            if(!this.config.instance.auth.redirectAuth()){
                return
            }
            welTarget.toggle()
        }
        
    }).extend(J.Component);
    nhn.comment.listarea=new Comment.ListArea()
})();
nhn=(typeof nhn!=="undefined")?nhn:{};
nhn.comment=nhn.comment||{};
nhn.comment.mobile=nhn.comment.mobile||{};
(function(){
    var J=window.nhn.comment.mobile.jindo||jindo,Comment=nhn.comment.mobile,Util=Comment.Util;
    nhn.comment.mobile.NAME="nhn.comment.mobile";
    nhn.comment.mobile.VERSION="1.0.0.4641";
    Comment.CommonPageArea=J.$Class({
        $init:function(){
            this._welArea=null;
            this._nPageNo=1;
            this._nTotalCount=0;
            this.indexInstance=Comment.PageArea.getInstance().length-1;
            this.config=Comment.Config.getInstance()[this.indexInstance]
        }
        ,getAreaElement:function(){
            return this._welArea
        }
        ,show:function(){
            this._welArea.show()
        }
        ,hide:function(){
            this._welArea.hide()
        }
        ,isNeedToHidePageArea:function(nTotalCount){
            if(!this.config.option("hidePageAreaIfOnlyOnePageExist")){
                return false
            }
            if(this.config.option("pageSize")<nTotalCount){
                return false
            }
            return true
        }
        ,setPageNo:function(nPageNo){
            if(nPageNo==null){
                return
            }
            this._nPageNo=nPageNo
        }
        ,getPageNo:function(){
            return this._nPageNo
        }
        ,setTotalCount:function(nTotalCount){
            this._nTotalCount=nTotalCount
        }
        ,getTotalCount:function(){
            return this._nTotalCount
        }
        
    }).extend(J.Component)
})();
nhn=(typeof nhn!=="undefined")?nhn:{};
nhn.comment=nhn.comment||{};
nhn.comment.mobile=nhn.comment.mobile||{};
(function(){
    var J=window.nhn.comment.mobile.jindo||jindo,Comment=nhn.comment.mobile,Util=Comment.Util;
    nhn.comment.mobile.NAME="nhn.comment.mobile";
    nhn.comment.mobile.VERSION="1.0.0.4641";
    Comment.PageArea=J.$Class({
        $init:function(){
            this._oPageNavigation=null
        }
        ,createArea:function(){
            this._welArea=J.$Element(this.config.template("pageArea").process());
            return this._welArea
        }
        ,afterCreateArea:function(){
            this._wel=J.$Element(this.config.template("pageNavigation").process());
            this._welArea.append(this._wel);
            this._initComponent();
            this.hide()
        }
        ,update:function(nPageNo,nTotalCount,bNeedInfoUpdate){
            this.setPageNo(nPageNo);
            this.setTotalCount(nTotalCount);
            this._oPageNavigation.reset((nTotalCount==0?1:nTotalCount));
            this._oPageNavigation.movePageTo(nPageNo,false);
            this._oPageNavigation.updateInfo();
            if(this.isNeedToHidePageArea(nTotalCount)){
                this.hide();
                return
            }
            this.show()
        }
        ,_initComponent:function(){
            var self=this;
            this._oPageNavigation=new J.m.PageNavigation(this._wel.$value(),{
                sClassPrefix:"__comment_page_",nItemPerPage:this.config.option("pageSize"),sInfoTemplate:this.config.template("pageInfoTemplate")._str
            }).attach({
                beforeMove:function(oCustomEvt){
                    oCustomEvt.stop();
                    self.hide();
                    self.config.instance.listarea.empty();
                    self.config.instance.listarea.requestList("page",oCustomEvt.nPage)
                }
                
            })
        }
        ,isLastPage:function(){
            return(this.config.option("pageSize")*this._nPageNo)>=this._nTotalCount
        }
        
    }).extend(Comment.CommonPageArea);
    nhn.comment.pagearea=new Comment.PageArea()
})();
nhn=(typeof nhn!=="undefined")?nhn:{};
nhn.comment=nhn.comment||{};
nhn.comment.mobile=nhn.comment.mobile||{};
(function(){
    var J=window.nhn.comment.mobile.jindo||jindo,Comment=nhn.comment.mobile,Util=Comment.Util;
    nhn.comment.mobile.NAME="nhn.comment.mobile";
    nhn.comment.mobile.VERSION="1.0.0.4641";
    Comment.CurrentCountChangeableMoreContentButton=J.$Class({
        _nCurrentPage:1,$init:function(el,htUserOption){
            this.option({
                nItem:10,nItemPerPage:10,nPage:1,bActivateOnload:true
            });
            this.option(htUserOption||{});
            this._nCurrentPage=this.option("nPage");
            this.option({
                sClassPrefix:"more_",nTotalItem:10,nShowMaxItem:10,nItemPerPage:10,nPage:1,bActivateOnload:true,htAjax:{}
            });
            this.option(htUserOption||{});
            this.option("nItem",this.option("nShowMaxItem"));
            this._initVar();
            this._setWrapperElement(el);
            if(this.option("bActivateOnload")){
                this.activate();
                this._nCurrentPage=this.option("nPage")
            }
            this._nBaseCommentCount=0;
            this._bLastPage=false
        }
        ,getItemCount:function(){
            return this.option("nItem")
        }
        ,getItemPerPage:function(){
            return this.option("nItemPerPage")
        }
        ,getCurrentPage:function(){
            return this._nCurrentPage
        }
        ,setItemCount:function(n){
            this.option("nItem",n)
        }
        ,setItemPerPage:function(n){
            this.option("nItemPerPage",n)
        }
        ,nextPageTo:function(){
            var nPage=this._nCurrentPage+1;
            this.movePageTo(nPage)
        }
        ,previousPageTo:function(){
            var nPage=this._nCurrentPage-1;
            this.movePageTo(nPage)
        }
        ,getTotalPages:function(){
            var nTotal=this.option("nItem"),nCount=this.option("nItemPerPage");
            if(!nCount){
                return null
            }
            return Math.ceil(nTotal/nCount)
        }
        ,hasPreviousPage:function(){
            return(this.getCurrentPage()>1)
        }
        ,getPageItemIndex:function(nPage){
            nPage=this._convertToAvailPage(nPage);
            var nTotal=this.option("nItem"),nCount=this.option("nItemPerPage"),start,end;
            if(!nPage||!nCount){
                return null
            }
            start=(nPage-1)*nCount;
            end=Math.min(start+nCount,nTotal)-1;
            return{
                nStart:start,nEnd:end
            }
            
        }
        ,getPageOfItem:function(n){
            return Math.ceil(n/this.getItemPerPage())
        }
        ,_convertToAvailPage:function(nPage){
            var nLastPage=this.getTotalPages();
            nPage=Math.max(nPage,1);
            nPage=Math.min(nPage,nLastPage);
            return nPage
        }
        ,_initVar:function(){
            var _htDefalutAjax={
                sApi:null,htAjaxOption:{
                    type:"xhr"
                }
                ,htQuery:{},sStart:"start",sDisplay:"display"
            };
            var htAjax=this.option("htAjax");
            if(!htAjax){
                this.option("htAjax",_htDefalutAjax);
                return
            }
            for(var p in _htDefalutAjax){
                if(typeof htAjax[p]=="undefined"){
                    htAjax[p]=_htDefalutAjax[p]
                }
                
            }
            for(var p in _htDefalutAjax.htAjaxOption){
                if(typeof htAjax.htAjaxOption[p]=="undefined"){
                    htAjax.htAjaxOption[p]=_htDefalutAjax.htAjaxOption[p]
                }
                
            }
            for(var p in _htDefalutAjax.htQuery){
                if(typeof htAjax.htQuery[p]=="undefined"){
                    htAjax.htQuery[p]=_htDefalutAjax.htQuery[p]
                }
                
            }
            if(!!htAjax.sApi){
                this.oAjax=new J.$Ajax(htAjax.sApi,htAjax.htAjaxOption)
            }
            
        }
        ,_setWrapperElement:function(el){
            this._htWElement={};
            el=J.$(el);
            var sClass="."+this.option("sClassPrefix");
            this._htWElement.elBase=J.$Element(el);
            this._htWElement.elMoreButton=J.$Element(J.$$.getSingle(sClass+"button",el));
            this._htWElement.elTop=J.$Element(J.$$.getSingle(sClass+"top",el));
            this._htWElement.elLoading=J.$Element(J.$$.getSingle(sClass+"loading",el));
            this._htWElement.elMoreCnt=J.$Element(J.$$.getSingle(sClass+"moreCnt",el));
            this._htWElement.elTotal=J.$Element(J.$$.getSingle(sClass+"total",el));
            this._htWElement.elCurrent=J.$Element(J.$$.getSingle(sClass+"current",el));
            this._htWElement.elLast=J.$Element(J.$$.getSingle(sClass+"last",el));
            if(!!this._htWElement.elLast){
                this._htWElement.elLastTotal=J.$Element(J.$$.getSingle(sClass+"total",this._htWElement.elLast.$value()));
                this._htWElement.elLastCurrent=J.$Element(J.$$.getSingle(sClass+"current",this._htWElement.elLast.$value()))
            }
            
        }
        ,_onClickMore:function(oEvent){
            oEvent.stop(J.$Event.CANCEL_DEFAULT);
            if(this.hasNextPage()){
                this.more()
            }
            
        }
        ,_onClickTop:function(oEvent){
            oEvent.stop(J.$Event.CANCEL_DEFAULT);
            this.fireEvent("goTop",{
                element:oEvent.element
            })
        }
        ,more:function(bFireEvent){
            if(typeof bFireEvent=="undefined"){
                bFireEvent=true
            }
            var nPage=this._nCurrentPage+1;
            var nBeforePage=this.getCurrentPage();
            if(bFireEvent){
                if(!this.fireEvent("beforeMore",{
                    nPage:nPage,nCurrentPage:nBeforePage
                })){
                    return
                }
                
            }
            this.showLoadingImg();
            if(!!this.option("htAjax").sApi){
                this._callAjax(nPage,true,bFireEvent)
            }
            else{
                this._move(nPage);
                var htIndex=this.getPageItemIndex(nPage);
                if(bFireEvent){
                    this.fireEvent("more",{
                        nPage:nPage,nStartIndex:htIndex.nStart,nEndIndex:htIndex.nEnd
                    })
                }
                this.updateInfo()
            }
            
        }
        ,movePageTo:function(nPage,bFireEvent){
            if(typeof bFireEvent=="undefined"){
                bFireEvent=true
            }
            var nBeforePage=this.getCurrentPage();
            if(bFireEvent){
                if(!this.fireEvent("beforeMovePage",{
                    nPage:nPage,nCurrentPage:nBeforePage
                })){
                    return
                }
                
            }
            this.showLoadingImg();
            if(!!this.option("htAjax").sApi){
                this._callAjax(nPage,false,bFireEvent)
            }
            else{
                this._move(nPage);
                var htIndex=this.getPageItemIndex(nPage);
                if(bFireEvent){
                    this.fireEvent("movePage",{
                        nPage:nPage,nBeforePage:nBeforePage,nStartIndex:0,nEndIndex:htIndex.nEnd
                    })
                }
                this.updateInfo()
            }
            
        }
        ,_move:function(nPage){
            var n=this._convertToAvailPage(nPage);
            if(n!=this._nCurrentPage){
                this._nCurrentPage=n
            }
            
        }
        ,_callAjax:function(nPage,bMore,bFireEvent){
            var self=this;
            this.oAjax.option("onload",null);
            this.oAjax.option("onload",function(res){
                self._onAjaxResponse(res,nPage,bMore,bFireEvent)
            });
            this.oAjax.request(this._getQueryString(nPage,bMore))
        }
        ,_onAjaxResponse:function(oResponse,nPage,bMore,bFireEvent){
            if(bFireEvent){
                this._move(nPage);
                var sEvent=bMore?"more":"movePage";
                var htIndex=this.getPageItemIndex(nPage);
                this.fireEvent(sEvent,{
                    oResponse:oResponse,nPage:nPage,nStartIndex:bMore?htIndex.nStart:0,nEndIndex:htIndex.nEnd
                })
            }
            this.updateInfo()
        }
        ,getShowMaxItem:function(){
            return this.option("nShowMaxItem")
        }
        ,_setNumberFormat:function(sText){
            sText=sText.toString();
            var sReturn="";
            var nDot=0;
            var nLastPosition=sText.length;
            for(var i=nLastPosition;
            i>=0;
            i--){
                var sChar=sText.charAt(i);
                if(i>nLastPosition){
                    sReturn=sChar+sReturn;
                    continue
                }
                if(/[0-9]/.test(sChar)){
                    if(nDot>=3){
                        sReturn=","+sReturn;
                        nDot=0
                    }
                    nDot++;
                    sReturn=sChar+sReturn
                }
                
            }
            return sReturn
        }
        ,showLoadingImg:function(){
            if(!!this._htWElement.elLoading){
                this._htWElement.elLoading.show()
            }
            
        }
        ,hideLoadingImg:function(){
            if(!!this._htWElement.elLoading){
                this._htWElement.elLoading.hide()
            }
            
        }
        ,reset:function(nShowMaxItem){
            if(typeof nShowMaxItem=="undefined"){
                nShowMaxItem=this.option("nShowMaxItem")
            }
            this.setShowMaxItem(nShowMaxItem);
            this.movePageTo(1,false)
        }
        ,getTotalItem:function(){
            return this.option("nTotalItem")
        }
        ,setTotalItem:function(n){
            this.option("nTotalItem",n)
        }
        ,setShowMaxItem:function(n){
            this.option("nShowMaxItem",n);
            this.option("nItem",n)
        }
        ,_onActivate:function(){
            this._attachEvent()
        }
        ,_onDeactivate:function(){
            this._detachEvent()
        }
        ,_attachEvent:function(){
            this._htEvent={};
            if(!!this._htWElement.elMoreButton){
                this._htEvent.click_More={
                    ref:J.$Fn(this._onClickMore,this).attach(this._htWElement.elMoreButton,"click"),el:this._htWElement.elMoreButton.$value()
                }
                
            }
            if(!!this._htWElement.elTop){
                this._htEvent.click_Top={
                    ref:J.$Fn(this._onClickTop,this).attach(this._htWElement.elTop,"click"),el:this._htWElement.elTop.$value()
                }
                
            }
            
        }
        ,_detachEvent:function(){
            for(var p in this._htEvent){
                var htTargetEvent=this._htEvent[p];
                htTargetEvent.ref.detach(htTargetEvent.el,p.substring(0,p.indexOf("_")))
            }
            this._htEvent=null
        }
        ,header:function(vName,vValue){
            if(this.oAjax){
                return this.oAjax.header(vName,vValue)
            }
            
        }
        ,destroy:function(){
            this._detachEvent();
            for(var p in this._htWElement){
                this._htWElement[p]=null
            }
            this._htWElement=null
        }
        ,_getQueryString:function(nPage,bMore){
            if(typeof bMore==="undefined"){
                bMore=true
            }
            var htQuery=this.option("htAjax").htQuery||{};
            htQuery[this.option("htAjax").sDisplay]=this.getItemPerPage();
            return htQuery
        }
        ,updateInfo:function(){
            if(this._bLastPage||this._nBaseCommentCount>=this.option("nTotalItem")){
                this._bLastPage=true;
                this.setTotalItem(this._nBaseCommentCount)
            }
            else{
                this._bLastPage=false
            }
            
        }
        ,updateView:function(){
            this.hideLoadingImg();
            if(this._bLastPage){
                this._htWElement.elBase.addClass("u_pg_end");
                this._htWElement.elMoreButton.hide();
                this._htWElement.elLast.show("block")
            }
            else{
                this._htWElement.elBase.removeClass("u_pg_end");
                this._htWElement.elMoreButton.show("block");
                this._htWElement.elLast.hide()
            }
            if(!!this._htWElement.elCurrent){
                this._htWElement.elCurrent.text(this._nBaseCommentCount)
            }
            if(typeof this._htWElement.elLastCurrent!="undefined"){
                this._htWElement.elLastCurrent.text(this._setNumberFormat(this._nBaseCommentCount))
            }
            if(!!this._htWElement.elTotal){
                this._htWElement.elTotal.text(this._setNumberFormat(this.option("nTotalItem")))
            }
            if(typeof this._htWElement.elLastTotal!="undefined"){
                this._htWElement.elLastTotal.text(this._setNumberFormat(this.option("nTotalItem")))
            }
            if(!!this._htWElement.elMoreCnt){
                var nMoreCount=Math.min(this.getItemPerPage(),this.option("nTotalItem")-this._nBaseCommentCount);
                this._htWElement.elMoreCnt.text(this._setNumberFormat(nMoreCount))
            }
            
        }
        ,isLastPage:function(){
            return this._bLastPage
        }
        ,makeLastPage:function(){
            this._bLastPage=true
        }
        ,hasNextPage:function(){
            return this._nBaseCommentCount<this.option("nTotalItem")
        }
        ,setBaseCommentCount:function(nCount){
            this._nBaseCommentCount=nCount
        }
        
    }).extend(J.UIComponent)
})();
nhn=(typeof nhn!=="undefined")?nhn:{};
nhn.comment=nhn.comment||{};
nhn.comment.mobile=nhn.comment.mobile||{};
(function(){
    var J=window.nhn.comment.mobile.jindo||jindo,Comment=nhn.comment.mobile,Util=Comment.Util;
    nhn.comment.mobile.NAME="nhn.comment.mobile";
    nhn.comment.mobile.VERSION="1.0.0.4641";
    Comment.MoreContentArea=J.$Class({
        $init:function(){
            this._wel=null;
            this._oMoreContent=null;
            this._bInitComponent=false
        }
        ,createArea:function(){
            this._welArea=J.$Element(this.config.template("pageArea").process());
            return this._welArea
        }
        ,afterCreateArea:function(){
            this._wel=J.$Element(this.config.template("pageMore").process());
            this._welArea.append(this._wel);
            this._initComponent();
            this.hide()
        }
        ,update:function(nPageNo,nTotalCount,bNeedInfoUpdate){
            this.setPageNo(nPageNo);
            var htParams=this.config.instance.ajax.getListParams();
            htParams.comment_no=this.config.instance.commentListModel.getBaseLastCommentNo();
            this._oMoreContent.option("htAjax").htQuery=htParams;
            this._oMoreContent.setTotalItem(nTotalCount);
            this._oMoreContent.setShowMaxItem(nTotalCount);
            this._oMoreContent.setItemCount(nTotalCount);
            this._oMoreContent.setBaseCommentCount(this.config.instance.commentListModel.getBaseCommentCount());
            if(bNeedInfoUpdate){
                this._oMoreContent.updateInfo()
            }
            this._oMoreContent.updateView();
            if(this.isNeedToHidePageArea(nTotalCount)){
                this.hide();
                return
            }
            this.show()
        }
        ,getTotalCount:function(){
            if(this._oMoreContent.getTotalItem()==null){
                return 0
            }
            return this._oMoreContent.getTotalItem()
        }
        ,_initComponent:function(){
            var self=this;
            var htPatams=this.config.instance.ajax.getListParams();
            this._oMoreContent=new Comment.CurrentCountChangeableMoreContentButton(this._wel.$value(),{
                sClassPrefix:"__comment_more_",nItemPerPage:this.config.option("pageSize"),htAjax:{
                    sApi:this.config.instance.ajax.getUrl("moreList"),sDisplay:"page_size",htQuery:htPatams
                }
                ,nTotalItem:1,nShowMaxItem:1
            }).attach({
                goTop:function(){
                    Util.scrollTop()
                }
                ,more:function(oCustomEvent){
                    self._afterMore(oCustomEvent.oResponse)
                }
                
            })
        }
        ,_afterMore:function(oResponse){
            oResponse=oResponse.json();
            this.config.instance.listarea.showList(oResponse)
        }
        ,isNeedToHidePageArea:function(nTotalCount){
            if(!this.config.option("hidePageAreaIfOnlyOnePageExist")){
                return false
            }
            if(!this._isFirstPageWasLastPage()){
                return false
            }
            return true
        }
        ,_isFirstPageWasLastPage:function(){
            if(this._bFirstPageWasLastPage!=null){
                return this._bFirstPageWasLastPage
            }
            this._bFirstPageWasLastPage=this.isLastPage();
            return this._bFirstPageWasLastPage
        }
        ,isLastPage:function(){
            return this._oMoreContent.isLastPage()
        }
        ,makeLastPage:function(){
            this._oMoreContent.makeLastPage()
        }
        
    }).extend(Comment.CommonPageArea);
    nhn.comment.morecontentarea=new Comment.MoreContentArea()
})();
nhn=(typeof nhn!=="undefined")?nhn:{};
nhn.comment=nhn.comment||{};
nhn.comment.mobile=nhn.comment.mobile||{};
(function(){
    var J=window.nhn.comment.mobile.jindo||jindo,Comment=nhn.comment.mobile;
    nhn.comment.mobile.NAME="nhn.comment.mobile";
    nhn.comment.mobile.VERSION="1.0.0.4641";
    Comment.Auth=J.$Class({
        $init:function(){
            this.indexInstance=Comment.Auth.getInstance().length-1;
            this.config=Comment.Config.getInstance()[this.indexInstance]
        }
        ,checkLogin:function(){
            var htParams={};
            htParams.ticket=this.config.option("ticket");
            this.config.instance.ajax.call({
                operation:"isLogin",async:false,onSuccess:J.$Fn(this._onCheckLogin,this).bind(),param:htParams
            })
        }
        ,redirectLogin:function(){
            if(this._isLoginNow()){
                return true
            }
            if(confirm(this.config.message.NOT_LOGIN)){
                var loginUrl=this.config.option("loginUrl")||"https://nid.naver.com/nidlogin.login";
                top.location=loginUrl+"&url="+encodeURIComponent(this.config.option("objectUrl"))
            }
            return false
        }
        ,_isLoginNow:function(){
            if(this.config.option("isLogin")){
                return true
            }
            this.checkLogin();
            return this.config.option("isLogin")
        }
        ,checkAuth:function(){
            if(this.config.option("isAuth")!==undefined){
                return
            }
            var htParams={};
            htParams.ticket=this.config.option("ticket");
            this.config.instance.ajax.call({
                operation:"checkAuth",async:false,onSuccess:J.$Fn(this._onCheckAuth,this).bind(),param:htParams
            })
        }
        ,redirectAuth:function(){
            if(this.config.option("isAuth")){
                return true
            }
            if(confirm(this.config.message.NOT_AUTHENTICATED)){
                var certUrl=this.config.option("certUrl")||"https://nid.naver.com/user/mobile_rncheck.nhn?todo=start";
                var rurl=this.config.option("certRurl")||this.config.option("objectUrl");
                var surl=this.config.option("certSurl")||this.config.option("objectUrl");
                var svc=this.config.option("certSvc")||"";
                top.location=certUrl+"&rurl="+encodeURIComponent(rurl)+"&surl="+encodeURIComponent(surl)+"&svc="+svc
            }
            else{
                this.checkAuth()
            }
            return false
        }
        ,_onCheckAuth:function(oResult){
            this.config.option("isAuth",oResult.is_authenticated_name=="Y")
        }
        ,_onCheckLogin:function(oResult){
            if(oResult.is_logged_in=="Y"){
                this.config.option("isLogin",true)
            }
            
        }
        
    }).extend(J.Component);
    nhn.comment.auth=new Comment.Auth()
})();
nhn=(typeof nhn!=="undefined")?nhn:{};
nhn.comment=nhn.comment||{};
nhn.comment.mobile=nhn.comment.mobile||{};
(function(){
    document.domain="naver.com";
    var J=window.nhn.comment.mobile.jindo||jindo,Comment=nhn.comment.mobile;
    nhn.comment.mobile.NAME="nhn.comment.mobile";
    nhn.comment.mobile.VERSION="1.0.0.4641";
    Comment.Core=J.$Class({
        $init:function(){
            this.indexInstance=Comment.Core.getInstance().length-1;
            this.config=Comment.Config.getInstance()[this.indexInstance];
            this._welBody=null
        }
        ,initialize:function(){
            this._saveInstanceInConfig();
            this._doAfterInstanceCreated();
            this._createArea();
            this.option("initialized",true);
            this.config.fireEvent("initialized")
        }
        ,getBody:function(){
            return this._welBody
        }
        ,_doAfterInstanceCreated:function(){
            this.config.instance.ajax.initErrorHandler()
        }
        ,_saveInstanceInConfig:function(){
            var htDeviceInfo=J.m.getDeviceInfo();
            this.config.instance.core=Comment.Core.getInstance()[this.indexInstance];
            this.config.instance.ajax=Comment.Ajax.getInstance()[this.indexInstance];
            this.config.instance.command=Comment.Command.getInstance()[this.indexInstance];
            this.config.instance.countarea=Comment.CountArea.getInstance()[this.indexInstance];
            this.config.instance.writearea=Comment.WriteArea.getInstance()[this.indexInstance];
            this.config.instance.listarea=Comment.ListArea.getInstance()[this.indexInstance];
            this.config.instance.auth=Comment.Auth.getInstance()[this.indexInstance];
            this.config.instance.commentListModel=Comment.CommentListModel.getInstance()[this.indexInstance];
            if(this.config.option("isBIos")&&this.config.option("useMoreContent")){
                this.config.instance.pagearea=Comment.MoreContentArea.getInstance()[this.indexInstance]
            }
            else{
                this.config.instance.pagearea=Comment.PageArea.getInstance()[this.indexInstance]
            }
            
        }
        ,_createArea:function(){
            var isHasList=false;
            this._welBody=J.$Element(J.$$.getSingle(this.config.element("body")));
            var aFormation=this.config.option("formation");
            var sFormation;
            var htAreaElement={
                count:this.config.instance.countarea,list:this.config.instance.listarea,page:this.config.instance.pagearea,write:this.config.instance.writearea
            };
            for(var i=0,nLen=aFormation.length;
            i<nLen;
            i++){
                sFormation=aFormation[i];
                if(sFormation=="list"){
                    isHasList=true
                }
                this._welBody.append(htAreaElement[sFormation].createArea());
                htAreaElement[sFormation].afterCreateArea()
            }
            if(isHasList){
                this.config.instance.listarea.requestList("page",this.config.option("pageNo"))
            }
            var commands=J.$A(this.config.option("commands"));
            if(commands.has("report")){
                this._welBody.append(J.$Element(this.config.template("reportForm").process()))
            }
            
        }
        
    }).extend(J.Component);
    nhn.comment.core=new Comment.Core()
})();
nhn=(typeof nhn!=="undefined")?nhn:{};
nhn.comment=nhn.comment||{};
nhn.comment.mobile=nhn.comment.mobile||{};
(function(){
    var J=window.nhn.comment.mobile.jindo||jindo,Comment=nhn.comment.mobile;
    nhn.comment.mobile.NAME="nhn.comment.mobile";
    nhn.comment.mobile.VERSION="1.0.0.4641";
    Comment.Controller=J.$Class({
        _sTarget:null,_htOptions:null,_htTemplates:null,_htMessage:null,$init:function(){
            this._htTemplates={};
            this._htMessage={};
            this._htOptions={}
        }
        ,create:function(sTarget,sTicket,sObjectId,sCategoryId){
            if(!sTarget||!(J.$$.getSingle(sTarget))){
                throw TypeError("Invalid target element selector argument.")
            }
            if(!sTicket){
                throw TypeError("Invalid ticket argument.")
            }
            if(!sObjectId){
                throw TypeError("Invalid objectId argument.")
            }
            var oInstances=Comment.Core.getInstance();
            var oCore=oInstances[oInstances.length-1];
            if(oCore.initialized){
                var oConfIns=new Comment.Config();
                var oAuthIns=new Comment.Auth();
                var oAjaxIns=new Comment.Ajax();
                var oCoreIns=new Comment.Core();
                var oCountAreaIns=new Comment.CountArea();
                var oWriteAreaIns=new Comment.WriteArea();
                var oListAreaIns=new Comment.ListArea();
                var oPageAreaIns=new Comment.PageArea();
                var oMoreContentAreaIns=new Comment.MoreContentArea();
                var oCommandIns=new Comment.Command();
                var oCommentListModelIns=new Comment.CommentListModel();
                oCore=oInstances[oInstances.length-1]
            }
            this.resetConfig(oCore);
            oCore.config.option("ticket",sTicket);
            oCore.config.option("objectId",sObjectId);
            if(sCategoryId){
                oCore.config.option("categoryId",sCategoryId);
                oCore.config.option("viewCategoryId",sCategoryId)
            }
            oCore.config.element("body",sTarget);
            oCore.initialized=true;
            return oCore
        }
        ,initialize:function(oCore){
            oCore.initialize()
        }
        ,addEventHandler:function(oCore,htEventHandler){
            if(oCore&&oCore.initialized){
                oCore.config.attach(htEventHandler)
            }
            
        }
        ,setOptions:function(oOption,oValue){
            if(typeof oOption=="object"){
                for(var sKey in oOption){
                    this._htOptions[sKey]=oOption[sKey]
                }
                
            }
            else{
                if(typeof oOption=="string"&&oValue){
                    this._htOptions[oOption]=oValue
                }
                
            }
            
        }
        ,setTemplates:function(oTemplate,oValue){
            if(typeof oTemplate=="object"){
                for(var sKey in oTemplate){
                    this._htTemplates[sKey]=oTemplate[sKey]
                }
                
            }
            else{
                if(typeof oTemplate=="string"&&oValue){
                    this._htTemplates[oTemplate]=oValue
                }
                
            }
            
        }
        ,setMessages:function(oMessage,sValue){
            if(typeof oMessage=="object"){
                for(var sKey in oMessage){
                    this._htMessage[sKey]=oMessage[sKey]
                }
                
            }
            else{
                if(typeof oMessage=="string"&&sValue){
                    this._htMessage[oMessage]=sValue
                }
                
            }
            
        }
        ,resetConfig:function(oCore){
            var aInstances;
            if(oCore&&oCore.name=="nhn.comment.mobile.Core"){
                aInstances=[oCore]
            }
            else{
                aInstances=Comment.Core.getInstance()
            }
            for(var i=0;
            i<aInstances.length;
            i++){
                var oInstance=aInstances[i];
                oInstance.config.option(this._htOptions);
                oInstance.config.template(this._htTemplates);
                oInstance.config.message(this._htMessage)
            }
            
        }
        
    }).extend(J.Component)
})();
nhn=(typeof nhn!=="undefined")?nhn:{};
nhn.comment=nhn.comment||{};
nhn.comment.mobile=nhn.comment.mobile||{};
(function(){
    var J=window.nhn.comment.mobile.jindo||jindo,Comment=nhn.comment.mobile,Util=nhn.comment.mobile.Util;
    nhn.comment.mobile.NAME="nhn.comment.mobile";
    nhn.comment.mobile.VERSION="1.0.0.4641";
    Comment.CommentListModel=J.$Class({
        $init:function(){
            this.reset();
            this.indexInstance=Comment.CommentListModel.getInstance().length-1;
            this.config=Comment.Config.getInstance()[this.indexInstance]
        }
        ,_getCommentIndex:function(waCommentList,sCommentNo){
            var nIndex=null;
            if(waCommentList==null||sCommentNo==null){
                return null
            }
            waCommentList.forEach(function(oEach,index,array){
                if(oEach.commentNo==sCommentNo){
                    nIndex=index;
                    J.$A.Break()
                }
                
            });
            return nIndex
        }
        ,markTargetCommentDeleted:function(sCommentNo){
            var waTargetCommentList=this._findTargetCommentList(sCommentNo);
            var nIndex=this._getCommentIndex(waTargetCommentList,sCommentNo);
            var htCommentInfo=waTargetCommentList.get(nIndex);
            htCommentInfo.isDeleted=true;
            waTargetCommentList.set(nIndex,htCommentInfo)
        }
        ,_findTargetCommentList:function(sCommentNo){
            if(this._isExistInBaseCommentList(sCommentNo)){
                return this._waBaseCommentList
            }
            return this._waBottomCommentList
        }
        ,_generateCommentInfo:function(oComment){
            var htCommentInfo={};
            htCommentInfo.commentNo=oComment.getCommentNo();
            htCommentInfo.replyLevel=oComment.getReplyLevel();
            htCommentInfo.registeredDate=oComment.getRegisteredDate();
            htCommentInfo.isDeleted=oComment.isDeleted();
            return htCommentInfo
        }
        ,_isPossibleToAddBaseCommentList:function(nParentCommentNo){
            if(nParentCommentNo==0){
                return true
            }
            if(this.config.instance.pagearea.isLastPage()){
                return true
            }
            if(this._isExistInBaseCommentList(nParentCommentNo)&&!this._isHighReplyLevelOnlyExistAfterComment(nParentCommentNo)){
                return true
            }
            return false
        }
        ,_isHighReplyLevelOnlyExistAfterComment:function(sCommentNo){
            var htCommentInfo=this._getBaseCommentInfo(sCommentNo);
            var waSlicedListAfterTargetComment=this._getSlicedListAfterCommentNo(this._waBaseCommentList,sCommentNo);
            if(waSlicedListAfterTargetComment==null){
                return true
            }
            var bOnlyHighLevelCommentExist=true;
            waSlicedListAfterTargetComment.forEach(function(oEach,index,array){
                if(oEach.replyLevel<=htCommentInfo.replyLevel){
                    bOnlyHighLevelCommentExist=false;
                    J.$A.Break()
                }
                
            });
            return bOnlyHighLevelCommentExist
        }
        ,_getSlicedListAfterCommentNo:function(waCommentList,sCommentNo){
            var nIndex=this._getCommentIndex(waCommentList,sCommentNo);
            if(nIndex==null){
                return null
            }
            return waCommentList.slice(nIndex+1,waCommentList.length())
        }
        ,findPreSiblingCommentNoOfCreatedComment:function(nParentCommentNo,nReplyLevel){
            var waTargetCommentList=this._waBaseCommentList;
            var sPreSiblingCommentNo=0;
            if(!this._isPossibleToAddBaseCommentList(nParentCommentNo)){
                waTargetCommentList=this._waBottomCommentList;
                if(this._isExistInBaseCommentList(nParentCommentNo)){
                    nParentCommentNo="empty"
                }
                
            }
            var nIndex=this._getCommentIndex(waTargetCommentList,nParentCommentNo);
            if(nIndex==null){
                return 0
            }
            var htParentCommentInfo=this.getCommentInfoFromBaseAndBottom(nParentCommentNo);
            var waSlicedListAfterTargetComment=this._getSlicedListAfterCommentNo(waTargetCommentList,nParentCommentNo);
            var sPreSiblingCommentNo=nParentCommentNo;
            waSlicedListAfterTargetComment.forEach(function(oEach,index,array){
                if(oEach.replyLevel<nReplyLevel){
                    J.$A.Break()
                }
                sPreSiblingCommentNo=oEach.commentNo
            });
            return sPreSiblingCommentNo
        }
        ,isEmptyBottomComment:function(){
            if(this._waBottomCommentList.length()==1){
                return true
            }
            return false
        }
        ,isEmptyBaseComment:function(){
            if(this._waBaseCommentList.length()>0){
                return false
            }
            return true
        }
        ,addComment:function(oComment,nPreSiblingCommentNo){
            if(oComment==null){
                return
            }
            var htCommentInfo=this._generateCommentInfo(oComment);
            if(nPreSiblingCommentNo==null){
                this._waBaseCommentList.push(htCommentInfo);
                return
            }
            if(nPreSiblingCommentNo==0){
                this._waBaseCommentList.unshift(htCommentInfo);
                return
            }
            this._createListWithCommentInserted(htCommentInfo,nPreSiblingCommentNo)
        }
        ,_createListWithCommentInserted:function(htCommentInfo,nPreSiblingCommentNo){
            var waTargetCommentList=this._findTargetCommentList(nPreSiblingCommentNo);
            var nPreSiblingCommentIndex=this._getCommentIndex(waTargetCommentList,nPreSiblingCommentNo)+1;
            var waNewCommentList=J.$A([]);
            waNewCommentList=waTargetCommentList.slice(0,nPreSiblingCommentIndex);
            waNewCommentList.push(htCommentInfo);
            waTargetCommentList.slice(nPreSiblingCommentIndex,waTargetCommentList.length()).forEach(function(oEach,index,array){
                waNewCommentList.push(oEach)
            });
            if(this._isExistInBaseCommentList(nPreSiblingCommentNo)){
                this._waBaseCommentList=waNewCommentList;
                return
            }
            this._waBottomCommentList=waNewCommentList
        }
        ,_isLastBaseCommentNo:function(sCommentNo){
            return this.getBaseLastCommentNo()==sCommentNo
        }
        ,_getBaseLastComment:function(){
            if(this._waBaseCommentList.length()==0){
                return null
            }
            return this._waBaseCommentList.get(this._waBaseCommentList.length()-1)
        }
        ,getBaseLastCommentNo:function(){
            var htLastComment=this._getBaseLastComment();
            if(htLastComment==null){
                return 0
            }
            return htLastComment.commentNo
        }
        ,removeComment:function(sCommentNo){
            if(sCommentNo==null){
                return
            }
            var nIndex=null;
            this._waBaseCommentList=this._getListWithoutTargetComment(this._waBaseCommentList,sCommentNo);
            this._waBottomCommentList=this._getListWithoutTargetComment(this._waBottomCommentList,sCommentNo)
        }
        ,_getListWithoutTargetComment:function(waCommentList,sCommentNo){
            return waCommentList.filter(function(oEach,index,array){
                if(oEach.commentNo==sCommentNo){
                    return false
                }
                return true
            })
        }
        ,reset:function(){
            this._waBaseCommentList=J.$A([]);
            this._waBottomCommentList=J.$A([]);
            var htComment={};
            htComment.commentNo="empty";
            htComment.replyLevel=1;
            htComment.isDeleted=false;
            this._waBottomCommentList.push(htComment)
        }
        ,_getBaseCommentInfo:function(sCommentNo){
            var oComment=null;
            var nIndex=this._getCommentIndex(this._waBaseCommentList,sCommentNo);
            if(nIndex==null){
                return null
            }
            return this._waBaseCommentList.get(nIndex)
        }
        ,_isExistInBaseCommentList:function(sCommentNo){
            if(sCommentNo==null||this._getBaseCommentInfo(sCommentNo)==null){
                return false
            }
            return true
        }
        ,isExistInBottomCommentList:function(sCommentNo){
            if(sCommentNo==null){
                return false
            }
            var bExist=false;
            this._waBottomCommentList.forEach(function(oEach,index,array){
                if(oEach.commentNo==sCommentNo){
                    bExist=true;
                    J.$A.Break()
                }
                
            });
            return bExist
        }
        ,getCommentInfoFromBaseAndBottom:function(sCommentNo){
            var oComment=this._getBaseCommentInfo(sCommentNo);
            if(oComment!=null){
                return oComment
            }
            this._waBottomCommentList.forEach(function(each,index,array){
                if(each.commentNo==sCommentNo){
                    oComment=each;
                    J.$A.Break()
                }
                
            });
            return oComment
        }
        ,canRemoveTargetComment:function(sCommentNo){
            var htComment=this.getCommentInfoFromBaseAndBottom(sCommentNo);
            var htNextComment=this._getNextSiblingCommentInfo(sCommentNo);
            if(htComment==null||!htComment.isDeleted){
                return false
            }
            if(htComment.replyLevel<this.config.option("maxDepth")&&!this.config.instance.pagearea.isLastPage()&&this._isLastBaseCommentNo(sCommentNo)){
                return false
            }
            if(htNextComment!=null&&htNextComment.replyLevel>htComment.replyLevel){
                return false
            }
            return true
        }
        ,getPreSiblingCommentInfo:function(sCommentNo){
            var waTargetCommentList=this._findTargetCommentList(sCommentNo);
            var nIndex=this._getCommentIndex(waTargetCommentList,sCommentNo);
            if(nIndex==null){
                return null
            }
            return waTargetCommentList.get(nIndex-1)
        }
        ,_getNextSiblingCommentInfo:function(sCommentNo){
            var waTargetCommentList=this._findTargetCommentList(sCommentNo);
            var nIndex=this._getCommentIndex(waTargetCommentList,sCommentNo);
            if(nIndex==null){
                return null
            }
            return waTargetCommentList.get(nIndex+1)
        }
        ,getBaseCommentCount:function(){
            return this._waBaseCommentList.length()
        }
        ,findBottomSequentialDeletedCommentCountFromBase:function(){
            var nCount=0;
            for(var nIndex=this._waBaseCommentList.length();
            nIndex>0;
            nIndex--){
                var htCommentInfo=this._waBaseCommentList.get(nIndex-1);
                if(!htCommentInfo.isDeleted){
                    break
                }
                nCount++
            }
            return nCount
        }
        
    }).extend(J.Component);
    nhn.comment.commentListModel=new Comment.CommentListModel()
})();
Adpost=jindo.$Class({
    $init:function(elAdpost,wTemplate,sUrl,sChannel,nCnt,sKeyword,htOption){
        this.option({
            nBuffer:1000
        });
        this.option(htOption||{});
        this._wTemplate=wTemplate;
        this._welAdpost=jindo.$Element(elAdpost);
        this._nAdpostOffset=this._welAdpost.offset().top;
        this._sApiUrl=sUrl+"?deviceType=MOBILE&ch="+sChannel+"&cnt="+nCnt+"&ref="+encodeURIComponent(document.referrer);
        if(sKeyword){
            this._sApiUrl+="&tag="+sKeyword
        }
        this._attachEvent();
        this._onScroll()
    }
    ,_attachEvent:function(){
        if(this.option("nBuffer")>0){
            this._oScrollEnd=new jindo.m.ScrollEnd().attach("scrollEnd",jindo.$Fn(this._onScroll,this).bind())
        }
        
    }
    ,_onScroll:function(){
        var welDoc=jindo.$Document(document);
        if(welDoc.scrollPosition().top+welDoc.clientSize().height>this._nAdpostOffset-this.option("nBuffer")&&welDoc.scrollPosition().top<this._nAdpostOffset+this.option("nBuffer")){
            this._oScrollEnd.destroy();
            this._oScrollEnd=null;
            this.callAdpost()
        }
        
    }
    ,callAdpost:function(){
        var self=this;
        var oAjax=new $Ajax(this._sApiUrl,{
            type:"jsonp",onload:function(res){
                var response=res.json();
                if(response.ads!=null){
                    self._success(response.ads)
                }
                else{
                    if(response.code==100||response.code==200){
                        self._error()
                    }
                    
                }
                
            }
            ,ontimeout:function(){
                this._welAdpost.hide()
            }
            ,onerror:function(){
                this._welAdpost.hide()
            }
            ,timeout:3
        });
        oAjax.request()
    }
    ,_success:function(aAds){
        this._welAdpost.html(this._wTemplate.process({
            adpostList:aAds
        }))
    }
    ,_error:function(){
        this._welAdpost.hide()
    }
    
}).extend(jindo.Component);
if(typeof window.defineNHNJS=="undefined"){
    window.defineNHNJS={}
}
window.defineNHNJS["default"]=true;
